/*! davinci-eight 2016-02-04 */
System.register("davinci-eight/slideshow/SlideCommands.js",["../collections/IUnknownArray","../utils/Shareable"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(){a.call(this,"SlideCommands"),this.commands=new b["default"]}return e(c,a),c.prototype.destructor=function(){this.commands.release(),this.commands=void 0,a.prototype.destructor.call(this)},c.prototype.pushWeakRef=function(a){return this.commands.pushWeakRef(a)},c.prototype.redo=function(a,b){for(var c=0,d=this.commands.length;d>c;c++)this.commands.getWeakRef(c).redo(a,b)},c.prototype.undo=function(a,b){for(var c=this.commands.length-1;c>=0;c--)this.commands.getWeakRef(c).undo(a,b)},c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/slideshow/Slide.js",["../collections/IUnknownArray","../utils/Shareable","../slideshow/SlideCommands","../collections/StringIUnknownMap"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(){a.call(this,"Slide"),this.now=0,this.prolog=new d["default"],this.epilog=new d["default"],this.targets=[],this.mirrors=new e["default"]}return i(b,a),b.prototype.destructor=function(){this.prolog.release(),this.prolog=void 0,this.epilog.release(),this.epilog=void 0,this.targets=void 0,this.mirrors.release(),this.mirrors=void 0,a.prototype.destructor.call(this)},b.prototype.ensureTarget=function(a){this.targets.indexOf(a)<0&&this.targets.push(a)},b.prototype.ensureMirror=function(a){this.mirrors.exists(a.uuid)||this.mirrors.putWeakRef(a.uuid,new h)},b.prototype.pushAnimation=function(a,b,c){this.ensureTarget(a),this.ensureMirror(a);var d=this.mirrors.getWeakRef(a.uuid);d.ensureAnimationLane(b);var e=d.animationLanes.getWeakRef(b);e.push(c)},b.prototype.popAnimation=function(a,b){var c=this.mirrors.getWeakRef(a.uuid),d=c.animationLanes.getWeakRef(b);return d.pop()},b.prototype.advance=function(a){this.now+=a;for(var b=0,c=this.targets.length;c>b;b++)for(var d=this.targets[b],e=0,f=this.mirrors.getWeakRef(d.uuid),g=f.animationLanes.keys,h=0;h<g.length;h++){var i=g[h],j=f.animationLanes.getWeakRef(i);e=j.apply(d,i,this.now,e)}},b.prototype.doProlog=function(a,b){b?this.prolog.redo(this,a):this.prolog.undo(this,a)},b.prototype.doEpilog=function(a,b){b?this.epilog.redo(this,a):this.epilog.undo(this,a)},b.prototype.undo=function(){for(var a=0,b=this.targets.length;b>a;a++)for(var c=this.targets[a],d=this.mirrors.getWeakRef(c.uuid),e=d.animationLanes.keys,f=0;f<e.length;f++){var g=e[f],h=d.animationLanes.getWeakRef(g);h.undo(c,g)}},b}(c["default"]),a("default",f),g=function(a){function c(){a.call(this,"AnimationLane"),this.completed=new b["default"],this.remaining=new b["default"]}return i(c,a),c.prototype.destructor=function(){this.completed.release(),this.completed=void 0,this.remaining.release(),this.remaining=void 0,a.prototype.destructor.call(this)},c.prototype.pop=function(){return this.remaining.length>0?this.remaining.pop():this.completed.pop()},c.prototype.push=function(a){return this.remaining.push(a)},c.prototype.pushWeakRef=function(a){return this.remaining.pushWeakRef(a)},c.prototype.apply=function(a,b,c,d){for(var e=!1;!e;)if(this.remaining.length>0){var f=this.remaining.getWeakRef(0);f.apply(a,b,c,d),f.done(a,b)?(d=f.extra(c),this.completed.push(this.remaining.shift())):e=!0}else e=!0;return d},c.prototype.undo=function(a,b){for(;this.completed.length>0;)this.remaining.unshift(this.completed.pop());for(var c=this.remaining.length-1;c>=0;c--){var d=this.remaining.getWeakRef(c);d.undo(a,b)}},c}(c["default"]),h=function(a){function b(){a.call(this,"Mirror"),this.animationLanes=new e["default"]}return i(b,a),b.prototype.destructor=function(){this.animationLanes.release(),this.animationLanes=void 0,a.prototype.destructor.call(this)},b.prototype.ensureAnimationLane=function(a){this.animationLanes.exists(a)||this.animationLanes.putWeakRef(a,new g)},b}(c["default"])}}}),System.register("davinci-eight/slideshow/Director.js",["../slideshow/Slide","../collections/IUnknownArray","../utils/Shareable"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(){a.call(this,"Director"),this.step=-1,this.slides=new c["default"]([]),this.facets={}}return f(d,a),d.prototype.destructor=function(){this.slides.release(),this.slides=void 0,this.facets=void 0},d.prototype.addFacet=function(a,b){this.facets[b]=a},d.prototype.getFacet=function(a){return this.facets[a]},d.prototype.removeFacet=function(a){var b=this.getFacet(a);return delete this.facets[a],b},d.prototype.createSlide=function(){return new b["default"]},d.prototype.go=function(a,b){if(void 0===b&&(b=!1),0!==this.slides.length)for(;0>a;)a+=this.slides.length+1},d.prototype.forward=function(a,b){if(void 0===a&&(a=!0),void 0===b&&(b=0),this.canForward()){var c=this.slides.getWeakRef(this.step),d=this.slides.getWeakRef(this.step+1),e=this,f=function(){c&&c.doEpilog(e,!0),d&&d.doProlog(e,!0),e.step++};b?setTimeout(f,b):f()}},d.prototype.canForward=function(){return this.step<this.slides.length},d.prototype.backward=function(a,b){if(void 0===a&&(a=!0),void 0===b&&(b=0),this.canBackward()){var c=this.slides.getWeakRef(this.step),d=this.slides.getWeakRef(this.step-1),e=this,f=function(){c&&(c.undo(e),c.doProlog(e,!1)),d&&d.doEpilog(e,!1),e.step--};b?setTimeout(f,b):f()}},d.prototype.canBackward=function(){return this.step>-1},d.prototype.pushSlide=function(a){return this.slides.push(a)},d.prototype.popSlide=function(){return this.slides.pop()},d.prototype.advance=function(a){var b=this.step;if(b>=0&&b<this.slides.length){var c=this.slides.get(b);if(c)try{c.advance(a)}finally{c.release()}else console.warn("No slide found at index "+this.step)}},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/slideshow/DirectorKeyboardHandler.js",["../utils/Shareable"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(b){a.call(this,"DirectorKeyboardHandler"),this.director=b,this.director.addRef()}return d(b,a),b.prototype.destructor=function(){this.director.release(),this.director=void 0,a.prototype.destructor.call(this)},b.prototype.keyDown=function(){},b.prototype.keyUp=function(a){switch(a.keyCode){case 37:this.director.backward();break;case 39:this.director.forward()}},b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/slideshow/animations/WaitAnimation.js",["../../utils/Shareable"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(b){a.call(this,"WaitAnimation"),this.duration=b,this.fraction=0}return d(b,a),b.prototype.destructor=function(){a.prototype.destructor.call(this)},b.prototype.apply=function(a,b,c,d){this.start||(this.start=c-d),this.fraction=this.duration>0?Math.min(1,(c-this.start)/this.duration):1},b.prototype.skip=function(){this.duration=0},b.prototype.hurry=function(a){this.duration=this.duration*this.fraction+this.duration*(1-this.fraction)/a},b.prototype.extra=function(a){return a-this.start-this.duration},b.prototype.done=function(){return 1===this.fraction},b.prototype.undo=function(){this.start=void 0,this.fraction=0},b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/slideshow/animations/ColorAnimation.js",["../../utils/Shareable","../../core/Color"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function b(b,d,e,f){void 0===d&&(d=300),a.call(this,"ColorAnimation"),this.from=void 0,this.to=c["default"].fromColor(b),this.duration=d,this.start=0,this.fraction=0,this.callback=e,this.ease=f}return e(b,a),b.prototype.destructor=function(){a.prototype.destructor.call(this)},b.prototype.apply=function(a,b,d,e){if(!this.start&&(this.start=d-e,void 0===this.from)){var f=a.getProperty(b);f&&(this.from=c["default"].fromCoords(f))}var g,h=this.from,i=this.to,j=this.ease;g=this.duration>0?Math.min(1,(d-this.start)/(this.duration||1)):1,this.fraction=g;var k;switch(j){case"in":k=1-(1-g)*(1-g);break;case"out":k=g*g;break;case"linear":k=g;break;default:k=.5-.5*Math.cos(g*Math.PI)}a.setProperty(b,c["default"].interpolate(h,i,k).coords)},b.prototype.hurry=function(a){this.duration=this.duration*this.fraction+this.duration*(1-this.fraction)/a},b.prototype.skip=function(a,b){this.duration=0,this.fraction=1,this.done(a,b)},b.prototype.extra=function(a){return a-this.start-this.duration},b.prototype.done=function(a,b){return 1===this.fraction?(a.setProperty(b,this.to.coords),this.callback&&this.callback(),this.callback=void 0,!0):!1},b.prototype.undo=function(a,b){this.from&&(a.setProperty(b,this.from.coords),this.from=void 0,this.start=void 0,this.fraction=0)},b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/slideshow/animations/Vector2Animation.js",["../../utils/Shareable","../../math/R2"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function b(b,d,e,f){void 0===d&&(d=300),a.call(this,"Vector2Animation"),this.to=c["default"].copy(b),this.duration=d,this.fraction=0,this.callback=e,this.ease=f}return e(b,a),b.prototype.destructor=function(){a.prototype.destructor.call(this)},b.prototype.apply=function(a,b,d,e){if(!this.start&&(this.start=d-e,void 0===this.from)){var f=a.getProperty(b);f&&(this.from=new c["default"](f))}var g,h=this.ease;g=this.duration>0?Math.min(1,(d-this.start)/(this.duration||1)):1,this.fraction=g;var i;switch(h){case"in":i=1-(1-g)*(1-g);break;case"out":i=g*g;break;case"linear":i=g;break;default:i=.5-.5*Math.cos(g*Math.PI)}var j=c["default"].lerp(this.from,this.to,i);a.setProperty(b,j.coords)},b.prototype.hurry=function(a){this.duration=this.duration*this.fraction+this.duration*(1-this.fraction)/a},b.prototype.skip=function(a,b){this.duration=0,this.fraction=1,this.done(a,b)},b.prototype.extra=function(a){return a-this.start-this.duration},b.prototype.done=function(a,b){return 1===this.fraction?(a.setProperty(b,this.to.coords),this.callback&&this.callback(),this.callback=void 0,!0):!1},b.prototype.undo=function(a,b){this.from&&(a.setProperty(b,this.from.coords),this.from=void 0,this.start=void 0,this.fraction=0)},b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/slideshow/animations/Vector3Animation.js",["../../utils/Shareable","../../math/R3"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function b(b,d,e,f){void 0===d&&(d=300),a.call(this,"Vector3Animation"),this.to=c["default"].copy(b),this.duration=d,this.fraction=0,this.callback=e,this.ease=f}return e(b,a),b.prototype.destructor=function(){a.prototype.destructor.call(this)},b.prototype.apply=function(a,b,d,e){if(!this.start&&(this.start=d-e,void 0===this.from)){var f=a.getProperty(b);f&&(this.from=(new c["default"]).copyCoordinates(f))}var g,h=this.ease;g=this.duration>0?Math.min(1,(d-this.start)/(this.duration||1)):1,this.fraction=g;var i;switch(h){case"in":i=1-(1-g)*(1-g);break;case"out":i=g*g;break;case"linear":i=g;break;default:i=.5-.5*Math.cos(g*Math.PI)}var j=c["default"].lerp(this.from,this.to,i);a.setProperty(b,j.coords)},b.prototype.hurry=function(a){this.duration=this.duration*this.fraction+this.duration*(1-this.fraction)/a},b.prototype.skip=function(a,b){this.duration=0,this.fraction=1,this.done(a,b)},b.prototype.extra=function(a){return a-this.start-this.duration},b.prototype.done=function(a,b){return 1===this.fraction?(a.setProperty(b,this.to.coords),this.callback&&this.callback(),this.callback=void 0,!0):!1},b.prototype.undo=function(a,b){this.from&&(a.setProperty(b,this.from.coords),this.from=void 0,this.start=void 0,this.fraction=0)},b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/slideshow/animations/Spinor2Animation.js",["../../utils/Shareable","../../math/SpinG2"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function b(b,d,e,f){void 0===d&&(d=300),a.call(this,"Spinor2Animation"),this.from=void 0,this.to=c["default"].copy(b),this.duration=d,this.start=0,this.fraction=0,this.callback=e,this.ease=f}return e(b,a),b.prototype.destructor=function(){},b.prototype.apply=function(a,b,d,e){if(!this.start&&(this.start=d-e,void 0===this.from)){var f=a.getProperty(b);f&&(this.from=new c["default"],this.from.coords=f)}var g,h=this.from,i=this.to,j=this.ease;g=this.duration>0?Math.min(1,(d-this.start)/(this.duration||1)):1,this.fraction=g;var k;switch(j){case"in":k=1-(1-g)*(1-g);break;case"out":k=g*g;break;case"linear":k=g;break;default:k=.5-.5*Math.cos(g*Math.PI)}var l=c["default"].lerp(h,i,g);a.setProperty(b,l.coords)},b.prototype.hurry=function(a){this.duration=this.duration*this.fraction+this.duration*(1-this.fraction)/a},b.prototype.skip=function(a,b){this.duration=0,this.fraction=1,this.done(a,b)},b.prototype.extra=function(a){return a-this.start-this.duration},b.prototype.done=function(a,b){return 1===this.fraction?(a.setProperty(b,this.to.coords),this.callback&&this.callback(),this.callback=void 0,!0):!1},b.prototype.undo=function(a,b){this.from&&(a.setProperty(b,this.from.coords),this.from=void 0,this.start=void 0,this.fraction=0)},b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/slideshow/animations/Spinor3Animation.js",["../../utils/Shareable","../../math/SpinG3"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function b(b,d,e,f){void 0===d&&(d=300),a.call(this,"Spinor3Animation"),this.from=void 0,this.to=c["default"].copy(b),this.duration=d,this.start=0,this.fraction=0,this.callback=e,this.ease=f}return e(b,a),b.prototype.destructor=function(){},b.prototype.apply=function(a,b,d,e){if(!this.start&&(this.start=d-e,void 0===this.from)){var f=a.getProperty(b);f&&(this.from=new c["default"],this.from.coords=f)}var g,h=this.from,i=this.to,j=this.ease;g=this.duration>0?Math.min(1,(d-this.start)/(this.duration||1)):1,this.fraction=g;var k;switch(j){case"in":k=1-(1-g)*(1-g);break;case"out":k=g*g;break;case"linear":k=g;break;default:k=.5-.5*Math.cos(g*Math.PI)}var l=c["default"].lerp(h,i,g);a.setProperty(b,l.coords)},b.prototype.hurry=function(a){this.duration=this.duration*this.fraction+this.duration*(1-this.fraction)/a},b.prototype.skip=function(a,b){this.duration=0,this.fraction=1,this.done(a,b)},b.prototype.extra=function(a){return a-this.start-this.duration},b.prototype.done=function(a,b){return 1===this.fraction?(a.setProperty(b,this.to.coords),this.callback&&this.callback(),this.callback=void 0,!0):!1},b.prototype.undo=function(a,b){this.from&&(a.setProperty(b,this.from.coords),this.from=void 0,this.start=void 0,this.fraction=0)},b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/cameras/createFrustum.js",["davinci-eight/cameras/createView","davinci-eight/math/Mat4R","../math/R1"],function(a){function b(a,b){function f(){o.frustum(i.x,j.x,k.x,l.x,m.x,n.x)}var g=1,h=c["default"](a),i=new e["default"],j=new e["default"],k=new e["default"],l=new e["default"],m=new e["default"],n=new e["default"],o=d["default"].one();f();var p={addRef:function(){return g++,g},release:function(){return g--,g},get uuid(){return""},getProperty:function(){return void 0},setProperty:function(){return this},get eye(){return h.eye},set eye(a){h.eye=a},setEye:function(a){return h.setEye(a),p},get look(){return h.look},set look(a){h.look=a},setLook:function(a){return h.setLook(a),p},get up(){return h.up},set up(a){h.setUp(a)},setUp:function(a){return h.setUp(a),p},get left(){return i.x},set left(a){i.x=a,f()},get right(){return j.x},set right(a){j.x=a,f()},get bottom(){return k.x},set bottom(a){k.x=a,f()},get top(){return l.x},set top(a){l.x=a,f()},get near(){return m.x},set near(a){m.x=a,f()},get far(){return n.x},set far(a){n.x=a,f()},setUniforms:function(a,c){a.mat4(b,o,!1,c),h.setUniforms(a,c)}};return p}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/cameras/createView.js",["../math/Euclidean3","../math/R3","../math/Mat4R","../checks/mustBeNumber","../checks/mustBeObject","../core/GraphicsProgramSymbols","../checks/isUndefined","../cameras/viewMatrix"],function(a){function b(a){var b=1,k=new d["default"],l=new d["default"],m=d["default"].copy(c["default"].e2),n=e["default"].one(),o=i["default"](a.viewMatrixName)?h["default"].UNIFORM_VIEW_MATRIX:a.viewMatrixName;k.modified=!0,l.modified=!0,m.modified=!0;var p={addRef:function(){return b++,b},release:function(){return b--,b},get uuid(){return""},getProperty:function(){return void 0},setProperty:function(){return p},get eye(){return k},set eye(a){p.setEye(a)},setEye:function(a){return g["default"]("eye",a),k.x=f["default"]("eye.x",a.x),k.y=f["default"]("eye.y",a.y),k.z=f["default"]("eye.z",a.z),p},get look(){return l},set look(a){p.setLook(a)},setLook:function(a){return g["default"]("look",a),l.x=a.x,l.y=a.y,l.z=a.z,p},get up(){return m},set up(a){p.setUp(a)},setUp:function(a){return g["default"]("up",a),m.x=a.x,m.y=a.y,m.z=a.z,m.direction(),p},setUniforms:function(a,b){(k.modified||l.modified||m.modified)&&(j["default"](k,l,m,n),k.modified=!1,l.modified=!1,m.modified=!1),a.mat4(o,n,!1,b)}};return p}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){}}}),System.register("davinci-eight/cameras/createPerspective.js",["../cameras/createView","../math/Mat4R","../core/GraphicsProgramSymbols","../math/R1","../checks/isUndefined","../checks/mustBeNumber","../cameras/perspectiveMatrix"],function(a){function b(a){a=a||{};var b=new f["default"]([g["default"](a.fov)?75*Math.PI/180:a.fov]),j=new f["default"]([g["default"](a.aspect)?1:a.aspect]),k=new f["default"]([g["default"](a.near)?.1:a.near]),l=new f["default"]([h["default"]("options.far",g["default"](a.far)?2e3:a.far)]),m=g["default"](a.projectionMatrixName)?e["default"].UNIFORM_PROJECTION_MATRIX:a.projectionMatrixName,n=1,o=c["default"](a),p=d["default"].one(),q=!0,r={addRef:function(){return n++,n},release:function(){return n--,n},get uuid(){return""},getProperty:function(){return void 0},setProperty:function(){return r},get eye(){return o.eye},set eye(a){o.eye=a},setEye:function(a){return o.setEye(a),r},get look(){return o.look},set look(a){o.look=a},setLook:function(a){return o.setLook(a),r},get up(){return o.up},set up(a){o.up=a},setUp:function(a){return o.setUp(a),r},get fov(){return b.x},set fov(a){r.setFov(a)},setFov:function(a){return h["default"]("fov",a),q=q||b.x!==a,b.x=a,r},get aspect(){return j.x},set aspect(a){r.setAspect(a)},setAspect:function(a){return h["default"]("aspect",a),q=q||j.x!==a,j.x=a,r},get near(){return k.x},set near(a){r.setNear(a)},setNear:function(a){return a!==k.x&&(k.x=a,q=!0),r},get far(){return l.x},set far(a){r.setFar(a)},setFar:function(a){return a!==l.x&&(l.x=a,q=!0),r},setUniforms:function(a,c){q&&(i["default"](b.x,j.x,k.x,l.x,p),q=!1),a.mat4(m,p,!1,c),o.setUniforms(a,c)}};return r}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){}}}),System.register("davinci-eight/cameras/PerspectiveCamera.js",["../cameras/createPerspective","../i18n/readOnly","../checks/mustBeObject","../checks/mustBeNumber","../checks/mustBeString","../utils/Shareable"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function g(c,d,f,g){void 0===c&&(c=45*Math.PI/180),void 0===d&&(d=1),void 0===f&&(f=.1),void 0===g&&(g=2e3),a.call(this,"PerspectiveCamera"),e["default"]("fov",c),e["default"]("aspect",d),e["default"]("near",f),e["default"]("far",g),this.inner=b["default"]({fov:c,aspect:d,near:f,far:g})}return i(g,a),g.prototype.destructor=function(){},g.prototype.setUniforms=function(a,b){this.inner.setNear(this.near),this.inner.setFar(this.far),this.inner.setUniforms(a,b)},g.prototype.contextFree=function(){},g.prototype.contextGain=function(){},g.prototype.contextLost=function(){},g.prototype.draw=function(){},g.prototype.getProperty=function(a){switch(f["default"]("name",a),a){case g.PROP_EYE:case g.PROP_POSITION:return this.eye.coords}},g.prototype.setProperty=function(a,b){switch(f["default"]("name",a),d["default"]("value",b),a){case g.PROP_EYE:case g.PROP_POSITION:this.eye.copyCoordinates(b)}return this},Object.defineProperty(g.prototype,"aspect",{get:function(){return this.inner.aspect},enumerable:!0,configurable:!0}),g.prototype.setAspect=function(a){return this.inner.aspect=a,this},Object.defineProperty(g.prototype,"eye",{get:function(){return this.inner.eye},set:function(a){this.inner.eye.copy(a)},enumerable:!0,configurable:!0}),g.prototype.setEye=function(a){return this.inner.setEye(a),this},Object.defineProperty(g.prototype,"fov",{get:function(){return this.inner.fov},set:function(){throw new Error(c["default"]("fov").message)},enumerable:!0,configurable:!0}),g.prototype.setFov=function(a){return e["default"]("fov",a),this.inner.fov=a,this},Object.defineProperty(g.prototype,"look",{get:function(){return this.inner.look},enumerable:!0,configurable:!0}),g.prototype.setLook=function(a){return this.inner.setLook(a),this},Object.defineProperty(g.prototype,"near",{get:function(){return this.inner.near},set:function(){throw new Error(c["default"]("near").message)},enumerable:!0,configurable:!0}),g.prototype.setNear=function(a){return this.inner.setNear(a),this},Object.defineProperty(g.prototype,"far",{get:function(){return this.inner.far},set:function(a){this.inner.far=a},enumerable:!0,configurable:!0}),g.prototype.setFar=function(a){return this.inner.setFar(a),this},Object.defineProperty(g.prototype,"up",{get:function(){return this.inner.up},set:function(){throw new Error(c["default"]("up").message)},enumerable:!0,configurable:!0}),g.prototype.setUp=function(a){return this.inner.setUp(a),this},g.PROP_POSITION="X",g.PROP_EYE="eye",g}(g["default"]),a("default",h)}}}),System.register("davinci-eight/cameras/frustumMatrix.js",["../checks/expectArg","../checks/isDefined"],function(a){function b(a,b,e,f,g,h,i){c["default"]("left",a).toBeNumber(),c["default"]("right",b).toBeNumber(),c["default"]("bottom",e).toBeNumber(),c["default"]("top",f).toBeNumber(),c["default"]("near",g).toBeNumber(),c["default"]("far",h).toBeNumber();var j=d["default"](i)?i:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);c["default"]("m",j).toSatisfy(16===j.length,"elements must have length 16");var k=2*g/(b-a),l=2*g/(f-e),m=(b+a)/(b-a),n=(f+e)/(f-e),o=-(h+g)/(h-g),p=-2*h*g/(h-g);return j[0]=k,j[4]=0,j[8]=m,j[12]=0,j[1]=0,j[5]=l,j[9]=n,j[13]=0,j[2]=0,j[6]=0,j[10]=o,j[14]=p,j[3]=0,j[7]=0,j[11]=-1,j[15]=0,j}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/cameras/perspectiveArray.js",["../cameras/frustumMatrix","../checks/expectArg"],function(a){function b(a,b,e,f,g){d["default"]("fov",a).toBeNumber(),d["default"]("aspect",b).toBeNumber(),d["default"]("near",e).toBeNumber(),d["default"]("far",f).toBeNumber();var h=e*Math.tan(.5*a),i=-h,j=i*b,k=h*b;return c["default"](j,k,i,h,e,f,g)}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/cameras/perspectiveMatrix.js",["../checks/isDefined","../math/Mat4R","../cameras/perspectiveArray"],function(a){function b(a,b,f,g,h){var i=c["default"](h)?h:d["default"].one();return e["default"](a,b,f,g,i.elements),i}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/cameras/viewArray.js",["../math/R3","../checks/expectArg","../checks/isDefined"],function(a){function b(a,b,f,g){var h=e["default"](g)?g:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);d["default"]("matrix",h).toSatisfy(16===h.length,"matrix must have length 16");var i=(new c["default"]).sub2(a,b);0===i.x&&0===i.y&&0===i.z?i.z=1:i.direction();var j=(new c["default"]).cross2(f,i),k=(new c["default"]).cross2(i,j),l=new c["default"]([c["default"].dot(a,j),c["default"].dot(a,k),c["default"].dot(a,i)]).scale(-1);return h[0]=j.x,h[4]=j.y,h[8]=j.z,h[12]=l.x,h[1]=k.x,h[5]=k.y,h[9]=k.z,h[13]=l.y,h[2]=i.x,h[6]=i.y,h[10]=i.z,h[14]=l.z,h[3]=0,h[7]=0,h[11]=0,h[15]=1,h}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/cameras/viewMatrix.js",["../checks/isDefined","../math/Mat4R","../cameras/viewArray"],function(a){function b(a,b,f,g){var h=c["default"](g)?g:d["default"].one();return e["default"](a,b,f,h.elements),h}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/commands/BlendFactor.js",[],function(a){var b;return{setters:[],execute:function(){!function(a){a[a.DST_ALPHA=0]="DST_ALPHA",a[a.DST_COLOR=1]="DST_COLOR",a[a.ONE=2]="ONE",a[a.ONE_MINUS_DST_ALPHA=3]="ONE_MINUS_DST_ALPHA",a[a.ONE_MINUS_DST_COLOR=4]="ONE_MINUS_DST_COLOR",a[a.ONE_MINUS_SRC_ALPHA=5]="ONE_MINUS_SRC_ALPHA",a[a.ONE_MINUS_SRC_COLOR=6]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=7]="SRC_ALPHA",a[a.SRC_ALPHA_SATURATE=8]="SRC_ALPHA_SATURATE",a[a.SRC_COLOR=9]="SRC_COLOR",a[a.ZERO=10]="ZERO"}(b||(b={})),a("default",b)}}}),System.register("davinci-eight/commands/WebGLBlendFunc.js",["../commands/BlendFactor","../utils/Shareable"],function(a){function b(a,b){if(f.indexOf(b)>=0)return b;throw new Error(b+" is not a valid factor.")}function c(a,b){switch(a){case d["default"].ONE:return b.ONE;case d["default"].SRC_ALPHA:return b.SRC_ALPHA;default:throw new Error(a+" is not a valid factor.")}}var d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){d=a},function(a){e=a}],execute:function(){f=[d["default"].DST_ALPHA,d["default"].DST_COLOR,d["default"].ONE,d["default"].ONE_MINUS_DST_ALPHA,d["default"].ONE_MINUS_DST_COLOR,d["default"].ONE_MINUS_SRC_ALPHA,d["default"].ONE_MINUS_SRC_COLOR,d["default"].SRC_ALPHA,d["default"].SRC_ALPHA_SATURATE,d["default"].SRC_COLOR,d["default"].ZERO],g=function(a){function d(c,d){a.call(this,"WebGLBlendFunc"),this.sfactor=b("sfactor",c),this.dfactor=b("dfactor",d)}return h(d,a),d.prototype.contextFree=function(){},d.prototype.contextGain=function(a){this.execute(a.gl)},d.prototype.contextLost=function(){},d.prototype.execute=function(a){a.blendFunc(c(this.sfactor,a),c(this.dfactor,a))},d.prototype.destructor=function(){this.sfactor=void 0,this.dfactor=void 0,a.prototype.destructor.call(this)},d}(e["default"]),a("default",g)}}}),System.register("davinci-eight/curves/Curve.js",[],function(a){var b;return{setters:[],execute:function(){b=function(){function a(){}return a.prototype.getPoint=function(){throw new Error("Curve.getPoint() not implemented!")},a.prototype.getPointAt=function(a){var b=this.getUtoTmapping(a);return this.getPoint(b)},a.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPoint(b/a));return c},a.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPointAt(b/a));return c},a.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]},a.prototype.getLengths=function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b,c,d=[],e=this.getPoint(0),f=0;for(d.push(0),c=1;a>=c;c++)b=this.getPoint(c/a),f+=b.distanceTo(e),d.push(f),e=b;return this.cacheArcLengths=d,d},a.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},a.prototype.getUtoTmapping=function(a,b){var c,d=this.getLengths(),e=0,f=d.length;c=b?b:a*d[f-1];for(var g,h=0,i=f-1;i>=h;)if(e=Math.floor(h+(i-h)/2),g=d[e]-c,0>g)h=e+1;else{if(!(g>0)){i=e;break}i=e-1}if(e=i,d[e]==c){var j=e/(f-1);return j}var k=d[e],l=d[e+1],m=l-k,n=(c-k)/m,j=(e+n)/(f-1);return j},a.prototype.getTangent=function(a){var b=1e-4,c=a-b,d=a+b;0>c&&(c=0),d>1&&(d=1);var e=this.getPoint(c),f=this.getPoint(d),g=f.sub(e);return g.direction()},a.prototype.getTangentAt=function(a){var b=this.getUtoTmapping(a);return this.getTangent(b)},a}(),a("default",b)}}}),System.register("davinci-eight/devices/Keyboard.js",["../utils/Shareable"],function(a){function b(a,b){return function(c){a.currentlyPressedKeys[c.keyCode]=!0,b.keyDown(c)}}function c(a,b){return function(c){a.currentlyPressedKeys[c.keyCode]=!1,b.keyUp(c)}}var d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){d=a}],execute:function(){e=function(a){function d(b,c){void 0===c&&(c=window.document),a.call(this,"Keyboard"),this.currentlyPressedKeys=[],this.attach(b,c)}return f(d,a),d.prototype.destructor=function(){this.detach(),a.prototype.destructor.call(this)},d.prototype.attach=function(a,d,e){void 0===d&&(d=window.document),this.document!==d&&(this.detach(),this.handler=a,this.handler.addRef(),this.document=d,this.useCapture=e,this.keyDownHandler=b(this,a),this.keyUpHandler=c(this,a),this.document.addEventListener("keydown",this.keyDownHandler,e),this.document.addEventListener("keyup",this.keyUpHandler,e))},d.prototype.detach=function(){this.document&&(this.document.removeEventListener("keydown",this.keyDownHandler,this.useCapture),
this.document.removeEventListener("keyup",this.keyUpHandler,this.useCapture),this.handler.release(),this.handler=void 0,this.document=void 0,this.useCapture=void 0,this.keyDownHandler=void 0,this.keyUpHandler=void 0)},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/geometries/cube.js",["../geometries/quadrilateral","../core/GraphicsProgramSymbols","../math/R2","../math/R3"],function(a){function b(a){void 0===a&&(a=1);var b=a/2,g=new f["default"]([+b,+b,+b]),h=new f["default"]([-b,+b,+b]),i=new f["default"]([-b,-b,+b]),j=new f["default"]([+b,-b,+b]),k=new f["default"]([+b,-b,-b]),l=new f["default"]([+b,+b,-b]),m=new f["default"]([-b,+b,-b]),n=new f["default"]([-b,-b,-b]),o=new e["default"]([0,0]),p=new e["default"]([0,1]),q=new e["default"]([1,0]),r=new e["default"]([1,1]),s={};s[d["default"].ATTRIBUTE_TEXTURE_COORDS]=[r,p,o,q];var t=c["default"](g,h,i,j,s),u=c["default"](g,j,k,l,s),v=c["default"](g,l,m,h,s),w=c["default"](h,m,n,i,s),x=c["default"](n,k,j,i,s),y=c["default"](k,n,m,l,s),z=[t,u,v,w,x,y];return z.reduce(function(a,b){return a.concat(b)},[])}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/geometries/square.js",["../geometries/quadrilateral","../core/GraphicsProgramSymbols","../math/R2","../math/R3"],function(a){function b(a){void 0===a&&(a=1);var b=a/2,g=new f["default"]([+b,+b,0]),h=new f["default"]([-b,+b,0]),i=new f["default"]([-b,-b,0]),j=new f["default"]([+b,-b,0]),k=new e["default"]([0,0]),l=new e["default"]([0,1]),m=new e["default"]([1,0]),n=new e["default"]([1,1]),o=[n,l,k,m],p={};return p[d["default"].ATTRIBUTE_TEXTURE_COORDS]=o,c["default"](g,h,i,j,p)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/geometries/tetrahedron.js",["../checks/expectArg","../geometries/triangle","../math/VectorN"],function(a){function b(a,b,f,g,h,i){void 0===h&&(h={}),void 0===i&&(i=[]),c["default"]("a",a).toSatisfy(a instanceof e["default"],"a must be a VectorN"),c["default"]("b",b).toSatisfy(b instanceof e["default"],"b must be a VectorN"),c["default"]("c",f).toSatisfy(f instanceof e["default"],"c must be a VectorN"),c["default"]("d",g).toSatisfy(g instanceof e["default"],"d must be a VectorN");var j={},k=[a,b,f,g],l=[];return d["default"](k[0],k[1],k[2],j,i),l.push(i[i.length-1]),d["default"](k[1],k[3],k[2],j,i),l.push(i[i.length-1]),d["default"](k[2],k[3],k[0],j,i),l.push(i[i.length-1]),d["default"](k[3],k[1],k[0],j,i),l.push(i[i.length-1]),i}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/topologies/PointTopology.js",["../core/DrawMode","../topologies/Topology"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(c){a.call(this,b["default"].POINTS,c)}return e(c,a),c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/topologies/LineTopology.js",["../topologies/Topology"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(b,c){a.call(this,b,c)}return d(b,a),b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/scene/Scene.js",["../core","../collections/IUnknownArray","../scene/MonitorList","../checks/mustBeArray","../checks/mustBeFunction","../checks/mustBeNumber","../checks/mustBeObject","../checks/mustBeString","../collections/NumberIUnknownMap","../utils/Shareable"],function(a){function b(){return m+" constructor"}var c,d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m="Scene",n=function(a){function l(c){void 0===c&&(c=[]),a.call(this,m),this._canvasIdToManager=new k["default"],f["default"]("monitors",c),e["default"].verify("monitors",c,b),this.monitors=new e["default"](c),this.monitors.addContextListener(this),this.monitors.synchronize(this),this._drawables=new d["default"]}return o(l,a),l.prototype.destructor=function(){this.monitors.removeContextListener(this),this.monitors.release(),this._canvasIdToManager.release(),this._drawables.release(),a.prototype.destructor.call(this)},l.prototype.attachTo=function(a){this.monitors.add(a),a.addContextListener(this)},l.prototype.detachFrom=function(a){a.removeContextListener(this),this.monitors.remove(a)},l.prototype.add=function(a){i["default"]("drawable",a),this._canvasIdToManager.forEach(function(b,c){a.contextGain(c)}),this._drawables.push(a)},l.prototype.containsDrawable=function(a){return i["default"]("drawable",a),this._drawables.indexOf(a)>=0},l.prototype.draw=function(a,b){for(var c=0;c<this._drawables.length;c++){var d=this._drawables.getWeakRef(c),e=d.graphicsProgram;if(e.use(b),a)for(var f=a.length,g=0;f>g;g++){var h=a[g];h.setUniforms(e,b)}d.setUniforms(b);var i=d.graphicsBuffers;i.draw(e,b),i.release(),e.release()}},l.prototype.findOne=function(a){g["default"]("match",a);for(var b=this._drawables,c=0,d=b.length;d>c;c++){var e=b.get(c);if(a(e))return e;e.release()}return void 0},l.prototype.getDrawableByName=function(a){return c["default"].fastPath||j["default"]("name",a),this.findOne(function(b){return b.name===a})},l.prototype.getDrawablesByName=function(a){j["default"]("name",a);var b=new d["default"];return b},l.prototype.remove=function(a){throw i["default"]("drawable",a),new Error("TODO")},l.prototype.contextFree=function(a){for(var b=0;b<this._drawables.length;b++){var c=this._drawables.getWeakRef(b);c.contextFree(a)}this._canvasIdToManager.remove(a.canvasId)},l.prototype.contextGain=function(a){this._canvasIdToManager.exists(a.canvasId)||this._canvasIdToManager.put(a.canvasId,a);for(var b=0;b<this._drawables.length;b++){var c=this._drawables.getWeakRef(b);c.contextGain(a)}},l.prototype.contextLost=function(a){h["default"]("canvasId",a),this._canvasIdToManager.exists(a)&&this._canvasIdToManager.remove(a);for(var b=0;b<this._drawables.length;b++){var c=this._drawables.getWeakRef(b);c.contextLost(a)}},l}(l["default"]),a("default",n)}}}),System.register("davinci-eight/core/BufferResource.js",["../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeObject","../utils/Shareable"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f="BufferResource",g=function(a){function e(b,e){a.call(this,f),this.manager=d["default"]("manager",b),this._isElements=c["default"]("isElements",e),b.addContextListener(this),b.synchronize(this)}return h(e,a),e.prototype.destructor=function(){this.contextFree(this.manager),this.manager.removeContextListener(this),this.manager=void 0,this._isElements=void 0,a.prototype.destructor.call(this)},e.prototype.contextFree=function(){if(this._buffer){var a=this.manager.gl;b["default"](a)?a.deleteBuffer(this._buffer):console.error(f+" must leak WebGLBuffer because WebGLRenderingContext is "+typeof a),this._buffer=void 0}},e.prototype.contextGain=function(a){this.manager.canvasId===a.canvasId?this._buffer||(this._buffer=a.gl.createBuffer()):console.warn("BufferResource ignoring contextGain for canvasId "+a.canvasId)},e.prototype.contextLost=function(){this._buffer=void 0},e.prototype.bind=function(){var a=this.manager.gl;if(a){var b=this._isElements?a.ELEMENT_ARRAY_BUFFER:a.ARRAY_BUFFER;a.bindBuffer(b,this._buffer)}else console.warn(f+" bind() missing WebGL rendering context.")},e.prototype.unbind=function(){var a=this.manager.gl;if(a){var b=this._isElements?a.ELEMENT_ARRAY_BUFFER:a.ARRAY_BUFFER;a.bindBuffer(b,null)}else console.warn(f+" unbind() missing WebGL rendering context.")},e}(e["default"]),a("default",g)}}}),System.register("davinci-eight/utils/randumbInteger.js",[],function(a){function b(){var a=Math.random(),b=1e6*a,c=Math.round(b);return c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/resources/TextureResource.js",["../checks/expectArg","../utils/refChange","../utils/uuid4"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e="ITexture",f=new Array,g=[],h=function(){function a(a,f){this._refCount=1,this._uuid=d["default"]().generate();var g=a[0];this._monitor=b["default"]("montor",g).toBeObject().value,this._target=f,c["default"](this._uuid,e,1),g.addContextListener(this),g.synchronize(this)}return a.prototype.addRef=function(){return this._refCount++,c["default"](this._uuid,e,1),this._refCount},a.prototype.release=function(){return this._refCount--,c["default"](this._uuid,e,-1),0===this._refCount&&(this._monitor.removeContextListener(this),this.contextFree()),this._refCount},a.prototype.contextFree=function(){this._texture&&(this._gl.deleteTexture(this._texture),this._texture=void 0),this._gl=void 0},a.prototype.contextGain=function(a){var b=a.gl;this._gl!==b&&(this.contextFree(),this._gl=b,this._texture=b.createTexture())},a.prototype.contextLost=function(){this._texture=void 0,this._gl=void 0},a.prototype.bind=function(){this._gl?this._gl.bindTexture(this._target,this._texture):console.warn(e+" bind() missing WebGL rendering context.")},a.prototype.unbind=function(){this._gl?this._gl.bindTexture(this._target,null):console.warn(e+" unbind() missing WebGL rendering context.")},a}(),a("default",h)}}}),System.register("davinci-eight/commands/WebGLClearColor.js",["../checks/mustBeNumber","../utils/Shareable"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(c,d,e,f){void 0===c&&(c=0),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=1),a.call(this,"WebGLClearColor"),this.red=b["default"]("red",c),this.green=b["default"]("green",d),this.blue=b["default"]("blue",e),this.alpha=b["default"]("alpha",f)}return e(c,a),c.prototype.destructor=function(){this.red=void 0,this.green=void 0,this.blue=void 0,this.alpha=void 0,a.prototype.destructor.call(this)},c.prototype.contextFree=function(){},c.prototype.contextGain=function(a){b["default"]("red",this.red),b["default"]("green",this.green),b["default"]("blue",this.blue),b["default"]("alpha",this.alpha),a.gl.clearColor(this.red,this.green,this.blue,this.alpha)},c.prototype.contextLost=function(){},c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/commands/WebGLEnable.js",["../commands/glCapability","../checks/mustBeNumber","../utils/Shareable"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(b){a.call(this,"WebGLEnable"),this._capability=c["default"]("capability",b)}return f(d,a),d.prototype.contextFree=function(){},d.prototype.contextGain=function(a){a.gl.enable(b["default"](this._capability,a.gl))},d.prototype.contextLost=function(){},d.prototype.destructor=function(){this._capability=void 0,a.prototype.destructor.call(this)},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/commands/Capability.js",[],function(a){var b;return{setters:[],execute:function(){!function(a){a[a.BLEND=0]="BLEND",a[a.CULL_FACE=1]="CULL_FACE",a[a.DEPTH_TEST=2]="DEPTH_TEST",a[a.POLYGON_OFFSET_FILL=3]="POLYGON_OFFSET_FILL",a[a.SCISSOR_TEST=4]="SCISSOR_TEST"}(b||(b={})),a("default",b)}}}),System.register("davinci-eight/commands/glCapability.js",["../commands/Capability","../checks/isDefined","../checks/mustBeDefined","../checks/mustBeInteger"],function(a){function b(a,b){if(!d["default"](a))return void 0;switch(f["default"]("capability",a),e["default"]("gl",b),a){case c["default"].BLEND:return b.BLEND;case c["default"].CULL_FACE:return b.CULL_FACE;case c["default"].DEPTH_TEST:return b.DEPTH_TEST;case c["default"].POLYGON_OFFSET_FILL:return b.POLYGON_OFFSET_FILL;case c["default"].SCISSOR_TEST:return b.SCISSOR_TEST;default:throw new Error(a+" is not a valid capability.")}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/commands/WebGLDisable.js",["../commands/glCapability","../checks/mustBeNumber","../utils/Shareable"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(b){a.call(this,"WebGLDisable"),this._capability=c["default"]("capability",b)}return f(d,a),d.prototype.contextFree=function(){},d.prototype.contextGain=function(a){a.gl.disable(b["default"](this._capability,a.gl))},d.prototype.contextLost=function(){},d.prototype.destructor=function(){this._capability=void 0,a.prototype.destructor.call(this)},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/scene/WebGLRenderer.js",["../core/BufferResource","../commands/Capability","../core/DrawMode","../core","../checks/expectArg","../collections/IUnknownArray","../renderers/initWebGL","../checks/isDefined","../checks/isUndefined","../checks/mustBeArray","../checks/mustBeDefined","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../checks/mustBeString","../utils/randumbInteger","../i18n/readOnly","../utils/Shareable","../collections/StringIUnknownMap","../resources/TextureResource","../commands/WebGLClearColor","../commands/WebGLEnable","../commands/WebGLDisable"],function(a){function b(a){switch(t["default"]("usage",a),a){case WebGLRenderingContext.STATIC_DRAW:return!0;default:return!1}}function c(a,b){if(a)return a;throw new Error(b+": gl: WebGLRenderingContext is not defined. Either gl has been lost or start() not called.")}function d(a){return v["default"]("uuid",a),a+" is not a recognized mesh uuid"}function e(a,b){if(b){var c=b[a];return c?c:a}return a}function f(a,b,c,d){var f=a.attributes(d);if(f)for(var g=Object.keys(f),h=0,i=g.length;i>h;h++){var j=g[h],k=e(j,c),l=b.attributes,m=l.getWeakRef(k);if(m){var n=m.buffer;n.bind();var o=f[j];o.vertexPointer(m.size,m.normalized,m.stride,m.offset),n.unbind(),o.enable(),n.release()}else console.warn("program attribute "+j+" is not satisfied by the mesh");l.release()}else console.warn("program.attributes is falsey.")}function g(a,b){var c=a.attributes(b);if(c)for(var d=Object.keys(c),e=0,f=d.length;f>e;e++)c[d[e]].disable();else console.warn("program.attributes is falsey.")}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a},function(a){D=a}],execute:function(){E=function(){function a(a,b,c,d){s["default"]("mode",a),s["default"]("count",b),s["default"]("type",c),s["default"]("offset",d),this.mode=a,this.count=b,this.type=c,this.offset=d}return a.prototype.execute=function(a){if(o["default"](a))switch(this.mode){case j["default"].TRIANGLE_STRIP:a.drawElements(a.TRIANGLE_STRIP,this.count,this.type,this.offset);break;case j["default"].TRIANGLE_FAN:a.drawElements(a.TRIANGLE_FAN,this.count,this.type,this.offset);break;case j["default"].TRIANGLES:a.drawElements(a.TRIANGLES,this.count,this.type,this.offset);break;case j["default"].LINE_STRIP:a.drawElements(a.LINE_STRIP,this.count,this.type,this.offset);break;case j["default"].LINE_LOOP:a.drawElements(a.LINE_LOOP,this.count,this.type,this.offset);break;case j["default"].LINES:a.drawElements(a.LINES,this.count,this.type,this.offset);break;case j["default"].POINTS:a.drawElements(a.POINTS,this.count,this.type,this.offset);break;default:throw new Error("mode: "+this.mode)}},a}(),F=function(a){function b(b,c,d){a.call(this,"ElementsBlock"),this._indexBuffer=b,this._indexBuffer.addRef(),this._attributes=c,this._attributes.addRef(),this.drawCommand=d}return J(b,a),b.prototype.destructor=function(){this._attributes.release(),this._attributes=void 0,this._indexBuffer.release(),this._indexBuffer=void 0,a.prototype.destructor.call(this)},b.prototype.bind=function(){this._indexBuffer.bind()},b.prototype.unbind=function(){this._indexBuffer.unbind()},Object.defineProperty(b.prototype,"attributes",{get:function(){return this._attributes.addRef(),this._attributes},enumerable:!0,configurable:!0}),b}(y["default"]),G=function(a){function b(b,c,d,e,f){a.call(this,"ElementsBlockAttrib"),this._buffer=b,this._buffer.addRef(),this.size=c,this.normalized=d,this.stride=e,this.offset=f}return J(b,a),b.prototype.destructor=function(){this._buffer.release(),this._buffer=void 0,this.size=void 0,this.normalized=void 0,this.stride=void 0,this.offset=void 0,a.prototype.destructor.call(this)},Object.defineProperty(b.prototype,"buffer",{get:function(){return this._buffer.addRef(),this._buffer},enumerable:!0,configurable:!0}),b}(y["default"]),H=function(a){function b(b,c,d){a.call(this,"BufferGeometry"),this.canvasId=b,this._blocks=d,this._blocks.addRef(),this.gl=c}return J(b,a),b.prototype.destructor=function(){this._blocks.release(),this._blocks=void 0,this.gl=void 0,a.prototype.destructor.call(this)},b.prototype.bind=function(a,b){if(this._program!==a){this._program&&this.unbind();var c=this._blocks.getWeakRef(this.uuid);if(!c)throw new Error(d(this.uuid));a?(this._program=a,this._program.addRef(),c.bind(),f(this._program,c,b,this.canvasId)):u["default"]("program",a)}},b.prototype.draw=function(){var a=this._blocks.getWeakRef(this.uuid);if(!a)throw new Error(d(this.uuid));a.drawCommand.execute(this.gl)},b.prototype.unbind=function(){if(this._program){var a=this._blocks.getWeakRef(this.uuid);if(!a)throw new Error(d(this.uuid));a.unbind(),g(this._program,this.canvasId),this._program.release(),this._program=void 0}},b}(y["default"]),I=function(a){function d(b){var c=this;a.call(this,"WebGLRenderer"),this._blocks=new z["default"],this._users=[],this._commands=new m["default"]([]),console.log(k["default"].NAMESPACE+" "+this._type+" "+k["default"].VERSION),this._attributes=b,this.enable(i["default"].DEPTH_TEST),this._webGLContextLost=function(a){o["default"](c._canvas)&&(a.preventDefault(),c._gl=void 0,c._users.forEach(function(a){a.contextLost(c._canvasId)}))},this._webGLContextRestored=function(a){o["default"](c._canvas)&&(a.preventDefault(),c._gl=n["default"](c._canvas,b),c._users.forEach(function(a){a.contextGain(c)}))}}return J(d,a),d.prototype.destructor=function(){for(this.stop(),this._blocks.release();this._users.length>0;)this._users.pop();this._commands.release(),a.prototype.destructor.call(this)},d.prototype.addContextListener=function(a){u["default"]("user",a);var b=this._users.indexOf(a);0>b?this._users.push(a):console.warn("user already exists for addContextListener")},Object.defineProperty(d.prototype,"canvas",{get:function(){return this._canvas||this.start(document.createElement("canvas"),w["default"]()),this._canvas},set:function(){throw new Error(x["default"]("canvas").message)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"canvasId",{get:function(){return this._canvasId},set:function(){throw new Error(x["default"]("canvasId").message)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"commands",{get:function(){return this._commands.addRef(),this._commands},set:function(){throw new Error(x["default"]("commands").message)},enumerable:!0,configurable:!0}),d.prototype.clearColor=function(a,b,c,d){return this._commands.pushWeakRef(new B["default"](a,b,c,d)),this},d.prototype.contextFree=function(a){this._commands.forEach(function(b){b.contextFree(a)})},d.prototype.contextGain=function(a){this._commands.forEach(function(b){b.contextGain(a)})},d.prototype.contextLost=function(a){this._commands.forEach(function(b){b.contextLost(a)})},d.prototype.createArrayBuffer=function(){return new h["default"](this,!1)},d.prototype.createBufferGeometry=function(a,c){if(u["default"]("primitive",a),s["default"]("primitive.mode",a.mode),q["default"]("primitive.indices",a.indices),u["default"]("primitive.attributes",a.attributes),o["default"](c)?l["default"]("usage",c).toSatisfy(b(c),"usage must be on of STATIC_DRAW, ..."):c=o["default"](this._gl)?this._gl.STATIC_DRAW:void 0,p["default"](this._gl))return void(k["default"].verbose&&console.warn("Impossible to create a buffer geometry without a WebGL context."));var d=new H(this._canvasId,this._gl,this._blocks),e=this.createElementArrayBuffer();e.bind(),o["default"](this._gl)?this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(a.indices),c):console.warn("Unable to bufferData to ELEMENT_ARRAY_BUFFER, WebGL context is undefined."),e.unbind();for(var f=new z["default"],g=Object.keys(a.attributes),h=g.length,i=0;h>i;i++){var j=g[i],m=this.createArrayBuffer();m.bind();var n=a.attributes[j],r=n.values;this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(r),c);var t=new G(m,n.size,!1,0,0);f.put(j,t),t.release(),m.unbind(),m.release()}var v=new E(a.mode,a.indices.length,this._gl.UNSIGNED_SHORT,0),w=new F(e,f,v);return this._blocks.put(d.uuid,w),w.release(),f.release(),e.release(),d},d.prototype.createElementArrayBuffer=function(){return new h["default"](this,!0)},d.prototype.createTextureCubeMap=function(){return new A["default"]([this],c(this._gl,"createTextureCubeMap()").TEXTURE_CUBE_MAP)},d.prototype.createTexture2D=function(){return new A["default"]([this],c(this._gl,"createTexture2D()").TEXTURE_2D)},d.prototype.disable=function(a){return this._commands.pushWeakRef(new D["default"](a)),this},d.prototype.enable=function(a){return this._commands.pushWeakRef(new C["default"](a)),this},Object.defineProperty(d.prototype,"gl",{get:function(){return this._gl?this._gl:void console.warn("property gl: WebGLRenderingContext is not defined. Either gl has been lost or start() not called.")},set:function(){throw new Error(x["default"]("gl").message)},enumerable:!0,configurable:!0}),d.prototype.removeContextListener=function(a){u["default"]("user",a);var b=this._users.indexOf(a);b>=0&&this._users.splice(b,1)},d.prototype.render=function(a,b){var c=this._gl;return c?(c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),a.draw(b,this._canvasId)):void 0},d.prototype.viewport=function(a,b,c,d){return this._gl.viewport(a,b,c,d),this},d.prototype.start=function(a,b){if(!(a instanceof HTMLCanvasElement))return console.warn("canvas must be an HTMLCanvasElement to start the context."),this;r["default"]("canvas",a);var c=o["default"](this._canvas);return c?(s["default"]("_canvasId",this._canvasId),void(k["default"].verbose&&console.warn(this._type+" Ignoring start() because already started."))):(this._canvas=a,this._canvasId=b,o["default"](this._canvas)&&(this._gl=n["default"](this._canvas,this._attributes),this.emitStartEvent(),this._canvas.addEventListener("webglcontextlost",this._webGLContextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._webGLContextRestored,!1)),this)},d.prototype.stop=function(){return o["default"](this._canvas)&&(this._canvas.removeEventListener("webglcontextrestored",this._webGLContextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._webGLContextLost,!1),this._gl&&(this.emitStopEvent(),this._gl=void 0),this._canvas=void 0,this._canvasId=void 0),this},d.prototype.emitStartEvent=function(){var a=this;this._users.forEach(function(b){a.emitContextGain(b)}),this._commands.forEach(function(b){a.emitContextGain(b)})},d.prototype.emitContextGain=function(a){this._gl.isContextLost()?a.contextLost(this._canvasId):a.contextGain(this)},d.prototype.emitStopEvent=function(){var a=this;this._users.forEach(function(b){a.emitContextFree(b)}),this._commands.forEach(function(b){a.emitContextFree(b)})},d.prototype.emitContextFree=function(a){this._gl.isContextLost()?a.contextLost(this._canvasId):a.contextFree(this)},d.prototype.synchronize=function(a){this._gl&&this.emitContextGain(a)},d}(y["default"]),a("default",I)}}}),System.register("davinci-eight/geometries/BarnSimplexGeometry.js",["../geometries/computeFaceNormals","../math/Euclidean3","../geometries/SimplexGeometry","../geometries/quadrilateral","../geometries/Simplex","../core/GraphicsProgramSymbols","../geometries/triangle","../math/G3"],function(a){var b,c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function d(){a.call(this),this.a=i["default"].fromVector(c["default"].e1),this.b=i["default"].fromVector(c["default"].e2),this.c=i["default"].fromVector(c["default"].e3),this.regenerate()}return k(d,a),d.prototype.isModified=function(){return this.a.modified||this.b.modified||this.c.modified||a.prototype.isModified.call(this)},d.prototype.setModified=function(b){return this.a.modified=b,this.b.modified=b,this.c.modified=b,a.prototype.setModified.call(this,b),this},d.prototype.regenerate=function(){function a(a){for(var b=new f["default"](a.length-1),d=0;d<a.length;d++)b.vertices[d].attributes[g["default"].ATTRIBUTE_POSITION]=c[a[d]];return b}this.setModified(!1);var c=[0,1,2,3,4,5,6,7,8,9].map(function(){return void 0});c[0]=(new i["default"]).sub(this.a).sub(this.b).sub(this.c).divByScalar(2),c[1]=(new i["default"]).add(this.a).sub(this.b).sub(this.c).divByScalar(2),c[6]=(new i["default"]).add(this.a).sub(this.b).add(this.c).divByScalar(2),c[5]=(new i["default"]).sub(this.a).sub(this.b).add(this.c).divByScalar(2),c[4]=(new i["default"]).copy(c[0]).add(this.b),c[2]=(new i["default"]).copy(c[1]).add(this.b),c[7]=(new i["default"]).copy(c[6]).add(this.b),c[9]=(new i["default"]).copy(c[5]).add(this.b),c[3]=i["default"].lerp(c[4],c[2],.5).scale(2).add(this.b).divByScalar(2),c[8]=i["default"].lerp(c[7],c[9],.5).scale(2).add(this.b).divByScalar(2);var d=i["default"].fromVector(this.position);switch(c=c.map(function(a){return a.add(d)}),this.k){case 0:var j=c.map(function(a){var b=new f["default"](0);return b.vertices[0].attributes[g["default"].ATTRIBUTE_POSITION]=a,b});this.data=j;break;case 1:var k=[[0,1],[1,6],[6,5],[5,0],[1,2],[6,7],[5,9],[0,4],[4,3],[3,2],[9,8],[8,7],[9,4],[8,3],[7,2]];this.data=k.map(function(b){return a(b)});break;case 2:var l=[0,1,2,3,4,5,6,7,8].map(function(){return void 0});l[0]=e["default"](c[0],c[5],c[9],c[4]),l[1]=e["default"](c[3],c[4],c[9],c[8]),l[2]=e["default"](c[2],c[3],c[8],c[7]),l[3]=e["default"](c[1],c[2],c[7],c[6]),l[4]=e["default"](c[0],c[1],c[6],c[5]),l[5]=e["default"](c[5],c[6],c[7],c[9]),l[6]=e["default"](c[0],c[4],c[2],c[1]),l[7]=h["default"](c[9],c[7],c[8]),l[8]=h["default"](c[2],c[4],c[3]),this.data=l.reduce(function(a,b){return a.concat(b)},[]),this.data.forEach(function(a){b["default"](a)})}this.check()},d}(d["default"]),a("default",j)}}}),System.register("davinci-eight/geometries/ConeSimplexGeometry.js",["../math/Euclidean3","../geometries/SliceSimplexGeometry","../math/R2","../math/R3"],function(a){var b,c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function c(b,c,d,e,f,g,h){void 0===b&&(b=.5),void 0===c&&(c=1),void 0===e&&(e=0),void 0===f&&(f=!1),void 0===g&&(g=!1),void 0===h&&(h=0),a.call(this,d,void 0,void 0),this.radiusTop=e,this.radius=b,this.height=c,this.openTop=f,this.openBottom=g,this.thetaStart=h}return g(c,a),c.prototype.regenerate=function(){var a,c,f=this.radius,g=this.radiusTop,h=this.height,i=this.flatSegments,j=this.curvedSegments,k=this.openTop,l=this.openBottom,m=this.thetaStart,n=this.sliceAngle,o=h/2,p=[],q=[],r=[];for(c=0;i>=c;c++){var s=[],t=[],u=c/i,v=u*(f-g)+g;for(a=0;j>=a;a++){var w=a/j,x=new e["default"];x.x=v*Math.sin(w*n+m),x.y=-u*h+o,x.z=v*Math.cos(w*n+m),p.push(x),s.push(p.length-1),t.push(new d["default"]([w,1-u]))}q.push(s),r.push(t)}var y,z,A=(f-g)/h;for(a=0;j>a;a++)for(0!==g?(y=e["default"].copy(p[q[0][a]]),z=e["default"].copy(p[q[0][a+1]])):(y=e["default"].copy(p[q[1][a]]),z=e["default"].copy(p[q[1][a+1]])),y.setY(Math.sqrt(y.x*y.x+y.z*y.z)*A).direction(),z.setY(Math.sqrt(z.x*z.x+z.z*z.z)*A).direction(),c=0;i>c;c++){var B=q[c][a],C=q[c+1][a],D=q[c+1][a+1],E=q[c][a+1],F=y.clone(),G=y.clone(),H=z.clone(),I=z.clone(),J=r[c][a].clone(),K=r[c+1][a].clone(),L=r[c+1][a+1].clone(),M=r[c][a+1].clone();this.triangle([p[B],p[C],p[E]],[F,G,I],[J,K,M]),this.triangle([p[C],p[D],p[E]],[G.clone(),H,I.clone()],[K.clone(),L,M.clone()])}if(!k&&g>0)for(p.push(e["default"].copy(b["default"].e2).scale(o)),a=0;j>a;a++){var B=q[0][a],C=q[0][a+1],D=p.length-1,F=e["default"].copy(b["default"].e2),G=e["default"].copy(b["default"].e2),H=e["default"].copy(b["default"].e2),J=r[0][a].clone(),K=r[0][a+1].clone(),L=new d["default"]([K.x,0]);this.triangle([p[B],p[C],p[D]],[F,G,H],[J,K,L])}if(!l&&f>0)for(p.push(e["default"].copy(b["default"].e2).scale(-o)),a=0;j>a;a++){var B=q[i][a+1],C=q[i][a],D=p.length-1,F=e["default"].copy(b["default"].e2).scale(-1),G=e["default"].copy(b["default"].e2).scale(-1),H=e["default"].copy(b["default"].e2).scale(-1),J=r[i][a+1].clone(),K=r[i][a].clone(),L=new d["default"]([K.x,1]);this.triangle([p[B],p[C],p[D]],[F,G,H],[J,K,L])}},c}(c["default"]),a("default",f)}}}),System.register("davinci-eight/geometries/computeFaceNormals.js",["../core/GraphicsProgramSymbols","../math/R3","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a){function b(a,b,h){void 0===b&&(b=c["default"].ATTRIBUTE_POSITION),void 0===h&&(h=c["default"].ATTRIBUTE_NORMAL);var i=a.vertices[0].attributes,j=a.vertices[1].attributes,k=a.vertices[2].attributes,l=i[b],m=j[b],n=k[b],o=l.getComponent(0),p=l.getComponent(1),q=l.getComponent(2),r=m.getComponent(0),s=m.getComponent(1),t=m.getComponent(2),u=n.getComponent(0),v=n.getComponent(1),w=n.getComponent(2),x=u-r,y=v-s,z=w-t,A=o-r,B=p-s,C=q-t,D=f["default"](x,y,z,A,B,C),E=g["default"](x,y,z,A,B,C),F=e["default"](x,y,z,A,B,C),G=new d["default"]([D,E,F]).direction();i[h]=G,j[h]=G,k[h]=G}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a},function(a){
d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/geometries/triangle.js",["../geometries/computeFaceNormals","../checks/expectArg","../geometries/Simplex","../core/GraphicsProgramSymbols","../math/VectorN"],function(a){function b(a,b,h,i,j){void 0===i&&(i={}),void 0===j&&(j=[]),d["default"]("a",a).toSatisfy(a instanceof g["default"],"a must be a VectorN"),d["default"]("b",b).toSatisfy(a instanceof g["default"],"a must be a VectorN"),d["default"]("b",h).toSatisfy(a instanceof g["default"],"a must be a VectorN");var k=new e["default"](e["default"].TRIANGLE);return k.vertices[0].attributes[f["default"].ATTRIBUTE_POSITION]=a,k.vertices[1].attributes[f["default"].ATTRIBUTE_POSITION]=b,k.vertices[2].attributes[f["default"].ATTRIBUTE_POSITION]=h,c["default"](k,f["default"].ATTRIBUTE_POSITION,f["default"].ATTRIBUTE_NORMAL),e["default"].setAttributeValues(i,k),j.push(k),j}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/geometries/quadrilateral.js",["../checks/expectArg","../geometries/triangle","../math/VectorN"],function(a){function b(a,b,c){var d,e,f,g=Object.keys(b),h=g.length;for(d=0;h>d;d++)e=g[d],f=b[e],c[e]=a.map(function(a){return f[a]})}function c(a,c,g,h,i,j){void 0===i&&(i={}),void 0===j&&(j=[]),d["default"]("a",a).toSatisfy(a instanceof f["default"],"a must be a VectorN"),d["default"]("b",c).toSatisfy(c instanceof f["default"],"b must be a VectorN"),d["default"]("c",g).toSatisfy(g instanceof f["default"],"c must be a VectorN"),d["default"]("d",h).toSatisfy(h instanceof f["default"],"d must be a VectorN");var k={};return b([1,2,0],i,k),e["default"](c,g,a,k,j),b([3,0,2],i,k),e["default"](h,a,g,k,j),j}var d,e,f;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/geometries/CuboidSimplexGeometry.js",["../math/CartesianE3","../geometries/computeFaceNormals","../geometries/SimplexGeometry","../geometries/quadrilateral","../geometries/Simplex","../core/GraphicsProgramSymbols","../math/R1","../math/R3"],function(a){var b,c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function d(c,d,e,g,h,i){void 0===c&&(c=b["default"].e1),void 0===d&&(d=b["default"].e2),void 0===e&&(e=b["default"].e3),void 0===g&&(g=f["default"].TRIANGLE),void 0===h&&(h=0),void 0===i&&(i=0),a.call(this),this._isModified=!0,this._a=b["default"].fromVectorE3(c),this._b=b["default"].fromVectorE3(d),this._c=b["default"].fromVectorE3(e),this.k=g,this.subdivide(h),this.boundary(i),this.regenerate()}return k(d,a),Object.defineProperty(d.prototype,"a",{get:function(){return this._a},set:function(a){this._a=a,this._isModified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"b",{get:function(){return this._b},set:function(a){this._b=a,this._isModified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"c",{get:function(){return this._c},set:function(a){this._c=a,this._isModified=!0},enumerable:!0,configurable:!0}),d.prototype.isModified=function(){return this._isModified||a.prototype.isModified.call(this)},d.prototype.setModified=function(b){return this._isModified=b,a.prototype.setModified.call(this,b),this},d.prototype.regenerate=function(){function a(a){for(var c=new f["default"](a.length-1),d=0;d<a.length;d++)c.vertices[d].attributes[g["default"].ATTRIBUTE_POSITION]=b[a[d]],c.vertices[d].attributes[g["default"].ATTRIBUTE_GEOMETRY_INDEX]=new h["default"]([d]);return c}this.setModified(!1);var b=[0,1,2,3,4,5,6,7].map(function(){return void 0});b[0]=(new i["default"]).sub(this._a).sub(this._b).add(this._c).divByScalar(2),b[1]=(new i["default"]).add(this._a).sub(this._b).add(this._c).divByScalar(2),b[2]=(new i["default"]).add(this._a).add(this._b).add(this._c).divByScalar(2),b[3]=(new i["default"]).sub(this._a).add(this._b).add(this._c).divByScalar(2),b[4]=(new i["default"]).copy(b[3]).sub(this._c),b[5]=(new i["default"]).copy(b[2]).sub(this._c),b[6]=(new i["default"]).copy(b[1]).sub(this._c),b[7]=(new i["default"]).copy(b[0]).sub(this._c);var d=this.position;switch(b.forEach(function(a){a.add(d)}),this.k){case 0:var j=[[0],[1],[2],[3],[4],[5],[6],[7]];this.data=j.map(function(b){return a(b)});break;case 1:var k=[[0,1],[1,2],[2,3],[3,0],[0,7],[1,6],[2,5],[3,4],[4,5],[5,6],[6,7],[7,4]];this.data=k.map(function(b){return a(b)});break;case 2:var l=[0,1,2,3,4,5].map(function(){return void 0});l[0]=e["default"](b[0],b[1],b[2],b[3]),l[1]=e["default"](b[1],b[6],b[5],b[2]),l[2]=e["default"](b[7],b[0],b[3],b[4]),l[3]=e["default"](b[6],b[7],b[4],b[5]),l[4]=e["default"](b[3],b[2],b[5],b[4]),l[5]=e["default"](b[7],b[6],b[1],b[0]),this.data=l.reduce(function(a,b){return a.concat(b)},[]),this.data.forEach(function(a){c["default"](a)})}this.check()},d}(d["default"]),a("default",j)}}}),System.register("davinci-eight/geometries/DodecahedronSimplexGeometry.js",["../geometries/PolyhedronSimplexGeometry"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=(1+Math.sqrt(5))/2,d=1/c,e=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],f=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],g=function(a){function b(b,c){a.call(this,e,f,b,c)}return h(b,a),b}(b["default"]),a("default",g)}}}),System.register("davinci-eight/geometries/IcosahedronSimplexGeometry.js",["../geometries/PolyhedronSimplexGeometry"],function(a){var b,c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=(1+Math.sqrt(5))/2,d=[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],e=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],f=function(a){function b(b,c){a.call(this,d,e,b,c)}return g(b,a),b}(b["default"]),a("default",f)}}}),System.register("davinci-eight/geometries/KleinBottleSimplexGeometry.js",["../geometries/GridSimplexGeometry","../math/R3"],function(a){function b(a,b){var c=new d["default"];return a=2*a*g,b=2*b*g,g>a?(c.x=3*e(a)*(1+f(a))+2*(1-e(a)/2)*e(a)*e(b),c.z=-8*f(a)-2*(1-e(a)/2)*f(a)*e(b)):(c.x=3*e(a)*(1+f(a))+2*(1-e(a)/2)*e(b+g),c.z=-8*f(a)),c.y=-2*(1-e(a)/2)*f(b),c.scale(.1)}var c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=Math.cos,f=Math.sin,g=Math.PI,h=function(a){function c(c,d){a.call(this,b,c,d)}return i(c,a),c}(c["default"]),a("default",h)}}}),System.register("davinci-eight/geometries/Simplex1Geometry.js",["../geometries/SimplexGeometry","../geometries/Simplex","../core/GraphicsProgramSymbols","../math/R3"],function(a){var b,c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(){a.call(this),this.head=new e["default"]([1,0,0]),this.tail=new e["default"]([0,1,0]),this.calculate()}return g(b,a),b.prototype.calculate=function(){function a(a){for(var e=new c["default"](a.length-1),f=0;f<a.length;f++)e.vertices[f].attributes[d["default"].ATTRIBUTE_POSITION]=b[a[f]];return e}var b=[0,1].map(function(){return void 0});b[0]=this.tail,b[1]=this.head,this.data=[[0,1]].map(function(b){return a(b)}),this.check()},b}(b["default"]),a("default",f)}}}),System.register("davinci-eight/geometries/MobiusStripSimplexGeometry.js",["../geometries/GridSimplexGeometry","../math/R3"],function(a){function b(a,b){var c=new d["default"]([0,0,0]),h=1,i=.05,j=(2*a-1)*i,k=2*g*b;return c.x=(h+j*e(k/2))*e(k),c.y=(h+j*e(k/2))*f(k),c.z=j*f(k/2),c}var c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=Math.cos,f=Math.sin,g=Math.PI,h=function(a){function c(c,d){a.call(this,b,c,d)}return i(c,a),c}(c["default"]),a("default",h)}}}),System.register("davinci-eight/geometries/OctahedronSimplexGeometry.js",["../geometries/PolyhedronSimplexGeometry"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],d=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e=function(a){function b(b,e){a.call(this,c,d,b,e)}return f(b,a),b}(b["default"]),a("default",e)}}}),System.register("davinci-eight/checks/isFunction.js",[],function(a){function b(a){return"function"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeFunction.js",["../checks/mustSatisfy","../checks/isFunction"],function(a){function b(){return"be a function"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/geometries/GridSimplexGeometry.js",["../geometries/Simplex","../geometries/SimplexGeometry","../core/GraphicsProgramSymbols","../math/R2","../math/R3","../checks/mustBeFunction","../checks/mustBeInteger"],function(a){var b,c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function c(c,i,j){a.call(this),g["default"]("parametricFunction",c),h["default"]("uSegments",i),h["default"]("vSegments",j);var k,l,m=[],n=i+1;for(k=0;j>=k;k++){var o=k/j;for(l=0;i>=l;l++){var p=l/i,q=c(p,o);m.push(f["default"].copy(q))}}var r,s,t,u,v,w,x,y;for(k=0;j>k;k++)for(l=0;i>l;l++){r=k*n+l,s=k*n+l+1,t=(k+1)*n+l+1,u=(k+1)*n+l,v=new e["default"]([l/i,k/j]),w=new e["default"]([(l+1)/i,k/j]),x=new e["default"]([(l+1)/i,(k+1)/j]),y=new e["default"]([l/i,(k+1)/j]);var z=new b["default"](b["default"].TRIANGLE);z.vertices[0].attributes[d["default"].ATTRIBUTE_POSITION]=m[r],z.vertices[0].attributes[d["default"].ATTRIBUTE_TEXTURE_COORDS]=v,z.vertices[1].attributes[d["default"].ATTRIBUTE_POSITION]=m[s],z.vertices[1].attributes[d["default"].ATTRIBUTE_TEXTURE_COORDS]=w,z.vertices[2].attributes[d["default"].ATTRIBUTE_POSITION]=m[u],z.vertices[2].attributes[d["default"].ATTRIBUTE_TEXTURE_COORDS]=y,this.data.push(z);var z=new b["default"](b["default"].TRIANGLE);z.vertices[0].attributes[d["default"].ATTRIBUTE_POSITION]=m[s],z.vertices[0].attributes[d["default"].ATTRIBUTE_TEXTURE_COORDS]=w,z.vertices[1].attributes[d["default"].ATTRIBUTE_POSITION]=m[t],z.vertices[1].attributes[d["default"].ATTRIBUTE_TEXTURE_COORDS]=x,z.vertices[2].attributes[d["default"].ATTRIBUTE_POSITION]=m[u],z.vertices[2].attributes[d["default"].ATTRIBUTE_TEXTURE_COORDS]=y,this.data.push(z)}}return j(c,a),c}(c["default"]),a("default",i)}}}),System.register("davinci-eight/geometries/RevolutionSimplexGeometry.js",["../geometries/SimplexGeometry","../math/SpinG3","../math/R2"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(){a.call(this)}return f(b,a),b.prototype.revolve=function(a,b,e,f,g,h){void 0===e&&(e=12),void 0===f&&(f=0),void 0===g&&(g=2*Math.PI);var i,j,k,l,m=[],n=Math.abs(2*Math.PI-Math.abs(g-f))<1e-4,o=n?e:e+1,p=1/e,q=(g-f)*p,r=new c["default"];for(i=0,k=o;k>i;i++){var s=f+i*q;for(r.rotorFromGeneratorAngle(b,s),j=0,l=a.length;l>j;j++){var t=a[j].clone();t.rotate(r),h&&t.rotate(h),m.push(t)}}var u=1/(a.length-1),v=a.length,w=v*o;for(i=0,k=e;k>i;i++)for(j=0,l=a.length-1;l>j;j++){var x=j+v*i,y=x%w,z=(x+v)%w,A=(x+1+v)%w,B=(x+1)%w,C=i*p,D=j*u,E=C+p,F=D+u;this.triangle([m[B],m[z],m[y]],[],[new d["default"]([C,D]),new d["default"]([E,D]),new d["default"]([C,F])]),this.triangle([m[B],m[A],m[z]],[],[new d["default"]([E,D]),new d["default"]([E,F]),new d["default"]([C,F])])}},b}(b["default"]),a("default",e)}}}),System.register("davinci-eight/geometries/RingSimplexGeometry.js",["../geometries/arc3","../geometries/Simplex","../geometries/SliceSimplexGeometry","../math/SpinG3","../core/GraphicsProgramSymbols","../math/R2","../math/R3"],function(a){function b(a,b,c,d,e,f,g,i,j,k){for(var l=n["default"].copy(c).cross(d),o=b,p=(a-b)/g,q=0;g+1>q;q++){for(var r=n["default"].copy(d).scale(o),s=h["default"](r,e,f,i),t=0,u=s.length;u>t;t++){var v=s[t];j.push(v),k.push(new m["default"]([(v.dot(d)/a+1)/2,(v.dot(l)/a+1)/2]))}o+=p}}function c(a,b,c){return a*(c+1)+b}function d(a,b,c,d,e,f){for(var g=0;d>g;g++)for(var h=g*(e+1),i=0;e>i;i++){var j=h+i,k=j,l=j+e+1,m=j+e+2;f.triangle([a[k],a[l],a[m]],[n["default"].copy(c),n["default"].copy(c),n["default"].copy(c)],[b[k].clone(),b[l].clone(),b[m].clone()]),k=j,l=j+e+2,m=j+1,f.triangle([a[k],a[l],a[m]],[n["default"].copy(c),n["default"].copy(c),n["default"].copy(c)],[b[k].clone(),b[l].clone(),b[m].clone()])}}function e(a,b,d,e){for(var f=0;b>f;f++){for(var g=0;d>g;g++){var h=new i["default"](i["default"].LINE);h.vertices[0].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(f,g,d)],h.vertices[1].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(f,g+1,d)],e.push(h);var h=new i["default"](i["default"].LINE);h.vertices[0].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(f,g,d)],h.vertices[1].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(f+1,g,d)],e.push(h)}var h=new i["default"](i["default"].LINE);h.vertices[0].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(f,d,d)],h.vertices[1].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(f+1,d,d)],e.push(h)}for(var g=0;d>g;g++){var h=new i["default"](i["default"].LINE);h.vertices[0].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(b,g,d)],h.vertices[1].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(b,g+1,d)],e.push(h)}}function f(a,b,d,e){for(var f=0;b>=f;f++)for(var g=0;d>=g;g++){var h=new i["default"](i["default"].POINT);h.vertices[0].attributes[l["default"].ATTRIBUTE_POSITION]=a[c(f,g,d)],e.push(h)}}function g(a,b,c,d){for(var e=0;b>=e;e++)for(var f=0;c>=f;f++){var g=new i["default"](i["default"].EMPTY);d.push(g)}}var h,i,j,k,l,m,n,o,p=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=function(a){function c(b,c,d,e,f){void 0===b&&(b=1),void 0===c&&(c=0),a.call(this,d,e,f),this.a=b,this.b=c}return p(c,a),c.prototype.isModified=function(){return a.prototype.isModified.call(this)},c.prototype.regenerate=function(){this.data=[];var a=this.flatSegments,c=this.curvedSegments,h=k["default"].dual(this.axis),j=[],l=[];switch(b(this.a,this.b,this.axis,this.sliceStart,this.sliceAngle,h,a,c,j,l),this.k){case i["default"].EMPTY:g(j,a,c,this.data);break;case i["default"].POINT:f(j,a,c,this.data);break;case i["default"].LINE:e(j,a,c,this.data);break;case i["default"].TRIANGLE:d(j,l,this.axis,a,c,this);break;default:console.warn(this.k+"-simplex is not supported for geometry generation.")}this.setModified(!1)},c.prototype.setModified=function(b){return a.prototype.setModified.call(this,b),this},c}(j["default"]),a("default",o)}}}),System.register("davinci-eight/geometries/PolyhedronSimplexGeometry.js",["../math/Euclidean3","../geometries/SimplexGeometry","../geometries/Simplex","../core/GraphicsProgramSymbols","../math/R2","../math/R3"],function(a){function b(a){return Math.atan2(a.z,-a.x)}function c(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}function d(a,d){var e=k["default"].copy(a).direction();d.push(e);var f=b(a)/2/Math.PI+.5,g=c(a)/Math.PI+.5,h=e;return h.uv=new j["default"]([f,1-g]),e}function e(a,b,c){return 0>c&&1===a.x&&(a=new j["default"]([a.x-1,a.y])),0===b.x&&0===b.z&&(a=new j["default"]([c/2/Math.PI+.5,a.y])),a.clone()}var f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(a){function c(c,g,j,l){function m(a,b,c){var d=(a.x+b.x+c.x)/3,e=(a.y+b.y+c.y)/3,g=(a.z+b.z+c.z)/3;return new f["default"](0,d,e,g,0,0,0,0)}function n(a,c,d){var f=b(m(a,c,d)),g=a,j=c,l=d,n=e(g.uv,a,f),o=e(j.uv,c,f),q=e(l.uv,d,f),r=new h["default"](h["default"].TRIANGLE);r.vertices[0].attributes[i["default"].ATTRIBUTE_POSITION]=k["default"].copy(a),r.vertices[0].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(a),r.vertices[0].attributes[i["default"].ATTRIBUTE_TEXTURE_COORDS]=n,r.vertices[1].attributes[i["default"].ATTRIBUTE_POSITION]=k["default"].copy(c),r.vertices[1].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(c),r.vertices[1].attributes[i["default"].ATTRIBUTE_TEXTURE_COORDS]=o,r.vertices[2].attributes[i["default"].ATTRIBUTE_POSITION]=k["default"].copy(d),r.vertices[2].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(d),r.vertices[2].attributes[i["default"].ATTRIBUTE_TEXTURE_COORDS]=q,p.data.push(r)}function o(a,b,c){for(var e=Math.pow(2,b),f=d(a.vertices[0].attributes[i["default"].ATTRIBUTE_POSITION],c),g=d(a.vertices[1].attributes[i["default"].ATTRIBUTE_POSITION],c),h=d(a.vertices[2].attributes[i["default"].ATTRIBUTE_POSITION],c),j=[],l=0;e>=l;l++){j[l]=[];for(var m=d(k["default"].copy(f).lerp(h,l/e),c),o=d(k["default"].copy(g).lerp(h,l/e),c),p=e-l,q=0;p>=q;q++)j[l][q]=0==q&&l==e?m:d(k["default"].copy(m).lerp(o,q/p),c)}for(var l=0;e>l;l++)for(var q=0;2*(e-l)-1>q;q++){var r=Math.floor(q/2);q%2==0?n(j[l][r+1],j[l+1][r],j[l][r]):n(j[l][r+1],j[l+1][r+1],j[l+1][r])}}void 0===j&&(j=1),void 0===l&&(l=0),a.call(this);for(var p=this,q=[],r=0,s=c.length;s>r;r+=3)d(new k["default"]([c[r],c[r+1],c[r+2]]),q);for(var t=[],r=0,u=0,s=g.length;s>r;r+=3,u++){var v=q[g[r]],w=q[g[r+1]],x=q[g[r+2]],y=new h["default"](h["default"].TRIANGLE);y.vertices[0].attributes[i["default"].ATTRIBUTE_POSITION]=v,y.vertices[0].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(v),y.vertices[1].attributes[i["default"].ATTRIBUTE_POSITION]=w,y.vertices[1].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(w),y.vertices[2].attributes[i["default"].ATTRIBUTE_POSITION]=x,y.vertices[2].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(x),t[u]=y}for(var r=0,z=t.length;z>r;r++)o(t[r],l,q);for(var r=0,A=q.length;A>r;r++)q[r].x*=j,q[r].y*=j,q[r].z*=j;this.mergeVertices()}return m(c,a),c}(g["default"]),a("default",l)}}}),System.register("davinci-eight/geometries/TetrahedronSimplexGeometry.js",["../geometries/PolyhedronSimplexGeometry"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],d=[2,1,0,0,3,2,1,3,0,2,3,1],e=function(a){function b(b,e){a.call(this,c,d,b,e)}return f(b,a),b}(b["default"]),a("default",e)}}}),System.register("davinci-eight/geometries/VortexSimplexGeometry.js",["../math/Euclidean3","../geometries/SimplexGeometry","../checks/mustBeInteger","../math/SpinG3","../math/R2","../math/R3"],function(a){function b(a){var b=new h["default"]([Math.random(),Math.random(),Math.random()]);return b.cross(a).direction(),new c["default"](0,b.x,b.y,b.z,0,0,0,0)}var c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function d(){a.call(this),this.radius=1,this.radiusCone=.08,this.radiusShaft=.01,this.lengthCone=.2,this.lengthShaft=.8,this.arrowSegments=8,this.radialSegments=12,this.generator=f["default"].dual(h["default"].e3),this.setModified(!0)}return j(d,a),d.prototype.isModified=function(){return this.generator.modified},d.prototype.setModified=function(a){return this.generator.modified=a,this},d.prototype.regenerate=function(){function a(b){e["default"]("index",b);var c=b%p;if(c===p-1)return a(b-1);var d=(b-c)/p;return x*(d+c*y)}function d(a){e["default"]("index",a);var b=a%p;return b===p-1?f:i}this.data=[];for(var f=(this.radius,this.radiusCone),i=this.radiusShaft,j=this.radialSegments,k=new c["default"](0,-this.generator.yz,-this.generator.zx,-this.generator.xy,0,0,0,0),l=b(k),m=l.scale(this.radius),n=new c["default"](this.generator.α,0,0,0,this.generator.xy,this.generator.yz,this.generator.zx,0),o=k.ext(l),p=9,q=this.arrowSegments*p,r=2*Math.PI,s=new h["default"]([0,0,0]),t=[],u=[],v=[],w=this.lengthShaft/(this.lengthCone+this.lengthShaft),x=r/this.arrowSegments,y=w/(p-2),z=0;j>=z;z++)for(var A=r*z/j,B=0;q>=B;B++){var C=a(B),D=n.scale(-C/2).exp();s.copy(m).rotate(D);var E=h["default"].copy(s),F=k.scale(d(B)),G=D.mul(o).mul(D.__tilde__()).scale(-A/2).exp(),H=G.mul(F).mul(G.__tilde__());E.add2(s,H),u.push(E),v.push(new g["default"]([B/q,z/j])),t.push(h["default"].copy(H).direction())}for(var z=1;j>=z;z++)for(var B=1;q>=B;B++){var I=(q+1)*z+B-1,J=(q+1)*(z-1)+B-1,K=(q+1)*(z-1)+B,L=(q+1)*z+B;this.triangle([u[I],u[J],u[L]],[t[I],t[J],t[L]],[v[I],v[J],v[L]]),this.triangle([u[J],u[K],u[L]],[t[J],t[K],t[L]],[v[J],v[K],v[L]])}this.setModified(!1)},d}(d["default"]),a("default",i)}}}),System.register("davinci-eight/utils/mergeStringMapList.js",[],function(a){function b(a){var b={};return a.forEach(function(a){for(var c=Object.keys(a),d=c.length,e=0;d>e;e++){var f=c[e],g=a[f];b[f]=g}}),b}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/programs/smartProgram.js",["../scene/MonitorList","../programs/fragmentShader","../utils/mergeStringMapList","../checks/mustBeDefined","./createGraphicsProgram","../programs/vColorRequired","../programs/vertexShader","../programs/vLightRequired"],function(a){function b(a,b,k,l){c["default"].verify("monitors",a,function(){return"smartProgram"}),f["default"]("attributes",b),f["default"]("uniformsList",k);var m=e["default"](k),n=h["default"](b,m),o=j["default"](b,m),p=g["default"](a,i["default"](b,m,n,o),d["default"](b,m,n,o),l),q={get uuid(){return p.uuid},attributes:function(a){return p.attributes(a)},uniforms:function(a){return p.uniforms(a)},get vertexShader(){return p.vertexShader},get fragmentShader(){return p.fragmentShader},addRef:function(){return p.addRef()},release:function(){return p.release()},contextFree:function(a){return p.contextFree(a)},contextGain:function(a){return p.contextGain(a)},contextLost:function(a){return p.contextLost(a)},use:function(a){return p.use(a)},enableAttrib:function(a,b){return p.enableAttrib(a,b)},disableAttrib:function(a,b){return p.disableAttrib(a,b)},uniform1f:function(a,b,c){return p.uniform1f(a,b,c)},uniform2f:function(a,b,c,d){return p.uniform2f(a,b,c,d)},uniform3f:function(a,b,c,d,e){return p.uniform3f(a,b,c,d,e)},uniform4f:function(a,b,c,d,e,f){return p.uniform4f(a,b,c,d,e,f)},mat2:function(a,b,c,d){return p.mat2(a,b,c,d)},mat3:function(a,b,c,d){return p.mat3(a,b,c,d)},mat4:function(a,b,c,d){return p.mat4(a,b,c,d)},vec2:function(a,b,c){return p.vec2(a,b,c)},vec3:function(a,b,c){return p.vec3(a,b,c)},vec4:function(a,b,c){return p.vec4(a,b,c)},vector2:function(a,b,c){return p.vector2(a,b,c)},vector3:function(a,b,c){return p.vector3(a,b,c)},vector4:function(a,b,c){return p.vector4(a,b,c)}};return q}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){}}}),System.register("davinci-eight/programs/programFromScripts.js",["../programs/createGraphicsProgram","../scene/MonitorList","../checks/mustBeObject","../checks/mustBeString"],function(a){function b(a,b,g,h,i){function j(a){var b=h.getElementById(f["default"]("id",a));if(b)return b;throw new Error(a+" is not a valid DOM element identifier.")}void 0===i&&(i=[]),d["default"].verify("monitors",a,function(){return"programFromScripts"}),f["default"]("vsId",b),f["default"]("fsId",g),e["default"]("domDocument",h);var k=j(b).textContent,l=j(g).textContent;return c["default"](a,k,l,i)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/materials/HTMLScriptsGraphicsProgram.js",["../materials/GraphicsProgram","../checks/mustSatisfy","../programs/programFromScripts"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,d,e){void 0===b&&(b=[]),void 0===d&&(d=document),a.call(this,"HTMLScriptsGraphicsProgram",e),this.attributeBindings=[],c["default"]("scriptIds",2===b.length,function(){return"scriptIds must be [vsId, fsId]"}),this.scriptIds=b.map(function(a){return a}),this.dom=d}return f(b,a),b.prototype.createGraphicsProgram=function(){var a=this.scriptIds[0],b=this.scriptIds[1];return d["default"](this.monitors,a,b,this.dom,this.attributeBindings)},b}(b["default"]),a("default",e)}}}),System.register("davinci-eight/materials/LineMaterial.js",["../checks/isDefined","../materials/GraphicsProgram","../checks/mustBeInteger","../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function c(c,e){void 0===c&&(c={}),a.call(this,"LineMaterial",e),this.size=b["default"](c.size)?d["default"]("parameters.size",c.size):3}return h(c,a),c.prototype.createGraphicsProgram=function(){var a=new e["default"];return a.attribute(f["default"].ATTRIBUTE_POSITION,this.size),a.uniform(f["default"].UNIFORM_COLOR,"vec3"),a.uniform(f["default"].UNIFORM_MODEL_MATRIX,"mat4"),a.uniform(f["default"].UNIFORM_PROJECTION_MATRIX,"mat4"),a.uniform(f["default"].UNIFORM_VIEW_MATRIX,"mat4"),a.build(this.monitors)},c}(c["default"]),a("default",g)}}}),System.register("davinci-eight/materials/MeshMaterial.js",["../materials/GraphicsProgram","../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols"],function(a){var b,c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e="MeshMaterial",f=function(a){function b(b,c){a.call(this,e,c)}return g(b,a),b.prototype.destructor=function(){a.prototype.destructor.call(this)},b.prototype.createGraphicsProgram=function(){var a=new c["default"];return a.attribute(d["default"].ATTRIBUTE_POSITION,3),a.attribute(d["default"].ATTRIBUTE_NORMAL,3),a.uniform(d["default"].UNIFORM_COLOR,"vec3"),a.uniform(d["default"].UNIFORM_MODEL_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_NORMAL_MATRIX,"mat3"),a.uniform(d["default"].UNIFORM_PROJECTION_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_VIEW_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_AMBIENT_LIGHT,"vec3"),a.uniform(d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR,"vec3"),a.uniform(d["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION,"vec3"),a.build(this.monitors)},b}(b["default"]),a("default",f)}}}),System.register("davinci-eight/materials/PointMaterial.js",["../materials/GraphicsProgram","../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols"],function(a){var b,c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e="PointMaterial",f=function(a){function b(b,c){a.call(this,e,c)}return g(b,a),b.prototype.createGraphicsProgram=function(){var a=new c["default"];return a.attribute(d["default"].ATTRIBUTE_POSITION,3),a.uniform(d["default"].UNIFORM_COLOR,"vec3"),a.uniform(d["default"].UNIFORM_MODEL_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_PROJECTION_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_VIEW_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_POINT_SIZE,"float"),a.build(this.monitors)},b}(b["default"]),a("default",f)}}}),System.register("davinci-eight/math/mathcore.js",[],function(a){function b(a,b){return null!==a&&"object"==typeof a&&"function"==typeof a[b]}function c(a,c){return function(d){var e=d;if(b(d,a))return e[a]();if("number"==typeof d){var f=e,g=c(f);return g}throw new TypeError("x must support "+a+"(x)")}}function d(a){return(m(a)+m(-a))/2}function e(a){return(m(a)-m(-a))/2}function f(a){return e(a)/d(a)}function g(a){return a*a}var h,i,j,k,l,m,n,o,p,q,r;return{setters:[],execute:function(){h=Math.abs,i=Math.acos,j=Math.asin,k=Math.atan,l=Math.cos,m=Math.exp,n=Math.log,o=Math.sin,p=Math.sqrt,q=Math.tan,r={acos:c("acos",i),asin:c("asin",j),atan:c("atan",k),cos:c("cos",l),cosh:c("cosh",d),exp:c("exp",m),log:c("log",n),norm:c("norm",h),quad:c("quad",g),sin:c("sin",o),sinh:c("sinh",e),sqrt:c("sqrt",p),tan:c("tan",q),tanh:c("tanh",f),Math:{cosh:d,sinh:e}},a("default",r)}}}),System.register("davinci-eight/math/R4.js",["../math/VectorN"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(b,c){void 0===b&&(b=[0,0,0,0]),void 0===c&&(c=!1),
a.call(this,b,c,4)}return d(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[0]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[1]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this.coords[2]},set:function(a){this.modified=this.modified||this.z!==a,this.coords[2]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"w",{get:function(){return this.coords[3]},set:function(a){this.modified=this.modified||this.w!==a,this.coords[3]=a},enumerable:!0,configurable:!0}),b.prototype.setW=function(a){return this.w=a,this},b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.w+=a.w*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},b.prototype.clone=function(){return new b([this.x,this.y,this.z,this.w])},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w,this},b.prototype.divByScalar=function(a){return this.x/=a,this.y/=a,this.z/=a,this.w/=a,this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},b.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},b.prototype.reflect=function(){return this},b.prototype.rotate=function(){return this},b.prototype.slerp=function(){return this},b.prototype.sub=function(a,b){return this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.w-=a.w*b,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},b.prototype.magnitude=function(){throw new Error("TODO: R4.magnitude()")},b.prototype.squaredNorm=function(){throw new Error("TODO: R4.squaredNorm()")},b.prototype.toExponential=function(){return"TODO R4.toExponential"},b.prototype.toFixed=function(){return"TODO R4.toFixed"},b.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this.w=0,this},b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/facets/AmbientLight.js",["../core/Color","../checks/mustBeArray","../checks/mustBeNumber","../checks/mustBeObject","../checks/mustBeString","../utils/Shareable","../core/GraphicsProgramSymbols"],function(a){function b(){return j}var c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j="AmbientLight",k=function(a){function h(b){a.call(this,"AmbientLight"),f["default"]("color",b),this.color=c["default"].white.clone(),this.color.r=e["default"]("color.r",b.r),this.color.g=e["default"]("color.g",b.g),this.color.b=e["default"]("color.b",b.b)}return l(h,a),h.prototype.destructor=function(){a.prototype.destructor.call(this)},h.prototype.getProperty=function(){return void 0},h.prototype.setProperty=function(a,c){return g["default"]("name",a,b),d["default"]("value",c,b),this},h.prototype.setUniforms=function(a,b){var c=[this.color.r,this.color.g,this.color.b];a.vector3(i["default"].UNIFORM_AMBIENT_LIGHT,c,b)},h}(h["default"]),a("default",k)}}}),System.register("davinci-eight/facets/DirectionalLight.js",["../core/Color","../checks/mustBeObject","../checks/mustBeString","../utils/Shareable","../core/GraphicsProgramSymbols","../math/R3"],function(a){function b(){return i}var c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i="DirectionalLight",j=function(a){function f(b,e){void 0===e&&(e=c["default"].white),a.call(this,"DirectionalLight"),d["default"]("direction",b),d["default"]("color",e),this.direction=h["default"].copy(b).direction(),this.color=c["default"].fromColor(e)}return k(f,a),f.prototype.destructor=function(){a.prototype.destructor.call(this)},f.prototype.getProperty=function(a){switch(e["default"]("name",a,b),a){case f.PROP_COLOR:return this.color.coords;case f.PROP_DIRECTION:return this.direction.coords;default:console.warn("unknown property: "+a)}},f.prototype.setProperty=function(a,c){switch(e["default"]("name",a,b),d["default"]("value",c,b),a){case f.PROP_COLOR:this.color.coords=c;break;case f.PROP_DIRECTION:this.direction.coords=c;break;default:console.warn("unknown property: "+a)}return this},f.prototype.setColor=function(a){return d["default"]("color",a),this.color.copy(a),this},f.prototype.setDirection=function(a){return d["default"]("direction",a),this.direction.copy(a).direction(),this},f.prototype.setUniforms=function(a,b){a.vector3(g["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION,this.direction.coords,b);var c=[this.color.r,this.color.g,this.color.b];a.vector3(g["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR,c,b)},f.PROP_COLOR="color",f.PROP_DIRECTION="direction",f}(f["default"]),a("default",j)}}}),System.register("davinci-eight/facets/EulerFacet.js",["../i18n/readOnly","../utils/Shareable","../math/R3"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function c(){a.call(this,"EulerFacet"),this._rotation=new d["default"]}return f(c,a),c.prototype.destructor=function(){a.prototype.destructor.call(this)},c.prototype.getProperty=function(){return void 0},c.prototype.setProperty=function(){return this},c.prototype.setUniforms=function(){console.warn("EulerFacet.setUniforms")},Object.defineProperty(c.prototype,"rotation",{get:function(){return this._rotation},set:function(){throw new Error(b["default"]("rotation").message)},enumerable:!0,configurable:!0}),c}(c["default"]),a("default",e)}}}),System.register("davinci-eight/facets/PointSizeFacet.js",["../checks/mustBeArray","../checks/mustBeInteger","../checks/mustBeString","../utils/Shareable","../core/GraphicsProgramSymbols"],function(a){function b(){return h}var c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h="PointSizeFacet",i=function(a){function f(b){void 0===b&&(b=2),a.call(this,"PointSizeFacet"),this.pointSize=d["default"]("pointSize",b)}return j(f,a),f.prototype.destructor=function(){a.prototype.destructor.call(this)},f.prototype.getProperty=function(){return void 0},f.prototype.setProperty=function(a,d){return e["default"]("name",a,b),c["default"]("value",d,b),this},f.prototype.setUniforms=function(a,b){a.uniform1f(g["default"].UNIFORM_POINT_SIZE,this.pointSize,b)},f}(f["default"]),a("default",i)}}}),System.register("davinci-eight/math/add2x2.js",[],function(a){function b(a,b,c){var d=a[0],e=a[2],f=a[1],g=a[3],h=b[0],i=b[2],j=b[1],k=b[3];return c[0]=d+h,c[2]=e+i,c[1]=f+j,c[3]=g+k,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/det2x2.js",[],function(a){function b(a){var b=a[0],c=a[2],d=a[1],e=a[3];return b*e-c*d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Mat2R.js",["../math/AbstractMatrix","../math/add2x2","../math/det2x2","../checks/isDefined","../checks/mustBeInteger","../checks/mustBeNumber"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){a.call(this,b,2)}return i(b,a),b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return c["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){var a=this.elements,c=a[0],d=a[1],e=a[2],f=a[3];return b.zero().set(c,e,d,f)},b.prototype.det=function(){return d["default"](this.elements)},b.prototype.inv=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=this.det();return this.set(e,-d,-c,b).scale(1/f)},b.prototype.isOne=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3];return 1===b&&0===d&&0===c&&1===e},b.prototype.isZero=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3];return 0===b&&0===d&&0===c&&0===e},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){var c=a.elements,d=c[0],e=c[1],f=c[2],g=c[3],h=b.elements,i=h[0],j=h[1],k=h[2],l=h[3],m=d*i+f*j,n=d*k+f*l,o=e*i+g*j,p=e*k+g*l;return this.set(m,n,o,p)},b.prototype.neg=function(){return this.scale(-1)},b.prototype.one=function(){return this.set(1,0,0,1)},b.prototype.reflection=function(a){var b=g["default"]("n.x",a.x),c=1-2*b*b;return this.set(c,0,0,1)},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[2+a]]},b.prototype.scale=function(a){var b=this.elements,c=b[0]*a,d=b[1]*a,e=b[2]*a,f=b[3]*a;return this.set(c,e,d,f)},b.prototype.set=function(a,b,c,d){var e=this.elements;return e[0]=a,e[2]=b,e[1]=c,e[3]=d,this},b.prototype.sub=function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=a.elements,h=g[0],i=g[1],j=g[2],k=g[3],l=c-h,m=d-i,n=e-j,o=f-k;return this.set(l,n,m,o)},b.prototype.toExponential=function(){for(var a=[],b=0;b<this.dimensions;b++)a.push(this.row(b).map(function(a){return a.toExponential()}).join(" "));return a.join("\n")},b.prototype.toFixed=function(a){e["default"](a)&&f["default"]("digits",a);for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(){for(var a=[],b=0,c=this.dimensions;c>b;b++)a.push(this.row(b).map(function(a){return a.toString()}).join(" "));return a.join("\n")},b.prototype.translation=function(a){var b=a.x;return this.set(1,b,0,1)},b.prototype.zero=function(){return this.set(0,0,0,0)},b.prototype.__add__=function(a){return a instanceof b?this.clone().add(a):void 0},b.prototype.__radd__=function(a){return a instanceof b?a.clone().add(this):void 0},b.prototype.__mul__=function(a){return a instanceof b?this.clone().mul(a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?a.clone().mul(this):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__pos__=function(){return this.clone()},b.prototype.__neg__=function(){return this.clone().scale(-1)},b.prototype.__sub__=function(a){return a instanceof b?this.clone().sub(a):void 0},b.prototype.__rsub__=function(a){return a instanceof b?a.clone().sub(this):void 0},b.one=function(){return new b(new Float32Array([1,0,0,1]))},b.reflection=function(a){return b.zero().reflection(a)},b.zero=function(){return new b(new Float32Array([0,0,0,0]))},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/facets/ReflectionFacetE2.js",["../checks/mustBeArray","../checks/mustBeString","../math/R2","../math/Mat2R","../i18n/readOnly","../utils/Shareable"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function g(b){a.call(this,"ReflectionFacetE2"),this.matrix=e["default"].one(),this.name=c["default"]("name",b),this._normal=(new d["default"]).zero(),this._normal.modified=!0}return i(g,a),Object.defineProperty(g.prototype,"normal",{get:function(){return this._normal},set:function(){throw new Error(f["default"]("normal").message)},enumerable:!0,configurable:!0}),g.prototype.destructor=function(){this._normal=void 0,this.matrix=void 0,a.prototype.destructor.call(this)},g.prototype.getProperty=function(a){return void c["default"]("name",a)},g.prototype.setProperty=function(a,d){return c["default"]("name",a),b["default"]("value",d),this},g.prototype.setUniforms=function(a,b){this._normal.modified&&(this.matrix.reflection(this._normal),this._normal.modified=!1),a.mat2(this.name,this.matrix,!1,b)},g}(g["default"]),a("default",h)}}}),System.register("davinci-eight/facets/ReflectionFacetE3.js",["../math/CartesianE3","../checks/mustBeArray","../checks/mustBeString","../math/R3","../math/Mat4R","../i18n/readOnly","../utils/Shareable"],function(a){var b,c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function h(c){a.call(this,"ReflectionFacetE3"),this.matrix=f["default"].one(),this.name=d["default"]("name",c),this._normal=(new e["default"]).copy(b["default"].zero),this._normal.modified=!0}return j(h,a),Object.defineProperty(h.prototype,"normal",{get:function(){return this._normal},set:function(){throw new Error(g["default"]("normal").message)},enumerable:!0,configurable:!0}),h.prototype.destructor=function(){this._normal=void 0,this.matrix=void 0,a.prototype.destructor.call(this)},h.prototype.getProperty=function(a){return void d["default"]("name",a)},h.prototype.setProperty=function(a,b){return d["default"]("name",a),c["default"]("value",b),this},h.prototype.setUniforms=function(a,b){this._normal.modified&&(this.matrix.reflection(this._normal),this._normal.modified=!1),a.mat4(this.name,this.matrix,!1,b)},h}(h["default"]),a("default",i)}}}),System.register("davinci-eight/facets/Vector3Facet.js",["../checks/mustBeObject","../checks/mustBeString","../utils/Shareable"],function(a){function b(){return f}var c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f="Vector3Facet",g=function(a){function e(e,f){a.call(this,"Vector3Facet"),this._name=d["default"]("name",e,b),this._vector=c["default"]("vector",f,b)}return h(e,a),e.prototype.destructor=function(){a.prototype.destructor.call(this)},e.prototype.getProperty=function(){return void 0},e.prototype.setProperty=function(){return this},e.prototype.setUniforms=function(a,b){a.vec3(this._name,this._vector,b)},e}(e["default"]),a("default",g)}}}),System.register("davinci-eight/math/quadSpinorE2.js",["../checks/isDefined","../checks/isNumber"],function(a){function b(a){if(c["default"](a)){var b=a.α,e=a.xy;return d["default"](b)&&d["default"](e)?b*b+e*e:void 0}return void 0}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/SpinG2.js",["../math/dotVectorCartesianE2","../math/dotVectorE2","../checks/isDefined","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../math/quadSpinorE2","../math/quadVectorE2","../math/rotorFromDirections","../math/VectorN","../math/wedgeXY"],function(a){function b(){var a=[0,0];return a[o]=1,a[n]=0,a}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=0,o=1,p=Math.PI,q=Math.abs,r=Math.atan2,s=Math.exp,t=Math.log,u=Math.cos,v=Math.sin,w=Math.sqrt,x=function(a){function l(c,d){void 0===c&&(c=b()),void 0===d&&(d=!1),a.call(this,c,d,2)}return y(l,a),Object.defineProperty(l.prototype,"xy",{get:function(){return this.coords[n]},set:function(a){g["default"]("xy",a),this.modified=this.modified||this.xy!==a,this.coords[n]=a},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"α",{get:function(){return this.coords[o]},set:function(a){g["default"]("α",a),this.modified=this.modified||this.α!==a,this.coords[o]=a},enumerable:!0,configurable:!0}),l.prototype.add=function(a,b){return void 0===b&&(b=1),h["default"]("spinor",a),g["default"]("α",b),this.xy+=a.xy*b,this.α+=a.α*b,this},l.prototype.add2=function(a,b){return this.α=a.α+b.α,this.xy=a.xy+b.xy,this},l.prototype.addPseudo=function(a){return g["default"]("β",a),this},l.prototype.addScalar=function(a){return g["default"]("α",a),this.α+=a,this},l.prototype.adj=function(){throw new Error("TODO: SpinG2.adj")},l.prototype.angle=function(){return this.log().grade(2)},l.prototype.clone=function(){return l.copy(this)},l.prototype.conj=function(){return this.xy=-this.xy,this},l.prototype.copy=function(a){return h["default"]("spinor",a),this.xy=g["default"]("spinor.xy",a.xy),this.α=g["default"]("spinor.α",a.α),this},l.prototype.copyScalar=function(a){return this.zero().addScalar(a)},l.prototype.copySpinor=function(a){return this.copy(a)},l.prototype.copyVector=function(){return this.zero()},l.prototype.cos=function(){throw new Error("SpinG2.cos")},l.prototype.cosh=function(){throw new Error("SpinG2.cosh")},l.prototype.div=function(a){return this.div2(this,a)},l.prototype.div2=function(a,b){var c=a.α,d=a.xy,e=b.α,f=b.xy,g=i["default"](b);return this.α=(c*e+d*f)/g,this.xy=(d*e-c*f)/g,this},l.prototype.divByScalar=function(a){return this.xy/=a,this.α/=a,this},l.prototype.exp=function(){var a=this.α,b=this.xy,c=s(a),d=w(b*b),e=c*(0!==d?v(d)/d:1);return this.α=c*u(d),this.xy=b*e,this},l.prototype.inv=function(){return this.conj(),this.divByScalar(this.squaredNormSansUnits()),this},l.prototype.lco=function(a){return this.lco2(this,a)},l.prototype.lco2=function(){return this},l.prototype.lerp=function(a,b){var c=l.copy(a),d=this.clone(),e=c.mul(d.inv());return e.log(),e.scale(b),e.exp(),this.copy(e),this},l.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},l.prototype.log=function(){var a=this.α,b=this.xy,c=b*b,d=w(c),e=q(a),f=w(a*a+c);this.α=t(f);var g=r(d,e)/d;return this.xy=b*g,this},l.prototype.magnitude=function(){return this.norm()},l.prototype.magnitudeSansUnits=function(){return w(this.squaredNormSansUnits())},l.prototype.mul=function(a){return this.mul2(this,a)},l.prototype.mul2=function(a,b){var c=a.α,d=a.xy,e=b.α,f=b.xy;return this.α=c*e-d*f,this.xy=c*f+d*e,this},l.prototype.neg=function(){return this.α=-this.α,this.xy=-this.xy,this},l.prototype.norm=function(){var a=this.magnitudeSansUnits();return this.zero().addScalar(a)},l.prototype.direction=function(){var a=this.magnitudeSansUnits();return this.xy=this.xy/a,this.α=this.α/a,this},l.prototype.one=function(){return this.α=1,this.xy=0,this},l.prototype.pow=function(){throw new Error("SpinG2.pow")},l.prototype.quad=function(){return this.squaredNorm()},l.prototype.sin=function(){throw new Error("SpinG2.sin")},l.prototype.sinh=function(){throw new Error("SpinG2.sinh")},l.prototype.squaredNorm=function(){var a=this.squaredNormSansUnits();return this.zero().addScalar(a)},l.prototype.squaredNormSansUnits=function(){return i["default"](this)},l.prototype.rco=function(a){return this.rco2(this,a)},l.prototype.rco2=function(){return this},l.prototype.rev=function(){return this.xy*=-1,this},l.prototype.reflect=function(a){var b=this.α,c=this.xy,d=a.x,e=a.y,f=d*d+e*e;return this.α=f*b,this.xy=-f*c,this},l.prototype.rotate=function(){return console.warn("SpinG2.rotate is not implemented"),this},l.prototype.rotorFromDirections=function(a,b){return e["default"](k["default"](a,b,j["default"],d["default"],this))?this:void 0},l.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=v(c);return this.xy=-a.xy*d,this.α=u(c),this},l.prototype.scp=function(a){return this.scp2(this,a)},l.prototype.scp2=function(){return this},l.prototype.scale=function(a){return g["default"]("α",a),this.xy*=a,this.α*=a,this},l.prototype.slerp=function(a,b){var c=l.copy(a),d=this.clone(),e=c.mul(d.inv());return e.log(),e.scale(b),e.exp(),this.copy(e),this},l.prototype.sub=function(a,b){return void 0===b&&(b=1),h["default"]("s",a),g["default"]("α",b),this.xy-=a.xy*b,this.α-=a.α*b,this},l.prototype.sub2=function(a,b){return this.xy=a.xy-b.xy,this.α=a.α-b.α,this},l.prototype.spinor=function(a,b){var d=a.x,e=a.y,f=b.x,g=b.y;return this.α=c["default"](d,e,f,g),this.xy=m["default"](d,e,0,f,g,0),this},l.prototype.grade=function(a){switch(f["default"]("grade",a),a){case 0:this.xy=0;break;case 2:this.α=0;break;default:this.α=0,this.xy=0}return this},l.prototype.toExponential=function(){return this.toString()},l.prototype.toFixed=function(){return this.toString()},l.prototype.toString=function(){return"SpinG2({β: "+this.xy+", w: "+this.α+"})"},l.prototype.ext=function(a){return this.ext2(this,a)},l.prototype.ext2=function(){return this},l.prototype.zero=function(){return this.α=0,this.xy=0,this},l.copy=function(a){return(new l).copy(a)},l.lerp=function(a,b,c){return l.copy(a).lerp(b,c)},l.rotorFromDirections=function(a,b){return(new l).rotorFromDirections(a,b)},l}(l["default"]),a("default",x)}}}),System.register("davinci-eight/models/ModelE2.js",["../checks/mustBeString","../math/G2","../math/R2","../math/SpinG2","../i18n/readOnly","../utils/Shareable"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function g(f){void 0===f&&(f="ModelE2"),a.call(this,b["default"]("type",f)),this._position=(new c["default"]).zero(),this._attitude=(new c["default"]).zero().addScalar(1),this._posCache=new d["default"],this._attCache=new e["default"],this._position.modified=!0,this._attitude.modified=!0}return i(g,a),g.prototype.destructor=function(){this._position=void 0,this._attitude=void 0},Object.defineProperty(g.prototype,"R",{get:function(){return this._attitude},set:function(){throw new Error(f["default"](g.PROP_ATTITUDE).message)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"X",{get:function(){return this._position},set:function(){throw new Error(f["default"](g.PROP_POSITION).message)},enumerable:!0,configurable:!0}),g.prototype.getProperty=function(a){switch(a){case g.PROP_ATTITUDE:return this._attCache.copy(this._attitude).coords;case g.PROP_POSITION:return this._posCache.copy(this._position).coords;default:return void console.warn("ModelE2.getProperty "+a)}},g.prototype.setProperty=function(a,b){switch(a){case g.PROP_ATTITUDE:this._attCache.coords=b,this._attitude.copySpinor(this._attCache);break;case g.PROP_POSITION:this._posCache.coords=b,this._position.copyVector(this._posCache);break;default:console.warn("ModelE2.setProperty "+a)}return this},g.PROP_ATTITUDE="R",g.PROP_POSITION="X",g}(g["default"]),a("default",h)}}}),System.register("davinci-eight/renderers/initWebGL.js",["../checks/isDefined"],function(a){function b(a,b){if(c["default"](a)){var d;try{d=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)}catch(e){}if(d)return d;throw new Error("Unable to initialize WebGL. Your browser may not support it.")}return void 0}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/utils/getCanvasElementById.js",["../checks/mustBeString","../checks/mustBeObject"],function(a){function b(a,b){void 0===b&&(b=window.document),c["default"]("elementId",a),d["default"]("document",b);var e=b.getElementById(a);if(e instanceof HTMLCanvasElement)return e;throw new Error(a+" is not an HTMLCanvasElement.")}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/utils/animation.js",["../checks/expectArg"],function(a){function b(){}function c(a){if(a){var b="Exception raised during animate function: "+a;console.warn(b)}}function d(){return!1}function e(a,e){var g=1,h=2,i=3;e=e||{};var j,k,l=f["default"]("options.window",e.window||window).toNotBeNull().value,m=f["default"]("options.setUp",e.setUp||b).value,n=f["default"]("options.tearDown",e.tearDown||c).value,o=f["default"]("options.terminate",e.terminate||d).toNotBeNull().value,p=!1,q=0,r=1e3,s=null,t=g,u=function(b){if(j&&(q=q+b-j),j=b,p||o(q/r)){p=!1,l.cancelAnimationFrame(s),w.isRunning?(t=i,j=void 0):console.error("stopSignal received while not running."),l.document.removeEventListener("keydown",v,!1);try{n(k)}catch(c){console.warn("Exception raised during tearDown function: "+c)}}else{s=l.requestAnimationFrame(u);try{a(q/r)}catch(c){k=c,p=!0}}},v=function(a){27===a.keyCode&&(p=!0,a.preventDefault())},w={start:function(){if(w.isRunning)throw new Error("The `start` method may only be called when not running.");m(),l.document.addEventListener("keydown",v,!1),t=h,s=l.requestAnimationFrame(u)},stop:function(){if(!w.isRunning)throw new Error("The `stop` method may only be called when running.");p=!0},reset:function(){if(!w.isPaused)throw new Error("The `reset` method may only be called when paused.");j=void 0,q=0,t=g},get time(){return q/r},lap:function(){if(!w.isRunning)throw new Error("The `lap` method may only be called when running.")},get isRunning(){return t===h},get isPaused(){return t===i}};return w}var f;return a("default",e),{setters:[function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/visual/createArrow.js",["../facets/ColorFacet","../scene/Drawable","../facets/ModelFacet","../i18n/readOnly","./visualCache"],function(a){function b(){var a=g["default"].arrow(),b=g["default"].program(),j=new d["default"](a,b);a.release(),a=void 0,b.release(),b=void 0;var k=new e["default"];j.setFacet(i,k),k.release(),k=void 0;var l=new c["default"];j.setFacet("color",l),l.release(),l=void 0;var m={get color(){var a=j.getFacet(h),b=a.color;return a.release(),b},set color(a){var b=j.getFacet(h);b.color.copy(a),b.release()},get graphicsBuffers(){return j.graphicsBuffers},set graphicsBuffers(a){throw new Error(f["default"]("graphicsBuffers").message)},get graphicsProgram(){return j.graphicsProgram},set graphicsProgram(a){throw new Error(f["default"]("graphicsProgram").message)},get name(){return j.name},set name(a){j.name=a},get R(){var a=j.getFacet(i),b=a.R;return a.release(),b},set R(a){var b=j.getFacet(i);b.R.copy(a),b.release()},get X(){var a=j.getFacet(i),b=a.X;return a.release(),b},set X(a){var b=j.getFacet(i);b.X.copyVector(a),b.release()},getFacet:function(a){return j.getFacet(a)},setFacet:function(a,b){j.setFacet(a,b)},setUniforms:function(a){j.setUniforms(a)},addRef:function(){return j.addRef()},release:function(){return j.release()},contextFree:function(a){return j.contextFree(a)},contextGain:function(a){return j.contextGain(a)},contextLost:function(a){return j.contextLost(a)}};return m}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h="color",i="model"}}}),System.register("davinci-eight/visual/createBox.js",["../facets/ColorFacet","../scene/Drawable","../facets/ModelFacet","../checks/mustBeNumber","../i18n/readOnly","./visualCache"],function(a){function b(){var a=h["default"].box(),b=h["default"].program(),k=new d["default"](a,b);a.release(),a=void 0,b.release(),b=void 0;var l=new e["default"];k.setFacet(j,l),l.release(),l=void 0;var m=new c["default"];k.setFacet(i,m),m.release(),m=void 0;var n={get color(){var a=k.getFacet(i),b=a.color;return a.release(),b},set color(a){var b=k.getFacet(i);b.color.copy(a),b.release()},get graphicsBuffers(){return k.graphicsBuffers},set graphicsBuffers(a){throw new Error(g["default"]("graphicsBuffers").message)},get graphicsProgram(){return k.graphicsProgram},set graphicsProgram(a){throw new Error(g["default"]("graphicsProgram").message)},get name(){return k.name},set name(a){k.name=a},get R(){var a=k.getFacet(j),b=a.R;return a.release(),b},set R(a){var b=k.getFacet(j);b.R.copySpinor(a),b.release()},get X(){var a=k.getFacet(j),b=a.X;return a.release(),b},set X(a){var b=k.getFacet(j);b.X.copyVector(a),b.release()},get width(){var a=k.getFacet(j),b=a.scaleXYZ.x;return a.release(),b},set width(a){f["default"]("width",a);var b=k.getFacet(j);b.scaleXYZ.x=a,b.release()},get height(){var a=k.getFacet(j),b=a.scaleXYZ.y;return a.release(),b},set height(a){f["default"]("height",a);var b=k.getFacet(j);b.scaleXYZ.y=a,b.release()},get depth(){var a=k.getFacet(j),b=a.scaleXYZ.z;return a.release(),b},set depth(a){f["default"]("depth",a);var b=k.getFacet(j);b.scaleXYZ.z=a,b.release()},getFacet:function(a){return k.getFacet(a)},setFacet:function(a,b){k.setFacet(a,b)},setUniforms:function(a){k.setUniforms(a)},addRef:function(){return k.addRef()},release:function(){return k.release()},contextFree:function(a){return k.contextFree(a)},contextGain:function(a){return k.contextGain(a)},contextLost:function(a){return k.contextLost(a)}};return n}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i="color",j="model"}}}),System.register("davinci-eight/visual/createCylinder.js",["../facets/ColorFacet","../scene/Drawable","../math/G3","../facets/ModelFacet","../i18n/readOnly","./visualCache"],function(a){function b(){var a=e["default"].e2.clone(),b=h["default"].cylinder(),k=h["default"].program(),l=new d["default"](b,k);b.release(),b=void 0,k.release(),k=void 0;var m=new f["default"];l.setFacet(j,m),m.release(),m=void 0;var n=new c["default"];l.setFacet(i,n),n.release(),n=void 0;var o=function(){var b=l.getFacet(j),c=b.R;c.rotorFromDirections(a,e["default"].e2),b.release()};a.on("change",o);var p={get color(){var a=l.getFacet(i),b=a.color;return a.release(),b},set color(a){var b=l.getFacet(i);b.color.copy(a),b.release()},get graphicsBuffers(){return l.graphicsBuffers},set graphicsBuffers(a){throw new Error(g["default"]("graphicsBuffers").message)},get graphicsProgram(){return l.graphicsProgram},set graphicsProgram(a){throw new Error(g["default"]("graphicsProgram").message)},get name(){return l.name},set name(a){l.name=a},get R(){var a=l.getFacet(j),b=a.R;return a.release(),b},set R(a){throw new Error(g["default"]("R").message)},get X(){var a=l.getFacet(j),b=a.X;return a.release(),b},set X(a){var b=l.getFacet(j);b.X.copyVector(a),b.release()},get axis(){return a},set axis(b){a.copy(b)},getFacet:function(a){return l.getFacet(a)},setFacet:function(a,b){l.setFacet(a,b)},setUniforms:function(a){l.setUniforms(a)},addRef:function(){return l.addRef()},release:function(){var b=l.release();return 0===b&&a.off("change",o),b},contextFree:function(a){return l.contextFree(a)},contextGain:function(a){return l.contextGain(a)},contextLost:function(a){return l.contextLost(a)}};return p;

}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i="color",j="model"}}}),System.register("davinci-eight/math/clamp.js",["../checks/mustBeNumber"],function(a){function b(a,b,d){return c["default"]("x",a),c["default"]("min",b),c["default"]("max",d),b>a?b:a>d?d:a}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/core/principalAngle.js",[],function(a){function b(a){return a>2*Math.PI?b(a-2*Math.PI):0>a?b(a+2*Math.PI):a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/Color.js",["../math/clamp","../checks/mustBeArray","../checks/mustBeNumber","../core/principalAngle","../math/VectorN"],function(a){var b,c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=Math.pow,h=0,i=1,j=2,k=function(a){function f(b,c,d){a.call(this,[b,c,d],!1,3)}return l(f,a),Object.defineProperty(f.prototype,"r",{get:function(){return this.coords[h]},set:function(a){this.coords[h]=b["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"g",{get:function(){return this.coords[i]},set:function(a){this.coords[i]=b["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"b",{get:function(){return this.coords[j]},set:function(a){this.coords[j]=b["default"](a,0,1)},enumerable:!0,configurable:!0}),f.prototype.clone=function(){return new f(this.r,this.g,this.b)},f.prototype.copy=function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},f.prototype.interpolate=function(a,b){return this.r+=(a.r-this.r)*b,this.g+=(a.g-this.g)*b,this.b+=(a.b-this.b)*b,this},Object.defineProperty(f.prototype,"luminance",{get:function(){return f.luminance(this.r,this.g,this.b)},enumerable:!0,configurable:!0}),f.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+")"},f.luminance=function(a,b,c){d["default"]("r",a),d["default"]("g",b),d["default"]("b",c);var e=2.2;return.2126*g(a,e)+.7152*g(c,e)+.0722*g(c,e)},f.fromColor=function(a){return new f(a.r,a.g,a.b)},f.fromCoords=function(a){c["default"]("coords",a);var b=d["default"]("r",a[h]),e=d["default"]("g",a[i]),g=d["default"]("b",a[j]);return new f(b,e,g)},f.fromHSL=function(a,b,c){function g(a,b,d){var e=c-.5*h;return new f(a+e,b+e,d+e)}d["default"]("H",a),d["default"]("S",b),d["default"]("L",c);var h=(1-Math.abs(2*c-1))*b,i=e["default"](a)/Math.PI*3%6,j=h*(1-Math.abs(i%2-1));return i>=0&&1>i?g(h,j,0):i>=1&&2>i?g(j,h,0):i>=2&&3>i?g(0,h,h*(i-2)):i>=3&&4>i?g(0,h*(4-i),h):i>=4&&5>i?g(j,0,h):i>=5&&6>i?g(h,0,j):g(0,0,0)},f.fromRGB=function(a,b,c){return d["default"]("r",a),d["default"]("g",b),d["default"]("b",c),new f(a,b,c)},f.interpolate=function(a,b,c){return f.fromColor(a).interpolate(b,c)},f.black=new f(0,0,0),f.blue=new f(0,0,1),f.green=new f(0,1,0),f.cyan=new f(0,1,1),f.red=new f(1,0,0),f.magenta=new f(1,0,1),f.yellow=new f(1,1,0),f.white=new f(1,1,1),f}(f["default"]),a("default",k)}}}),System.register("davinci-eight/facets/ColorFacet.js",["../core/Color","../core","../checks/mustBeNumber","../utils/Shareable","../core/GraphicsProgramSymbols"],function(a){function b(a){if("string"!=typeof a){var b="ColorFacet property 'name' must be a string.";if(d["default"].strict)throw new TypeError(b);console.warn(b)}switch(a){case k.PROP_RGB:return;default:var b="ColorFacet property 'name' must be one of "+[k.PROP_RGB,k.PROP_RGBA,k.PROP_RED,k.PROP_GREEN,k.PROP_BLUE,k.PROP_ALPHA]+".";if(d["default"].strict)throw new Error(b);console.warn(b)}}var c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=0,i=1,j=2,k=function(a){function d(){a.call(this,"ColorFacet"),this.color=c["default"].fromRGB(1,1,1),this.a=1,this.uColorName=g["default"].UNIFORM_COLOR,this.uAlphaName=g["default"].UNIFORM_ALPHA}return l(d,a),d.prototype.destructor=function(){this.color=void 0,a.prototype.destructor.call(this)},d.prototype.incRef=function(){return this.addRef(),this},d.prototype.decRef=function(){return this.release(),this},Object.defineProperty(d.prototype,"r",{get:function(){return this.color.r},set:function(a){e["default"]("red",a),this.color.r=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"g",{get:function(){return this.color.g},set:function(a){e["default"]("green",a),this.color.g=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"b",{get:function(){return this.color.b},set:function(a){e["default"]("blue",a),this.color.b=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"α",{get:function(){return this.a},set:function(a){this.a=a},enumerable:!0,configurable:!0}),d.prototype.scaleRGB=function(a){return this.r*=a,this.g*=a,this.b*=a,this},d.prototype.scaleRGBA=function(a){return this.r*=a,this.g*=a,this.b*=a,this.α*=a,this},d.prototype.setRGB=function(a,b,c){return this.r=a,this.g=b,this.b=c,this},d.prototype.setRGBA=function(a,b,c,d){return this.r=a,this.g=b,this.b=c,this.α=d,this},d.prototype.getProperty=function(a){switch(b(a),a){case d.PROP_RGB:return[this.r,this.g,this.b];case d.PROP_RED:return[this.r];case d.PROP_GREEN:return[this.g];default:return void 0}},d.prototype.setProperty=function(a,c){switch(b(a),a){case d.PROP_RGB:this.r=c[h],this.g=c[i],this.b=c[j];break;case d.PROP_RED:this.r=c[h]}return this},d.prototype.setUniforms=function(a,b){this.uColorName&&a.vector3(this.uColorName,this.color.coords,b),this.uAlphaName&&a.uniform1f(this.uAlphaName,this.a,b)},d.PROP_RGB="rgb",d.PROP_RGBA="rgba",d.PROP_RED="r",d.PROP_GREEN="g",d.PROP_BLUE="b",d.PROP_ALPHA="a",d}(f["default"]),a("default",k)}}}),System.register("davinci-eight/collections/StringIUnknownMap.js",["../utils/Shareable"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(){a.call(this,"StringIUnknownMap"),this.elements={}}return d(b,a),b.prototype.destructor=function(){var b=this;this.forEach(function(a){b.putWeakRef(a,void 0)}),a.prototype.destructor.call(this)},b.prototype.exists=function(a){var b=this.elements[a];return b?!0:!1},b.prototype.get=function(a){var b=this.elements[a];return b?(b.addRef(),b):void 0},b.prototype.getWeakRef=function(a){return this.elements[a]},b.prototype.put=function(a,b){b&&b.addRef(),this.putWeakRef(a,b)},b.prototype.putWeakRef=function(a,b){var c=this.elements,d=c[a];d&&d.release(),c[a]=b},b.prototype.forEach=function(a){for(var b=this.keys,c=0,d=b.length;d>c;c++){var e=b[c];a(e,this.elements[e])}},Object.defineProperty(b.prototype,"keys",{get:function(){return Object.keys(this.elements)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"values",{get:function(){for(var a=[],b=this.keys,c=0,d=b.length;d>c;c++){var e=b[c];a.push(this.elements[e])}return a},enumerable:!0,configurable:!0}),b.prototype.remove=function(a){var b=this.elements[a];return delete this.elements[a],b},b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/scene/Drawable.js",["../i18n/readOnly","../utils/Shareable","../collections/StringIUnknownMap"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function c(b,c){a.call(this,"Drawable"),this._graphicsBuffers=b,this._graphicsBuffers.addRef(),this._graphicsProgram=c,this._graphicsProgram.addRef(),this._facets=new d["default"]}return f(c,a),c.prototype.destructor=function(){this._graphicsBuffers.release(),this._graphicsBuffers=void 0,this._graphicsProgram.release(),this._graphicsProgram=void 0,this._facets.release(),this._facets=void 0,a.prototype.destructor.call(this)},c.prototype.draw=function(a){var b=this._graphicsProgram;b.use(a),this.setUniforms(a),this._graphicsBuffers.draw(b,a)},c.prototype.setUniforms=function(a){var b=this,c=this._facets;c.forEach(function(c,d){d.setUniforms(b._graphicsProgram,a)})},c.prototype.contextFree=function(a){this._graphicsBuffers.contextFree(a),this._graphicsProgram.contextFree(a)},c.prototype.contextGain=function(a){this._graphicsBuffers.contextGain(a),this._graphicsProgram.contextGain(a)},c.prototype.contextLost=function(a){this._graphicsBuffers.contextLost(a),this._graphicsProgram.contextLost(a)},c.prototype.getFacet=function(a){return this._facets.get(a)},c.prototype.setFacet=function(a,b){this._facets.put(a,b)},Object.defineProperty(c.prototype,"graphicsBuffers",{get:function(){return this._graphicsBuffers.addRef(),this._graphicsBuffers},set:function(){throw new Error(b["default"]("graphicsBuffers").message)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"graphicsProgram",{get:function(){return this._graphicsProgram.addRef(),this._graphicsProgram},set:function(){throw new Error(b["default"]("graphicsProgram").message)},enumerable:!0,configurable:!0}),c}(c["default"]),a("default",e)}}}),System.register("davinci-eight/models/ModelE3.js",["../checks/mustBeString","../math/G3","../math/R3","../math/SpinG3","../i18n/readOnly","../utils/Shareable"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function g(f){void 0===f&&(f="ModelE3"),a.call(this,b["default"]("type",f)),this._position=(new c["default"]).zero(),this._attitude=(new c["default"]).zero().addScalar(1),this._posCache=new d["default"],this._attCache=new e["default"],this._position.modified=!0,this._attitude.modified=!0}return i(g,a),g.prototype.destructor=function(){this._position=void 0,this._attitude=void 0,a.prototype.destructor.call(this)},Object.defineProperty(g.prototype,"R",{get:function(){return this._attitude},set:function(){throw new Error(f["default"](g.PROP_ATTITUDE).message)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"X",{get:function(){return this._position},set:function(){throw new Error(f["default"](g.PROP_POSITION).message)},enumerable:!0,configurable:!0}),g.prototype.getProperty=function(a){switch(a){case g.PROP_ATTITUDE:return this._attCache.copy(this._attitude).coords;case g.PROP_POSITION:return this._posCache.copy(this._position).coords;default:return void console.warn("ModelE3.getProperty "+a)}},g.prototype.setProperty=function(a,b){switch(a){case g.PROP_ATTITUDE:this._attCache.coords=b,this._attitude.copySpinor(this._attCache);break;case g.PROP_POSITION:this._posCache.coords=b,this._position.copyVector(this._posCache);break;default:console.warn("ModelE3.setProperty "+a)}return this},g.PROP_ATTITUDE="R",g.PROP_POSITION="X",g}(g["default"]),a("default",h)}}}),System.register("davinci-eight/facets/ModelFacet.js",["../math/Mat3R","../math/Mat4R","../models/ModelE3","../checks/mustBeArray","../checks/mustBeString","../math/R3","../i18n/readOnly","../core/GraphicsProgramSymbols"],function(a){var b,c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function d(d){void 0===d&&(d="ModelFacet"),a.call(this,f["default"]("type",d)),this._scaleXYZ=new g["default"]([1,1,1]),this.matM=c["default"].one(),this.matN=b["default"].one(),this.matR=c["default"].one(),this.matS=c["default"].one(),this.matT=c["default"].one(),this._scaleXYZ.modified=!0}return k(d,a),d.prototype.destructor=function(){this._scaleXYZ=void 0,this.matM=void 0,this.matN=void 0,this.matR=void 0,this.matS=void 0,this.matT=void 0,a.prototype.destructor.call(this)},Object.defineProperty(d.prototype,"scaleXYZ",{get:function(){return this._scaleXYZ},set:function(){throw new Error(h["default"](d.PROP_SCALEXYZ).message)},enumerable:!0,configurable:!0}),d.prototype.setUniforms=function(a,b){this.X.modified&&(this.matT.translation(this.X),this.X.modified=!1),this.R.modified&&(this.matR.rotation(this.R),this.R.modified=!1),this.scaleXYZ.modified&&(this.matS.scaling(this.scaleXYZ),this.scaleXYZ.modified=!1),this.matM.copy(this.matT).mul(this.matR).mul(this.matS),this.matN.normalFromMat4R(this.matM),a.mat4(i["default"].UNIFORM_MODEL_MATRIX,this.matM,!1,b),a.mat3(i["default"].UNIFORM_NORMAL_MATRIX,this.matN,!1,b)},d.prototype.setProperty=function(b,c){return f["default"]("name",b),e["default"]("data",c),a.prototype.setProperty.call(this,b,c),this},d.prototype.incRef=function(){return this.addRef(),this},d.prototype.decRef=function(){return this.release(),this},d.PROP_SCALEXYZ="scaleXYZ",d}(d["default"]),a("default",j)}}}),System.register("davinci-eight/geometries/ConeGeometry.js",["../geometries/AxialGeometry","../core/GraphicsProgramSymbols","../topologies/GridTopology","../math/R2","../math/R3"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function b(b,c){a.call(this,b,c),this.radius=1,this.height=1,this.thetaSegments=16}return h(b,a),b.prototype.setAxis=function(b){return a.prototype.setAxis.call(this,b),this},b.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},b.prototype.toPrimitives=function(){for(var a=new d["default"](this.thetaSegments,1),b=a.uLength,g=b-1,h=a.vLength,i=h-1,j=f["default"].copy(this.sliceStart).direction().scale(this.radius),k=(new f["default"]).cross2(j,this.axis).direction().scale(this.radius),l=f["default"].copy(this.axis).scale(this.height),m=0;b>m;m++)for(var n=m/g,o=this.sliceAngle*n,p=Math.cos(o),q=Math.sin(o),r=0;h>r;r++){var s=r/i,t=(new f["default"]).add(j,p*(1-s)).add(k,q*(1-s)).add(l,s),u=f["default"].copy(l).sub(t),v=(new f["default"]).cross2(u,t).cross(u).direction(),w=a.vertex(m,r);w.attributes[c["default"].ATTRIBUTE_POSITION]=t.add(this.position),w.attributes[c["default"].ATTRIBUTE_NORMAL]=v,this.useTextureCoords&&(w.attributes[c["default"].ATTRIBUTE_TEXTURE_COORDS]=new e["default"]([n,s]))}return[a.toDrawPrimitive()]},b.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},b}(b["default"]),a("default",g)}}}),System.register("davinci-eight/geometries/CylinderGeometry.js",["../geometries/AxialGeometry","../core/GraphicsProgramSymbols","../topologies/GridTopology","../math/SpinG3","../math/R2","../math/R3"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,c){a.call(this,b,c),this.radius=1,this.height=1,this.thetaSegments=16}return i(b,a),b.prototype.setAxis=function(b){return a.prototype.setAxis.call(this,b),this},b.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},b.prototype.toPrimitives=function(){for(var a=this.thetaSegments,b=1,h=new d["default"](a,b),i=this.axis,j=e["default"].dual(i),k=0;k<h.uLength;k++)for(var l=k/a,m=j.clone().scale(this.sliceAngle*l/2).exp(),n=0;n<h.vLength;n++){var o=n/b,p=g["default"].copy(this.sliceStart).rotate(m),q=p.clone().scale(this.radius).add(this.axis,o*this.height),r=h.vertex(k,n);r.attributes[c["default"].ATTRIBUTE_POSITION]=q.add(this.position),r.attributes[c["default"].ATTRIBUTE_NORMAL]=p,this.useTextureCoords&&(r.attributes[c["default"].ATTRIBUTE_TEXTURE_COORDS]=new f["default"]([l,o]))}return[h.toDrawPrimitive()]},b.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/geometries/AxialGeometry.js",["../math/CartesianE3","../geometries/Geometry","../checks/mustBeNumber","../checks/mustBeObject","../math/R3"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function c(b,c){a.call(this),this._sliceAngle=2*Math.PI,this.setAxis(b),this.setSliceStart(c?c:f["default"].random().cross(b))}return h(c,a),Object.defineProperty(c.prototype,"axis",{get:function(){return this._axis},set:function(a){this.setAxis(a)},enumerable:!0,configurable:!0}),c.prototype.setAxis=function(a){return e["default"]("axis",a),this._axis=b["default"].direction(a),this.setSliceStart(f["default"].random().cross(this._axis)),this},Object.defineProperty(c.prototype,"sliceAngle",{get:function(){return this._sliceAngle},set:function(a){d["default"]("sliceAngle",a),this._sliceAngle=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"sliceStart",{get:function(){return this._sliceStart},set:function(a){this.setSliceStart(a)},enumerable:!0,configurable:!0}),c.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},c.prototype.setSliceStart=function(a){e["default"]("sliceStart",a),this._sliceStart=b["default"].direction(a)},c.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},c}(c["default"]),a("default",g)}}}),System.register("davinci-eight/geometries/RingGeometry.js",["../core/GraphicsProgramSymbols","../topologies/GridTopology","../geometries/AxialGeometry","../math/R2","../math/G3"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function d(b,c){a.call(this,b,c),this.innerRadius=0,this.outerRadius=1,this.thetaSegments=16}return h(d,a),d.prototype.setAxis=function(b){return a.prototype.setAxis.call(this,b),this},d.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},d.prototype.toPrimitives=function(){for(var a=this.thetaSegments,d=1,g=new c["default"](a,d),h=this.outerRadius,i=this.innerRadius,j=f["default"].fromVector(this.axis),k=f["default"].fromVector(this.sliceStart),l=(new f["default"]).dual(j),m=0;m<g.uLength;m++)for(var n=m/a,o=l.clone().scale(this.sliceAngle*n/2).exp(),p=0;p<g.vLength;p++){var q=p/d,r=k.clone().rotate(o).scale(i+(h-i)*q),s=g.vertex(m,p);s.attributes[b["default"].ATTRIBUTE_POSITION]=r.addVector(this.position),s.attributes[b["default"].ATTRIBUTE_NORMAL]=j,this.useTextureCoords&&(s.attributes[b["default"].ATTRIBUTE_TEXTURE_COORDS]=new e["default"]([n,q]))}return[g.toDrawPrimitive()]},d.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},d}(d["default"]),a("default",g)}}}),System.register("davinci-eight/geometries/ArrowGeometry.js",["../geometries/ConeGeometry","../geometries/CylinderGeometry","../geometries/AxialGeometry","../geometries/RingGeometry","../math/R3"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function d(b,c){a.call(this,b,c),this.heightCone=.2,this.radiusCone=.08,this.radiusShaft=.01,this.thetaSegments=16}return h(d,a),d.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},d.prototype.setAxis=function(b){return a.prototype.setAxis.call(this,b),this},d.prototype.toPrimitives=function(){var a=1-this.heightCone,d=f["default"].copy(this.axis).scale(-1),g=f["default"].copy(this.axis).scale(a).add(this.position),h=f["default"].copy(this.position),i=new b["default"](this.axis,this.sliceStart);i.radius=this.radiusCone,i.height=this.heightCone,i.setPosition(g),i.axis=this.axis,i.sliceAngle=this.sliceAngle,i.thetaSegments=this.thetaSegments,i.useTextureCoords=this.useTextureCoords;var j=new e["default"](d,this.sliceStart);j.innerRadius=this.radiusShaft,j.outerRadius=this.radiusCone,j.setPosition(g),j.sliceAngle=-this.sliceAngle,j.thetaSegments=this.thetaSegments,j.useTextureCoords=this.useTextureCoords;var k=new c["default"](this.axis,this.sliceStart);k.radius=this.radiusShaft,k.height=a,k.setPosition(h),k.sliceAngle=this.sliceAngle,k.thetaSegments=this.thetaSegments,k.useTextureCoords=this.useTextureCoords;var l=new e["default"](d,this.sliceStart);return l.innerRadius=0,l.outerRadius=this.radiusShaft,l.setPosition(h),l.sliceAngle=-this.sliceAngle,l.thetaSegments=this.thetaSegments,l.useTextureCoords=this.useTextureCoords,[i.toPrimitives(),j.toPrimitives(),k.toPrimitives(),l.toPrimitives()].reduce(function(a,b){return a.concat(b)},[])},d.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},d}(d["default"]),a("default",g)}}}),System.register("davinci-eight/topologies/Topology.js",["../geometries/DrawAttribute","../geometries/DrawPrimitive","../checks/mustBeInteger","../geometries/Vertex","../geometries/dataFromVectorN"],function(a){function b(a,b){for(var d={},e=0;e<b.length;e++)for(var f=b[e],h=Object.keys(f.attributes),i=0;i<h.length;i++){var j=h[i],k=g["default"](f.attributes[j]),l=k.length,m=d[j];m||(m=d[j]=new c["default"]([],l));for(var n=0;l>n;n++)m.values.push(k[n])}return d}var c,d,e,f,g,h;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(a,b){this.mode=e["default"]("mode",a),e["default"]("numVertices",b),this.vertices=[];for(var c=0;b>c;c++)this.vertices.push(new f["default"])}return a.prototype.toDrawPrimitive=function(){return new d["default"](this.mode,this.elements,b(this.elements,this.vertices))},a}(),a("default",h)}}}),System.register("davinci-eight/topologies/MeshTopology.js",["../topologies/Topology"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(b,c){a.call(this,b,c)}return d(b,a),b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/topologies/GridTopology.js",["../core/DrawMode","../checks/isDefined","../topologies/MeshTopology","../checks/mustBeArray","../checks/mustBeInteger","../i18n/readOnly"],function(a){function b(a){return j["default"]("segmentCount",a),a+1}function c(a){return i["default"]("segmentCounts",a),a.map(b)}function d(a,b){return j["default"]("uSegments",a),j["default"]("vSegments",b),c([a,b]).reduce(function(a,b){return a*b},1)}function e(a,c,d){d=g["default"](d)?i["default"]("elements",d):[];for(var e=b(a),f=a+e*c,h=2*e*c,j=0,k=1;h>=k;k+=2){d[j]=(k-1)/2,d[j+1]=d[j]+e,d[j+1]%e===a&&d[j+1]!==a&&d[j+1]!==f&&(d[j+2]=d[j+1],d[j+3]=(1+k)/2,j+=2),j+=2}return d}var f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(a){function c(b,c){a.call(this,f["default"].TRIANGLE_STRIP,d(b,c)),this.elements=e(b,c),this._uSegments=b,this._vSegments=c}return m(c,a),Object.defineProperty(c.prototype,"uSegments",{get:function(){return this._uSegments},set:function(){throw new Error(k["default"]("uSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"uLength",{get:function(){return b(this._uSegments)},set:function(){throw new Error(k["default"]("uLength").message)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"vSegments",{get:function(){return this._vSegments},set:function(){throw new Error(k["default"]("vSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"vLength",{get:function(){return b(this._vSegments)},set:function(){throw new Error(k["default"]("vLength").message)},enumerable:!0,configurable:!0}),c.prototype.vertex=function(a,b){return j["default"]("uIndex",a),j["default"]("vIndex",b),this.vertices[(this._vSegments-b)*this.uLength+a]},c}(h["default"]),a("default",l)}}}),System.register("davinci-eight/geometries/CuboidGeometry.js",["../math/Euclidean3","../topologies/GridTopology","../geometries/Geometry","../core/GraphicsProgramSymbols","../checks/mustBeNumber","../math/R3","../math/R2"],function(a){function b(a,b,c){for(var e=h["default"].copy(a[0]).cross(a[1]).direction(),g=h["default"].copy(a[0]).scale(-.5),j=h["default"].copy(a[0]).scale(.5),k=h["default"].copy(a[1]).scale(-.5),l=h["default"].copy(a[1]).scale(.5),m=h["default"].copy(a[2]).scale(.5),n=new d["default"](b,c),o=0;o<n.uLength;o++)for(var p=0;p<n.vLength;p++){var q=o/b,r=p/c,s=h["default"].copy(g).lerp(j,q),t=h["default"].copy(k).lerp(l,r),u=n.vertex(o,p);u.attributes[f["default"].ATTRIBUTE_POSITION]=h["default"].copy(s).add(t).add(m),u.attributes[f["default"].ATTRIBUTE_NORMAL]=e,u.attributes[f["default"].ATTRIBUTE_TEXTURE_COORDS]=new i["default"]([q,r])}return n}var c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function d(){a.call(this),this.iSegments=1,this.jSegments=1,this.kSegments=1,this._a=h["default"].copy(c["default"].e1),this._b=h["default"].copy(c["default"].e2),this._c=h["default"].copy(c["default"].e3),this.sides=[]}return k(d,a),Object.defineProperty(d.prototype,"width",{get:function(){return this._a.magnitude()},set:function(a){g["default"]("width",a),this._a.direction().scale(a)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"height",{get:function(){return this._b.magnitude()},set:function(a){g["default"]("height",a),this._b.direction().scale(a)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"depth",{get:function(){return this._c.magnitude()},set:function(a){g["default"]("depth",a),this._c.direction().scale(a)},enumerable:!0,configurable:!0}),d.prototype.regenerate=function(){this.sides=[],this.sides.push(b([this._a,this._b,this._c],this.iSegments,this.jSegments)),this.sides.push(b([h["default"].copy(this._c).scale(-1),this._b,this._a],this.kSegments,this.jSegments)),this.sides.push(b([this._c,this._b,h["default"].copy(this._a).scale(-1)],this.kSegments,this.jSegments)),this.sides.push(b([h["default"].copy(this._a).scale(-1),this._b,h["default"].copy(this._c).scale(-1)],this.iSegments,this.jSegments)),this.sides.push(b([this._a,h["default"].copy(this._c).scale(-1),this._b],this.iSegments,this.kSegments)),this.sides.push(b([this._a,this._c,h["default"].copy(this._b).scale(-1)],this.iSegments,this.kSegments))},d.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},d.prototype.toPrimitives=function(){return this.regenerate(),this.sides.map(function(a){return a.toDrawPrimitive()})},d.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},d}(e["default"]),a("default",j)}}}),System.register("davinci-eight/geometries/CylinderSimplexGeometry.js",["../geometries/arc3","../geometries/SliceSimplexGeometry","../math/SpinG3","../math/R2","../math/R3"],function(a){function b(a,b,d,e,h,i,j,k,l,m,n){for(var o=g["default"].copy(e).scale(a),p=g["default"].copy(d).scale(.5*b),q=g["default"].copy(d).direction().scale(b/j),r=0;j>=r;r++){for(var s=g["default"].copy(q).scale(r).sub(p),t=[],u=[],v=(j-r)/j,w=c["default"](o,h,i,k),x=0,y=w.length;y>x;x++){var z=w[x].add(s),A=x/k;l.push(z),t.push(l.length-1),u.push(new f["default"]([A,v]))}m.push(t),n.push(u)}}var c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function c(b,c,d,e,f){void 0===b&&(b=1),void 0===c&&(c=1),void 0===d&&(d=g["default"].e2),void 0===e&&(e=!1),void 0===f&&(f=!1),a.call(this,d,void 0,void 0),this.radius=b,this.height=c,this.openTop=e,this.openBottom=f,this.setModified(!0)}return i(c,a),c.prototype.regenerate=function(){this.data=[];var a=this.radius,c=this.height,d=this.flatSegments,h=this.curvedSegments,i=e["default"].dual(this.axis),j=c/2,k=[],l=[],m=[];b(a,this.height,this.axis,this.sliceStart,this.sliceAngle,i,d,h,k,l,m);for(var n,o,p=0;h>p;p++){0!==a?(n=g["default"].copy(k[l[0][p]]),o=g["default"].copy(k[l[0][p+1]])):(n=g["default"].copy(k[l[1][p]]),o=g["default"].copy(k[l[1][p+1]])),n.setY(0).direction(),o.setY(0).direction();for(var q=0;d>q;q++){var r=l[q][p],s=l[q+1][p],t=l[q+1][p+1],u=l[q][p+1],v=n.clone(),w=n.clone(),x=o.clone(),y=o.clone(),z=m[q][p].clone(),A=m[q+1][p].clone(),B=m[q+1][p+1].clone(),C=m[q][p+1].clone();this.triangle([k[s],k[r],k[t]],[w,v,x],[A,z,B]),this.triangle([k[u],k[t],k[r]],[y,x.clone(),v.clone()],[C,B.clone(),z.clone()])}}if(!this.openTop&&a>0){k.push(g["default"].copy(this.axis).scale(j));for(var p=0;h>p;p++){var r=l[d][p+1],s=k.length-1,t=l[d][p],v=g["default"].copy(this.axis),w=g["default"].copy(this.axis),x=g["default"].copy(this.axis),z=m[d][p+1].clone(),A=new f["default"]([z.x,1]),B=m[d][p].clone();this.triangle([k[r],k[s],k[t]],[v,w,x],[z,A,B])}}if(!this.openBottom&&a>0){k.push(g["default"].copy(this.axis).scale(-j));for(var p=0;h>p;p++){var r=l[0][p],s=k.length-1,t=l[0][p+1],v=g["default"].copy(this.axis).scale(-1),w=g["default"].copy(this.axis).scale(-1),x=g["default"].copy(this.axis).scale(-1),z=m[0][p].clone(),A=new f["default"]([z.x,1]),B=m[0][p+1].clone();this.triangle([k[r],k[s],k[t]],[v,w,x],[z,A,B])}}this.setModified(!1)},c}(d["default"]),a("default",h)}}}),System.register("davinci-eight/collections/IUnknownArray.js",["../utils/Shareable"],function(a){function b(a){if(a){for(var b=new d(a),c=0,e=a.length;e>c;c++){var f=a[c];f&&f.release()}return b}return void 0}var c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a;

}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a}],execute:function(){d=function(a){function c(b){void 0===b&&(b=[]),a.call(this,"IUnknownArray"),this._elements=b;for(var c=0,d=this._elements.length;d>c;c++)this._elements[c].addRef()}return e(c,a),c.prototype.destructor=function(){for(var b=0,c=this._elements.length;c>b;b++)this._elements[b].release();this._elements=void 0,a.prototype.destructor.call(this)},c.prototype.get=function(a){var b=this.getWeakRef(a);return b&&b.addRef(),b},c.prototype.getWeakRef=function(a){return this._elements[a]},c.prototype.indexOf=function(a,b){return this._elements.indexOf(a,b)},Object.defineProperty(c.prototype,"length",{get:function(){return this._elements?this._elements.length:void console.warn("IUnknownArray is now a zombie, length is undefined")},enumerable:!0,configurable:!0}),c.prototype.slice=function(a,b){return new c(this._elements.slice(a,b))},c.prototype.splice=function(a,c){return b(this._elements.splice(a,c))},c.prototype.shift=function(){return this._elements.shift()},c.prototype.forEach=function(a){return this._elements.forEach(a)},c.prototype.push=function(a){return a&&a.addRef(),this.pushWeakRef(a)},c.prototype.pushWeakRef=function(a){return this._elements.push(a)},c.prototype.pop=function(){return this._elements.pop()},c.prototype.unshift=function(a){return a.addRef(),this.unshiftWeakRef(a)},c.prototype.unshiftWeakRef=function(a){return this._elements.unshift(a)},c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/resources/GraphicsBuffers.js",["../collections/IUnknownArray","../collections/NumberIUnknownMap","../utils/Shareable"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(b){a.call(this,"GraphicsBuffers"),this.primitives=b,this.buffersByCanvasId=new c["default"]}return f(d,a),d.prototype.destructor=function(){this.primitives=void 0,this.buffersByCanvasId.release(),this.buffersByCanvasId=void 0,a.prototype.destructor.call(this)},d.prototype.contextFree=function(a){this.buffersByCanvasId.exists(a.canvasId)&&this.buffersByCanvasId.remove(a.canvasId)},d.prototype.contextGain=function(a){if(!this.buffersByCanvasId.exists(a.canvasId)){this.buffersByCanvasId.putWeakRef(a.canvasId,new b["default"]([]));for(var c=this.buffersByCanvasId.getWeakRef(a.canvasId),d=this.primitives.length,e=0;d>e;e++){var f=this.primitives[e];c.pushWeakRef(a.createBufferGeometry(f))}}},d.prototype.contextLost=function(a){this.buffersByCanvasId.exists(a)&&this.buffersByCanvasId.remove(a)},d.prototype.draw=function(a,b){var c=this.buffersByCanvasId.getWeakRef(b);if(c)for(var d=c.length,e=0;d>e;e++){var f=c.getWeakRef(e);f.bind(a),f.draw(),f.unbind()}},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/programs/glslAttribType.js",["../core/GraphicsProgramSymbols","../checks/mustBeInteger","../checks/mustBeString"],function(a){function b(a){switch(e["default"]("size",a),a){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Can't compute the GLSL attribute type from size "+a)}}function c(a,c){switch(f["default"]("key",a),e["default"]("size",c),a){case d["default"].ATTRIBUTE_COLOR:return"vec3";default:return b(c)}}var d,e,f;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/collections/NumberIUnknownMap.js",["../utils/Shareable"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c="NumberIUnknownMap",d=function(a){function b(){a.call(this,c),this._elements={}}return e(b,a),b.prototype.destructor=function(){this.forEach(function(a,b){b&&b.release()}),this._elements=void 0},b.prototype.exists=function(a){var b=this._elements[a];return b?!0:!1},b.prototype.get=function(a){var b=this.getWeakRef(a);return b&&b.addRef(),b},b.prototype.getWeakRef=function(a){return this._elements[a]},b.prototype.put=function(a,b){b&&b.addRef(),this.putWeakRef(a,b)},b.prototype.putWeakRef=function(a,b){var c=this._elements,d=c[a];d&&d.release(),c[a]=b},b.prototype.forEach=function(a){for(var b=this.keys,c=0,d=b.length;d>c;c++){var e=b[c],f=this._elements[e];a(e,f)}},Object.defineProperty(b.prototype,"keys",{get:function(){return Object.keys(this._elements).map(function(a){return parseFloat(a)})},enumerable:!0,configurable:!0}),b.prototype.remove=function(a){this.put(a,void 0),delete this._elements[a]},b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/core/AttribLocation.js",["../checks/mustBeObject","../checks/mustBeString","../i18n/readOnly"],function(a){var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,d){b["default"]("manager",a),this._name=c["default"]("name",d)}return Object.defineProperty(a.prototype,"index",{get:function(){return this._index},set:function(){throw new Error(d["default"]("index").message)},enumerable:!0,configurable:!0}),a.prototype.contextFree=function(){this._index=void 0,this._context=void 0},a.prototype.contextGain=function(a,b){this._index=a.getAttribLocation(b,this._name),this._context=a},a.prototype.contextLost=function(){this._index=void 0,this._context=void 0},a.prototype.vertexPointer=function(a,b,c,d){void 0===b&&(b=!1),void 0===c&&(c=0),void 0===d&&(d=0),this._context.vertexAttribPointer(this._index,a,this._context.FLOAT,b,c,d)},a.prototype.enable=function(){this._context.enableVertexAttribArray(this._index)},a.prototype.disable=function(){this._context.disableVertexAttribArray(this._index)},a.prototype.toString=function(){return["attribute",this._name].join(" ")},a}(),a("default",e)}}}),System.register("davinci-eight/programs/makeWebGLShader.js",[],function(a){function b(a,b,c){var d=a.createShader(c);a.shaderSource(d,b),a.compileShader(d);var e=a.getShaderParameter(d,a.COMPILE_STATUS);if(e)return d;if(a.isContextLost())throw new Error("Context lost while compiling shader");var f=a.getShaderInfoLog(d);throw a.deleteShader(d),new Error("Error compiling shader: "+f)}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/programs/makeWebGLProgram.js",["../programs/makeWebGLShader"],function(a){function b(a,b,d,e){var f=c["default"](a,b,a.VERTEX_SHADER),g=c["default"](a,d,a.FRAGMENT_SHADER),h=a.createProgram();a.attachShader(h,f),a.attachShader(h,g);for(var i=0;i<e.length;++i)a.bindAttribLocation(h,i,e[i]);a.linkProgram(h);var j=a.getProgramParameter(h,a.LINK_STATUS);if(j||a.isContextLost())return h;var k=a.getProgramInfoLog(h);throw a.detachShader(h,f),a.deleteShader(f),a.detachShader(h,g),a.deleteShader(g),a.deleteProgram(h),new Error("Error linking program: "+k)}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/core/UniformLocation.js",["../checks/expectArg"],function(a){var b,c;return{setters:[function(a){b=a}],execute:function(){c=function(){function a(a,c){b["default"]("manager",a).toBeObject().value,this._name=b["default"]("name",c).toBeString().value}return a.prototype.contextFree=function(){this.contextLost()},a.prototype.contextGain=function(a,b){this.contextLost(),this._context=a,this._location=a.getUniformLocation(b,this._name),this._program=b},a.prototype.contextLost=function(){this._context=void 0,this._location=void 0,this._program=void 0},a.prototype.vec1=function(a){return this._context.uniform1f(this._location,a.x),this},a.prototype.vec2=function(a){return this._context.uniform2f(this._location,a.x,a.y),this},a.prototype.vec3=function(a){return this._context.uniform3f(this._location,a.x,a.y,a.z),this},a.prototype.vec4=function(a){return this._context.uniform4f(this._location,a.x,a.y,a.z,a.w),this},a.prototype.uniform1f=function(a){this._context.uniform1f(this._location,a)},a.prototype.uniform2f=function(a,b){this._context.uniform2f(this._location,a,b)},a.prototype.uniform3f=function(a,b,c){this._context.uniform3f(this._location,a,b,c)},a.prototype.uniform4f=function(a,b,c,d){this._context.uniform4f(this._location,a,b,c,d)},a.prototype.mat2=function(a,b){return void 0===b&&(b=!1),this._context.uniformMatrix2fv(this._location,b,a.elements),this},a.prototype.mat3=function(a,b){return void 0===b&&(b=!1),this._context.uniformMatrix3fv(this._location,b,a.elements),this},a.prototype.mat4=function(a,b){return void 0===b&&(b=!1),this._context.uniformMatrix4fv(this._location,b,a.elements),this},a.prototype.vector2=function(a){this._context.uniform2fv(this._location,a)},a.prototype.vector3=function(a){this._context.uniform3fv(this._location,a)},a.prototype.vector4=function(a){this._context.uniform4fv(this._location,a)},a.prototype.toString=function(){return["uniform",this._name].join(" ")},a}(),a("default",c)}}}),System.register("davinci-eight/programs/SimpleWebGLProgram.js",["../core/AttribLocation","../programs/makeWebGLProgram","../checks/mustBeArray","../checks/mustBeObject","../checks/mustBeString","../core/UniformLocation","../utils/Shareable"],function(a){var b,c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function h(b,c,g,h){void 0===h&&(h=[]),a.call(this,"SimpleWebGLProgram"),this.attributes={},this.uniforms={},this.context=e["default"]("context",b),b.addRef(),this.vertexShader=f["default"]("vertexShader",c),this.fragmentShader=f["default"]("fragmentShader",g),this.attribs=d["default"]("attribs",h),b.addContextListener(this),b.synchronize(this)}return j(h,a),h.prototype.destructor=function(){var a=this.context,b=a.canvasId;if(this.program){var c=a.gl;c?c.isContextLost()?this.contextLost(b):this.contextFree(a):console.warn("memory leak: WebGLProgram has not been deleted because WebGLRenderingContext is not available anymore.")}a.removeContextListener(this),this.context.release(),this.context=void 0},h.prototype.contextGain=function(){var a=this.context,d=a.gl;if(!this.program){this.program=c["default"](a.gl,this.vertexShader,this.fragmentShader,this.attribs);for(var e=this.program,f=this.attributes,h=this.uniforms,i=d.getProgramParameter(e,d.ACTIVE_ATTRIBUTES),j=0;i>j;j++){var k=d.getActiveAttrib(e,j),l=k.name;f[l]||(f[l]=new b["default"](a,l))}for(var m=d.getProgramParameter(e,d.ACTIVE_UNIFORMS),n=0;m>n;n++){var o=d.getActiveUniform(e,n),p=o.name;h[p]||(h[p]=new g["default"](a,p))}for(var q in f)f.hasOwnProperty(q)&&f[q].contextGain(d,e);for(var r in h)h.hasOwnProperty(r)&&h[r].contextGain(d,e)}},h.prototype.contextLost=function(){this.program=void 0;for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&this.attributes[a].contextLost();for(var b in this.uniforms)this.uniforms.hasOwnProperty(b)&&this.uniforms[b].contextLost()},h.prototype.contextFree=function(){if(this.program){var a=this.context.gl;a?a.isContextLost()||a.deleteProgram(this.program):console.warn("memory leak: WebGLProgram has not been deleted because WebGLRenderingContext is not available anymore."),this.program=void 0}for(var b in this.attributes)this.attributes.hasOwnProperty(b)&&this.attributes[b].contextFree();for(var c in this.uniforms)this.uniforms.hasOwnProperty(c)&&this.uniforms[c].contextFree()},h.prototype.use=function(){this.context.gl.useProgram(this.program)},h}(h["default"]),a("default",i)}}}),System.register("davinci-eight/programs/createGraphicsProgram.js",["../scene/MonitorList","../collections/NumberIUnknownMap","../utils/uuid4","../utils/refChange","../programs/SimpleWebGLProgram"],function(a){function b(a,b){console.warn(i+" "+a+" missing WebGLRenderingContext for canvasId => "+b+". Did you specify the correct canvasId")}function c(a,c,j,k){if(d["default"].verify("monitors",a,function(){return"createGraphicsProgram"}),"string"!=typeof c)throw new Error("vertexShader argument must be a string.");if("string"!=typeof j)throw new Error("fragmentShader argument must be a string.");var l=1,m=new e["default"],n=f["default"]().generate(),o={get vertexShader(){return c},get fragmentShader(){return j},attributes:function(a){var b=m.getWeakRef(a);return b?b.attributes:void 0},uniforms:function(a){var b=m.getWeakRef(a);return b?b.uniforms:void 0},addRef:function(){return g["default"](n,i,1),l++,l},release:function(){return g["default"](n,i,-1),l--,0===l&&(d["default"].removeContextListener(o,a),m.release()),l},contextFree:function(a){var b=m.getWeakRef(a.canvasId);b&&(b.contextFree(a),m.remove(a.canvasId))},contextGain:function(a){var b=a.canvasId;if(m.exists(b))m.getWeakRef(b).contextGain(a);else{var d=new h["default"](a,c,j,k);m.putWeakRef(b,d),d.contextGain(a)}},contextLost:function(a){var b=m.getWeakRef(a);b&&(b.contextLost(a),m.remove(a))},get uuid(){return n},use:function(a){var c=m.getWeakRef(a);c?c.use():b("use(canvasId => "+a+")",a)},enableAttrib:function(a,c){var d=m.getWeakRef(c);if(d){var e=d.attributes[a];e&&e.enable()}else b("enableAttrib(name => "+a+", canvasId => "+c+")",c)},disableAttrib:function(a,b){var c=m.getWeakRef(b);if(c){var d=c.attributes[a];d&&d.enable()}},uniform1f:function(a,b,c){var d=m.getWeakRef(c);if(d){var e=d.uniforms[a];e&&e.uniform1f(b)}},uniform2f:function(a,b,c,d){var e=m.getWeakRef(d);if(e){var f=e.uniforms[a];f&&f.uniform2f(b,c)}},uniform3f:function(a,b,c,d,e){var f=m.getWeakRef(e);if(f){var g=f.uniforms[a];g&&g.uniform3f(b,c,d)}},uniform4f:function(a,b,c,d,e,f){var g=m.getWeakRef(f);if(g){var h=g.uniforms[a];h&&h.uniform4f(b,c,d,e)}},mat2:function(a,b,c,d){var e=m.getWeakRef(d);if(e){var f=e.uniforms[a];f&&f.mat2(b,c)}},mat3:function(a,b,c,d){var e=m.getWeakRef(d);if(e){var f=e.uniforms[a];f&&f.mat3(b,c)}},mat4:function(a,b,c,d){var e=m.getWeakRef(d);if(e){var f=e.uniforms[a];f&&f.mat4(b,c)}},vec2:function(a,b,c){var d=m.getWeakRef(c);if(d){var e=d.uniforms[a];e&&e.vec2(b)}},vec3:function(a,b,c){var d=m.getWeakRef(c);if(d){var e=d.uniforms[a];e&&e.vec3(b)}},vec4:function(a,b,c){var d=m.getWeakRef(c);if(d){var e=d.uniforms[a];e&&e.vec4(b)}},vector2:function(a,b,c){var d=m.getWeakRef(c);if(d){var e=d.uniforms[a];e&&e.vector2(b)}},vector3:function(a,b,c){var d=m.getWeakRef(c);if(d){var e=d.uniforms[a];e&&e.vector3(b)}},vector4:function(a,b,c){var d=m.getWeakRef(c);if(d){var e=d.uniforms[a];e&&e.vector4(b)}}};return d["default"].addContextListener(o,a),d["default"].synchronize(o,a),g["default"](n,i,1),o}var d,e,f,g,h,i;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i="IGraphicsProgram"}}}),System.register("davinci-eight/programs/fragmentShader.js",["../checks/mustBeBoolean","../checks/mustBeDefined"],function(a){function b(a,b,e,f){d["default"]("attributes",a),d["default"]("uniforms",b),c["default"]("vColor",e),c["default"]("vLight",f);var g=[];g.push("// fragment shader generated by EIGHT"),e&&g.push("varying highp vec4 vColor;"),f&&g.push("varying highp vec3 vLight;"),g.push("void main(void) {"),g.push(f?e?"  gl_FragColor = vec4(vColor.xyz * vLight, vColor.a);":"  gl_FragColor = vec4(vLight, 1.0);":e?"  gl_FragColor = vColor;":"  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);"),g.push("}");var h=g.join("\n");return h}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/scene/MonitorList.js",["../utils/Shareable","../checks/mustSatisfy","../checks/isInteger"],function(a){function b(){return"be an instance of MonitorList"}function c(){return"be IContextMonitor[]"}function d(a){return a}var e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function e(b){void 0===b&&(b=[]),a.call(this,"MonitorList"),this.monitors=b.map(d),this.monitors.forEach(function(a){a.addRef()})}return i(e,a),e.prototype.destructor=function(){this.monitors.forEach(function(a){a.release()}),a.prototype.destructor.call(this)},e.prototype.addContextListener=function(a){this.monitors.forEach(function(b){b.addContextListener(a)})},e.prototype.add=function(a){a.addRef(),this.monitors.push(a)},e.prototype.remove=function(a){var b=this.monitors.indexOf(a);this.monitors[b].release(),this.monitors.splice(b,1)},e.prototype.removeContextListener=function(a){this.monitors.forEach(function(b){b.removeContextListener(a)})},e.prototype.synchronize=function(a){this.monitors.forEach(function(b){b.synchronize(a)})},e.prototype.toArray=function(){return this.monitors.map(d)},e.copy=function(a){return new e(a)},e.isInstanceOf=function(a){return a instanceof e},e.assertInstance=function(a,c,d){if(e.isInstanceOf(c))return c;throw f["default"](a,!1,b,d),new Error},e.verify=function(a,b,d){f["default"](a,g["default"](b.length),c,d);for(var e=b.length,h=0;e>h;h++);return b},e.addContextListener=function(a,b){e.verify("monitors",b,function(){return"MonitorList.addContextListener"}),b.forEach(function(b){b.addContextListener(a)})},e.removeContextListener=function(a,b){e.verify("monitors",b,function(){return"MonitorList.removeContextListener"}),b.forEach(function(b){b.removeContextListener(a)})},e.synchronize=function(a,b){e.verify("monitors",b,function(){return"MonitorList.removeContextListener"}),b.forEach(function(b){b.synchronize(a)})},e}(e["default"]),a("default",h)}}}),System.register("davinci-eight/utils/refChange.js",[],function(a){function b(a){return o+": "+a}function c(a){return console.log(b(a))}function d(a){return console.warn(b(a))}function e(a){return console.warn(b(a))}function f(){var a=Object.keys(k);a.forEach(function(a){var b=k[a];0===b.refCount&&delete k[a]})}function g(){var a,b=Object.keys(k),c=b.length,d=0;for(a=0;c>a;a++){var e=b[a],f=k[e];d+=f.refCount}return d}function h(){return l&&d("Nothing to see because skip mode is "+l),f(),g()}function i(){var a=h();return a>0?d(JSON.stringify(k,null,2)):c("There are "+a+" outstanding reference counts."),a}function j(a,d,f){if(void 0===f&&(f=0),0===f||!l){if(m)if(n){if(d===n){var g=k[a];c(g?f+" on "+a+" @ "+d:f+" on "+a+" @ "+d)}}else c(f+" on "+a+" @ "+d);if(1===f){var g=k[a];g||(g={refCount:0,name:d,zombie:!1},k[a]=g),g.refCount+=f}else if(-1===f){var g=k[a];g?(g.refCount+=f,0===g.refCount&&(g.zombie=!0)):e(f+" on "+a+" @ "+d)}else{if(0!==f)throw new Error(b("change must be +1 or -1 for normal recording, or 0 for logging to the console."));var j=""+a+" @ "+d;if(c(j),"stop"===a)return h();if("dump"===a)return i();if("start"===a)l=!1,m=!1;else if("reset"===a)k={},l=!0,m=!1,n=void 0;else{if("trace"!==a)throw new Error(b("Unexpected command "+j));l=!1,m=!0,n=d}}}}var k,l,m,n,o;return a("default",j),{setters:[],execute:function(){k={},l=!0,m=!1,n=void 0,o="refChange"}}}),System.register("davinci-eight/utils/uuid4.js",[],function(a){function b(){var a=function(a){return Math.pow(2,a)},b=(a(4),a(6)),c=a(8),d=a(12),e=(a(14),a(16)),f=a(32),g=(a(40),a(48),function(a,b){return Math.floor(Math.random()*(b-a+1))+a}),h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/utils/Shareable.js",["../checks/mustBeString","../i18n/readOnly","../utils/refChange","../utils/uuid4"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a){this._refCount=1,this._uuid=e["default"]().generate(),this._type=b["default"]("type",a),d["default"](this._uuid,a,1)}return a.prototype.isZombie=function(){return"undefined"==typeof this._refCount},a.prototype.addRef=function(){return this._refCount++,d["default"](this._uuid,this._type,1),this._refCount},a.prototype.release=function(){this._refCount--,d["default"](this._uuid,this._type,-1);var a=this._refCount;return 0===a&&(this.destructor(!0),this._refCount=void 0),a},a.prototype.destructor=function(a){void 0===a&&(a=!1),a&&console.warn("`protected destructor(): void` method should be implemented by `"+this._type+"`.")},Object.defineProperty(a.prototype,"uuid",{get:function(){return this._uuid},set:function(){throw new Error(c["default"]("uuid").message)},enumerable:!0,configurable:!0}),a}(),a("default",f)}}}),System.register("davinci-eight/materials/GraphicsProgram.js",["../core","../checks/isDefined","../checks/isUndefined","../scene/MonitorList","../checks/mustBeString","../utils/Shareable"],function(a){function b(a,b,c,d){console.warn(a+" dropped uniform"+b+" "+c),console.warn("`typeof canvasId` is "+typeof d)}var c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function h(b,c){void 0===c&&(c=[]),a.call(this,"GraphicsProgram"),this.readyPending=!1,f["default"].verify("monitors",c),g["default"]("type",b),this._monitors=f["default"].copy(c),this.type=b}return j(h,a),h.prototype.destructor=function(){this._monitors.removeContextListener(this),this._monitors.release(),this._monitors=void 0,this.inner&&(this.inner.release(),this.inner=void 0)},h.prototype.makeReady=function(){this.readyPending||(this.readyPending=!0,this._monitors.addContextListener(this),this._monitors.synchronize(this))},Object.defineProperty(h.prototype,"monitors",{get:function(){return this._monitors.toArray()},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"fragmentShader",{get:function(){if(this.inner)return this.inner.fragmentShader;var a=!1;return this.makeReady(a),this.inner?this.inner.fragmentShader:void 0},enumerable:!0,configurable:!0}),h.prototype.use=function(a){if(this.inner)return this.inner.use(a);var b=!1;return this.makeReady(b),this.inner?this.inner.use(a):void(c["default"].verbose&&console.warn(this.type+" is not ready for use. Maybe did not receive contextGain?"))},h.prototype.attributes=function(a){if(this.inner)return this.inner.attributes(a);var b=!1;return this.makeReady(b),this.inner?this.inner.attributes(a):void 0},h.prototype.uniforms=function(a){if(this.inner)return this.inner.uniforms(a);var b=!1;return this.makeReady(b),this.inner?this.inner.uniforms(a):void 0},h.prototype.enableAttrib=function(a,b){if(this.inner)return this.inner.enableAttrib(a,b);var c=!1;return this.makeReady(c),this.inner?this.inner.enableAttrib(a,b):void console.warn(this.type+" enableAttrib()")},h.prototype.disableAttrib=function(a,b){if(this.inner)return this.inner.disableAttrib(a,b);var c=!1;return this.makeReady(c),this.inner?this.inner.disableAttrib(a,b):void console.warn(this.type+" disableAttrib()")},h.prototype.contextFree=function(a){this.inner&&this.inner.contextFree(a)},h.prototype.contextGain=function(a){e["default"](this.inner)&&(this.inner=this.createGraphicsProgram()),d["default"](this.inner)&&this.inner.contextGain(a)},h.prototype.contextLost=function(a){this.inner&&this.inner.contextLost(a)},h.prototype.createGraphicsProgram=function(){throw new Error("GraphicsProgram createGraphicsProgram method is virtual and should be implemented by "+this.type)},h.prototype.uniform1f=function(a,c,d){if(this.inner)this.inner.uniform1f(a,c,d);else{var e=!1,f=this.readyPending;this.makeReady(e),this.inner?this.inner.uniform1f(a,c,d):f||b(this.type,"1f",a,d)}},h.prototype.uniform2f=function(a,c,d,e){if(this.inner)this.inner.uniform2f(a,c,d,e);else{var f=!1,g=this.readyPending;this.makeReady(f),this.inner?this.inner.uniform2f(a,c,d,e):g||b(this.type,"2f",a,e)}},h.prototype.uniform3f=function(a,c,d,e,f){if(this.inner)this.inner.uniform3f(a,c,d,e,f);else{var g=!1,h=this.readyPending;this.makeReady(g),this.inner?this.inner.uniform3f(a,c,d,e,f):h||b(this.type,"3f",a,f)}},h.prototype.uniform4f=function(a,c,d,e,f,g){if(this.inner)this.inner.uniform4f(a,c,d,e,f,g);else{var h=!1,i=this.readyPending;this.makeReady(h),this.inner?this.inner.uniform4f(a,c,d,e,f,g):i||b(this.type,"4f",a,g)}},h.prototype.mat2=function(a,c,d,e){if(this.inner)this.inner.mat2(a,c,d,e);else{var f=!1,g=this.readyPending;this.makeReady(f),this.inner?this.inner.mat2(a,c,d,e):g||b(this.type,"Mat2R",a,e)}},h.prototype.mat3=function(a,c,d,e){if(this.inner)this.inner.mat3(a,c,d,e);else{var f=!1,g=this.readyPending;this.makeReady(f),this.inner?this.inner.mat3(a,c,d,e):g||b(this.type,"Mat3R",a,e)}},h.prototype.mat4=function(a,d,e,f){if(this.inner)this.inner.mat4(a,d,e,f);else{var g=!1,h=this.readyPending;this.makeReady(g),this.inner?this.inner.mat4(a,d,e,f):h||c["default"].verbose&&b(this.type,"Mat4R",a,f)}},h.prototype.vec2=function(a,c,d){if(this.inner)this.inner.vec2(a,c,d);else{var e=!1,f=this.readyPending;this.makeReady(e),this.inner?this.inner.vec2(a,c,d):f||b(this.type,"VectorE2",a,d)}},h.prototype.vec3=function(a,c,d){if(this.inner)this.inner.vec3(a,c,d);else{var e=!1,f=this.readyPending;this.makeReady(e),this.inner?this.inner.vec3(a,c,d):f||b(this.type,"VectorE3",a,d)}},h.prototype.vec4=function(a,c,d){if(this.inner)this.inner.vec4(a,c,d);else{var e=!1,f=this.readyPending;this.makeReady(e),this.inner?this.inner.vec4(a,c,d):f||b(this.type,"VectorE4",a,d)}},h.prototype.vector2=function(a,c,d){if(this.inner)this.inner.vector2(a,c,d);else{var e=!1,f=this.readyPending;this.makeReady(e),this.inner?this.inner.vector2(a,c,d):f||b(this.type,"vector2",a,d)}},h.prototype.vector3=function(a,c,d){if(this.inner)this.inner.vector3(a,c,d);else{var e=!1,f=this.readyPending;this.makeReady(e),this.inner?this.inner.vector3(a,c,d):f||b(this.type,"vector3",a,d)}},h.prototype.vector4=function(a,c,d){if(this.inner)this.inner.vector4(a,c,d);else{var e=!1,f=this.readyPending;this.makeReady(e),this.inner?this.inner.vector4(a,c,d):f||b(this.type,"vector4",a,d)}},Object.defineProperty(h.prototype,"vertexShader",{get:function(){if(this.inner)return this.inner.vertexShader;var a=!1;return this.makeReady(a),this.inner?this.inner.vertexShader:void 0},enumerable:!0,configurable:!0}),h}(h["default"]),a("default",i)}}}),System.register("davinci-eight/core/getAttribVarName.js",["../checks/isDefined","../checks/expectArg"],function(a){function b(a,b){return d["default"]("attribute",a).toBeObject(),d["default"]("varName",b).toBeString(),c["default"](a.name)?d["default"]("attribute.name",a.name).toBeString().value:b}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/core/getUniformVarName.js",["../checks/isDefined","../checks/expectArg"],function(a){function b(a,b){return d["default"]("uniform",a).toBeObject(),d["default"]("varName",b).toBeString(),c["default"](a.name)?d["default"]("uniform.name",a.name).toBeString().value:b}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/programs/vertexShader.js",["../core/getAttribVarName","../core/getUniformVarName","../checks/mustBeBoolean","../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a){function b(a,b){return e["default"](a[b],b)}function c(a,c,e,s){g["default"]("attributes",a),g["default"]("uniforms",c),f["default"]("vColor",e),f["default"]("vLight",s);var t=[];t.push("// vertex shader generated by EIGHT");for(var u in a)a.hasOwnProperty(u)&&t.push(j+a[u].glslType+i+d["default"](a[u],u)+m);for(var v in c)c.hasOwnProperty(v)&&t.push(k+c[v].glslType+i+b(c,v)+m);e&&t.push("varying highp vec4 vColor;"),s&&t.push("varying highp vec3 vLight;"),t.push("void main(void) {");var w=[];if(w.unshift(m),a[h["default"].ATTRIBUTE_POSITION])switch(a[h["default"].ATTRIBUTE_POSITION].glslType){case"float":w.unshift(o),w.unshift("1.0"),w.unshift(l),w.unshift("0.0"),w.unshift(l),w.unshift("0.0"),w.unshift(l),w.unshift(d["default"](a[h["default"].ATTRIBUTE_POSITION],h["default"].ATTRIBUTE_POSITION)),w.unshift(n),w.unshift("vec4");break;case"vec2":w.unshift(o),w.unshift("1.0"),w.unshift(l),w.unshift("0.0"),w.unshift(l),w.unshift(d["default"](a[h["default"].ATTRIBUTE_POSITION],h["default"].ATTRIBUTE_POSITION)),w.unshift(n),w.unshift("vec4");break;case"vec3":w.unshift(o),w.unshift("1.0"),w.unshift(l),w.unshift(d["default"](a[h["default"].ATTRIBUTE_POSITION],h["default"].ATTRIBUTE_POSITION)),w.unshift(n),w.unshift("vec4");break;case"vec4":w.unshift(d["default"](a[h["default"].ATTRIBUTE_POSITION],h["default"].ATTRIBUTE_POSITION))}else w.unshift("vec4(0.0, 0.0, 0.0, 1.0)");if(c[h["default"].UNIFORM_REFLECTION_ONE_MATRIX]&&(w.unshift(p),w.unshift(b(c,h["default"].UNIFORM_REFLECTION_ONE_MATRIX))),c[h["default"].UNIFORM_REFLECTION_TWO_MATRIX]&&(w.unshift(p),w.unshift(b(c,h["default"].UNIFORM_REFLECTION_TWO_MATRIX))),c[h["default"].UNIFORM_MODEL_MATRIX]&&(w.unshift(p),w.unshift(b(c,h["default"].UNIFORM_MODEL_MATRIX))),c[h["default"].UNIFORM_VIEW_MATRIX]&&(w.unshift(p),w.unshift(b(c,h["default"].UNIFORM_VIEW_MATRIX))),c[h["default"].UNIFORM_PROJECTION_MATRIX]&&(w.unshift(p),w.unshift(b(c,h["default"].UNIFORM_PROJECTION_MATRIX))),w.unshift(q),w.unshift("gl_Position"),w.unshift("  "),t.push(w.join("")),c[h["default"].UNIFORM_POINT_SIZE]&&t.push("  gl_PointSize = "+b(c,h["default"].UNIFORM_POINT_SIZE)+";"),e)if(a[h["default"].ATTRIBUTE_COLOR]){var x=d["default"](a[h["default"].ATTRIBUTE_COLOR],h["default"].ATTRIBUTE_COLOR);switch(a[h["default"].ATTRIBUTE_COLOR].glslType){case"vec4":t.push("  vColor = "+x+m);break;case"vec3":t.push("  vColor = vec4("+x+", 1.0);");break;default:throw new Error("Unexpected type for color attribute: "+a[h["default"].ATTRIBUTE_COLOR].glslType)}}else if(c[h["default"].UNIFORM_COLOR]){var y=b(c,h["default"].UNIFORM_COLOR);switch(c[h["default"].UNIFORM_COLOR].glslType){case"vec4":t.push("  vColor = "+y+m);break;case"vec3":t.push("  vColor = vec4("+y+", 1.0);");break;default:throw new Error("Unexpected type for color uniform: "+c[h["default"].UNIFORM_COLOR].glslType)}}else t.push("  vColor = vec4(1.0, 1.0, 1.0, 1.0);");s&&(c[h["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&c[h["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]&&c[h["default"].UNIFORM_NORMAL_MATRIX]&&a[h["default"].ATTRIBUTE_NORMAL]?(t.push("  vec3 L = normalize("+b(c,h["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION)+");"),t.push("  vec3 N = normalize("+b(c,h["default"].UNIFORM_NORMAL_MATRIX)+" * "+d["default"](a[h["default"].ATTRIBUTE_NORMAL],h["default"].ATTRIBUTE_NORMAL)+");"),t.push("  // The minus sign arises because L is the light direction, so we need dot(N, -L) = -dot(N, L)"),t.push("  float "+r+" = max(-dot(N, L), 0.0);"),t.push(c[h["default"].UNIFORM_AMBIENT_LIGHT]?"  vLight = "+b(c,h["default"].UNIFORM_AMBIENT_LIGHT)+" + "+r+" * "+b(c,h["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";":"  vLight = "+r+" * "+b(c,h["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";")):t.push(c[h["default"].UNIFORM_AMBIENT_LIGHT]?"  vLight = "+b(c,h["default"].UNIFORM_AMBIENT_LIGHT)+";":"  vLight = vec3(1.0, 1.0, 1.0);")),
t.push("}");var z=t.join("\n");return z}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=" ",j="attribute"+i,k="uniform"+i,l=","+i,m=";",n="(",o=")",p=i+"*"+i,q=i+"="+i,r="directionalLightCosineFactor"}}}),System.register("davinci-eight/materials/SmartGraphicsProgram.js",["../programs/createGraphicsProgram","../programs/fragmentShader","../materials/GraphicsProgram","../i18n/readOnly","../programs/vertexShader"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function d(b,c,d,e,f){a.call(this,"SmartGraphicsProgram",f),this.aParams={},this.uParams={},this.vColor=!1,this.vLight=!1,this.aParams=b,this.uParams=c,this.vColor=d,this.vLight=e,this.makeReady(!1)}return h(d,a),d.prototype.createGraphicsProgram=function(){var a=[],c=this.vertexShader,d=this.fragmentShader;return b["default"](this.monitors,c,d,a)},Object.defineProperty(d.prototype,"vertexShader",{get:function(){return f["default"](this.aParams,this.uParams,this.vColor,this.vLight)},set:function(){throw new Error(e["default"]("vertexShader").message)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fragmentShader",{get:function(){return c["default"](this.aParams,this.uParams,this.vColor,this.vLight)},set:function(){throw new Error(e["default"]("fragmentShader").message)},enumerable:!0,configurable:!0}),d}(d["default"]),a("default",g)}}}),System.register("davinci-eight/programs/vColorRequired.js",["../core/GraphicsProgramSymbols"],function(a){function b(a,b){return!!a[c["default"].ATTRIBUTE_COLOR]||!!b[c["default"].UNIFORM_COLOR]}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/programs/vLightRequired.js",["../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a){function b(a,b){return c["default"]("attributes",a),c["default"]("uniforms",b),!!b[d["default"].UNIFORM_AMBIENT_LIGHT]||!!b[d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&!!b[d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/materials/GraphicsProgramBuilder.js",["../core/getAttribVarName","../core/getUniformVarName","../programs/glslAttribType","../checks/mustBeInteger","../checks/mustBeString","../materials/SmartGraphicsProgram","../programs/vColorRequired","../programs/vLightRequired"],function(a){function b(a){for(var b={},d=Object.keys(a),g=d.length,h=0;g>h;h++){var i=d[h],j=a[i],k=f["default"]("size",j.size),l=c["default"](j,i);b[l]={glslType:e["default"](i,k)}}return b}var c,d,e,f,g,h,i,j,k;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(){function a(a){if(this.aMeta={},this.uParams={},a)for(var b=a.attributes,c=Object.keys(b),d=0,e=c.length;e>d;d++){var f=c[d],g=b[f];this.attribute(f,g.size)}}return a.prototype.attribute=function(a,b){return g["default"]("name",a),f["default"]("size",b),this.aMeta[a]={size:b},this},a.prototype.uniform=function(a,b){return g["default"]("name",a),g["default"]("type",b),this.uParams[a]={glslType:b},this},a.prototype.build=function(a){var c=b(this.aMeta),d=i["default"](c,this.uParams),e=j["default"](c,this.uParams);return new h["default"](c,this.uParams,d,e,a)},a}(),a("default",k)}}}),System.register("davinci-eight/materials/MeshLambertMaterial.js",["../materials/GraphicsProgram","../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols"],function(a){var b,c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e="MeshLambertMaterial",f=function(a){function b(b){a.call(this,e,b)}return g(b,a),b.prototype.destructor=function(){a.prototype.destructor.call(this)},b.prototype.createGraphicsProgram=function(){var a=new c["default"];return a.attribute(d["default"].ATTRIBUTE_POSITION,3),a.attribute(d["default"].ATTRIBUTE_NORMAL,3),a.uniform(d["default"].UNIFORM_COLOR,"vec3"),a.uniform(d["default"].UNIFORM_MODEL_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_NORMAL_MATRIX,"mat3"),a.uniform(d["default"].UNIFORM_PROJECTION_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_VIEW_MATRIX,"mat4"),a.uniform(d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR,"vec3"),a.uniform(d["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION,"vec3"),a.build(this.monitors)},b}(b["default"]),a("default",f)}}}),System.register("davinci-eight/geometries/arc3.js",["../checks/mustBeDefined","../checks/mustBeInteger","../checks/mustBeNumber","../math/SpinG3","../math/R3"],function(a){function b(a,b,h,i){c["default"]("begin",a),e["default"]("angle",b),c["default"]("generator",h),d["default"]("segments",i);var j=[],k=g["default"].copy(a),l=f["default"].copy(h).scale(-b/2/i).exp();j.push(k.clone());for(var m=0;i>m;m++)k.rotate(l),j.push(k.clone());return j}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/math/CartesianE3.js",["../checks/mustBeNumber","../i18n/readOnly"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a},function(a){c=a}],execute:function(){h=function(){function a(a,c,d,e){b["default"]("x",a),b["default"]("y",c),b["default"]("z",d),this.coordinates=[a,c,d],e||console.warn("Try constructing CartesianE3 from geometric static methods.")}return Object.defineProperty(a.prototype,"x",{get:function(){return this.coordinates[0]},set:function(){throw new Error(c["default"]("x").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.coordinates[1]},set:function(){throw new Error(c["default"]("y").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.coordinates[2]},set:function(){throw new Error(c["default"]("z").message)},enumerable:!0,configurable:!0}),a.prototype.magnitude=function(){return Math.sqrt(this.squaredNorm())},a.prototype.squaredNorm=function(){var a=this.x,b=this.y,c=this.z;return a*a+b*b+c*c},Object.defineProperty(a,"zero",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(a,"e1",{get:function(){return e},enumerable:!0,configurable:!0}),Object.defineProperty(a,"e2",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(a,"e3",{get:function(){return g},enumerable:!0,configurable:!0}),a.fromVectorE3=function(b){return new a(b.x,b.y,b.z,!0)},a.direction=function(b){var c=b.x,d=b.y,e=b.z,f=Math.sqrt(c*c+d*d+e*e);return new a(c/f,d/f,e/f,!0)},a}(),a("default",h),d=new h(0,0,0,!0),e=new h(1,0,0,!0),f=new h(0,1,0,!0),g=new h(0,0,1,!0)}}}),System.register("davinci-eight/checks/isBoolean.js",[],function(a){function b(a){return"boolean"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeBoolean.js",["../checks/mustSatisfy","../checks/isBoolean"],function(a){function b(){return"be `boolean`"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/geometries/Geometry.js",["../math/CartesianE3","../checks/mustBeBoolean","../checks/mustBeObject"],function(a){var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(){this._position=b["default"].zero,this.useTextureCoords=!1}return Object.defineProperty(a.prototype,"position",{get:function(){return this._position},set:function(a){this.setPosition(a)},enumerable:!0,configurable:!0}),a.prototype.enableTextureCoords=function(a){return c["default"]("enable",a),this.useTextureCoords=a,this},a.prototype.setPosition=function(a){return d["default"]("position",a),this._position=b["default"].fromVectorE3(a),this},a.prototype.toPrimitives=function(){return console.warn("Geometry.toPrimitives() must be implemented by derived classes."),[]},a}(),a("default",e)}}}),System.register("davinci-eight/core/GraphicsProgramSymbols.js",[],function(a){var b;return{setters:[],execute:function(){b=function(){function a(){}return a.ATTRIBUTE_COLOR="aColor",a.ATTRIBUTE_GEOMETRY_INDEX="aGeometryIndex",a.ATTRIBUTE_NORMAL="aNormal",a.ATTRIBUTE_POSITION="aPosition",a.ATTRIBUTE_TEXTURE_COORDS="aTextureCoords",a.UNIFORM_ALPHA="uAlpha",a.UNIFORM_AMBIENT_LIGHT="uAmbientLight",a.UNIFORM_COLOR="uColor",a.UNIFORM_DIRECTIONAL_LIGHT_COLOR="uDirectionalLightColor",a.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION="uDirectionalLightDirection",a.UNIFORM_POINT_LIGHT_COLOR="uPointLightColor",a.UNIFORM_POINT_LIGHT_POSITION="uPointLightPosition",a.UNIFORM_POINT_SIZE="uPointSize",a.UNIFORM_PROJECTION_MATRIX="uProjection",a.UNIFORM_REFLECTION_ONE_MATRIX="uReflectionOne",a.UNIFORM_REFLECTION_TWO_MATRIX="uReflectionTwo",a.UNIFORM_MODEL_MATRIX="uModel",a.UNIFORM_NORMAL_MATRIX="uNormal",a.UNIFORM_VIEW_MATRIX="uView",a.VARYING_COLOR="vColor",a.VARYING_LIGHT="vLight",a}(),a("default",b)}}}),System.register("davinci-eight/collections/copyToArray.js",[],function(a){function b(a,b,c){void 0===b&&(b=[]),void 0===c&&(c=0);for(var d=a.length,e=0;d>e;e++)b[c+e]=a[e];return b}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/dataFromVectorN.js",["../math/G2","../math/G3","../math/R2","../math/R3"],function(a){function b(a){if(a instanceof d["default"]){var b=a;return[b.x,b.y,b.z]}if(a instanceof c["default"]){var g=a;return[g.x,g.y]}if(a instanceof f["default"]){var h=a;return[h.x,h.y,h.z]}if(a instanceof e["default"]){var i=a;return[i.x,i.y]}return a.coords}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/geometries/DrawAttribute.js",[],function(a){function b(){return!0}function c(a){if(!b(a))throw new Error("values must be a number[]");return a}function d(a,b){return a%b===0}function e(a,b){if("number"!=typeof a)throw new Error("size must be a number");if(!d(b.length,a))throw new Error("values.length must be an exact multiple of size");return a}var f;return{setters:[],execute:function(){f=function(){function a(a,b){this.values=c(a),this.size=e(b,a)}return a}(),a("default",f)}}}),System.register("davinci-eight/core/DrawMode.js",[],function(a){var b;return{setters:[],execute:function(){!function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_STRIP=2]="LINE_STRIP",a[a.LINE_LOOP=3]="LINE_LOOP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(b||(b={})),a("default",b)}}}),System.register("davinci-eight/geometries/DrawPrimitive.js",["../checks/mustBeArray","../checks/mustBeInteger","../checks/mustBeObject"],function(a){var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,e,f){this.attributes={},this.mode=c["default"]("mode",a),this.indices=b["default"]("indices",e),this.attributes=d["default"]("attributes",f)}return a}(),a("default",e)}}}),System.register("davinci-eight/geometries/computeUniqueVertices.js",[],function(a){function b(a){function b(a){var b=a.toString();if(c[b]){var e=c[b];a.index=e.index}else a.index=d.length,d.push(a),c[b]=a}var c={},d=[];return a.forEach(function(a){a.vertices.forEach(function(a){b(a)})}),d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/simplicesToDrawPrimitive.js",["../collections/copyToArray","../geometries/dataFromVectorN","../geometries/DrawAttribute","../core/DrawMode","../geometries/DrawPrimitive","../geometries/simplicesToGeometryMeta","../geometries/computeUniqueVertices","../checks/expectArg","../geometries/Simplex","../math/VectorN"],function(a){function b(a,b){for(var c=[],d=0;a>d;d++)c.push(b);return c}function c(a,b){n["default"]("name",a).toBeString(),n["default"]("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.name;return d?d:a}throw new Error("Unable to compute name; missing attribute specification for "+a)}function d(a,b){n["default"]("key",a).toBeString(),n["default"]("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.size;return n["default"]("size",d).toBeNumber(),c.size}throw new Error("Unable to compute size; missing attribute specification for "+a)}function e(a,b){return a.concat(b)}function f(a,f){n["default"]("simplices",a).toBeObject();var q=l["default"](a);f?n["default"]("geometryMeta",f).toBeObject():f=q;var r,s,t=f.attributes,u=Object.keys(t),v=u.length,w=m["default"](a),x=w.length,y=a.map(o["default"].indices).reduce(e,[]),z=[];for(r=0;v>r;r++){var A=u[r],B=d(A,t),C=b(x*B,void 0);z.push({data:C,dimensions:B,name:c(A,t)})}for(s=0;x>s;s++){var D=w[s],E=D.attributes;for(D.index!==s&&n["default"]("vertex.index",s).toSatisfy(!1,"vertex.index must equal loop index, i"),r=0;v>r;r++){var F=z[r],G=F.dimensions,H=E[u[r]];H||(H=new p["default"](b(G,0),!1,G));var C=h["default"](H);g["default"](C,F.data,s*F.dimensions)}}var I={};for(r=0;v>r;r++){var F=z[r],C=F.data;I[F.name]=new i["default"](C,F.dimensions)}switch(f.k){case o["default"].TRIANGLE:return new k["default"](j["default"].TRIANGLES,y,I);case o["default"].LINE:return new k["default"](j["default"].LINES,y,I);case o["default"].POINT:return new k["default"](j["default"].POINTS,y,I);case o["default"].EMPTY:return new k["default"](j["default"].POINTS,y,I);default:throw new Error("k => "+f.k)}}var g,h,i,j,k,l,m,n,o,p;return a("default",f),{setters:[function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a}],execute:function(){}}}),System.register("davinci-eight/math/dotVectorE2.js",["../checks/isDefined"],function(a){function b(a,b){return c["default"](a)&&c["default"](b)?a.x*b.x+a.y*b.y:void 0}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/math/Euclidean2.js",["../geometries/b2","../geometries/b3","../math/extE2","../checks/isDefined","../math/lcoE2","../math/rcoE2","../math/mulE2","../checks/mustBeInteger","../checks/mustBeNumber","../i18n/readOnly","../math/scpE2","../math/stringFromCoordinates","../math/Unit"],function(a){function b(a,b){if(b instanceof A)return b;throw new Error("Argument '"+b+"' must be a Euclidean2")}function c(a,b){if("undefined"==typeof b||b instanceof u["default"])return b;throw new Error("Argument '"+b+"' must be a Unit or undefined")}function d(a,b,c,d,e,f,g,h){return a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,+(a+e)}function e(a,b,c,d,e,f,g,h){return a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,+(b+f)}function f(a,b,c,d,e,f,g,h){return a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,+(c+g)}function g(a,b,c,d,e,f,g,h){return a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,+(d+h)}function h(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a-e);break;case 1:j=+(b-f);break;case 2:j=+(c-g);break;case 3:j=+(d-h);break;default:throw new Error("index must be in the range [0..3]")}return+j}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return{setters:[function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a}],execute:function(){v=Math.exp,w=Math.cos,x=Math.sin,y=Math.sqrt,z=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,B,C,D,E,F,G,H,I;return w=+e,x=+f,y=+g,z=-h,s=e*w+f*x+g*y-h*z,t=0,u=0,v=0,j=+s,k=-t,l=-u,m=-v,B=w*j+x*k+y*l-z*m,C=w*k+x*j-y*m+z*l,D=w*l+x*m+y*j-z*k,E=w*m+x*l-y*k+z*j,r=e*B+f*C+g*D-h*E,n=B/r,o=C/r,p=D/r,q=E/r,F=a*n+b*o+c*p-d*q,G=a*o+b*n-c*q+d*p,H=a*p+b*q+c*n-d*o,I=a*q+b*p-c*o+d*n,new A(F,G,H,I,i)},A=function(){function a(a,b,d,e,f){if(this.w=q["default"]("α",a),this.x=q["default"]("x",b),this.y=q["default"]("y",d),this.xy=q["default"]("β",e),this.uom=c("uom",f),this.uom&&1!==this.uom.multiplier){var g=this.uom.multiplier;this.w*=g,this.x*=g,this.y*=g,this.xy*=g,this.uom=new u["default"](1,f.dimensions,f.labels)}}return Object.defineProperty(a.prototype,"α",{get:function(){return this.w},set:function(){throw new Error(r["default"]("α").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"β",{get:function(){return this.xy},set:function(){throw new Error(r["default"]("β").message)},enumerable:!0,configurable:!0}),a.prototype.fromCartesian=function(b,d,e,f,g){return q["default"]("α",b),q["default"]("x",d),q["default"]("y",e),q["default"]("β",f),c("uom",g),new a(b,d,e,f,g)},a.prototype.fromPolar=function(b,d,e,f,g){return q["default"]("α",b),q["default"]("r",d),q["default"]("θ",e),q["default"]("β",f),c("uom",g),new a(b,d*w(e),d*x(e),f,g)},Object.defineProperty(a.prototype,"coords",{get:function(){return[this.w,this.x,this.y,this.xy]},enumerable:!0,configurable:!0}),a.prototype.coordinate=function(a){switch(q["default"]("index",a),a){case 0:return this.w;case 1:return this.x;case 2:return this.y;case 3:return this.xy;default:throw new Error("index must be in the range [0..3]")}},a.add=function(a,b){var c=a[0],h=a[1],i=a[2],j=a[3],k=b[0],l=b[1],m=b[2],n=b[3],o=d(c,h,i,j,k,l,m,n),p=e(c,h,i,j,k,l,m,n),q=f(c,h,i,j,k,l,m,n),r=g(c,h,i,j,k,l,m,n);return[o,p,q,r]},a.prototype.add=function(c){b("rhs",c);var d=a.add(this.coords,c.coords);return new a(d[0],d[1],d[2],d[3],u["default"].compatible(this.uom,c.uom))},a.prototype.addPseudo=function(b){return new a(this.α,this.x,this.y,this.β+b,this.uom)},a.prototype.addScalar=function(b){return new a(this.α+b,this.x,this.y,this.β,this.uom)},a.prototype.adj=function(){throw new Error("TODO: adj")},a.prototype.__add__=function(b){return b instanceof a?this.add(b):"number"==typeof b?this.add(new a(b,0,0,0,void 0)):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.add(this):"number"==typeof b?new a(b,0,0,0,void 0).add(this):void 0},a.prototype.angle=function(){return this.log().grade(2)},a.prototype.clone=function(){return this},a.prototype.conj=function(){throw new Error("TODO: adj")},a.prototype.cubicBezier=function(b,c,d,e){var f=j["default"](b,this.x,c.x,d.x,e.x),g=j["default"](b,this.y,c.y,d.y,e.y);return new a(0,f,g,0,this.uom)},a.prototype.direction=function(){throw new Error("direction")},a.prototype.distanceTo=function(){throw new Error("TODO: Euclidean2.distanceTo")},a.prototype.equals=function(){throw new Error("TODO: Euclidean2.equals")},a.sub=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],i=b[1],j=b[2],k=b[3],l=h(c,d,e,f,g,i,j,k,0),m=h(c,d,e,f,g,i,j,k,1),n=h(c,d,e,f,g,i,j,k,2),o=h(c,d,e,f,g,i,j,k,3);return[l,m,n,o]},a.prototype.sub=function(c){b("rhs",c);var d=a.sub(this.coords,c.coords);return new a(d[0],d[1],d[2],d[3],u["default"].compatible(this.uom,c.uom))},a.prototype.__sub__=function(b){return b instanceof a?this.sub(b):"number"==typeof b?this.sub(new a(b,0,0,0,void 0)):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.sub(this):"number"==typeof b?new a(b,0,0,0,void 0).sub(this):void 0},a.prototype.mul=function(c){b("rhs",c);var d=this.w,e=this.x,f=this.y,g=this.xy,h=c.w,i=c.x,j=c.y,k=c.xy,l=o["default"](d,e,f,g,h,i,j,k,0),m=o["default"](d,e,f,g,h,i,j,k,1),n=o["default"](d,e,f,g,h,i,j,k,2),p=o["default"](d,e,f,g,h,i,j,k,3);return new a(l,m,n,p,u["default"].mul(this.uom,c.uom))},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):"number"==typeof b?this.mul(new a(b,0,0,0,void 0)):void 0},a.prototype.__rmul__=function(b){if(b instanceof a){var c=b;return c.mul(this)}if("number"==typeof b){var d=b;return new a(d,0,0,0,void 0).mul(this)}},a.prototype.scale=function(b){return new a(this.w*b,this.x*b,this.y*b,this.xy*b,this.uom)},a.prototype.div=function(a){return b("rhs",a),z(this.w,this.x,this.y,this.xy,a.w,a.x,a.y,a.xy,u["default"].div(this.uom,a.uom))},a.prototype.divByScalar=function(b){return new a(this.w/b,this.x/b,this.y/b,this.xy/b,this.uom)},a.prototype.__div__=function(b){if(b instanceof a)return this.div(b);if("number"==typeof b){var c=b;return this.div(new a(c,0,0,0,void 0))}},a.prototype.__rdiv__=function(b){if(b instanceof a){var c=b;return c.div(this)}if("number"==typeof b){var d=b;return new a(d,0,0,0,void 0).div(this)}},a.scp=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3],k=c*g+d*h+e*i-f*j,l=0,m=0,n=0;return[k,l,m,n]},a.prototype.scp=function(c){b("rhs",c);var d=this.w,e=this.x,f=this.y,g=this.xy,h=this.w,i=this.x,j=this.y,k=this.xy,l=s["default"](d,e,f,g,h,i,j,k,0);return new a(l,0,0,0,u["default"].mul(this.uom,c.uom))},a.ext=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3],l=k["default"](c,d,e,f,g,h,i,j,0),m=k["default"](c,d,e,f,g,h,i,j,1),n=k["default"](c,d,e,f,g,h,i,j,2),o=k["default"](c,d,e,f,g,h,i,j,3);return[l,m,n,o]},a.prototype.ext=function(c){b("rhs",c);var d=a.ext(this.coords,c.coords);return new a(d[0],d[1],d[2],d[3],u["default"].mul(this.uom,c.uom))},a.prototype.__wedge__=function(b){if(b instanceof a){var c=b;return this.ext(c)}if("number"==typeof b){var d=b;return this.ext(new a(d,0,0,0,void 0))}},a.prototype.__rwedge__=function(b){if(b instanceof a){var c=b;return c.ext(this)}if("number"==typeof b){var d=b;return new a(d,0,0,0,void 0).ext(this)}},a.lshift=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3],k=m["default"](c,d,e,f,g,h,i,j,0),l=m["default"](c,d,e,f,g,h,i,j,1),n=m["default"](c,d,e,f,g,h,i,j,2),o=m["default"](c,d,e,f,g,h,i,j,3);return[k,l,n,o]},a.prototype.lerp=function(){return this},a.prototype.lco=function(c){b("rhs",c);var d=a.lshift(this.coords,c.coords);return new a(d[0],d[1],d[2],d[3],u["default"].mul(this.uom,c.uom))},a.prototype.__lshift__=function(b){if(b instanceof a){var c=b;return this.lco(c)}if("number"==typeof b){var d=b;return this.lco(new a(d,0,0,0,void 0))}},a.prototype.__rlshift__=function(b){if(b instanceof a){var c=b;return c.lco(this)}if("number"==typeof b){var d=b;return new a(d,0,0,0,void 0).lco(this)}},a.rshift=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3],k=n["default"](c,d,e,f,g,h,i,j,0),l=n["default"](c,d,e,f,g,h,i,j,1),m=n["default"](c,d,e,f,g,h,i,j,2),o=n["default"](c,d,e,f,g,h,i,j,3);return[k,l,m,o]},a.prototype.rco=function(c){b("rhs",c);var d=a.rshift(this.coords,c.coords);return new a(d[0],d[1],d[2],d[3],u["default"].mul(this.uom,c.uom))},a.prototype.__rshift__=function(b){return b instanceof a?this.rco(b):"number"==typeof b?this.rco(new a(b,0,0,0,void 0)):void 0},a.prototype.__rrshift__=function(b){return b instanceof a?b.rco(this):"number"==typeof b?new a(b,0,0,0,void 0).rco(this):void 0},a.prototype.__vbar__=function(b){return b instanceof a?this.scp(b):"number"==typeof b?this.scp(new a(b,0,0,0,void 0)):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?b.scp(this):"number"==typeof b?new a(b,0,0,0,void 0).scp(this):void 0},a.prototype.pow=function(){throw new Error("pow")},a.prototype.__bang__=function(){return this.inv()},a.prototype.__pos__=function(){return this},a.prototype.neg=function(){return new a(-this.α,-this.x,-this.y,-this.β,this.uom)},a.prototype.__neg__=function(){return this.neg()},a.prototype.__tilde__=function(){return new a(this.α,this.x,this.y,-this.β,this.uom)},a.prototype.grade=function(b){switch(p["default"]("grade",b),b){case 0:return new a(this.α,0,0,0,this.uom);case 1:return new a(0,this.x,this.y,0,this.uom);case 2:return new a(0,0,0,this.β,this.uom);default:return new a(0,0,0,0,this.uom)}},a.prototype.cos=function(){throw new Error("cos")},a.prototype.cosh=function(){throw new Error("cosh")},a.prototype.exp=function(){u["default"].assertDimensionless(this.uom);var b=v(this.α),c=w(this.β),d=x(this.β);return new a(b*c,0,0,b*d,this.uom)},a.prototype.inv=function(){throw new Error("inv")},a.prototype.log=function(){throw new Error("log")},a.prototype.magnitude=function(){return this.norm()},a.prototype.magnitudeSansUnits=function(){return y(this.squaredNormSansUnits())},a.prototype.norm=function(){return new a(this.magnitudeSansUnits(),0,0,0,this.uom)},a.prototype.quad=function(){return this.squaredNorm()},a.prototype.quadraticBezier=function(b,c,d){var e=i["default"](b,this.x,c.x,d.x),f=i["default"](b,this.y,c.y,d.y);return new a(0,e,f,0,this.uom)},a.prototype.squaredNorm=function(){return new a(this.squaredNormSansUnits(),0,0,0,u["default"].mul(this.uom,this.uom))},a.prototype.squaredNormSansUnits=function(){var a=this.α,b=this.x,c=this.y,d=this.β;return a*a+b*b+c*c+d*d},a.prototype.reflect=function(b){var c=a.fromVectorE2(b);return c.mul(this).mul(c).scale(-1)},a.prototype.rev=function(){throw new Error("rev")},a.prototype.rotate=function(){throw new Error("rotate")},a.prototype.sin=function(){throw new Error("sin")},a.prototype.sinh=function(){throw new Error("sinh")},a.prototype.slerp=function(){return this},a.prototype.tan=function(){return this.sin().div(this.cos())},a.prototype.isOne=function(){return 1===this.w&&0===this.x&&0===this.y&&0===this.xy},a.prototype.isNaN=function(){return isNaN(this.w)||isNaN(this.x)||isNaN(this.y)||isNaN(this.xy)},a.prototype.isZero=function(){return 0===this.w&&0===this.x&&0===this.y&&0===this.xy},a.prototype.toStringCustom=function(a,b){var c=t["default"](this.coords,a,b);if(this.uom){var d=this.uom.toString().trim();return d?c+" "+d:c}return c},a.prototype.toExponential=function(){var a=function(a){return a.toExponential()};return this.toStringCustom(a,["1","e1","e2","e12"])},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return this.toStringCustom(b,["1","e1","e2","e12"])},a.prototype.toString=function(){var a=function(a){return a.toString()};return this.toStringCustom(a,["1","e1","e2","e12"])},a.prototype.toStringIJK=function(){var a=function(a){return a.toString()};return this.toStringCustom(a,["1","i","j","I"])},a.prototype.toStringLATEX=function(){var a=function(a){return a.toString()};return this.toStringCustom(a,["1","e_{1}","e_{2}","e_{12}"])},a.copy=function(b){return b instanceof a?b:new a(b.α,b.x,b.y,b.β,void 0)},a.fromVectorE2=function(b){return l["default"](b)?b instanceof a?new a(0,b.x,b.y,0,b.uom):new a(0,b.x,b.y,0,void 0):void 0},a}(),a("default",A)}}}),System.register("davinci-eight/math/extE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e);break;case 1:j=+(a*f+b*e);break;case 2:j=+(a*g+c*e);break;case 3:j=+(a*h+b*g-c*f+d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/lcoE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(a*f-c*h);break;case 2:j=+(a*g+b*h);break;case 3:j=+(a*h);break;default:throw new Error("index must be in the range [0..3]")}return+j}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(a*f+b*e-c*h+d*g);break;case 2:j=+(a*g+b*h+c*e-d*f);break;case 3:j=+(a*h+b*g-c*f+d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/dotVectorCartesianE2.js",[],function(a){function b(a,b,c,d){return a*c+b*d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/quadVectorE2.js",["../math/dotVectorCartesianE2","../checks/isDefined","../checks/isNumber"],function(a){function b(a){if(d["default"](a)){var b=a.x,f=a.y;return e["default"](b)&&e["default"](f)?c["default"](b,f,b,f):void 0}return void 0}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/rcoE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(-b*e-d*g);break;case 2:j=+(-c*e+d*f);break;case 3:j=+(d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/scpE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){switch(i){case 0:return a*e+b*f+c*g-d*h;case 1:return 0;case 2:return 0;case 3:return 0;default:throw new Error("index must be in the range [0..3]")}}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/G2.js",["../geometries/b2","../geometries/b3","../math/dotVectorE2","../math/Euclidean2","../math/extE2","../checks/isDefined","../checks/isNumber","../checks/isObject","../math/lcoE2","../math/mulE2","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../math/quadVectorE2","../math/rcoE2","../math/rotorFromDirections","../math/scpE2","../math/stringFromCoordinates","../math/VectorN","../math/wedgeXY"],function(a){function b(a){return[a.α,a.x,a.y,a.β]}function c(a){if(k["default"](a)){var b=a;return j["default"](b.x)&&j["default"](b.y)?j["default"](b.α)&&j["default"](b.β)?(console.warn("Copying GeometricE2 to G2"),S.copy(b)):(console.warn("Copying VectorE2 to G2"),S.fromVector(b)):j["default"](b.α)&&j["default"](b.β)?(console.warn("Copying SpinorE2 to G2"),S.fromSpinor(b)):void 0}return void 0}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a}],execute:function(){x=0,y=1,z=2,A=3,B=Math.PI,C=Math.abs,D=Math.atan2,E=Math.exp,F=Math.log,G=Math.cos,H=Math.sin,I=Math.sqrt,J="←",K="→",L="↑",M="↓",N="◎",O="↻",P="↺",Q=["1",[J,K],[M,L],[O,P]],R=["1","e1","e2","I"],S=function(a){function j(){a.call(this,[0,0,0,0],!1,4)}return T(j,a),Object.defineProperty(j.prototype,"α",{get:function(){return this.coords[x]},set:function(a){this.modified=this.modified||this.coords[x]!==a,this.coords[x]=a},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"x",{get:function(){return this.coords[y]},set:function(a){this.modified=this.modified||this.coords[y]!==a,this.coords[y]=a},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"y",{get:function(){return this.coords[z]},set:function(a){this.modified=this.modified||this.coords[z]!==a,this.coords[z]=a},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"β",{get:function(){return this.coords[A]},set:function(a){this.modified=this.modified||this.coords[A]!==a,this.coords[A]=a},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"xy",{get:function(){return this.coords[A]},set:function(a){this.modified=this.modified||this.coords[A]!==a,this.coords[A]=a},enumerable:!0,configurable:!0}),j.prototype.add=function(a,b){
return void 0===b&&(b=1),p["default"]("M",a),o["default"]("α",b),this.α+=a.α*b,this.x+=a.x*b,this.y+=a.y*b,this.β+=a.β*b,this},j.prototype.add2=function(a,b){return p["default"]("a",a),p["default"]("b",b),this.α=a.α+b.α,this.x=a.x+b.x,this.y=a.y+b.y,this.β=a.β+b.β,this},j.prototype.addPseudo=function(a){return o["default"]("β",a),this.β+=a,this},j.prototype.addScalar=function(a){return o["default"]("α",a),this.α+=a,this},j.prototype.addVector=function(a,b){return void 0===b&&(b=1),p["default"]("v",a),o["default"]("α",b),this.x+=a.x*b,this.y+=a.y*b,this},j.prototype.adj=function(){throw new Error("TODO: G2.adj")},j.prototype.angle=function(){return this.log().grade(2)},j.prototype.clone=function(){var a=new j;return a.copy(this),a},j.prototype.conj=function(){return this.β=-this.β,this},j.prototype.cos=function(){throw new Error("TODO: G2.cos")},j.prototype.cosh=function(){throw new Error("TODO: G2.cosh")},j.prototype.distanceTo=function(){throw new Error("TODO: G2.distanceTo")},j.prototype.equals=function(){throw new Error("TODO: G2.equals")},j.prototype.copy=function(a){return p["default"]("M",a),this.α=a.α,this.x=a.x,this.y=a.y,this.β=a.β,this},j.prototype.copyScalar=function(a){return this.zero().addScalar(a)},j.prototype.copySpinor=function(a){return p["default"]("spinor",a),this.α=a.α,this.x=0,this.y=0,this.β=a.xy,this},j.prototype.copyVector=function(a){return p["default"]("vector",a),this.α=0,this.x=a.x,this.y=a.y,this.β=0,this},j.prototype.cubicBezier=function(a,b,c,d){var f=e["default"](a,this.α,b.α,c.α,d.α),g=e["default"](a,this.x,b.x,c.x,d.x),h=e["default"](a,this.y,b.y,c.y,d.y),i=e["default"](a,this.β,b.β,c.β,d.β);return this.α=f,this.x=g,this.y=h,this.β=i,this},j.prototype.direction=function(){var a=I(this.squaredNormSansUnits());return this.α=this.α/a,this.x=this.x/a,this.y=this.y/a,this.β=this.β/a,this},j.prototype.div=function(a){return this.div2(this,a)},j.prototype.div2=function(){return this},j.prototype.divByScalar=function(a){return o["default"]("α",a),this.α/=a,this.x/=a,this.y/=a,this.β/=a,this},j.prototype.dual=function(a){var b=-a.β,c=+a.y,d=-a.x,e=+a.α;return this.α=b,this.x=c,this.y=d,this.β=e,this},j.prototype.exp=function(){var a=this.α,b=this.β,c=E(a),d=I(b*b),e=c*(0!==d?H(d)/d:1);return this.α=c*G(d),this.β=b*e,this},j.prototype.ext=function(a){return this.ext2(this,a)},j.prototype.ext2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β,g=b.α,i=b.x,j=b.y,k=b.β;return this.α=h["default"](c,d,e,f,g,i,j,k,0),this.x=h["default"](c,d,e,f,g,i,j,k,1),this.y=h["default"](c,d,e,f,g,i,j,k,2),this.β=h["default"](c,d,e,f,g,i,j,k,3),this},j.prototype.inv=function(){return this.conj(),this},j.prototype.isOne=function(){return 1===this.α&&0===this.x&&0===this.y&&0===this.β},j.prototype.isZero=function(){return 0===this.α&&0===this.x&&0===this.y&&0===this.β},j.prototype.lco=function(a){return this.lco2(this,a)},j.prototype.lco2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β,g=b.α,h=b.x,i=b.y,j=b.β;return this.α=l["default"](c,d,e,f,g,h,i,j,0),this.x=l["default"](c,d,e,f,g,h,i,j,1),this.y=l["default"](c,d,e,f,g,h,i,j,2),this.β=l["default"](c,d,e,f,g,h,i,j,3),this},j.prototype.lerp=function(a,b){return p["default"]("target",a),o["default"]("α",b),this.α+=(a.α-this.α)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.β+=(a.β-this.β)*b,this},j.prototype.lerp2=function(a,b,c){return p["default"]("a",a),p["default"]("b",b),o["default"]("α",c),this.copy(a).lerp(b,c),this},j.prototype.log=function(){var a=this.α,b=this.β;return this.α=F(I(a*a+b*b)),this.x=0,this.y=0,this.β=D(b,a),this},j.prototype.magnitude=function(){return this.norm()},j.prototype.magnitudeSansUnits=function(){return I(this.squaredNormSansUnits())},j.prototype.mul=function(a){return this.mul2(this,a)},j.prototype.mul2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β,g=b.α,h=b.x,i=b.y,j=b.β;return this.α=m["default"](c,d,e,f,g,h,i,j,0),this.x=m["default"](c,d,e,f,g,h,i,j,1),this.y=m["default"](c,d,e,f,g,h,i,j,2),this.β=m["default"](c,d,e,f,g,h,i,j,3),this},j.prototype.neg=function(){return this.α=-this.α,this.x=-this.x,this.y=-this.y,this.β=-this.β,this},j.prototype.norm=function(){return this.α=this.magnitudeSansUnits(),this.x=0,this.y=0,this.β=0,this},j.prototype.one=function(){return this.α=1,this.x=0,this.y=0,this.β=0,this},j.prototype.pow=function(){throw new Error("TODO: G2.pow")},j.prototype.quad=function(){return this.α=this.squaredNormSansUnits(),this.x=0,this.y=0,this.β=0,this},j.prototype.quadraticBezier=function(a,b,c){var e=d["default"](a,this.α,b.α,c.α),f=d["default"](a,this.x,b.x,c.x),g=d["default"](a,this.y,b.y,c.y),h=d["default"](a,this.β,b.β,c.β);return this.α=e,this.x=f,this.y=g,this.β=h,this},j.prototype.rco=function(a){return this.rco2(this,a)},j.prototype.rco2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β,g=b.α,h=b.x,i=b.y,j=b.β;return this.α=r["default"](c,d,e,f,g,h,i,j,0),this.x=r["default"](c,d,e,f,g,h,i,j,1),this.y=r["default"](c,d,e,f,g,h,i,j,2),this.β=r["default"](c,d,e,f,g,h,i,j,3),this},j.prototype.reflect=function(a){p["default"]("n",a);var b=g["default"].fromVectorE2(a),c=g["default"].copy(this),d=b.mul(c).mul(b).scale(-1);return this.copy(d),this},j.prototype.rev=function(){return this.α=this.α,this.x=this.x,this.y=this.y,this.β=-this.β,this},j.prototype.sin=function(){throw new Error("G2.sin")},j.prototype.sinh=function(){throw new Error("G2.sinh")},j.prototype.rotate=function(a){p["default"]("R",a);var b=this.x,c=this.y,d=a.xy,e=a.α,f=e*b+d*c,g=e*c-d*b;return this.x=f*e+g*d,this.y=g*e-f*d,this},j.prototype.rotorFromDirections=function(a,b){return i["default"](s["default"](a,b,q["default"],f["default"],this))?this:(this.rotorFromGeneratorAngle(j.I,B),this)},j.prototype.rotorFromGeneratorAngle=function(a,b){p["default"]("B",a),o["default"]("θ",b);var c=a.xy,d=b/2;return this.α=G(C(c)*d),this.x=0,this.y=0,this.β=-H(c*d),this},j.prototype.scp=function(a){return this.scp2(this,a)},j.prototype.scp2=function(a,b){return this.α=t["default"](a.α,a.x,a.y,a.β,b.α,b.x,b.y,b.β,0),this.x=0,this.y=0,this.β=0,this},j.prototype.scale=function(a){return o["default"]("α",a),this.α*=a,this.x*=a,this.y*=a,this.β*=a,this},j.prototype.slerp=function(a,b){return p["default"]("target",a),o["default"]("α",b),this},j.prototype.spinor=function(a,b){var c=a.x,d=a.y,e=b.x,g=b.y;return this.α=f["default"](a,b),this.x=0,this.y=0,this.β=w["default"](c,d,0,e,g,0),this},j.prototype.squaredNorm=function(){return this.α=this.squaredNormSansUnits(),this.x=0,this.y=0,this.β=0,this},j.prototype.squaredNormSansUnits=function(){var a=this.α,b=this.x,c=this.y,d=this.β;return a*a+b*b+c*c+d*d},j.prototype.sub=function(a,b){return void 0===b&&(b=1),p["default"]("M",a),o["default"]("α",b),this.α-=a.α*b,this.x-=a.x*b,this.y-=a.y*b,this.β-=a.β*b,this},j.prototype.sub2=function(a,b){return p["default"]("a",a),p["default"]("b",b),this.α=a.α-b.α,this.x=a.x-b.x,this.y=a.y-b.y,this.β=a.β-b.β,this},j.prototype.toExponential=function(){var a=function(a){return a.toExponential()};return u["default"](b(this),a,j.BASIS_LABELS)},j.prototype.toFixed=function(a){var c=function(b){return b.toFixed(a)};return u["default"](b(this),c,j.BASIS_LABELS)},j.prototype.toString=function(){var a=function(a){return a.toString()};return u["default"](b(this),a,j.BASIS_LABELS)},j.prototype.grade=function(a){switch(n["default"]("grade",a),a){case 0:this.x=0,this.y=0,this.β=0;break;case 1:this.α=0,this.β=0;break;case 2:this.α=0,this.x=0,this.y=0;break;default:this.α=0,this.x=0,this.y=0,this.β=0}return this},j.prototype.zero=function(){return this.α=0,this.x=0,this.y=0,this.β=0,this},j.prototype.__add__=function(a){if(a instanceof j)return j.copy(this).add(a);if("number"==typeof a)return j.fromScalar(a).add(this);var b=c(a);return b?b.add(this):void 0},j.prototype.__div__=function(a){return a instanceof j?j.copy(this).div(a):"number"==typeof a?j.copy(this).divByScalar(a):void 0},j.prototype.__rdiv__=function(a){return a instanceof j?j.copy(a).div(this):"number"==typeof a?j.fromScalar(a).div(this):void 0},j.prototype.__mul__=function(a){if(a instanceof j)return j.copy(this).mul(a);if("number"==typeof a)return j.copy(this).scale(a);var b=c(a);return b?this.__mul__(b):void 0},j.prototype.__rmul__=function(a){if(a instanceof j)return j.copy(a).mul(this);if("number"==typeof a)return j.copy(this).scale(a);var b=c(a);return b?b.mul(this):void 0},j.prototype.__radd__=function(a){if(a instanceof j)return j.copy(a).add(this);if("number"==typeof a)return j.fromScalar(a).add(this);var b=c(a);return b?b.add(this):void 0},j.prototype.__sub__=function(a){return a instanceof j?j.copy(this).sub(a):"number"==typeof a?j.fromScalar(-a).add(this):void 0},j.prototype.__rsub__=function(a){return a instanceof j?j.copy(a).sub(this):"number"==typeof a?j.fromScalar(a).sub(this):void 0},j.prototype.__wedge__=function(a){return a instanceof j?j.copy(this).ext(a):"number"==typeof a?j.copy(this).scale(a):void 0},j.prototype.__rwedge__=function(a){return a instanceof j?j.copy(a).ext(this):"number"==typeof a?j.copy(this).scale(a):void 0},j.prototype.__lshift__=function(a){return a instanceof j?j.copy(this).lco(a):"number"==typeof a?j.copy(this).lco(j.fromScalar(a)):void 0},j.prototype.__rlshift__=function(a){return a instanceof j?j.copy(a).lco(this):"number"==typeof a?j.fromScalar(a).lco(this):void 0},j.prototype.__rshift__=function(a){return a instanceof j?j.copy(this).rco(a):"number"==typeof a?j.copy(this).rco(j.fromScalar(a)):void 0},j.prototype.__rrshift__=function(a){return a instanceof j?j.copy(a).rco(this):"number"==typeof a?j.fromScalar(a).rco(this):void 0},j.prototype.__vbar__=function(a){return a instanceof j?j.copy(this).scp(a):"number"==typeof a?j.copy(this).scp(j.fromScalar(a)):void 0},j.prototype.__rvbar__=function(a){return a instanceof j?j.copy(a).scp(this):"number"==typeof a?j.fromScalar(a).scp(this):void 0},j.prototype.__bang__=function(){return j.copy(this).inv()},j.prototype.__tilde__=function(){return j.copy(this).rev()},j.prototype.__pos__=function(){return j.copy(this)},j.prototype.__neg__=function(){return j.copy(this).neg()},j.fromCartesian=function(a,b,c,d){var e=new j;return e.α=a,e.x=b,e.y=c,e.β=d,e},j.copy=function(a){var b=new j;return b.α=a.α,b.x=a.x,b.y=a.y,b.β=a.β,b},j.fromScalar=function(a){return(new j).addScalar(a)},j.fromSpinor=function(a){return(new j).copySpinor(a)},j.fromVector=function(a){return i["default"](a)?(new j).copyVector(a):void 0},j.lerp=function(a,b,c){return j.copy(a).lerp(b,c)},j.rotorFromDirections=function(a,b){return(new j).rotorFromDirections(a,b)},j.BASIS_LABELS=R,j.zero=j.fromCartesian(0,0,0,0),j.one=j.fromCartesian(1,0,0,0),j.e1=j.fromCartesian(0,1,0,0),j.e2=j.fromCartesian(0,0,1,0),j.I=j.fromCartesian(0,0,0,1),j}(v["default"]),a("default",S)}}}),System.register("davinci-eight/geometries/dataLength.js",["../math/G2","../math/G3","../math/R2","../math/R3"],function(a){function b(a){if(a instanceof d["default"]){if(8!==a.length)throw new Error("source.length is expected to be 8");return 3}if(a instanceof c["default"]){if(4!==a.length)throw new Error("source.length is expected to be 4");return 2}if(a instanceof f["default"]){if(3!==a.length)throw new Error("source.length is expected to be 3");return 3}if(a instanceof e["default"]){if(2!==a.length)throw new Error("source.length is expected to be 2");return 2}return a.length}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/geometries/Vertex.js",[],function(a){function b(a,b){return b?a+b.toString():a}function c(a){var c=a.attributes,d=Object.keys(c).map(function(a){var d=c[a];return b(a,d)}).join(" ");return d}var d;return{setters:[],execute:function(){d=function(){function a(){this.attributes={}}return a.prototype.toString=function(){return c(this)},a}(),a("default",d)}}}),System.register("davinci-eight/geometries/Simplex.js",["../checks/expectArg","../checks/isInteger","../geometries/Vertex","../math/VectorN"],function(a){function b(a,b,c,d){return i["default"](b)&&b>=c&&d>=b?b:void h["default"](a,b).toSatisfy(!1,a+" must be an integer in the range ["+c+","+d+"]")}function c(a){return b("count",a,0,7)}function d(a,b){return a.concat(b)}function e(a,b,c,d){void 0===d&&(d=[]),h["default"]("b",b).toSatisfy(a.length===b.length,"a must be the same length as b");var e,f=a.length,g=1-c;for(e=0;f>e;e++)d.push(g*a[e]+c*b[e]);return d}function f(a,b,c){for(var d={},e=Object.keys(a),f=e.length,h=0;f>h;h++){var i=e[h];d[i]=g(a[i],b[i],c)}return d}function g(a,b,c){return new k["default"](e(a.coords,b.coords,c))}var h,i,j,k,l;return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(){function a(a){this.vertices=[],i["default"](a)||h["default"]("k",a).toBeNumber();for(var b=a+1,c=0;b>c;c++)this.vertices.push(new j["default"])}return Object.defineProperty(a.prototype,"k",{get:function(){return this.vertices.length-1},enumerable:!0,configurable:!0}),a.indices=function(a){return a.vertices.map(function(a){return a.index})},a.boundaryMap=function(b){var c=(b.vertices,b.k);if(c===a.TRIANGLE){var d=new a(c-1);d.vertices[0].attributes=b.vertices[0].attributes,d.vertices[1].attributes=b.vertices[1].attributes;var e=new a(c-1);e.vertices[0].attributes=b.vertices[1].attributes,e.vertices[1].attributes=b.vertices[2].attributes;var f=new a(c-1);return f.vertices[0].attributes=b.vertices[2].attributes,f.vertices[1].attributes=b.vertices[0].attributes,[d,e,f]}if(c===a.LINE){var g=new a(c-1);g.vertices[0].attributes=b.vertices[0].attributes;var h=new a(c-1);return h.vertices[0].attributes=b.vertices[1].attributes,[g,h]}if(c===a.POINT)return[new a(c-1)];if(c===a.EMPTY)return[];throw new Error("Unexpected k-simplex, k = "+b.k+" @ Simplex.boundaryMap()")},a.subdivideMap=function(b){h["default"]("simplex",b).toBeObject();var c=[],d=b.vertices,e=b.k;if(e===a.TRIANGLE){var g=d[0].attributes,i=d[1].attributes,j=d[2].attributes,k=f(g,i,.5),l=f(i,j,.5),m=f(j,g,.5),n=new a(e);n.vertices[0].attributes=j,n.vertices[1].attributes=m,n.vertices[2].attributes=l;var o=new a(e);o.vertices[0].attributes=g,o.vertices[1].attributes=k,o.vertices[2].attributes=m;var p=new a(e);p.vertices[0].attributes=i,p.vertices[1].attributes=l,p.vertices[2].attributes=k;var q=new a(e);q.vertices[0].attributes=k,q.vertices[1].attributes=l,q.vertices[2].attributes=m,c.push(n),c.push(o),c.push(p),c.push(q)}else if(e===a.LINE){var g=d[0].attributes,i=d[1].attributes,r=f(g,i,.5),s=new a(e);s.vertices[0].attributes=g,s.vertices[1].attributes=r;var t=new a(e);t.vertices[0].attributes=r,t.vertices[1].attributes=i,c.push(s),c.push(t)}else if(e===a.POINT)c.push(b);else if(e!==a.EMPTY)throw new Error(e+"-simplex is not supported");return c},a.boundary=function(b,e){void 0===e&&(e=1),c(e);for(var f=0;e>f;f++)b=b.map(a.boundaryMap).reduce(d,[]);return b},a.subdivide=function(b,e){void 0===e&&(e=1),c(e);for(var f=0;e>f;f++)b=b.map(a.subdivideMap).reduce(d,[]);return b},a.setAttributeValues=function(a,b){var c,d=Object.keys(a),e=d.length;for(c=0;e>c;c++){var f=d[c],g=a[f],h=g.length,i=void 0;for(i=0;h>i;i++)b.vertices[i].attributes[f]=g[i]}},a.EMPTY=-1,a.POINT=0,a.LINE=1,a.TRIANGLE=2,a.TETRAHEDRON=3,a.FIVE_CELL=4,a}(),a("default",l)}}}),System.register("davinci-eight/geometries/simplicesToGeometryMeta.js",["../geometries/dataLength","../checks/expectArg","../checks/isDefined","../geometries/Simplex"],function(a){function b(a,b){var c=[];return JSON.stringify(a,function(a,b){if("object"==typeof b&&null!==b){if(-1!==c.indexOf(b))return;c.push(b)}return b},b)}function c(a){for(var c=void 0,h={},i=a.length,j=0;i>j;j++){var k=a[j];k instanceof g["default"]||e["default"]("simplex",k).toSatisfy(!1,"Every element must be a Simplex @ simplicesToGeometryMeta(). Found "+b(k,2));var l=k.vertices;c=k.k;for(var m=0,n=l.length;n>m;m++)for(var o=l[m],p=o.attributes,q=Object.keys(p),r=q.length,s=0;r>s;s++){var t=q[s],u=p[t],v=d["default"](u),w=h[t];if(w){if(w.size!==v)throw new Error("Something is rotten in Denmark!")}else h[t]={size:v}}}if(f["default"](c)){var x={get attributes(){return h},get k(){return c}};return x}return void 0}var d,e,f,g;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/math/R1.js",["../math/VectorN"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=Math.exp,d=Math.log,e=Math.sqrt,f=0,g=function(a){function b(b,c){void 0===b&&(b=[0]),void 0===c&&(c=!1),a.call(this,b,c,1)}return h(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[f]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[f]=a},enumerable:!0,configurable:!0}),b.prototype.set=function(a){return this.x=a,this},b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this},b.prototype.scp=function(){return this},b.prototype.adj=function(){throw new Error("TODO: R1.adj")},b.prototype.conj=function(){return this},b.prototype.copy=function(a){return this.x=a.x,this},b.prototype.det=function(){return this.x},b.prototype.dual=function(){return this},b.prototype.exp=function(){return this.x=c(this.x),this},b.prototype.one=function(){return this.x=1,this},b.prototype.inv=function(){return this.x=1/this.x,this},b.prototype.lco=function(){return this},b.prototype.log=function(){return this.x=d(this.x),this},b.prototype.mul=function(a){return this.x*=a.x,this},b.prototype.norm=function(){return this},b.prototype.div=function(a){return this.x/=a.x,this},b.prototype.divByScalar=function(a){return this.x/=a,this},b.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this},b.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this},b.prototype.floor=function(){return this.x=Math.floor(this.x),this},b.prototype.ceil=function(){return this.x=Math.ceil(this.x),this},b.prototype.rev=function(){return this},b.prototype.rco=function(){return this},b.prototype.round=function(){return this.x=Math.round(this.x),this},b.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this},b.prototype.scale=function(a){return this.x*=a,this},b.prototype.sub=function(a){return this.x-=a.x,this},b.prototype.subScalar=function(a){return this.x-=a,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this},b.prototype.neg=function(){return this.x=-this.x,this},b.prototype.distanceTo=function(a){return e(this.quadranceTo(a))},b.prototype.dot=function(a){return this.x*a.x},b.prototype.magnitude=function(){return e(this.squaredNorm())},b.prototype.direction=function(){return this.divByScalar(this.magnitude())},b.prototype.mul2=function(){return this},b.prototype.quad=function(){var a=this.x;return this.x=a*a,this},b.prototype.squaredNorm=function(){return this.x*this.x},b.prototype.quadranceTo=function(a){var b=this.x-a.x;return b*b},b.prototype.reflect=function(){return this},b.prototype.reflection=function(){return this},b.prototype.rotate=function(){return this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.equals=function(a){return a.x===this.x},b.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this},b.prototype.slerp=function(){return this},b.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a},b.prototype.toExponential=function(){return"TODO: R1.toExponential"},b.prototype.toFixed=function(){return"TODO: R1.toFixed"},b.prototype.translation=function(){return this.one()},b.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this},b.prototype.clone=function(){return new b([this.x])},b.prototype.ext=function(){return this},b.prototype.zero=function(){return this.x=0,this},b}(b["default"]),a("default",g)}}}),System.register("davinci-eight/geometries/SimplexGeometry.js",["../math/Euclidean3","../checks/mustBeBoolean","../checks/mustBeInteger","../geometries/Geometry","../geometries/Simplex","../core/GraphicsProgramSymbols","../geometries/simplicesToDrawPrimitive","../geometries/simplicesToGeometryMeta","../math/R1","../math/R3"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(a){function e(){a.call(this),this.data=[],this._k=new j["default"]([f["default"].TRIANGLE]),this.curvedSegments=16,this.flatSegments=1,this.orientationColors=!1,this._k.modified=!0}return m(e,a),Object.defineProperty(e.prototype,"k",{get:function(){return this._k.x},set:function(a){this._k.x=d["default"]("k",a)},enumerable:!0,configurable:!0}),e.prototype.regenerate=function(){console.warn("`public regenerate(): void` method should be implemented in derived class.")},e.prototype.isModified=function(){return this._k.modified},e.prototype.setModified=function(a){return c["default"]("modified",a),this._k.modified=a,this},e.prototype.boundary=function(a){return this.isModified()&&this.regenerate(),this.data=f["default"].boundary(this.data,a),this.check()},e.prototype.check=function(){return this.meta=i["default"](this.data),this},e.prototype.subdivide=function(a){return this.isModified()&&this.regenerate(),this.data=f["default"].subdivide(this.data,a),this.check(),this},e.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},e.prototype.toPrimitives=function(){return this.isModified()&&this.regenerate(),this.check(),[h["default"](this.data,this.meta)]},e.prototype.mergeVertices=function(a){void 0===a&&(a=4)},e.prototype.triangle=function(a,c,d){var e=new f["default"](f["default"].TRIANGLE);return e.vertices[0].attributes[g["default"].ATTRIBUTE_POSITION]=a[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_POSITION]=a[1],e.vertices[2].attributes[g["default"].ATTRIBUTE_POSITION]=a[2],e.vertices[0].attributes[g["default"].ATTRIBUTE_NORMAL]=c[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_NORMAL]=c[1],e.vertices[2].attributes[g["default"].ATTRIBUTE_NORMAL]=c[2],e.vertices[0].attributes[g["default"].ATTRIBUTE_TEXTURE_COORDS]=d[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_TEXTURE_COORDS]=d[1],e.vertices[2].attributes[g["default"].ATTRIBUTE_TEXTURE_COORDS]=d[2],this.orientationColors&&(e.vertices[0].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e1),e.vertices[1].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e2),e.vertices[2].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e3)),this.data.push(e)},e.prototype.lineSegment=function(a,c,d){var e=new f["default"](f["default"].LINE);return e.vertices[0].attributes[g["default"].ATTRIBUTE_POSITION]=a[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_POSITION]=a[1],e.vertices[0].attributes[g["default"].ATTRIBUTE_NORMAL]=c[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_NORMAL]=c[1],e.vertices[0].attributes[g["default"].ATTRIBUTE_TEXTURE_COORDS]=d[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_TEXTURE_COORDS]=d[1],this.orientationColors&&(e.vertices[0].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e1),e.vertices[1].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e2)),this.data.push(e)},e.prototype.point=function(a,c,d){var e=new f["default"](f["default"].POINT);return e.vertices[0].attributes[g["default"].ATTRIBUTE_POSITION]=a[0],e.vertices[0].attributes[g["default"].ATTRIBUTE_NORMAL]=c[0],e.vertices[0].attributes[g["default"].ATTRIBUTE_TEXTURE_COORDS]=d[0],this.orientationColors&&(e.vertices[0].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e1)),this.data.push(e)},e.prototype.empty=function(){var a=new f["default"](f["default"].EMPTY);return this.data.push(a)},e.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},e}(e["default"]),a("default",l)}}}),System.register("davinci-eight/geometries/AxialSimplexGeometry.js",["../math/CartesianE3","../checks/mustBeObject","../geometries/SimplexGeometry"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(b){a.call(this),this.setAxis(b)}return f(d,a),d.prototype.setAxis=function(a){return c["default"]("axis",a),this.axis=b["default"].direction(a),this},d.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},d.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/geometries/SliceSimplexGeometry.js",["../geometries/AxialSimplexGeometry","../checks/isDefined","../checks/mustBeNumber","../math/R3"],function(a){function b(a){return f["default"].random().cross(a).direction()}var c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function c(c,g,h){void 0===c&&(c=f["default"].e3),void 0===h&&(h=2*Math.PI),a.call(this,c),this.sliceAngle=2*Math.PI,this.sliceStart=d["default"](g)?f["default"].copy(g).direction():b(this.axis),this.sliceAngle=e["default"]("sliceAngle",h)}return h(c,a),c}(c["default"]),a("default",g)}}}),System.register("davinci-eight/checks/isObject.js",[],function(a){function b(a){return"object"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeObject.js",["../checks/mustSatisfy","../checks/isObject"],function(a){function b(){return"be an `object`"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/quadSpinorE3.js",["../checks/isDefined","../checks/isNumber"],function(a){function b(a){if(c["default"](a)){var b=a.α,e=a.yz,f=a.zx,g=a.xy;return d["default"](b)&&d["default"](e)&&d["default"](f)&&d["default"](g)?b*b+e*e+f*f+g*g:void 0}return void 0}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/SpinG3.js",["../math/dotVectorCartesianE3","../math/dotVectorE3","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../math/quadSpinorE3","../math/quadVectorE3","../math/rotorFromDirections","../math/VectorN","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a){function b(){var a=[0,0,0,0];return a[r]=1,a}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=0,p=1,q=2,r=3,s=Math.exp,t=Math.cos,u=Math.sin,v=Math.sqrt,w=function(a){function k(c,d){void 0===c&&(c=b()),void 0===d&&(d=!1),a.call(this,c,d,4)}return x(k,a),Object.defineProperty(k.prototype,"yz",{get:function(){return this.coords[o]},set:function(a){f["default"]("yz",a),this.modified=this.modified||this.yz!==a,this.coords[o]=a},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"zx",{get:function(){return this.coords[p]},set:function(a){f["default"]("zx",a),this.modified=this.modified||this.zx!==a,this.coords[p]=a},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"xy",{get:function(){return this.coords[q]},set:function(a){f["default"]("xy",a),this.modified=this.modified||this.xy!==a,this.coords[q]=a},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"α",{get:function(){return this.coords[r]},set:function(a){f["default"]("α",a),this.modified=this.modified||this.α!==a,this.coords[r]=a},enumerable:!0,configurable:!0}),k.prototype.add=function(a,b){return void 0===b&&(b=1),g["default"]("spinor",a),f["default"]("α",b),this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.α+=a.α*b,this},k.prototype.add2=function(a,b){return this.α=a.α+b.α,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this},k.prototype.addPseudo=function(a){return f["default"]("β",a),this},k.prototype.addScalar=function(a){return f["default"]("α",a),this.α+=a,this},k.prototype.adj=function(){throw new Error("TODO: SpinG3.adj")},k.prototype.angle=function(){return this.log().grade(2)},k.prototype.clone=function(){return k.copy(this)},k.prototype.conj=function(){return this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},k.prototype.copy=function(a){return g["default"]("spinor",a),this.yz=f["default"]("spinor.yz",a.yz),this.zx=f["default"]("spinor.zx",a.zx),this.xy=f["default"]("spinor.xy",a.xy),this.α=f["default"]("spinor.α",a.α),this},k.prototype.copyScalar=function(a){return this.zero().addScalar(a)},k.prototype.copySpinor=function(a){return this.copy(a)},k.prototype.copyVector=function(){return this.zero()},k.prototype.div=function(a){return this.div2(this,a)},k.prototype.div2=function(a,b){var c=a.α,d=a.yz,e=a.zx,f=a.xy,g=b.α,h=b.yz,i=b.zx,j=b.xy;return this.α=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},k.prototype.divByScalar=function(a){return this.yz/=a,this.zx/=a,this.xy/=a,this.α/=a,this},k.prototype.dual=function(a){return g["default"]("v",a),this.α=0,this.yz=f["default"]("v.x",a.x),this.zx=f["default"]("v.y",a.y),this.xy=f["default"]("v.z",a.z),this},k.prototype.exp=function(){var a=this.α,b=this.yz,c=this.zx,d=this.xy,e=s(a),f=v(b*b+c*c+d*d),g=e*(0!==f?u(f)/f:1);return this.α=e*t(f),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},k.prototype.inv=function(){return this.conj(),this.divByScalar(this.squaredNormSansUnits()),this},k.prototype.lco=function(a){return this.lco2(this,a)},k.prototype.lco2=function(){return this},k.prototype.lerp=function(a,b){var c=k.copy(a),d=this.clone(),e=c.mul(d.inv());return e.log(),e.scale(b),e.exp(),this.copy(e),this},k.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},k.prototype.log=function(){var a=this.α,b=this.yz,c=this.zx,d=this.xy,e=b*b+c*c+d*d,f=v(e),g=Math.abs(a),h=v(a*a+e);this.α=Math.log(h);var i=Math.atan2(f,g)/f;return this.yz=b*i,this.zx=c*i,this.xy=d*i,this},k.prototype.magnitude=function(){return this.norm()},k.prototype.magnitudeSansUnits=function(){return v(this.squaredNormSansUnits())},k.prototype.mul=function(a){return this.mul2(this,a)},k.prototype.mul2=function(a,b){var c=a.α,d=a.yz,e=a.zx,f=a.xy,g=b.α,h=b.yz,i=b.zx,j=b.xy;return this.α=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},k.prototype.neg=function(){return this.α=-this.α,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},k.prototype.norm=function(){var a=this.magnitudeSansUnits();return this.zero().addScalar(a)},k.prototype.direction=function(){var a=this.magnitudeSansUnits();return this.yz=this.yz/a,this.zx=this.zx/a,this.xy=this.xy/a,this.α=this.α/a,this},k.prototype.one=function(){
return this.α=1,this.yz=0,this.zx=0,this.xy=0,this},k.prototype.quad=function(){return this.squaredNorm()},k.prototype.squaredNorm=function(){var a=this.squaredNormSansUnits();return this.zero().addScalar(a)},k.prototype.squaredNormSansUnits=function(){return h["default"](this)},k.prototype.rco=function(a){return this.rco2(this,a)},k.prototype.rco2=function(){return this},k.prototype.rev=function(){return this.yz*=-1,this.zx*=-1,this.xy*=-1,this},k.prototype.reflect=function(a){var b=this.α,c=this.yz,d=this.zx,e=this.xy,f=a.x,g=a.y,h=a.z,i=f*f+g*g+h*h,j=f*c+g*d+h*e;return this.α=i*b,this.xy=2*h*j-i*e,this.yz=2*f*j-i*c,this.zx=2*g*j-i*d,this},k.prototype.rotate=function(){return console.warn("SpinG3.rotate is not implemented"),this},k.prototype.rotorFromDirections=function(a,b){return j["default"](a,b,i["default"],d["default"],this)},k.prototype.rotorFromAxisAngle=function(a,b){var c=b/2,d=u(c);return this.yz=-a.x*d,this.zx=-a.y*d,this.xy=-a.z*d,this.α=t(c),this},k.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=u(c);return this.yz=-a.yz*d,this.zx=-a.zx*d,this.xy=-a.xy*d,this.α=t(c),this},k.prototype.scp=function(a){return this.scp2(this,a)},k.prototype.scp2=function(){return this},k.prototype.scale=function(a){return f["default"]("α",a),this.yz*=a,this.zx*=a,this.xy*=a,this.α*=a,this},k.prototype.slerp=function(a,b){var c=k.copy(a),d=this.clone(),e=c.mul(d.inv());return e.log(),e.scale(b),e.exp(),this.copy(e),this},k.prototype.sub=function(a,b){return void 0===b&&(b=1),g["default"]("s",a),f["default"]("α",b),this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.α-=a.α*b,this},k.prototype.sub2=function(a,b){return this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.α=a.α-b.α,this},k.prototype.spinor=function(a,b){var d=a.x,e=a.y,f=a.z,g=b.x,h=b.y,i=b.z;return this.α=c["default"](d,e,f,g,h,i),this.yz=m["default"](d,e,f,g,h,i),this.zx=n["default"](d,e,f,g,h,i),this.xy=l["default"](d,e,f,g,h,i),this},k.prototype.grade=function(a){switch(e["default"]("grade",a),a){case 0:this.yz=0,this.zx=0,this.xy=0;break;case 2:this.α=0;break;default:this.α=0,this.yz=0,this.zx=0,this.xy=0}return this},k.prototype.toExponential=function(){return this.toString()},k.prototype.toFixed=function(){return this.toString()},k.prototype.toString=function(){return"SpinG3({yz: "+this.yz+", zx: "+this.zx+", xy: "+this.xy+", w: "+this.α+"})"},k.prototype.ext=function(a){return this.ext2(this,a)},k.prototype.ext2=function(){return this},k.prototype.zero=function(){return this.α=0,this.yz=0,this.zx=0,this.xy=0,this},k.copy=function(a){return(new k).copy(a)},k.dual=function(a){return(new k).dual(a)},k.lerp=function(a,b,c){return k.copy(a).lerp(b,c)},k.rotorFromDirections=function(a,b){return(new k).rotorFromDirections(a,b)},k}(k["default"]),a("default",w)}}}),System.register("davinci-eight/math/R2.js",["../geometries/b2","../geometries/b3","../math/VectorN"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=Math.sqrt,f=0,g=1,h=function(a){function d(b,c){void 0===b&&(b=[0,0]),void 0===c&&(c=!1),a.call(this,b,c,2)}return i(d,a),Object.defineProperty(d.prototype,"x",{get:function(){return this.coords[f]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[f]=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"y",{get:function(){return this.coords[g]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[g]=a},enumerable:!0,configurable:!0}),d.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},d.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this},d.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},d.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=a.elements;return this.x=d[0]*b+d[2]*c,this.y=d[1]*b+d[3]*c,this},d.prototype.cubicBezier=function(a,b,d,e){var f=c["default"](a,this.x,b.x,d.x,e.x),g=c["default"](a,this.y,b.y,d.y,e.y);return this.x=f,this.y=g,this},d.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},d.prototype.subScalar=function(a){return this.x-=a,this.y-=a,this},d.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},d.prototype.scale=function(a){return this.x*=a,this.y*=a,this},d.prototype.divByScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b}else this.x=0,this.y=0;return this},d.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},d.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},d.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},d.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},d.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},d.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},d.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},d.prototype.distanceTo=function(a){return e(this.quadranceTo(a))},d.prototype.dot=function(a){return this.x*a.x+this.y*a.y},d.prototype.magnitude=function(){return e(this.squaredNorm())},d.prototype.direction=function(){return this.divByScalar(this.magnitude())},d.prototype.squaredNorm=function(){return this.x*this.x+this.y*this.y},d.prototype.quadranceTo=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},d.prototype.quadraticBezier=function(a,c,d){var e=b["default"](a,this.x,c.x,d.x),f=b["default"](a,this.y,c.y,d.y);return this.x=e,this.y=f,this},d.prototype.reflect=function(){return this},d.prototype.rotate=function(){return this},d.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},d.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},d.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},d.prototype.slerp=function(){return this},d.prototype.toExponential=function(){return"TODO: R2.toExponential"},d.prototype.toFixed=function(){return"TODO: R2.toString"},d.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},d.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},d.prototype.clone=function(){return new d([this.x,this.y])},d.prototype.zero=function(){return this.x=0,this.y=0,this},d.copy=function(a){return new d([a.x,a.y])},d.lerp=function(a,b,c){return d.copy(b).sub(a).scale(c).add(a)},d.random=function(){return new d([Math.random(),Math.random()])},d}(d["default"]),a("default",h)}}}),System.register("davinci-eight/math/add3x3.js",[],function(a){function b(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d+m,c[3]=e+n,c[6]=f+o,c[1]=g+p,c[4]=h+q,c[7]=i+r,c[2]=j+s,c[5]=k+t,c[8]=l+u,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/det3x3.js",[],function(a){function b(a){var b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return b*f*j+c*g*h+d*e*i-b*g*i-c*e*j-d*f*h}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/inv3x3.js",["../math/det3x3"],function(a){function b(a,b){var d=c["default"](a),e=a[0],f=a[3],g=a[6],h=a[1],i=a[4],j=a[7],k=a[2],l=a[5],m=a[8],n=i*m-j*l,o=g*l-f*m,p=f*j-g*i,q=j*k-h*m,r=e*m-g*k,s=g*h-e*j,t=h*l-i*k,u=f*k-e*l,v=e*i-f*h,w=1/d;b[0]=n*w,b[3]=o*w,b[6]=p*w,b[1]=q*w,b[4]=r*w,b[7]=s*w,b[2]=t*w,b[5]=u*w,b[8]=v*w}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/math/mul3x3.js",[],function(a){function b(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d*m+e*p+f*s,c[3]=d*n+e*q+f*t,c[6]=d*o+e*r+f*u,c[1]=g*m+h*p+i*s,c[4]=g*n+h*q+i*t,c[7]=g*o+h*r+i*u,c[2]=j*m+k*p+l*s,c[5]=j*n+k*q+l*t,c[8]=j*o+k*r+l*u,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Mat3R.js",["../math/AbstractMatrix","../math/add3x3","../math/det3x3","../math/inv3x3","../math/mul3x3","../checks/mustBeNumber"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){a.call(this,b,3)}return i(b,a),b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return c["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){return b.zero().copy(this)},b.prototype.det=function(){return d["default"](this.elements)},b.prototype.getInverse=function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4];var e=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===e){var f="Mat3R.getInverse(): can't invert matrix, determinant is 0";if(b||!b)throw new Error(f);return console.warn(f),this.one(),this}return this.scale(1/e),this},b.prototype.inv=function(){return e["default"](this.elements,this.elements),this},b.prototype.isOne=function(){var a=this.elements,b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return 1===b&&0===c&&0===d&&0===e&&1===f&&0===g&&0===h&&0===i&&1===j},b.prototype.isZero=function(){var a=this.elements,b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return 0===b&&0===c&&0===d&&0===e&&0===f&&0===g&&0===h&&0===i&&0===j},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){return f["default"](a.elements,b.elements,this.elements),this},b.prototype.neg=function(){return this.scale(-1)},b.prototype.normalFromMat4R=function(a){return this.getInverse(a).transpose()},b.prototype.one=function(){return this.set(1,0,0,0,1,0,0,0,1)},b.prototype.reflection=function(a){var b=g["default"]("n.x",a.x),c=g["default"]("n.y",a.y),d=-2*b*c,e=1-2*b*b,f=1-2*c*c;return this.set(e,d,0,d,f,0,0,0,1),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[3+a],b[6+a]]},b.prototype.scale=function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},b.prototype.set=function(a,b,c,d,e,f,g,h,i){var j=this.elements;return j[0]=a,j[3]=b,j[6]=c,j[1]=d,j[4]=e,j[7]=f,j[2]=g,j[5]=h,j[8]=i,this},b.prototype.sub=function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[5],l=a.elements,m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s=l[6],t=l[7],u=l[8],v=c-m,w=d-n,x=e-o,y=f-p,z=g-q,A=h-r,B=i-s,C=j-t,D=k-u;return this.set(v,y,B,w,z,C,x,A,D)},b.prototype.toString=function(){for(var a=[],b=0;b<this.dimensions;b++)a.push(this.row(b).map(function(a){return a.toString()}).join(" "));return a.join("\n")},b.prototype.translation=function(a){var b=a.x,c=a.y;return this.set(1,0,b,0,1,c,0,0,1)},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},b.prototype.zero=function(){return this.set(0,0,0,0,0,0,0,0,0)},b.prototype.__add__=function(a){return a instanceof b?this.clone().add(a):void 0},b.prototype.__radd__=function(a){return a instanceof b?a.clone().add(this):void 0},b.prototype.__mul__=function(a){return a instanceof b?this.clone().mul(a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?a.clone().mul(this):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__pos__=function(){return this.clone()},b.prototype.__neg__=function(){return this.clone().scale(-1)},b.prototype.__sub__=function(a){return a instanceof b?this.clone().sub(a):void 0},b.prototype.__rsub__=function(a){return a instanceof b?a.clone().sub(this):void 0},b.one=function(){return new b(new Float32Array([1,0,0,0,1,0,0,0,1]))},b.reflection=function(a){return b.zero().reflection(a)},b.zero=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0]))},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/checks/mustBeDefined.js",["../checks/mustSatisfy","../checks/isDefined"],function(a){function b(){return"not be be `undefined`"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/expectArg.js",["../checks/isUndefined","../checks/mustBeNumber"],function(a){function b(a,b){return d["default"](b)?a:b()}function c(a,c){var f={toSatisfy:function(a,b){if(d["default"](a))throw new Error("condition must be specified");if(d["default"](b))throw new Error("message must be specified");if(!a)throw new Error(b);return f},toBeBoolean:function(d){var e=typeof c;if("boolean"!==e)throw new Error(b("Expecting argument "+a+": "+e+" to be a boolean.",d));return f},toBeDefined:function(){var b=typeof c;if("undefined"===b){var d="Expecting argument "+a+": "+b+" to be defined.";throw new Error(d)}return f},toBeInClosedInterval:function(b,d){var g=c,h=g;if(e["default"]("x",h),h>=b&&d>=h)return f;var i="Expecting argument "+a+" => "+c+" to be in the range ["+b+", "+d+"].";throw new Error(i)},toBeFunction:function(){var b=typeof c;if("function"!==b){var d="Expecting argument "+a+": "+b+" to be a function.";throw new Error(d)}return f},toBeNumber:function(d){var e=typeof c;if("number"!==e)throw new Error(b("Expecting argument "+a+": "+e+" to be a number.",d));return f},toBeObject:function(d){var e=typeof c;if("object"!==e)throw new Error(b("Expecting argument "+a+": "+e+" to be an object.",d));return f},toBeString:function(){var b=typeof c;if("string"!==b){var d="Expecting argument "+a+": "+b+" to be a string.";throw new Error(d)}return f},toBeUndefined:function(){var b=typeof c;if("undefined"!==b){var d="Expecting argument "+a+": "+b+" to be undefined.";throw new Error(d)}return f},toNotBeNull:function(){if(null===c){var b="Expecting argument "+a+" to not be null.";throw new Error(b)}return f},get value(){return c}};return f}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/AbstractMatrix.js",["../checks/mustBeDefined","../checks/mustBeInteger","../checks/expectArg","../i18n/readOnly"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a,e){this._elements=b["default"]("elements",a),this._dimensions=c["default"]("dimensions",e),this._length=e*e,d["default"]("elements",a).toSatisfy(a.length===this._length,"elements must have length "+this._length),this.modified=!1}return Object.defineProperty(a.prototype,"elements",{get:function(){if(this._elements)return this._elements;if(this._callback){var a=this._callback();return d["default"]("callback()",a).toSatisfy(a.length===this._length,"callback() length must be "+this._length),this._callback()}throw new Error("Matrix"+Math.sqrt(this._length)+" is undefined.")},set:function(a){d["default"]("elements",a).toSatisfy(a.length===this._length,"elements length must be "+this._length),this._elements=a,this._callback=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},set:function(a){this._callback=a,this._elements=void 0},enumerable:!0,configurable:!0}),a.prototype.copy=function(a){return this.elements.set(a.elements),this},Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._dimensions},set:function(){throw new Error(e["default"]("dimensions").message)},enumerable:!0,configurable:!0}),a}(),a("default",f)}}}),System.register("davinci-eight/math/add4x4.js",[],function(a){function b(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];return c[0]=d+t,c[4]=e+u,c[8]=f+v,c[12]=g+w,c[1]=h+x,c[5]=i+y,c[9]=j+z,c[13]=k+A,c[2]=l+B,c[6]=m+C,c[10]=n+D,c[14]=o+E,c[3]=p+F,c[7]=q+G,c[11]=r+H,c[15]=s+I,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/inv4x4.js",[],function(a){function b(a,b){var c=a[0],d=a[4],e=a[8],f=a[12],g=a[1],h=a[5],i=a[9],j=a[13],k=a[2],l=a[6],m=a[10],n=a[14],o=a[3],p=a[7],q=a[11],r=a[15],s=i*n*p-j*m*p+j*l*q-h*n*q-i*l*r+h*m*r,t=f*m*p-e*n*p-f*l*q+d*n*q+e*l*r-d*m*r,u=e*j*p-f*i*p+f*h*q-d*j*q-e*h*r+d*i*r,v=f*i*l-e*j*l-f*h*m+d*j*m+e*h*n-d*i*n,w=j*m*o-i*n*o-j*k*q+g*n*q+i*k*r-g*m*r,x=e*n*o-f*m*o+f*k*q-c*n*q-e*k*r+c*m*r,y=f*i*o-e*j*o-f*g*q+c*j*q+e*g*r-c*i*r,z=e*j*k-f*i*k+f*g*m-c*j*m-e*g*n+c*i*n,A=h*n*o-j*l*o+j*k*p-g*n*p-h*k*r+g*l*r,B=f*l*o-d*n*o-f*k*p+c*n*p+d*k*r-c*l*r,C=d*j*o-f*h*o+f*g*p-c*j*p-d*g*r+c*h*r,D=f*h*k-d*j*k-f*g*l+c*j*l+d*g*n-c*h*n,E=i*l*o-h*m*o-i*k*p+g*m*p+h*k*q-g*l*q,F=d*m*o-e*l*o+e*k*p-c*m*p-d*k*q+c*l*q,G=e*h*o-d*i*o-e*g*p+c*i*p+d*g*q-c*h*q,H=d*i*k-e*h*k+e*g*l-c*i*l-d*g*m+c*h*m,I=c*s+g*t+k*u+o*v,J=1/I;b[0]=s*J,b[4]=t*J,b[8]=u*J,b[12]=v*J,b[1]=w*J,b[5]=x*J,b[9]=y*J,b[13]=z*J,b[2]=A*J,b[6]=B*J,b[10]=C*J,b[14]=D*J,b[3]=E*J,b[7]=F*J,b[11]=G*J,b[15]=H*J}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mul4x4.js",[],function(a){function b(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];return c[0]=d*t+e*x+f*B+g*F,c[4]=d*u+e*y+f*C+g*G,c[8]=d*v+e*z+f*D+g*H,c[12]=d*w+e*A+f*E+g*I,c[1]=h*t+i*x+j*B+k*F,c[5]=h*u+i*y+j*C+k*G,c[9]=h*v+i*z+j*D+k*H,c[13]=h*w+i*A+j*E+k*I,c[2]=l*t+m*x+n*B+o*F,c[6]=l*u+m*y+n*C+o*G,c[10]=l*v+m*z+n*D+o*H,c[14]=l*w+m*A+n*E+o*I,c[3]=p*t+q*x+r*B+s*F,c[7]=p*u+q*y+r*C+s*G,c[11]=p*v+q*z+r*D+s*H,c[15]=p*w+q*A+r*E+s*I,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Mat4R.js",["../math/AbstractMatrix","../math/add4x4","../math/inv4x4","../math/mul4x4"],function(a){var b,c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b){a.call(this,b,4)}return g(b,a),b.one=function(){return new b(new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]))},b.zero=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))},b.scaling=function(a){return b.one().scaling(a)},b.translation=function(a){return b.one().translation(a)},b.rotation=function(a){return b.one().rotation(a)},b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return c["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){return b.zero().copy(this)},b.prototype.compose=function(a,b,c){return this.scaling(a),this.rotate(b),this.translate(c),this},b.prototype.copy=function(a){return this.elements.set(a.elements),this},b.prototype.det=function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=b*g,s=b*h,t=b*i,u=c*f,v=c*h,w=c*i,x=d*f,y=d*g,z=d*i,A=e*f,B=e*g,C=e*h;return n*((C-z)*k+(w-B)*l+(y-v)*m)+o*((z-C)*j+(A-t)*l+(s-x)*m)+p*((B-w)*j+(t-A)*k+(u-r)*m)+q*((v-y)*j+(x-s)*k+(r-u)*l)},b.prototype.inv=function(){return d["default"](this.elements,this.elements),this},b.prototype.invert=function(a){return d["default"](a.elements,this.elements),this},b.prototype.one=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},b.prototype.scale=function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},b.prototype.frustum=function(a,b,c,d,e,f){var g=this.elements,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},b.prototype.rotationAxis=function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1)},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){return e["default"](a.elements,b.elements,this.elements),this},b.prototype.rmul=function(a){return this.mul2(a,this)},b.prototype.reflection=function(a){var b=a.x,c=a.y,d=a.z,e=-2*b*c,f=-2*c*d,g=-2*d*b,h=1-2*b*b,i=1-2*c*c,j=1-2*d*d;return this.set(h,e,g,0,e,i,f,0,g,f,j,0,0,0,0,1),this},b.prototype.rotate=function(a){return this.rmul(b.rotation(a))},b.prototype.rotation=function(a){var b=-a.yz,c=-a.zx,d=-a.xy,e=a.α,f=b+b,g=c+c,h=d+d,i=b*f,j=b*g,k=b*h,l=c*g,m=c*h,n=d*h,o=e*f,p=e*g,q=e*h;return this.set(1-l-n,j-q,k+p,0,j+q,1-i-n,m-o,0,k-p,m+o,1-i-l,0,0,0,0,1),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[4+a],b[8+a],b[12+a]]},b.prototype.scaleXYZ=function(a){return this.rmul(b.scaling(a))},b.prototype.scaling=function(a){return this.set(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1)},b.prototype.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},b.prototype.toFixed=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(){for(var a=[],b=0;b<this.dimensions;b++)a.push(this.row(b).map(function(a){return a.toString()}).join(" "));return a.join("\n")},b.prototype.translate=function(a){return this.rmul(b.translation(a))},b.prototype.translation=function(a){var b=a.x,c=a.y,d=a.z;return this.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1)},b.prototype.zero=function(){return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},b.prototype.__mul__=function(a){return a instanceof b?b.one().mul2(this,a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?b.one().mul2(a,this):"number"==typeof a?this.clone().scale(a):void 0},b}(b["default"]),a("default",f)}}}),System.register("davinci-eight/math/toStringCustom.js",["../math/stringFromCoordinates"],function(a){function b(a,b,d,e){var f=c["default"](a,d,e);if(b){var g=b.toString().trim();return g?f+" "+g:f}return f}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/math/R3.js",["../math/dotVectorE3","../math/Euclidean3","../math/Mat3R","../math/Mat4R","../checks/isDefined","../checks/isNumber","../math/toStringCustom","../math/VectorN","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a){function b(a){return[a.x,a.y,a.z]}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=Math.sqrt,o=0,p=1,q=2,r=["e1","e2","e3"],s=function(a){function j(b,c){void 0===b&&(b=[0,0,0]),void 0===c&&(c=!1),a.call(this,b,c,3)}return t(j,a),j.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z},Object.defineProperty(j.prototype,"x",{get:function(){return this.coords[o]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[o]=a},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"y",{get:function(){return this.coords[p]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[p]=a},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"z",{get:function(){return this.coords[q]},set:function(a){this.modified=this.modified||this.z!==a,this.coords[q]=a},enumerable:!0,configurable:!0}),j.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},j.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},j.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[3]*c+e[6]*d,this.y=e[1]*b+e[4]*c+e[7]*d,this.z=e[2]*b+e[5]*c+e[8]*d,this},j.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},j.prototype.reflect=function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=2*(b*e+c*f+d*g);return this.x=b-h*e,this.y=c-h*f,this.z=d-h*g,this},j.prototype.rotate=function(a){var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.α,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},j.prototype.clone=function(){return new j([this.x,this.y,this.z])},j.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},j.prototype.copyCoordinates=function(a){return this.x=a[o],this.y=a[p],this.z=a[q],this},j.prototype.cross=function(a){return this.cross2(this,a)},j.prototype.cross2=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=l["default"](c,d,e,f,g,h),this.y=m["default"](c,d,e,f,g,h),this.z=k["default"](c,d,e,f,g,h),this},j.prototype.distanceTo=function(a){return g["default"](a)?n(this.quadranceTo(a)):void 0},j.prototype.quadranceTo=function(a){if(g["default"](a)){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d}return void 0},j.prototype.divByScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},j.prototype.dot=function(a){return j.dot(this,a)},j.prototype.magnitude=function(){return n(this.squaredNorm())},j.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},j.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},j.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},j.prototype.direction=function(){return this.divByScalar(this.magnitude())},j.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this},j.prototype.setXYZ=function(a,b,c){return this.x=a,this.y=b,this.z=c,this},j.prototype.setY=function(a){return this.y=a,this},j.prototype.slerp=function(){return this},j.prototype.squaredNorm=function(){return c["default"](this,this)},j.prototype.sub=function(a,b){return void 0===b&&(b=1),this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this},j.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},j.prototype.toExponential=function(){var a=function(a){return a.toExponential()};return i["default"](b(this),void 0,a,r)},j.prototype.toFixed=function(a){var c=function(b){return b.toFixed(a)};return i["default"](b(this),void 0,c,r)},j.prototype.toString=function(){var a=function(a){return a.toString()};return i["default"](b(this),void 0,a,r)},j.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this},j.prototype.__add__=function(a){return a instanceof j?this.clone().add(a,1):void 0},j.prototype.__sub__=function(a){return a instanceof j?this.clone().sub(a):void 0},j.prototype.__mul__=function(a){return h["default"](a)?this.clone().scale(a):void 0},j.prototype.__rmul__=function(a){if("number"==typeof a)return this.clone().scale(a);if(a instanceof e["default"]){var b=a;return this.clone().applyMatrix(b)}if(a instanceof f["default"]){var c=a;return this.clone().applyMatrix4(c)}return void 0},j.copy=function(a){return new j([a.x,a.y,a.z])},j.lerp=function(a,b,c){return j.copy(b).sub(a).scale(c).add(a)},j.random=function(){return new j([Math.random(),Math.random(),Math.random()])},j.e1=d["default"].e1,j.e2=d["default"].e2,j.e3=d["default"].e3,j}(j["default"]),a("default",s)}}}),System.register("davinci-eight/geometries/SphereGeometry.js",["../geometries/arc3","../checks/mustBeNumber","../math/R1","../geometries/Simplex","../geometries/SliceSimplexGeometry","../math/SpinG3","../math/R2","../math/R3"],function(a){function b(a,b,c,d,e,f,g,i,j,k){for(var l=m["default"].dual(b),p=g+1,q=i+1,r=0;p>r;r++)for(var s=r/g,t=e+s*f,u=a*Math.sin(t),v=o["default"].copy(c).scale(u),w=h["default"](v,d,l,i),x=Math.cos(t),y=a*x,z=0;q>z;z++){var A=z/i,B=w[z].add(b,y);j.push(B),k.push(new n["default"]([A,1-s]))}}function c(a,b,c){return a*(c+1)+b}function d(a,b,c){switch(b){case 0:return a+1;case 1:return a;case 2:return a+c+1;case 3:return a+c+2}}function e(a,b,e,f,g,h){for(var i=0;f>i;i++)for(var j=0;g>j;j++){var k=c(i,j,g),l=d(k,0,g),m=d(k,1,g),n=d(k,2,g),p=d(k,3,g),q=o["default"].copy(a[l]).direction(),r=o["default"].copy(a[m]).direction(),s=o["default"].copy(a[n]).direction(),t=o["default"].copy(a[p]).direction(),u=b[l].clone(),v=b[m].clone(),w=b[n].clone(),x=b[p].clone();h.triangle([a[l],a[m],a[p]],[q,r,t],[u,v,x]),h.triangle([a[n],a[p],a[m]],[s,t,r],[w,x,v])}}function f(a,b,e,f,g,h){for(var i=0;f>i;i++)for(var j=0;g>j;j++){var k=c(i,j,g),l=d(k,0,g),m=d(k,1,g),n=d(k,2,g),p=d(k,3,g),q=o["default"].copy(a[l]).direction(),r=o["default"].copy(a[m]).direction(),s=o["default"].copy(a[n]).direction(),t=o["default"].copy(a[p]).direction(),u=b[l].clone(),v=b[m].clone(),w=b[n].clone(),x=b[p].clone();h.lineSegment([a[l],a[m]],[q,r],[u,v]),h.lineSegment([a[m],a[n]],[r,s],[v,w]),h.lineSegment([a[n],a[p]],[s,t],[w,x]),h.lineSegment([a[p],a[l]],[t,q],[x,u])}}function g(a,b,e,f,g,h){for(var i=0;f>i;i++)for(var j=0;g>j;j++){var k=c(i,j,g),l=d(k,0,g),m=d(k,1,g),n=d(k,2,g),p=d(k,3,g),q=o["default"].copy(a[l]).direction(),r=o["default"].copy(a[m]).direction(),s=o["default"].copy(a[n]).direction(),t=o["default"].copy(a[p]).direction(),u=b[l].clone(),v=b[m].clone(),w=b[n].clone(),x=b[p].clone();h.point([a[l]],[q],[u]),h.point([a[m]],[r],[v]),h.point([a[n]],[s],[w]),h.point([a[p]],[t],[x])}}var h,i,j,k,l,m,n,o,p,q=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p=function(a){function c(b,c,d,e,f,g){void 0===b&&(b=1),void 0===e&&(e=2*Math.PI),void 0===f&&(f=0),void 0===g&&(g=Math.PI),a.call(this,c,d,e),this._radius=new j["default"]([b]),this.thetaLength=g,this.thetaStart=f,this.setModified(!0),this.regenerate()}return q(c,a),Object.defineProperty(c.prototype,"radius",{get:function(){return this._radius.x},set:function(a){this._radius.x=i["default"]("radius",a)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"phiLength",{get:function(){return this.sliceAngle},set:function(a){this.sliceAngle=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"phiStart",{get:function(){
return this.sliceStart},set:function(a){this.sliceStart.copy(a)},enumerable:!0,configurable:!0}),c.prototype.setAxis=function(b){return a.prototype.setAxis.call(this,b),this},c.prototype.setPosition=function(b){return a.prototype.setPosition.call(this,b),this},c.prototype.enableTextureCoords=function(b){return a.prototype.enableTextureCoords.call(this,b),this},c.prototype.isModified=function(){return this._radius.modified||a.prototype.isModified.call(this)},c.prototype.setModified=function(b){return a.prototype.setModified.call(this,b),this._radius.modified=b,this},c.prototype.regenerate=function(){this.data=[];var a=this.curvedSegments,c=this.curvedSegments,d=[],h=[];switch(b(this.radius,this.axis,this.phiStart,this.phiLength,this.thetaStart,this.thetaLength,a,c,d,h),this.k){case k["default"].EMPTY:e(d,h,this.radius,a,c,this);break;case k["default"].POINT:g(d,h,this.radius,a,c,this);break;case k["default"].LINE:f(d,h,this.radius,a,c,this);break;case k["default"].TRIANGLE:e(d,h,this.radius,a,c,this);break;default:console.warn(this.k+"-simplex is not supported for geometry generation.")}this.setModified(!1)},c}(l["default"]),a("default",p)}}}),System.register("davinci-eight/visual/visualCache.js",["../geometries/ArrowGeometry","../geometries/CuboidGeometry","../geometries/CylinderSimplexGeometry","../resources/GraphicsBuffers","../materials/MeshLambertMaterial","../math/G3","../geometries/SphereGeometry"],function(a){function b(){var a=new f["default"](k["default"].e2),b=a.toPrimitives();return new i["default"](b)}function c(){var a=new g["default"],b=a.toPrimitives();return new i["default"](b)}function d(){var a=new h["default"],b=a.toPrimitives();return new i["default"](b)}function e(){var a=new l["default"](1,k["default"].e2),b=a.toPrimitives();return new i["default"](b)}var f,g,h,i,j,k,l,m,n;return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=function(){function a(){this.buffersMap={}}return a.prototype.isZombieOrMissing=function(a){var b=this.buffersMap[a];return b?b.isZombie():!0},a.prototype.ensureBuffers=function(a,b){return this.isZombieOrMissing(a)?this.buffersMap[a]=b():this.buffersMap[a].addRef(),this.buffersMap[a]},a.prototype.arrow=function(){return this.ensureBuffers("arrow",b)},a.prototype.box=function(){return this.ensureBuffers("box",c)},a.prototype.cylinder=function(){return this.ensureBuffers("cylinder",d)},a.prototype.sphere=function(){return this.ensureBuffers("sphere",e)},a.prototype.program=function(){return this._program?this._program.isZombie()?this._program=new j["default"]:this._program.addRef():this._program=new j["default"],this._program},a}(),n=new m,a("default",n)}}}),System.register("davinci-eight/visual/createSphere.js",["../facets/ColorFacet","../scene/Drawable","../facets/ModelFacet","../checks/mustBeNumber","../i18n/readOnly","./visualCache"],function(a){function b(){var a=h["default"].sphere(),b=h["default"].program(),k=new d["default"](a,b);a.release(),a=void 0,b.release(),b=void 0;var l=new e["default"];k.setFacet(j,l),l.release(),l=void 0;var m=new c["default"];k.setFacet(i,m),m.release(),m=void 0;var n={get color(){var a=k.getFacet(i),b=a.color;return a.release(),b},set color(a){var b=k.getFacet(i);b.color.copy(a),b.release()},get graphicsBuffers(){return k.graphicsBuffers},set graphicsBuffers(a){throw new Error(g["default"]("graphicsBuffers").message)},get graphicsProgram(){return k.graphicsProgram},set graphicsProgram(a){throw new Error(g["default"]("graphicsProgram").message)},get name(){return k.name},set name(a){k.name=a},get R(){var a=k.getFacet(j),b=a.R;return a.release(),b},set R(a){var b=k.getFacet(j);b.R.copy(a),b.release()},get X(){var a=k.getFacet(j),b=a.X;return a.release(),b},set X(a){var b=k.getFacet(j);b.X.copyVector(a),b.release()},get radius(){var a=k.getFacet(j),b=a.scaleXYZ.x;return a.release(),b},set radius(a){f["default"]("radius",a);var b=k.getFacet(j);b.scaleXYZ.x=a,b.scaleXYZ.y=a,b.scaleXYZ.z=a,b.release()},getFacet:function(a){return k.getFacet(a)},setFacet:function(a,b){k.setFacet(a,b)},setUniforms:function(a){k.setUniforms(a)},addRef:function(){return k.addRef()},release:function(){return k.release()},contextFree:function(a){return k.contextFree(a)},contextGain:function(a){return k.contextGain(a)},contextLost:function(a){return k.contextLost(a)}};return n}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i="color",j="model"}}}),System.register("davinci-eight/math/dotVectorE3.js",["../math/dotVectorCartesianE3","../checks/isDefined"],function(a){function b(a,b){return d["default"](a)&&d["default"](b)?c["default"](a.x,a.y,a.z,b.x,b.y,b.z):void 0}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/addE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a+i);break;case 1:r=+(b+j);break;case 2:r=+(c+k);break;case 3:r=+(d+l);break;case 4:r=+(e+m);break;case 5:r=+(f+n);break;case 6:r=+(g+o);break;case 7:r=+(h+p);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/b2.js",[],function(a){function b(a,b){var c=1-a;return c*c*b}function c(a,b){return 2*(1-a)*a*b}function d(a,b){return a*a*b}function e(a,e,f,g){return b(a,e)+c(a,f)+d(a,g)}return a("default",e),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/b3.js",[],function(a){function b(a,b){var c=1-a;return c*c*c*b}function c(a,b){var c=1-a;return 3*c*c*a*b}function d(a,b){var c=1-a;return 3*c*a*a*b}function e(a,b){return a*a*a*b}function f(a,f,g,h,i){return b(a,f)+c(a,g)+d(a,h)+e(a,i)}return a("default",f),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeNumber.js",["../core","../checks/mustSatisfy","../checks/isNumber"],function(a){function b(){return"be a `number`"}function c(a,c,g){if(d["default"].fastPath){if(d["default"].strict)throw new Error("mustBeNumber must not be called on the fast path.");console.warn("mustBeNumber should not be called on the fast path.")}return e["default"](a,f["default"](c),b,g),c}var d,e,f;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/NotImplementedError.js",[],function(a){var b,c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[],execute:function(){b=function(a){function b(b){a.call(this,b),this.name="NotImplementedError"}return c(b,a),b}(Error),a("default",b)}}}),System.register("davinci-eight/math/subE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a-i);break;case 1:r=+(b-j);break;case 2:r=+(c-k);break;case 3:r=+(d-l);break;case 4:r=+(e-m);break;case 5:r=+(f-n);break;case 6:r=+(g-o);break;case 7:r=+(h-p);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Dimensions.js",["../math/QQ"],function(a){function b(a,b){if(b instanceof c["default"])return b;throw new Error("Argument '"+b+"' must be a QQ")}var c,d,e,f,g;return{setters:[function(a){c=a}],execute:function(){d=c["default"].ZERO,e=c["default"].ONE,f=c["default"].MINUS_ONE,g=function(){function a(a,c,d,e,f,g,h){if(this.M=a,this.L=c,this.T=d,this.Q=e,this.temperature=f,this.amount=g,this.intensity=h,b("M",a),b("L",c),b("T",d),b("Q",e),b("temperature",f),b("amount",g),b("intensity",h),7!==arguments.length)throw new Error("Expecting 7 arguments")}return a.prototype.compatible=function(a){if(this.M.equals(a.M)&&this.L.equals(a.L)&&this.T.equals(a.T)&&this.Q.equals(a.Q)&&this.temperature.equals(a.temperature)&&this.amount.equals(a.amount)&&this.intensity.equals(a.intensity))return this;throw new Error("Dimensions must be equal ("+this+", "+a+")")},a.prototype.mul=function(b){return new a(this.M.add(b.M),this.L.add(b.L),this.T.add(b.T),this.Q.add(b.Q),this.temperature.add(b.temperature),this.amount.add(b.amount),this.intensity.add(b.intensity))},a.prototype.div=function(b){return new a(this.M.sub(b.M),this.L.sub(b.L),this.T.sub(b.T),this.Q.sub(b.Q),this.temperature.sub(b.temperature),this.amount.sub(b.amount),this.intensity.sub(b.intensity))},a.prototype.pow=function(b){return new a(this.M.mul(b),this.L.mul(b),this.T.mul(b),this.Q.mul(b),this.temperature.mul(b),this.amount.mul(b),this.intensity.mul(b))},a.prototype.sqrt=function(){return new a(this.M.div(c["default"].TWO),this.L.div(c["default"].TWO),this.T.div(c["default"].TWO),this.Q.div(c["default"].TWO),this.temperature.div(c["default"].TWO),this.amount.div(c["default"].TWO),this.intensity.div(c["default"].TWO))},a.prototype.isOne=function(){return this.M.isZero()&&this.L.isZero()&&this.T.isZero()&&this.Q.isZero()&&this.temperature.isZero()&&this.amount.isZero()&&this.intensity.isZero()},a.prototype.isZero=function(){return!1},a.prototype.inv=function(){return new a(this.M.neg(),this.L.neg(),this.T.neg(),this.Q.neg(),this.temperature.neg(),this.amount.neg(),this.intensity.neg())},a.prototype.neg=function(){return this},a.prototype.toString=function(){var a=function(a,b){return 0===a.numer?null:1===a.denom?1===a.numer?""+b:""+b+" ** "+a.numer:""+b+" ** "+a};return[a(this.M,"mass"),a(this.L,"length"),a(this.T,"time"),a(this.Q,"charge"),a(this.temperature,"thermodynamic temperature"),a(this.amount,"amount of substance"),a(this.intensity,"luminous intensity")].filter(function(a){return"string"==typeof a}).join(" * ")},a.prototype.__add__=function(b){return b instanceof a?this.compatible(b):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.compatible(this):void 0},a.prototype.__sub__=function(b){return b instanceof a?this.compatible(b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.compatible(this):void 0},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):void 0},a.prototype.__div__=function(b){return b instanceof a?this.div(b):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):void 0},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this},a.ONE=new a(d,d,d,d,d,d,d),a.MASS=new a(e,d,d,d,d,d,d),a.LENGTH=new a(d,e,d,d,d,d,d),a.TIME=new a(d,d,e,d,d,d,d),a.CHARGE=new a(d,d,d,e,d,d,d),a.CURRENT=new a(d,d,f,e,d,d,d),a.TEMPERATURE=new a(d,d,d,d,e,d,d),a.AMOUNT=new a(d,d,d,d,d,e,d),a.INTENSITY=new a(d,d,d,d,d,d,e),a}(),a("default",g)}}}),System.register("davinci-eight/math/QQ.js",["../checks/mustBeInteger","../i18n/readOnly"],function(a){var b,c,d;return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(){function a(a,c){b["default"]("n",a),b["default"]("d",c);var d,e=function(a,c){b["default"]("a",a),b["default"]("b",c);var d;for(0>a&&(a=-a),0>c&&(c=-c),c>a&&(d=a,a=c,c=d);;){if(a%=c,0===a)return c;if(c%=a,0===c)return a}};if(0===c)throw new Error("denominator must not be zero");d=0===a?1:e(Math.abs(a),Math.abs(c)),0>c&&(a=-a,c=-c),this._numer=a/d,this._denom=c/d}return Object.defineProperty(a.prototype,"numer",{get:function(){return this._numer},set:function(){throw new Error(c["default"]("numer").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"denom",{get:function(){return this._denom},set:function(){throw new Error(c["default"]("denom").message)},enumerable:!0,configurable:!0}),a.prototype.add=function(b){return new a(this._numer*b._denom+this._denom*b._numer,this._denom*b._denom)},a.prototype.sub=function(b){return new a(this._numer*b._denom-this._denom*b._numer,this._denom*b._denom)},a.prototype.mul=function(b){return new a(this._numer*b._numer,this._denom*b._denom)},a.prototype.div=function(b){return"number"==typeof b?new a(this._numer,this._denom*b):new a(this._numer*b._denom,this._denom*b._numer)},a.prototype.isOne=function(){return 1===this._numer&&1===this._denom},a.prototype.isZero=function(){return 0===this._numer&&1===this._denom},a.prototype.inv=function(){return new a(this._denom,this._numer)},a.prototype.neg=function(){return new a(-this._numer,this._denom)},a.prototype.equals=function(b){return b instanceof a?this._numer*b._denom===this._denom*b._numer:!1},a.prototype.toString=function(){return""+this._numer+"/"+this._denom},a.prototype.__add__=function(b){return b instanceof a?this.add(b):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.add(this):void 0},a.prototype.__sub__=function(b){return b instanceof a?this.sub(b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.sub(this):void 0},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):void 0},a.prototype.__div__=function(b){return b instanceof a?this.div(b):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):void 0},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this.neg()},a.ONE=new a(1,1),a.TWO=new a(2,1),a.MINUS_ONE=new a(-1,1),a.ZERO=new a(0,1),a}(),a("default",d)}}}),System.register("davinci-eight/math/UnitError.js",[],function(a){var b,c=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[],execute:function(){b=function(a){function b(b){a.call(this,b),this.name="UnitError"}return c(b,a),b}(Error),a("default",b)}}}),System.register("davinci-eight/math/Unit.js",["../math/Dimensions","../math/QQ","../math/UnitError"],function(a){function b(a,b){if("number"==typeof b)return b;throw new n["default"]("Argument '"+a+"' must be a number")}function c(a,b){if(b instanceof l["default"])return b;throw new n["default"]("Argument '"+b+"' must be a Dimensions")}function d(a,b){if(b instanceof m["default"])return b;throw new n["default"]("Argument '"+b+"' must be a QQ")}function e(a,b){if(b instanceof r)return b;throw new n["default"]("Argument '"+b+"' must be a Unit")}function f(a,b){return"undefined"==typeof b?b:e(a,b)}function g(a,b){return new r(a.multiplier+b.multiplier,a.dimensions.compatible(b.dimensions),a.labels)}function h(a,b){return new r(a.multiplier-b.multiplier,a.dimensions.compatible(b.dimensions),a.labels)}function i(a,b){return new r(a.multiplier*b.multiplier,a.dimensions.mul(b.dimensions),a.labels)}function j(a,b){return new r(a*b.multiplier,b.dimensions,b.labels)}function k(a,b){return new r(a.multiplier/b.multiplier,a.dimensions.div(b.dimensions),a.labels)}var l,m,n,o,p,q,r;return{setters:[function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=["kg","m","s","C","K","mol","candela"],p=function(a,d,e){b("multiplier",a),c("dimensions",d);var f,g,h,i=function(a,b){return 0===a.numer?null:1===a.denom?1===a.numer?""+b:""+b+" ** "+a.numer:""+b+" ** "+a};return f=1===a||d.isOne()?"":" ",g=1===a?"":""+a,h=[i(d.M,e[0]),i(d.L,e[1]),i(d.T,e[2]),i(d.Q,e[3]),i(d.temperature,e[4]),i(d.amount,e[5]),i(d.intensity,e[6])].filter(function(a){return"string"==typeof a}).join(" "),""+g+f+h},q=function(a,b,c){for(var d=[[-1,1,-3,1,2,1,2,1,0,1,0,1,0,1],[-1,1,-2,1,1,1,2,1,0,1,0,1,0,1],[-1,1,-2,1,2,1,2,1,0,1,0,1,0,1],[-1,1,3,1,-2,1,0,1,0,1,0,1,0,1],[0,1,0,1,-1,1,0,1,0,1,0,1,0,1],[0,1,0,1,-1,1,1,1,0,1,0,1,0,1],[0,1,1,1,-2,1,0,1,0,1,0,1,0,1],[0,1,1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,-1,1,-2,1,0,1,0,1,0,1,0,1],[1,1,-1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,0,1,-3,1,0,1,0,1,0,1,0,1],[1,1,0,1,-2,1,0,1,0,1,0,1,0,1],[1,1,0,1,-1,1,-1,1,0,1,0,1,0,1],[1,1,1,1,-3,1,0,1,-1,1,0,1,0,1],[1,1,1,1,-2,1,-1,1,0,1,0,1,0,1],[1,1,1,1,-2,1,0,1,0,1,0,1,0,1],[1,1,1,1,0,1,-2,1,0,1,0,1,0,1],[1,1,2,1,-2,1,0,1,-1,1,0,1,0,1],[0,1,2,1,-2,1,0,1,-1,1,0,1,0,1],[1,1,2,1,-2,1,0,1,-1,1,-1,1,0,1],[1,1,2,1,-2,1,0,1,0,1,-1,1,0,1],[1,1,2,1,-2,1,0,1,0,1,0,1,0,1],[1,1,2,1,-1,1,0,1,0,1,0,1,0,1],[1,1,2,1,-3,1,0,1,0,1,0,1,0,1],[1,1,2,1,-2,1,-1,1,0,1,0,1,0,1],[1,1,2,1,-1,1,-2,1,0,1,0,1,0,1],[1,1,2,1,0,1,-2,1,0,1,0,1,0,1],[1,1,2,1,-1,1,-1,1,0,1,0,1,0,1]],e=[["F/m"],["S"],["F"],["N·m ** 2/kg ** 2"],["Hz"],["A"],["m/s ** 2"],["m/s"],["kg·m/s"],["Pa"],["Pa·s"],["W/m ** 2"],["N/m"],["T"],["W/(m·K)"],["V/m"],["N"],["H/m"],["J/K"],["J/(kg·K)"],["J/(mol·K)"],["J/mol"],["J"],["J·s"],["W"],["V"],["Ω"],["H"],["Wb"]],f=b.M,g=b.L,h=b.T,i=b.Q,j=b.temperature,k=b.amount,l=b.intensity,m=0,n=d.length;n>m;m++){var o=d[m];if(f.numer===o[0]&&f.denom===o[1]&&g.numer===o[2]&&g.denom===o[3]&&h.numer===o[4]&&h.denom===o[5]&&i.numer===o[6]&&i.denom===o[7]&&j.numer===o[8]&&j.denom===o[9]&&k.numer===o[10]&&k.denom===o[11]&&l.numer===o[12]&&l.denom===o[13])return 1!==a?a+" * "+e[m][0]:e[m][0]}return p(a,b,c)},r=function(){function a(a,b,c){if(this.multiplier=a,this.dimensions=b,this.labels=c,7!==c.length)throw new Error("Expecting 7 elements in the labels array.");this.multiplier=a,this.dimensions=b,this.labels=c}return a.prototype.compatible=function(b){if(b instanceof a)return this.dimensions.compatible(b.dimensions),this;throw new Error("Illegal Argument for Unit.compatible: "+b)},a.prototype.add=function(a){return e("rhs",a),g(this,a)},a.prototype.__add__=function(b){return b instanceof a?g(this,b):void 0},a.prototype.__radd__=function(b){return b instanceof a?g(b,this):void 0},a.prototype.sub=function(a){return e("rhs",a),h(this,a)},a.prototype.__sub__=function(b){return b instanceof a?h(this,b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?h(b,this):void 0},a.prototype.mul=function(a){return e("rhs",a),i(this,a)},a.prototype.__mul__=function(b){return b instanceof a?i(this,b):"number"==typeof b?j(b,this):void 0},a.prototype.__rmul__=function(b){return b instanceof a?i(b,this):"number"==typeof b?j(b,this):void 0},a.prototype.div=function(a){return e("rhs",a),k(this,a)},a.prototype.divByScalar=function(b){return new a(this.multiplier/b,this.dimensions,this.labels)},a.prototype.__div__=function(b){return b instanceof a?k(this,b):"number"==typeof b?new a(this.multiplier/b,this.dimensions,this.labels):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?k(b,this):"number"==typeof b?new a(b/this.multiplier,this.dimensions.inv(),this.labels):void 0},a.prototype.pow=function(b){return d("exponent",b),new a(Math.pow(this.multiplier,b.numer/b.denom),this.dimensions.pow(b),this.labels)},a.prototype.inv=function(){return new a(1/this.multiplier,this.dimensions.inv(),this.labels)},a.prototype.neg=function(){return new a(-this.multiplier,this.dimensions,this.labels)},a.prototype.isOne=function(){return this.dimensions.isOne()&&1===this.multiplier},a.prototype.isZero=function(){return this.dimensions.isZero()||0===this.multiplier},a.prototype.lerp=function(){return this},a.prototype.norm=function(){return new a(Math.abs(this.multiplier),this.dimensions,this.labels)},a.prototype.quad=function(){return new a(this.multiplier*this.multiplier,this.dimensions.mul(this.dimensions),this.labels)},a.prototype.reflect=function(){return this},a.prototype.rotate=function(){return this},a.prototype.scale=function(b){return new a(this.multiplier*b,this.dimensions,this.labels)},a.prototype.slerp=function(){return this},a.prototype.toExponential=function(){return q(this.multiplier,this.dimensions,this.labels)},a.prototype.toFixed=function(){return q(this.multiplier,this.dimensions,this.labels)},a.prototype.toString=function(){return q(this.multiplier,this.dimensions,this.labels)},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this.neg()},a.isOne=function(b){if("undefined"==typeof b)return!0;if(b instanceof a)return b.isOne();throw new Error("isOne argument must be a Unit or undefined.")},a.assertDimensionless=function(b){if(!a.isOne(b))throw new n["default"]("uom must be dimensionless.")},a.compatible=function(a,b){if(f("lhs",a),f("rhs",b),a){if(b)return a.compatible(b);if(a.isOne())return void 0;throw new n["default"](a+" is incompatible with 1")}if(b){if(b.isOne())return void 0;throw new n["default"]("1 is incompatible with "+b)}return void 0},a.mul=function(b,c){return b instanceof a?c instanceof a?b.mul(c):a.isOne(c)?b:void 0:a.isOne(b)?c:void 0},a.div=function(b,c){return b instanceof a?c instanceof a?b.div(c):b:c instanceof a?c.inv():void 0},a.sqrt=function(b){return"undefined"!=typeof b?(e("uom",b),b.isOne()?void 0:new a(Math.sqrt(b.multiplier),b.dimensions.sqrt(),b.labels)):void 0},a.ONE=new a(1,l["default"].ONE,o),a.KILOGRAM=new a(1,l["default"].MASS,o),a.METER=new a(1,l["default"].LENGTH,o),a.SECOND=new a(1,l["default"].TIME,o),a.COULOMB=new a(1,l["default"].CHARGE,o),a.AMPERE=new a(1,l["default"].CURRENT,o),a.KELVIN=new a(1,l["default"].TEMPERATURE,o),a.MOLE=new a(1,l["default"].AMOUNT,o),a.CANDELA=new a(1,l["default"].INTENSITY,o),a}(),a("default",r)}}}),System.register("davinci-eight/math/BASIS_LABELS_G3_GEOMETRIC.js",[],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[],execute:function(){b="1",c="←",d="→",e="↑",f="↓",g="⊙",h="⊗",i="↻",j="↺",k="⊶",l="⊷",m="⬘",n="⬙",o="☐",p="■",q=[[b,b],[c,d],[f,e],[h,g],[i,j],[m,n],[l,k],[p,o]],a("default",q)}}}),System.register("davinci-eight/math/BASIS_LABELS_G3_HAMILTON.js",[],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[],execute:function(){b="1",c="i",d="j",e="k",f="ij",g="jk",h="ki",i="ijk",j=[[b],[c],[d],[e],[f],[g],[h],[i]],a("default",j)}}}),System.register("davinci-eight/math/BASIS_LABELS_G3_STANDARD.js",[],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[],execute:function(){b="1",c="e1",d="e2",e="e3",f="e12",g="e23",h="e31",i="I",j=[[b],[c],[d],[e],[f],[g],[h],[i]],a("default",j)}}}),System.register("davinci-eight/math/BASIS_LABELS_G3_STANDARD_HTML.js",[],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[],execute:function(){b="1",c="<b>e</b><sub>1</sub>",d="<b>e</b><sub>2</sub>",e="<b>e</b><sub>3</sub>",f=c+d,g=d+e,h=e+c,i=c+d+e,j=[[b],[c],[d],[e],[f],[g],[h],[i]],a("default",j)}}}),System.register("davinci-eight/math/Euclidean3.js",["../math/addE3","../geometries/b2","../geometries/b3","../math/extG3","../checks/isDefined","../math/lcoG3","../math/mulE3","../math/mulG3","../checks/mustBeInteger","../checks/mustBeNumber","../math/NotImplementedError","../math/rcoG3","../i18n/readOnly","../math/scpG3","../math/squaredNormG3","../math/stringFromCoordinates","../math/subE3","../math/Unit","../math/BASIS_LABELS_G3_GEOMETRIC","../math/BASIS_LABELS_G3_HAMILTON","../math/BASIS_LABELS_G3_STANDARD","../math/BASIS_LABELS_G3_STANDARD_HTML"],function(a){function b(a,b){if(b instanceof E)return b;throw new Error("Argument '"+b+"' must be a Euclidean3")}function c(a,b){if("undefined"==typeof b||b instanceof v["default"])return b;throw new Error("Argument '"+b+"' must be a Unit or undefined")}function d(a,b,c,d,e,f){var g=d(b,0),h=d(b,1),i=d(b,2),j=d(b,3),k=d(b,4),l=d(b,5),m=d(b,6),n=d(b,7),o=d(c,0),p=d(c,1),q=d(c,2),r=d(c,3),s=d(c,4),t=d(c,5),u=d(c,6),v=d(c,7),w=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,0),x=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,1),y=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,2),z=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,3),A=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,4),B=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,5),C=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,6),D=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,7);return e(w,x,y,z,A,B,C,D,f)}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a}],execute:function(){A=Math.cos,B=Math.sin,C=Math.sqrt,D=function(a,b,c,d,e,f,g,h,i,j,l,m,n,o,p,q,r){var s,t,u,v,w,x,y,z,A,B,C,D,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va;return S=+i,T=+j,U=+l,V=-m,W=+n,X=-o,Y=-p,Z=-q,K=k["default"](i,j,l,n,m,p,-o,q,S,T,U,W,V,Y,-X,Z,0),L=k["default"](i,j,l,n,m,p,-o,q,S,T,U,W,V,Y,-X,Z,1),M=k["default"](i,j,l,n,m,p,-o,q,S,T,U,W,V,Y,-X,Z,2),N=0,O=k["default"](i,j,l,n,m,p,-o,q,S,T,U,W,V,Y,-X,Z,3),P=0,Q=0,R=0,s=+K,t=-L,u=-M,v=-N,w=-O,x=-P,y=-Q,z=+R,$=k["default"](S,T,U,W,V,Y,-X,Z,s,t,u,w,v,y,-x,z,0),_=k["default"](S,T,U,W,V,Y,-X,Z,s,t,u,w,v,y,-x,z,1),aa=k["default"](S,T,U,W,V,Y,-X,Z,s,t,u,w,v,y,-x,z,2),ba=k["default"](S,T,U,W,V,Y,-X,Z,s,t,u,w,v,y,-x,z,4),ca=k["default"](S,T,U,W,V,Y,-X,Z,s,t,u,w,v,y,-x,z,3),da=-k["default"](S,T,U,W,V,Y,-X,Z,s,t,u,w,v,y,-x,z,6),ea=k["default"](S,T,U,W,V,Y,-X,Z,s,t,u,w,v,y,-x,z,5),fa=k["default"](S,T,U,W,V,Y,-X,Z,s,t,u,w,v,y,-x,z,7),J=k["default"](i,j,l,n,m,p,-o,q,$,_,aa,ca,ba,ea,-da,fa,0),A=$/J,B=_/J,C=aa/J,D=ba/J,F=ca/J,G=da/J,H=ea/J,I=fa/J,ia=k["default"](a,b,c,e,d,g,-f,h,A,B,C,F,D,H,-G,I,0),ja=k["default"](a,b,c,e,d,g,-f,h,A,B,C,F,D,H,-G,I,1),ka=k["default"](a,b,c,e,d,g,-f,h,A,B,C,F,D,H,-G,I,2),la=k["default"](a,b,c,e,d,g,-f,h,A,B,C,F,D,H,-G,I,4),ma=k["default"](a,b,c,e,d,g,-f,h,A,B,C,F,D,H,-G,I,3),na=-k["default"](a,b,c,e,d,g,-f,h,A,B,C,F,D,H,-G,I,6),oa=k["default"](a,b,c,e,d,g,-f,h,A,B,C,F,D,H,-G,I,5),pa=k["default"](a,b,c,e,d,g,-f,h,A,B,C,F,D,H,-G,I,7),ga=ia,ha=ja,sa=ka,ua=ma,qa=la,ta=oa,va=-na,ra=pa,new E(ga,ha,sa,ua,qa,ta,va,ra,r)},E=function(){function a(a,b,d,e,f,g,h,i,j){if(this.w=n["default"]("α",a),this.x=n["default"]("x",b),this.y=n["default"]("y",d),this.z=n["default"]("z",e),this.xy=n["default"]("xy",f),this.yz=n["default"]("yz",g),this.zx=n["default"]("zx",h),this.xyz=n["default"]("β",i),this.uom=c("uom",j),this.uom&&1!==this.uom.multiplier){var k=this.uom.multiplier;this.w*=k,this.x*=k,this.y*=k,this.z*=k,this.xy*=k,this.yz*=k,this.zx*=k,this.xyz*=k,this.uom=new v["default"](1,j.dimensions,j.labels)}}return Object.defineProperty(a,"BASIS_LABELS_GEOMETRIC",{get:function(){return w["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(a,"BASIS_LABELS_HAMILTON",{get:function(){return x["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(a,"BASIS_LABELS_STANDARD",{get:function(){return y["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(a,"BASIS_LABELS_STANDARD_HTML",{get:function(){return z["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"α",{get:function(){return this.w},set:function(){throw new Error(q["default"]("α").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"β",{get:function(){return this.xyz},set:function(){throw new Error(q["default"]("β").message)},enumerable:!0,configurable:!0}),a.fromCartesian=function(b,d,e,f,g,h,i,j,k){return n["default"]("α",b),n["default"]("x",d),n["default"]("y",e),n["default"]("z",f),n["default"]("xy",g),n["default"]("yz",h),n["default"]("zx",i),n["default"]("β",j),c("uom",k),new a(b,d,e,f,g,h,i,j,k)},Object.defineProperty(a.prototype,"coords",{get:function(){return[this.w,this.x,this.y,this.z,this.xy,this.yz,this.zx,this.xyz]},enumerable:!0,configurable:!0}),a.prototype.coordinate=function(a){switch(n["default"]("index",a),a){case 0:return this.w;case 1:return this.x;case 2:return this.y;case 3:return this.z;case 4:return this.xy;case 5:return this.yz;case 6:return this.zx;case 7:return this.xyz;default:throw new Error("index must be in the range [0..7]")}},a.prototype.add=function(b){var c=function(a,b){return a[b]},f=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return d(e["default"],this.coords,b.coords,c,f,v["default"].compatible(this.uom,b.uom))},a.prototype.addPseudo=function(b){return i["default"](b)?(n["default"]("β",b),new a(this.w,this.x,this.y,this.z,this.xy,this.yz,this.zx,this.xyz+b,this.uom)):void 0},a.prototype.addScalar=function(b){return i["default"](b)?(n["default"]("α",b),new a(this.w+b,this.x,this.y,this.z,this.xy,this.yz,this.zx,this.xyz,this.uom)):void 0},a.prototype.__add__=function(b){return b instanceof a?this.add(b):"number"==typeof b?this.addScalar(b):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.add(this):"number"==typeof b?this.addScalar(b):void 0},a.prototype.adj=function(){return this},a.prototype.angle=function(){return this.log().grade(2)},a.prototype.conj=function(){return new a(this.w,-this.x,-this.y,-this.z,-this.xy,-this.yz,-this.zx,+this.xyz,this.uom)},a.prototype.cubicBezier=function(b,c,d,e){var f=g["default"](b,this.x,c.x,d.x,e.x),h=g["default"](b,this.y,c.y,d.y,e.y),i=g["default"](b,this.z,c.z,d.z,e.z);return new a(0,f,h,i,0,0,0,0,this.uom)},a.prototype.direction=function(){return this.div(this.norm())},a.prototype.sub=function(b){var c=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return d(u["default"],this.coords,b.coords,c,e,v["default"].compatible(this.uom,b.uom))},a.prototype.__sub__=function(b){return b instanceof a?this.sub(b):"number"==typeof b?this.addScalar(-b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.sub(this):"number"==typeof b?this.neg().addScalar(b):void 0},a.prototype.mul=function(b){var c=new a(1,0,0,0,0,0,0,0,v["default"].mul(this.uom,b.uom));return l["default"](this,b,a.mutator(c)),c},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):"number"==typeof b?this.scale(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):"number"==typeof b?this.scale(b):void 0},a.prototype.scale=function(b){return new a(this.w*b,this.x*b,this.y*b,this.z*b,this.xy*b,this.yz*b,this.zx*b,this.xyz*b,this.uom)},a.prototype.div=function(a){return b("rhs",a),D(this.w,this.x,this.y,this.xy,this.z,-this.zx,this.yz,this.xyz,a.w,a.x,a.y,a.xy,a.z,-a.zx,a.yz,a.xyz,v["default"].div(this.uom,a.uom))},a.prototype.divByScalar=function(b){return new a(this.w/b,this.x/b,this.y/b,this.z/b,this.xy/b,this.yz/b,this.zx/b,this.xyz/b,this.uom)},a.prototype.__div__=function(b){return b instanceof a?this.div(b):"number"==typeof b?this.divByScalar(b):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).div(this):void 0},a.prototype.dual=function(){return new a(1,0,0,0,0,0,0,0,this.uom)},a.prototype.scp=function(b){var c=new a(1,0,0,0,0,0,0,0,v["default"].mul(this.uom,b.uom));return r["default"](this,b,a.mutator(c)),c},a.prototype.ext=function(b){var c=new a(1,0,0,0,0,0,0,0,v["default"].mul(this.uom,b.uom));return h["default"](this,b,a.mutator(c)),c},a.prototype.__vbar__=function(b){return b instanceof a?this.scp(b):"number"==typeof b?this.scp(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?b.scp(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).scp(this):void 0},a.prototype.__wedge__=function(b){return b instanceof a?this.ext(b):"number"==typeof b?this.scale(b):void 0},a.prototype.__rwedge__=function(b){return b instanceof a?b.ext(this):"number"==typeof b?this.scale(b):void 0},a.prototype.lco=function(b){var c=new a(1,0,0,0,0,0,0,0,v["default"].mul(this.uom,b.uom));return j["default"](this,b,a.mutator(c)),c},a.prototype.__lshift__=function(b){return b instanceof a?this.lco(b):"number"==typeof b?this.lco(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rlshift__=function(b){return b instanceof a?b.lco(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).lco(this):void 0},a.prototype.rco=function(b){var c=new a(1,0,0,0,0,0,0,0,v["default"].mul(this.uom,b.uom));return p["default"](this,b,a.mutator(c)),c},a.prototype.__rshift__=function(b){return b instanceof a?this.rco(b):"number"==typeof b?this.rco(new a(b,0,0,0,0,0,0,0,void 0)):void 0;

},a.prototype.__rrshift__=function(b){return b instanceof a?b.rco(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).rco(this):void 0},a.prototype.pow=function(){throw new Error("pow")},a.prototype.__bang__=function(){return this.inv()},a.prototype.__pos__=function(){return this},a.prototype.neg=function(){return new a(-this.w,-this.x,-this.y,-this.z,-this.xy,-this.yz,-this.zx,-this.xyz,this.uom)},a.prototype.__neg__=function(){return this.neg()},a.prototype.rev=function(){return new a(this.w,this.x,this.y,this.z,-this.xy,-this.yz,-this.zx,-this.xyz,this.uom)},a.prototype.__tilde__=function(){return this.rev()},a.prototype.grade=function(b){switch(m["default"]("grade",b),b){case 0:return a.fromCartesian(this.w,0,0,0,0,0,0,0,this.uom);case 1:return a.fromCartesian(0,this.x,this.y,this.z,0,0,0,0,this.uom);case 2:return a.fromCartesian(0,0,0,0,this.xy,this.yz,this.zx,0,this.uom);case 3:return a.fromCartesian(0,0,0,0,0,0,0,this.xyz,this.uom);default:return a.fromCartesian(0,0,0,0,0,0,0,0,this.uom)}},a.prototype.cross=function(b){var c,d,e,f,g,h,i,j,k;return d=this.x,g=this.y,j=this.z,e=b.x,h=b.y,k=b.z,c=g*k-j*h,f=j*e-d*k,i=d*h-g*e,new a(0,c,f,i,0,0,0,0,v["default"].mul(this.uom,b.uom))},a.prototype.isOne=function(){return 1===this.w&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.xyz},a.prototype.isZero=function(){return 0===this.w&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.xyz},a.prototype.lerp=function(){return this},a.prototype.cos=function(){v["default"].assertDimensionless(this.uom);var b=A(this.w);return new a(b,0,0,0,0,0,0,0,void 0)},a.prototype.cosh=function(){throw new o["default"]("cosh(Euclidean3)")},a.prototype.distanceTo=function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return C(b*b+c*c+d*d)},a.prototype.equals=function(){throw new Error("TODO: Euclidean3.equals")},a.prototype.exp=function(){v["default"].assertDimensionless(this.uom);var b=this.grade(2),c=b.norm();if(c.isZero())return new a(1,0,0,0,0,0,0,0,this.uom);var d=c.cos(),e=c.sin(),f=b.direction();return d.add(f.mul(e))},a.prototype.inv=function(){return this.rev().divByScalar(this.squaredNormSansUnits())},a.prototype.log=function(){return new a(1,0,0,0,0,0,0,0,this.uom)},a.prototype.magnitude=function(){return this.norm()},a.prototype.magnitudeSansUnits=function(){return C(this.squaredNormSansUnits())},a.prototype.norm=function(){return new a(this.magnitudeSansUnits(),0,0,0,0,0,0,0,this.uom)},a.prototype.quad=function(){return this.squaredNorm()},a.prototype.quadraticBezier=function(b,c,d){var e=f["default"](b,this.x,c.x,d.x),g=f["default"](b,this.y,c.y,d.y),h=f["default"](b,this.z,c.z,d.z);return new a(0,e,g,h,0,0,0,0,this.uom)},a.prototype.squaredNorm=function(){return new a(this.squaredNormSansUnits(),0,0,0,0,0,0,0,v["default"].mul(this.uom,this.uom))},a.prototype.squaredNormSansUnits=function(){return s["default"](this)},a.prototype.reflect=function(b){var c=a.fromVectorE3(b);return c.mul(this).mul(c).scale(-1)},a.prototype.rotate=function(){return this},a.prototype.sin=function(){v["default"].assertDimensionless(this.uom);var b=B(this.w);return new a(b,0,0,0,0,0,0,0,void 0)},a.prototype.sinh=function(){throw new Error("sinh")},a.prototype.slerp=function(){return this},a.prototype.sqrt=function(){return new a(C(this.w),0,0,0,0,0,0,0,v["default"].sqrt(this.uom))},a.prototype.tan=function(){return this.sin().div(this.cos())},a.prototype.toStringCustom=function(a,b){var c=t["default"](this.coords,a,b);if(this.uom){var d=this.uom.toString().trim();return d?c+" "+d:c}return c},a.prototype.toExponential=function(){var b=function(a){return a.toExponential()};return this.toStringCustom(b,a.BASIS_LABELS)},a.prototype.toFixed=function(b){var c=function(a){return a.toFixed(b)};return this.toStringCustom(c,a.BASIS_LABELS)},a.prototype.toString=function(){var b=function(a){return a.toString()};return this.toStringCustom(b,a.BASIS_LABELS)},a.mutator=function(a){var b={set α(b){a.w=b},set x(b){a.x=b},set y(b){a.y=b},set z(b){a.z=b},set yz(b){a.yz=b},set zx(b){a.zx=b},set xy(b){a.xy=b},set β(b){a.xyz=b}};return b},a.copy=function(b){return b instanceof a?b:new a(b.α,b.x,b.y,b.z,b.xy,b.yz,b.zx,b.β,void 0)},a.fromSpinorE3=function(b){return i["default"](b)?new a(b.α,0,0,0,b.xy,b.yz,b.zx,0,void 0):void 0},a.fromVectorE3=function(b){return i["default"](b)?new a(0,b.x,b.y,b.z,0,0,0,0,void 0):void 0},a.BASIS_LABELS=y["default"],a.zero=new a(0,0,0,0,0,0,0,0),a.one=new a(1,0,0,0,0,0,0,0),a.e1=new a(0,1,0,0,0,0,0,0),a.e2=new a(0,0,1,0,0,0,0,0),a.e3=new a(0,0,0,1,0,0,0,0),a.kilogram=new a(1,0,0,0,0,0,0,0,v["default"].KILOGRAM),a.meter=new a(1,0,0,0,0,0,0,0,v["default"].METER),a.second=new a(1,0,0,0,0,0,0,0,v["default"].SECOND),a.coulomb=new a(1,0,0,0,0,0,0,0,v["default"].COULOMB),a.ampere=new a(1,0,0,0,0,0,0,0,v["default"].AMPERE),a.kelvin=new a(1,0,0,0,0,0,0,0,v["default"].KELVIN),a.mole=new a(1,0,0,0,0,0,0,0,v["default"].MOLE),a.candela=new a(1,0,0,0,0,0,0,0,v["default"].CANDELA),a}(),a("default",E)}}}),System.register("davinci-eight/utils/EventEmitter.js",[],function(a){var b;return{setters:[],execute:function(){b=function(){function a(a){this.owner=a}return a.prototype.addEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];return c||(c=this._eventRegistry[a]=[]),-1===c.indexOf(b)&&c.push(b),b},a.prototype.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}},a.prototype.emit=function(a,b,c){if(this._eventRegistry){var d=this._eventRegistry[a];if(d){var e=d.length;if(e)for(var f=0;e>f;f++)d[f](a,b,c,this.owner)}}},a}(),a("default",b)}}}),System.register("davinci-eight/math/extE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i);break;case 1:r=+(a*j+b*i);break;case 2:r=+(a*k+c*i);break;case 3:r=+(a*l+d*i);break;case 4:r=+(a*m+b*k-c*j+e*i);break;case 5:r=+(a*n+c*l-d*k+f*i);break;case 6:r=+(a*o-b*l+d*j+g*i);break;case 7:r=+(a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/extG3.js",["../math/compG3Get","../math/extE3","../math/compG3Set"],function(a){function b(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;8>w;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/lcoE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(a*j-c*m+d*o-f*p);break;case 2:r=+(a*k+b*m-d*n-g*p);break;case 3:r=+(a*l-b*o+c*n-e*p);break;case 4:r=+(a*m+d*p);break;case 5:r=+(a*n+b*p);break;case 6:r=+(a*o+c*p);break;case 7:r=+(a*p);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/lcoG3.js",["../math/compG3Get","../math/lcoE3","../math/compG3Set"],function(a){function b(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;8>w;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/mulG3.js",["../math/compG3Get","../math/mulE3","../math/compG3Set"],function(a){function b(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;8>w;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/isInteger.js",["../checks/isNumber"],function(a){function b(a){return c["default"](a)&&a%1===0}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/checks/mustBeInteger.js",["../checks/mustSatisfy","../checks/isInteger"],function(a){function b(){return"be an integer"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/dotVectorCartesianE3.js",[],function(a){function b(a,b,c,d,e,f){return a*d+b*e+c*f}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isNumber.js",[],function(a){function b(a){return"number"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/quadVectorE3.js",["../math/dotVectorCartesianE3","../checks/isDefined","../checks/isNumber"],function(a){function b(a){if(d["default"](a)){var b=a.x,f=a.y,g=a.z;return e["default"](b)&&e["default"](f)&&e["default"](g)?c["default"](b,f,g,b,f,g):void 0}return void 0}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/rcoE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(+b*i+e*k-g*l-h*n);break;case 2:r=+(+c*i-e*j+f*l-h*o);break;case 3:r=+(+d*i-f*k+g*j-h*m);break;case 4:r=+(+e*i+h*l);break;case 5:r=+(+f*i+h*j);break;case 6:r=+(+g*i+h*k);break;case 7:r=+(+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/rcoG3.js",["../math/compG3Get","../math/rcoE3","../math/compG3Set"],function(a){function b(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;8>w;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/isString.js",[],function(a){function b(a){return"string"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeString.js",["../core","../checks/mustSatisfy","../checks/isString"],function(a){function b(){return"be a string"}function c(a,c,g){if(d["default"].fastPath){if(d["default"].strict)throw new Error("mustBeString must not be called on the fast path.");console.warn("mustBeString should not be called on the fast path.")}return e["default"](a,f["default"](c),b,g),c}var d,e,f;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/i18n/readOnly.js",["../checks/mustBeString"],function(a){function b(a){c["default"]("name",a);var b={get message(){return"Property `"+a+"` is readonly."}};return b}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/math/rotorFromDirections.js",[],function(a){function b(a,b,d,e,f){var g=d(a),h=c(g),i=d(b),j=c(i),k=j*h,l=c(2*(i*g+k*e(b,a)));return 0!==l?(f=f.spinor(b,a),f=f.addScalar(k),f=f.divByScalar(l)):void 0}var c;return a("default",b),{setters:[],execute:function(){c=Math.sqrt}}}),System.register("davinci-eight/math/compG3Get.js",[],function(a){function b(a,b){switch(b){case c:return a.α;case d:return a.x;case e:return a.y;case f:return a.z;case g:return a.xy;case h:return a.yz;case i:return a.zx;case j:return a.β;default:throw new Error("index => "+b)}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[],execute:function(){c=0,d=1,e=2,f=3,g=4,h=5,i=6,j=7}}}),System.register("davinci-eight/math/mulE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(a*j+b*i-c*m+d*o+e*k-f*p-g*l-h*n);break;case 2:r=+(a*k+b*m+c*i-d*n-e*j+f*l-g*p-h*o);break;case 3:r=+(a*l-b*o+c*n+d*i-e*p-f*k+g*j-h*m);break;case 4:r=+(a*m+b*k-c*j+d*p+e*i-f*o+g*n+h*l);break;case 5:r=+(a*n+b*p+c*l-d*k+e*o+f*i-g*m+h*j);break;case 6:r=+(a*o-b*l+c*p+d*j-e*n+f*m+g*i+h*k);break;case 7:r=+(a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/compG3Set.js",[],function(a){function b(a,b,k){switch(b){case c:a.α=k;break;case d:a.x=k;break;case e:a.y=k;break;case f:a.z=k;break;case g:a.xy=k;break;case h:a.yz=k;break;case i:a.zx=k;break;case j:a.β=k;break;default:throw new Error("index => "+b)}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[],execute:function(){c=0,d=1,e=2,f=3,g=4,h=5,i=6,j=7}}}),System.register("davinci-eight/math/scpG3.js",["../math/compG3Get","../math/mulE3","../math/compG3Set"],function(a){function b(a,b,f){var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7);return e["default"](f,0,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,0)),e["default"](f,1,0),e["default"](f,2,0),e["default"](f,3,0),e["default"](f,4,0),e["default"](f,5,0),e["default"](f,6,0),e["default"](f,7,0),f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/squaredNormG3.js",[],function(a){function b(a){var b=a.α,c=a.x,d=a.y,e=a.z,f=a.yz,g=a.zx,h=a.xy,i=a.β;return b*b+c*c+d*d+e*e+f*f+g*g+h*h+i*i}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/core.js",[],function(a){var b,c;return{setters:[],execute:function(){b=function(){function a(){this.fastPath=!1,this.strict=!1,this.GITHUB="https://github.com/geometryzen/davinci-eight",this.LAST_MODIFIED="2016-02-03",this.NAMESPACE="EIGHT",this.verbose=!1,this.VERSION="2.176.0",this.logging={}}return a}(),c=new b,a("default",c)}}}),System.register("davinci-eight/checks/mustSatisfy.js",[],function(a){function b(a,b,c,d){if(!b){var e=c?c():"satisfy some condition",f=d?" in "+d():"";throw new Error(a+" must "+e+f+".")}}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isArray.js",[],function(a){function b(a){return"[object Array]"===Object.prototype.toString.call(a)}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeArray.js",["../core","../checks/mustSatisfy","../checks/isArray"],function(a){function b(){return"be an array"}function c(a,c,g){if(d["default"].fastPath){if(d["default"].strict)throw new Error("mustBeArray must not be called on the fast path.");console.warn("mustBeArray should not be called on the fast path.")}return e["default"](a,f["default"](c),b,g),c}var d,e,f;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/stringFromCoordinates.js",["../checks/isDefined","../checks/mustBeArray"],function(a){function b(a){if("string"==typeof a)return"1"===a;var c=g["default"]("label",a);return 2===c.length?b(c[0])&&b(c[1]):1===c.length?b(c[0]):!1}function c(a,b,c){if("string"==typeof b)c.push(b);else{var d=g["default"]("label",b);if(2===d.length)c.push(a>0?d[1]:d[0]);else if(1===d.length)c.push(d[0]);else if(0!==d.length)throw new Error("Unexpected basis label array length: "+d.length)}}function d(a,d,e,f){if(0!==a){if(a>=0)f.length>0&&f.push("+");else if("string"==typeof e)f.push("-");else{var h=g["default"]("label",e);2===h.length?h[0]!==h[1]?f.length>0&&f.push("+"):f.push("-"):f.push(1===h.length?"-":"-")}var i=Math.abs(a);1===i?c(a,e,f):(f.push(d(i)),b(e)||(f.push("*"),c(a,e,f)))}}function e(a,b,c){for(var e=[],g=0,h=a.length;h>g;g++){var i=a[g];if(!f["default"](i))return void 0;d(i,b,c[g],e)}return e.length>0?e.join(""):"0"}var f,g;return a("default",e),{setters:[function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/checks/isDefined.js",[],function(a){function b(a){return"undefined"!=typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isUndefined.js",[],function(a){function b(a){return"undefined"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/VectorN.js",["../checks/isDefined","../checks/isUndefined"],function(a){function b(a){return"push(value: "+a+"): number"}function c(a){return"pop(): "+a}function d(a){return a+" is not allowed for a fixed size vector"}function e(){return d(b("T"))}function f(){return d(c("T"))}var g,h,i;return{setters:[function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(a,b,c){void 0===b&&(b=!1),this.modified=b,g["default"](c)?(this._size=c,this._data=a):(this._size=void 0,this._data=a)}return Object.defineProperty(a.prototype,"coords",{get:function(){if(this._data)return this._data;if(this._callback)return this._callback();throw new Error("Vector"+this._size+" is undefined.")},set:function(a){this._data=a,this._callback=void 0,this.modified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},set:function(a){this._callback=a,this._data=void 0,this.modified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this.coords.length},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a(this._data,this.modified,this._size)},a.prototype.getComponent=function(a){return this.coords[a]},a.prototype.pop=function(){if(h["default"](this._size))return this.coords.pop();throw new Error(f())},a.prototype.push=function(a){if(h["default"](this._size)){var b=this.coords,c=b.push(a);return this.coords=b,c}throw new Error(e())},a.prototype.setComponent=function(a,b){var c=this.coords,d=c[a];b!==d&&(c[a]=b,this.coords=c,this.modified=!0)},a.prototype.toArray=function(a,b){void 0===a&&(a=[]),void 0===b&&(b=0);for(var c=this.coords,d=c.length,e=0;d>e;e++)a[b+e]=c[e];return a},a.prototype.toLocaleString=function(){return this.coords.toLocaleString()},a.prototype.toString=function(){return this.coords.toString()},a}(),a("default",i)}}}),System.register("davinci-eight/math/wedgeXY.js",[],function(a){function b(a,b,c,d,e){return a*e-b*d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/wedgeYZ.js",[],function(a){function b(a,b,c,d,e,f){return b*f-c*e}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/wedgeZX.js",[],function(a){function b(a,b,c,d,e,f){return c*d-a*f}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/G3.js",["../math/dotVectorE3","../math/Euclidean3","../utils/EventEmitter","../math/extG3","../math/lcoG3","../math/mulG3","../checks/mustBeInteger","../checks/mustBeString","../math/quadVectorE3","../math/rcoG3","../i18n/readOnly","../math/rotorFromDirections","../math/scpG3","../math/squaredNormG3","../math/stringFromCoordinates","../math/VectorN","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a){function b(a){return[a.α,a.x,a.y,a.z,a.xy,a.yz,a.zx,a.β]}function c(a,b,c,d,e,f,g,h,i){k["default"]("label",a);var j;return j={get α(){return b},set α(b){throw new Error(n["default"](a+".α").message)},get x(){return c},set x(b){throw new Error(n["default"](a+".x").message)},get y(){return d},set y(b){throw new Error(n["default"](a+".y").message)},get z(){return e},set z(b){throw new Error(n["default"](a+".x").message)},get yz(){return f},set yz(b){throw new Error(n["default"](a+".yz").message)},get zx(){return g},set zx(b){throw new Error(n["default"](a+".zx").message)},get xy(){return h},set xy(b){throw new Error(n["default"](a+".xy").message)},get β(){return i},set β(b){throw new Error(n["default"](a+".β").message)},toString:function(){return a}}}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a}],execute:function(){w=0,x=1,y=2,z=3,A=4,B=5,C=6,D=7,E="change",F=Math.atan2,G=Math.exp,H=Math.cos,I=Math.log,J=Math.sin,K=Math.sqrt,L=["1","e1","e2","e3","e12","e23","e31","e123"],M=c("0",0,0,0,0,0,0,0,0),N=c("1",1,0,0,0,0,0,0,0),O=c("e1",0,1,0,0,0,0,0,0),P=c("e2",0,0,1,0,0,0,0,0),Q=c("e2",0,0,0,1,0,0,0,0),R=c("I",0,0,0,0,0,0,0,1),S=function(a){function c(){a.call(this,[0,0,0,0,0,0,0,0],!1,8),this.eventBus=new f["default"](this)}return T(c,a),c.prototype.on=function(a,b){this.eventBus.addEventListener(a,b)},c.prototype.off=function(a,b){this.eventBus.removeEventListener(a,b)},c.prototype.setCoordinate=function(a,b,c){var d=this.coords,e=d[a];b!==e&&(d[a]=b,this.modified=!0,this.eventBus.emit(E,c,b))},Object.defineProperty(c.prototype,"α",{get:function(){return this.coords[w]},set:function(a){this.setCoordinate(w,a,"α")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"x",{get:function(){return this.coords[x]},set:function(a){this.setCoordinate(x,a,"x")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.coords[y]},set:function(a){this.setCoordinate(y,a,"y")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"z",{get:function(){return this.coords[z]},set:function(a){this.setCoordinate(z,a,"z")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"yz",{get:function(){return this.coords[B]},set:function(a){this.setCoordinate(B,a,"yz")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"zx",{get:function(){return this.coords[C]},set:function(a){this.setCoordinate(C,a,"zx")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"xy",{get:function(){return this.coords[A]},set:function(a){this.setCoordinate(A,a,"xy")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"β",{get:function(){return this.coords[D]},set:function(a){this.setCoordinate(D,a,"β")},enumerable:!0,configurable:!0}),c.prototype.add=function(a,b){return void 0===b&&(b=1),this.α+=a.α*b,this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.β+=a.β*b,this},c.prototype.addPseudo=function(a){return this.β+=a,this},c.prototype.addScalar=function(a){return this.α+=a,this},c.prototype.addVector=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},c.prototype.add2=function(a,b){return this.α=a.α+b.α,this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this.β=a.β+b.β,this},c.prototype.adj=function(){throw new Error("TODO: G3.adj")},c.prototype.angle=function(){return this.log().grade(2)},c.prototype.clone=function(){return c.copy(this)},c.prototype.conj=function(){return this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},c.prototype.lco=function(a){return this.lco2(this,a)},c.prototype.lco2=function(a,b){return h["default"](a,b,this)},c.prototype.rco=function(a){return this.rco2(this,a)},c.prototype.rco2=function(a,b){return m["default"](a,b,this)},c.prototype.copy=function(a){return this.α=a.α,this.x=a.x,this.y=a.y,this.z=a.z,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.β=a.β,this},c.prototype.copyScalar=function(a){return this.zero().addScalar(a)},c.prototype.copySpinor=function(a){return this.zero(),this.α=a.α,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this},c.prototype.copyVector=function(a){return this.zero(),this.x=a.x,this.y=a.y,this.z=a.z,this},c.prototype.div=function(a){return this.div2(this,a)},c.prototype.divByScalar=function(a){return this.α/=a,this.x/=a,this.y/=a,this.z/=a,this.yz/=a,this.zx/=a,this.xy/=a,this.β/=a,this},c.prototype.div2=function(a,b){var c=a.α,d=a.yz,e=a.zx,f=a.xy,g=b.α,h=b.yz,i=b.zx,j=b.xy;return this.α=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},c.prototype.dual=function(a){var b=-a.β,c=-a.yz,d=-a.zx,e=-a.xy,f=a.x,g=a.y,h=a.z,i=a.α;return this.α=b,this.x=c,this.y=d,this.z=e,this.yz=f,this.zx=g,this.xy=h,this.β=i,this},c.prototype.exp=function(){var a=G(this.α),b=this.yz,c=this.zx,d=this.xy,e=K(b*b+c*c+d*d),f=0!==e?J(e)/e:1,g=H(e);return this.α=g,this.yz=b*f,this.zx=c*f,this.xy=d*f,this.scale(a)},c.prototype.inv=function(){return this.conj(),this},c.prototype.isOne=function(){return 1===this.α&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.β},c.prototype.isZero=function(){return 0===this.α&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.β},c.prototype.lerp=function(a,b){return this.α+=(a.α-this.α)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.yz+=(a.yz-this.yz)*b,this.zx+=(a.zx-this.zx)*b,this.xy+=(a.xy-this.xy)*b,this.β+=(a.β-this.β)*b,this},c.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},c.prototype.log=function(){var a=this.α,b=this.yz,c=this.zx,d=this.xy,e=b*b+c*c+d*d,f=K(e),g=F(f,a)/f;return this.α=I(K(a*a+e)),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},c.prototype.magnitude=function(){return this.norm()},c.prototype.magnitudeSansUnits=function(){return K(this.squaredNormSansUnits())},c.prototype.mul=function(a){return this.mul2(this,a)},c.prototype.mul2=function(a,b){return i["default"](a,b,this)},c.prototype.neg=function(){return this.α=-this.α,this.x=-this.x,this.y=-this.y,this.z=-this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.β=-this.β,this},c.prototype.norm=function(){return this.α=this.magnitudeSansUnits(),this.yz=0,this.zx=0,this.xy=0,this},c.prototype.direction=function(){var a=this.magnitudeSansUnits();return this.α=this.α/a,this.x=this.x/a,this.y=this.y/a,this.z=this.z/a,this.yz=this.yz/a,this.zx=this.zx/a,this.xy=this.xy/a,this.β=this.β/a,this},c.prototype.one=function(){return this.α=1,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0,this},c.prototype.quad=function(){return this.squaredNorm()},c.prototype.squaredNorm=function(){return this.α=this.squaredNormSansUnits(),this.yz=0,this.zx=0,this.xy=0,this},c.prototype.squaredNormSansUnits=function(){return q["default"](this)},c.prototype.reflect=function(a){var b=e["default"].fromVectorE3(a),c=e["default"].copy(this),d=b.mul(c).mul(b).scale(-1);return this.copy(d),this},c.prototype.rev=function(){return this.α=+this.α,this.x=+this.x,this.y=+this.y,this.z=+this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.β=-this.β,this},c.prototype.__tilde__=function(){return c.copy(this).rev()},c.prototype.rotate=function(a){var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.α,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},c.prototype.rotorFromDirections=function(a,b){return o["default"](b,a,l["default"],d["default"],this)},c.prototype.rotorFromAxisAngle=function(a,b){var c=b/2,d=J(c);return this.yz=-a.x*d,this.zx=-a.y*d,this.xy=-a.z*d,this.α=H(c),this},c.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=J(c);return this.yz=-a.yz*d,this.zx=-a.zx*d,this.xy=-a.xy*d,this.α=H(c),this},c.prototype.scp=function(a){return this.scp2(this,a)},c.prototype.scp2=function(a,b){return p["default"](a,b,this)},c.prototype.scale=function(a){return this.α*=a,this.x*=a,this.y*=a,this.z*=a,this.yz*=a,this.zx*=a,this.xy*=a,this.β*=a,this},c.prototype.slerp=function(){return this},c.prototype.spinor=function(a,b){var c=a.x,e=a.y,f=a.z,g=b.x,h=b.y,i=b.z;return this.zero(),this.α=d["default"](a,b),this.yz=u["default"](c,e,f,g,h,i),this.zx=v["default"](c,e,f,g,h,i),this.xy=t["default"](c,e,f,g,h,i),this},c.prototype.sub=function(a,b){return void 0===b&&(b=1),this.α-=a.α*b,this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.β-=a.β*b,this},c.prototype.sub2=function(a,b){return this.α=a.α-b.α,this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.β=a.β-b.β,this},c.prototype.toExponential=function(){var a=function(a){return a.toExponential()};return r["default"](b(this),a,L)},c.prototype.toFixed=function(a){var c=function(b){return b.toFixed(a)};return r["default"](b(this),c,L)},c.prototype.toString=function(){var a=function(a){return a.toString()};return r["default"](b(this),a,L)},c.prototype.grade=function(a){switch(j["default"]("grade",a),a){case 0:this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0;break;case 1:this.α=0,this.yz=0,this.zx=0,this.xy=0,this.β=0;break;case 2:this.α=0,this.x=0,this.y=0,this.z=0,this.β=0;break;case 3:this.α=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0;break;default:this.α=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0}return this},c.prototype.ext=function(a){return this.ext2(this,a)},c.prototype.ext2=function(a,b){return g["default"](a,b,this)},c.prototype.zero=function(){return this.α=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0,this},c.prototype.__add__=function(a){return a instanceof c?c.copy(this).add(a):"number"==typeof a?c.copy(this).add(c.fromScalar(a)):void 0},c.prototype.__div__=function(a){return a instanceof c?c.copy(this).div(a):"number"==typeof a?c.copy(this).divByScalar(a):void 0},c.prototype.__rdiv__=function(a){return a instanceof c?c.copy(a).div(this):"number"==typeof a?c.fromScalar(a).div(this):void 0},c.prototype.__mul__=function(a){return a instanceof c?c.copy(this).mul(a):"number"==typeof a?c.copy(this).scale(a):void 0},c.prototype.__rmul__=function(a){return a instanceof c?c.copy(a).mul(this):"number"==typeof a?c.copy(this).scale(a):void 0},c.prototype.__radd__=function(a){return a instanceof c?c.copy(a).add(this):"number"==typeof a?c.fromScalar(a).add(this):void 0},c.prototype.__sub__=function(a){return a instanceof c?c.copy(this).sub(a):"number"==typeof a?c.fromScalar(a).neg().add(this):void 0;

},c.prototype.__rsub__=function(a){return a instanceof c?c.copy(a).sub(this):"number"==typeof a?c.fromScalar(a).sub(this):void 0},c.prototype.__wedge__=function(a){return a instanceof c?c.copy(this).ext(a):"number"==typeof a?c.copy(this).scale(a):void 0},c.prototype.__rwedge__=function(a){return a instanceof c?c.copy(a).ext(this):"number"==typeof a?c.copy(this).scale(a):void 0},c.prototype.__lshift__=function(a){return a instanceof c?c.copy(this).lco(a):"number"==typeof a?c.copy(this).lco(c.fromScalar(a)):void 0},c.prototype.__rlshift__=function(a){return a instanceof c?c.copy(a).lco(this):"number"==typeof a?c.fromScalar(a).lco(this):void 0},c.prototype.__rshift__=function(a){return a instanceof c?c.copy(this).rco(a):"number"==typeof a?c.copy(this).rco(c.fromScalar(a)):void 0},c.prototype.__rrshift__=function(a){return a instanceof c?c.copy(a).rco(this):"number"==typeof a?c.fromScalar(a).rco(this):void 0},c.prototype.__vbar__=function(a){return a instanceof c?c.copy(this).scp(a):"number"==typeof a?c.copy(this).scp(c.fromScalar(a)):void 0},c.prototype.__rvbar__=function(a){return a instanceof c?c.copy(a).scp(this):"number"==typeof a?c.fromScalar(a).scp(this):void 0},c.prototype.__bang__=function(){return c.copy(this).inv()},c.prototype.__pos__=function(){return c.copy(this)},c.prototype.__neg__=function(){return c.copy(this).neg()},Object.defineProperty(c,"zero",{get:function(){return c.copy(M)},enumerable:!0,configurable:!0}),Object.defineProperty(c,"one",{get:function(){return c.copy(N)},enumerable:!0,configurable:!0}),Object.defineProperty(c,"e1",{get:function(){return c.copy(O)},enumerable:!0,configurable:!0}),Object.defineProperty(c,"e2",{get:function(){return c.copy(P)},enumerable:!0,configurable:!0}),Object.defineProperty(c,"e3",{get:function(){return c.copy(Q)},enumerable:!0,configurable:!0}),Object.defineProperty(c,"I",{get:function(){return c.copy(R)},enumerable:!0,configurable:!0}),c.copy=function(a){var b=new c;return b.α=a.α,b.x=a.x,b.y=a.y,b.z=a.z,b.yz=a.yz,b.zx=a.zx,b.xy=a.xy,b.β=a.β,b},c.fromScalar=function(a){return(new c).copyScalar(a)},c.fromSpinor=function(a){var b=new c;return b.α=a.α,b.yz=a.yz,b.zx=a.yz,b.xy=a.xy,b},c.fromVector=function(a){var b=new c;return b.x=a.x,b.y=a.y,b.z=a.z,b},c.lerp=function(a,b,d){return c.copy(a).lerp(b,d)},c.rotorFromDirections=function(a,b){return(new c).rotorFromDirections(a,b)},c}(s["default"]),a("default",S)}}}),System.register("davinci-eight/visual/vector.js",["../math/G3"],function(a){function b(a,b,d){var e=new c["default"];return e.x=a,e.y=b,e.z=d,e}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight.js",["davinci-eight/slideshow/Slide","davinci-eight/slideshow/Director","davinci-eight/slideshow/DirectorKeyboardHandler","davinci-eight/slideshow/animations/WaitAnimation","davinci-eight/slideshow/animations/ColorAnimation","davinci-eight/slideshow/animations/Vector2Animation","davinci-eight/slideshow/animations/Vector3Animation","davinci-eight/slideshow/animations/Spinor2Animation","davinci-eight/slideshow/animations/Spinor3Animation","davinci-eight/cameras/createFrustum","davinci-eight/cameras/createPerspective","davinci-eight/cameras/createView","davinci-eight/cameras/frustumMatrix","davinci-eight/cameras/PerspectiveCamera","davinci-eight/cameras/perspectiveMatrix","davinci-eight/cameras/viewMatrix","davinci-eight/commands/BlendFactor","davinci-eight/commands/WebGLBlendFunc","davinci-eight/commands/WebGLClearColor","davinci-eight/commands/Capability","davinci-eight/commands/WebGLDisable","davinci-eight/commands/WebGLEnable","davinci-eight/core/AttribLocation","davinci-eight/core/Color","davinci-eight/core","davinci-eight/core/DrawMode","davinci-eight/core/GraphicsProgramSymbols","davinci-eight/core/UniformLocation","davinci-eight/curves/Curve","davinci-eight/devices/Keyboard","davinci-eight/geometries/DrawAttribute","davinci-eight/geometries/DrawPrimitive","davinci-eight/geometries/Simplex","davinci-eight/geometries/Vertex","davinci-eight/geometries/simplicesToGeometryMeta","davinci-eight/geometries/computeFaceNormals","davinci-eight/geometries/cube","davinci-eight/geometries/quadrilateral","davinci-eight/geometries/square","davinci-eight/geometries/tetrahedron","davinci-eight/geometries/simplicesToDrawPrimitive","davinci-eight/geometries/triangle","davinci-eight/topologies/Topology","davinci-eight/topologies/PointTopology","davinci-eight/topologies/LineTopology","davinci-eight/topologies/MeshTopology","davinci-eight/topologies/GridTopology","davinci-eight/scene/Drawable","davinci-eight/scene/Scene","davinci-eight/scene/WebGLRenderer","davinci-eight/geometries/AxialSimplexGeometry","davinci-eight/geometries/ArrowGeometry","davinci-eight/geometries/BarnSimplexGeometry","davinci-eight/geometries/ConeGeometry","davinci-eight/geometries/ConeSimplexGeometry","davinci-eight/geometries/CuboidGeometry","davinci-eight/geometries/CuboidSimplexGeometry","davinci-eight/geometries/CylinderGeometry","davinci-eight/geometries/CylinderSimplexGeometry","davinci-eight/geometries/DodecahedronSimplexGeometry","davinci-eight/geometries/IcosahedronSimplexGeometry","davinci-eight/geometries/KleinBottleSimplexGeometry","davinci-eight/geometries/Simplex1Geometry","davinci-eight/geometries/MobiusStripSimplexGeometry","davinci-eight/geometries/OctahedronSimplexGeometry","davinci-eight/geometries/SliceSimplexGeometry","davinci-eight/geometries/GridSimplexGeometry","davinci-eight/geometries/PolyhedronSimplexGeometry","davinci-eight/geometries/RevolutionSimplexGeometry","davinci-eight/geometries/RingGeometry","davinci-eight/geometries/RingSimplexGeometry","davinci-eight/geometries/SphereGeometry","davinci-eight/geometries/TetrahedronSimplexGeometry","davinci-eight/geometries/VortexSimplexGeometry","davinci-eight/programs/createGraphicsProgram","davinci-eight/programs/smartProgram","davinci-eight/programs/programFromScripts","davinci-eight/materials/GraphicsProgram","davinci-eight/materials/HTMLScriptsGraphicsProgram","davinci-eight/materials/LineMaterial","davinci-eight/materials/MeshMaterial","davinci-eight/materials/MeshLambertMaterial","davinci-eight/materials/PointMaterial","davinci-eight/materials/GraphicsProgramBuilder","davinci-eight/math/Dimensions","davinci-eight/math/Euclidean2","davinci-eight/math/Euclidean3","davinci-eight/math/mathcore","davinci-eight/math/R1","davinci-eight/math/Mat2R","davinci-eight/math/Mat3R","davinci-eight/math/Mat4R","davinci-eight/math/QQ","davinci-eight/math/Unit","davinci-eight/math/G2","davinci-eight/math/G3","davinci-eight/math/SpinG2","davinci-eight/math/SpinG3","davinci-eight/math/R2","davinci-eight/math/R3","davinci-eight/math/R4","davinci-eight/math/VectorN","davinci-eight/facets/AmbientLight","davinci-eight/facets/ColorFacet","davinci-eight/facets/DirectionalLight","davinci-eight/facets/EulerFacet","davinci-eight/facets/ModelFacet","davinci-eight/facets/PointSizeFacet","davinci-eight/facets/ReflectionFacetE2","davinci-eight/facets/ReflectionFacetE3","davinci-eight/facets/Vector3Facet","davinci-eight/models/ModelE2","davinci-eight/models/ModelE3","davinci-eight/resources/GraphicsBuffers","davinci-eight/renderers/initWebGL","davinci-eight/utils/getCanvasElementById","davinci-eight/collections/IUnknownArray","davinci-eight/collections/NumberIUnknownMap","davinci-eight/utils/refChange","davinci-eight/utils/Shareable","davinci-eight/collections/StringIUnknownMap","davinci-eight/utils/animation","davinci-eight/visual/createArrow","davinci-eight/visual/createBox","davinci-eight/visual/createCylinder","davinci-eight/visual/createSphere","davinci-eight/visual/vector"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a},function(a){D=a},function(a){E=a},function(a){F=a},function(a){G=a},function(a){H=a},function(a){I=a},function(a){J=a},function(a){K=a},function(a){L=a},function(a){M=a},function(a){N=a},function(a){O=a},function(a){P=a},function(a){Q=a},function(a){R=a},function(a){S=a},function(a){T=a},function(a){U=a},function(a){V=a},function(a){W=a},function(a){X=a},function(a){Y=a},function(a){Z=a},function(a){$=a},function(a){_=a},function(a){aa=a},function(a){ba=a},function(a){ca=a},function(a){da=a},function(a){ea=a},function(a){fa=a},function(a){ga=a},function(a){ha=a},function(a){ia=a},function(a){ja=a},function(a){ka=a},function(a){la=a},function(a){ma=a},function(a){na=a},function(a){oa=a},function(a){pa=a},function(a){qa=a},function(a){ra=a},function(a){sa=a},function(a){ta=a},function(a){ua=a},function(a){va=a},function(a){wa=a},function(a){xa=a},function(a){ya=a},function(a){za=a},function(a){Aa=a},function(a){Ba=a},function(a){Ca=a},function(a){Da=a},function(a){Ea=a},function(a){Fa=a},function(a){Ga=a},function(a){Ha=a},function(a){Ia=a},function(a){Ja=a},function(a){Ka=a},function(a){La=a},function(a){Ma=a},function(a){Na=a},function(a){Oa=a},function(a){Pa=a},function(a){Qa=a},function(a){Ra=a},function(a){Sa=a},function(a){Ta=a},function(a){Ua=a},function(a){Va=a},function(a){Wa=a},function(a){Xa=a},function(a){Ya=a},function(a){Za=a},function(a){$a=a},function(a){_a=a},function(a){ab=a},function(a){bb=a},function(a){cb=a},function(a){db=a},function(a){eb=a},function(a){fb=a},function(a){gb=a},function(a){hb=a},function(a){ib=a},function(a){jb=a},function(a){kb=a},function(a){lb=a},function(a){mb=a},function(a){nb=a},function(a){ob=a},function(a){pb=a},function(a){qb=a},function(a){rb=a},function(a){sb=a},function(a){tb=a}],execute:function(){ub={get LAST_MODIFIED(){return z["default"].LAST_MODIFIED},get fastPath(){return z["default"].fastPath},set fastPath(a){z["default"].fastPath=a},get strict(){return z["default"].strict},set strict(a){z["default"].strict=a},get verbose(){return z["default"].verbose},set verbose(a){if("boolean"!=typeof a)throw new TypeError("verbose must be a boolean");z["default"].verbose=a},get VERSION(){return z["default"].VERSION},get Slide(){return b["default"]},get Director(){return c["default"]},get DirectorKeyboardHandler(){return d["default"]},get ColorAnimation(){return f["default"]},get WaitAnimation(){return e["default"]},get Vector2Animation(){return g["default"]},get Vector3Animation(){return h["default"]},get Spinor2Animation(){return i["default"]},get Spinor3Animation(){return j["default"]},get Keyboard(){return E["default"]},get HTMLScriptsGraphicsProgram(){return za["default"]},get GraphicsProgram(){return ya["default"]},get LineMaterial(){return Aa["default"]},get MeshMaterial(){return Ba["default"]},get MeshLambertMaterial(){return Ca["default"]},get PointMaterial(){return Da["default"]},get GraphicsProgramBuilder(){return Ea["default"]},get BlendFactor(){return r["default"]},get Capability(){return u["default"]},get WebGLBlendFunc(){return s["default"]},get WebGLClearColor(){return t["default"]},get WebGLDisable(){return v["default"]},get WebGLEnable(){return w["default"]},get initWebGL(){return hb["default"]},get createFrustum(){return k["default"]},get createPerspective(){return l["default"]},get createView(){return m["default"]},get ModelE2(){return eb["default"]},get ModelE3(){return fb["default"]},get EulerFacet(){return $a["default"]},get ModelFacet(){return _a["default"]},get Simplex(){return H["default"]},get Vertex(){return I["default"]},get frustumMatrix(){return n["default"]},get perspectiveMatrix(){return p["default"]},get viewMatrix(){return q["default"]},get Scene(){return X["default"]},get Drawable(){return W["default"]},get PerspectiveCamera(){return o["default"]},get getCanvasElementById(){return ib["default"]},get WebGLRenderer(){return Y["default"]},get animation(){return ob["default"]},get DrawMode(){return A["default"]},get AttribLocation(){return x["default"]},get UniformLocation(){return C["default"]},get createGraphicsProgram(){return va["default"]},get smartProgram(){return wa["default"]},get Color(){return y["default"]},get AxialSimplexGeometry(){return Z["default"]},get ArrowGeometry(){return $["default"]},get BarnSimplexGeometry(){return _["default"]},get ConeGeometry(){return aa["default"]},get ConeSimplexGeometry(){return ba["default"]},get CuboidGeometry(){return ca["default"]},get CuboidSimplexGeometry(){return da["default"]},get CylinderGeometry(){return ea["default"]},get CylinderSimplexGeometry(){return fa["default"]},get DodecahedronSimplexGeometry(){return ga["default"]},get IcosahedronSimplexGeometry(){return ha["default"]},get KleinBottleSimplexGeometry(){return ia["default"]},get Simplex1Geometry(){return ja["default"]},get MobiusStripSimplexGeometry(){return ka["default"]},get OctahedronSimplexGeometry(){return la["default"]},get GridSimplexGeometry(){return na["default"]},get PolyhedronSimplexGeometry(){return oa["default"]},get RevolutionSimplexGeometry(){return pa["default"]},get RingGeometry(){return qa["default"]},get RingSimplexGeometry(){return ra["default"]},get SliceSimplexGeometry(){return ma["default"]},get SphereGeometry(){return sa["default"]},get TetrahedronSimplexGeometry(){return ta["default"]},get VortexSimplexGeometry(){return ua["default"]},get Topology(){return R["default"]},get PointTopology(){return S["default"]},get LineTopology(){return T["default"]},get MeshTopology(){return U["default"]},get GridTopology(){return V["default"]},get Dimensions(){return Fa["default"]},get Unit(){return Oa["default"]},get Euclidean2(){return Ga["default"]},get Euclidean3(){return Ha["default"]},get Mat2R(){return Ka["default"]},get Mat3R(){return La["default"]},get Mat4R(){return Ma["default"]},get QQ(){return Na["default"]},get G2(){return Pa["default"]},get G3(){return Qa["default"]},get R1(){return Ja["default"]},get SpinG2(){return Ra["default"]},get SpinG3(){return Sa["default"]},get R2(){return Ta["default"]},get R3(){return Ua["default"]},get R4(){return Va["default"]},get VectorN(){return Wa["default"]},get Curve(){return D["default"]},get simplicesToGeometryMeta(){return J["default"]},get computeFaceNormals(){return K["default"]},get cube(){return L["default"]},get quadrilateral(){return M["default"]},get square(){return N["default"]},get tetrahedron(){return O["default"]},get triangle(){return Q["default"]},get simplicesToDrawPrimitive(){return P["default"]},get GraphicsProgramSymbols(){return B["default"]},get GraphicsBuffers(){return gb["default"]},get programFromScripts(){return xa["default"]},get DrawAttribute(){return F["default"]},get DrawPrimitive(){return G["default"]},get AmbientLight(){return Xa["default"]},get ColorFacet(){return Ya["default"]},get DirectionalLight(){return Za["default"]},get PointSizeFacet(){return ab["default"]},get ReflectionFacetE2(){return bb["default"]},get ReflectionFacetE3(){return cb["default"]},get Vector3Facet(){return db["default"]},get IUnknownArray(){return jb["default"]},get NumberIUnknownMap(){return kb["default"]},get refChange(){return lb["default"]},get Shareable(){return mb["default"]},get StringIUnknownMap(){return nb["default"]},get cos(){return Ia["default"].cos},get cosh(){return Ia["default"].cosh},get exp(){return Ia["default"].exp},get log(){return Ia["default"].log},get norm(){return Ia["default"].norm},get quad(){return Ia["default"].quad},get sin(){return Ia["default"].sin},get sinh(){return Ia["default"].sinh},get sqrt(){return Ia["default"].sqrt},get arrow(){return pb["default"]},get box(){return qb["default"]},get cylinder(){return rb["default"]},get sphere(){return sb["default"]},get vector(){return tb["default"]}},a("default",ub)}}});