/*! davinci-eight 2016-03-14 */
System.register("davinci-eight/commands/BlendFactor.js",[],function(a){var b;return{setters:[],execute:function(){!function(a){a[a.DST_ALPHA=0]="DST_ALPHA",a[a.DST_COLOR=1]="DST_COLOR",a[a.ONE=2]="ONE",a[a.ONE_MINUS_DST_ALPHA=3]="ONE_MINUS_DST_ALPHA",a[a.ONE_MINUS_DST_COLOR=4]="ONE_MINUS_DST_COLOR",a[a.ONE_MINUS_SRC_ALPHA=5]="ONE_MINUS_SRC_ALPHA",a[a.ONE_MINUS_SRC_COLOR=6]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=7]="SRC_ALPHA",a[a.SRC_ALPHA_SATURATE=8]="SRC_ALPHA_SATURATE",a[a.SRC_COLOR=9]="SRC_COLOR",a[a.ZERO=10]="ZERO"}(b||(b={})),a("default",b)}}}),System.register("davinci-eight/commands/WebGLBlendFunc.js",["../commands/BlendFactor","../base/incLevel","../core/ShareableBase"],function(a){function b(a,b){if(g.indexOf(b)>=0)return b;throw new Error(b+" is not a valid factor.")}function c(a,b){switch(a){case d["default"].ONE:return b.ONE;case d["default"].SRC_ALPHA:return b.SRC_ALPHA;default:throw new Error(a+" is not a valid factor.")}}var d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=[d["default"].DST_ALPHA,d["default"].DST_COLOR,d["default"].ONE,d["default"].ONE_MINUS_DST_ALPHA,d["default"].ONE_MINUS_DST_COLOR,d["default"].ONE_MINUS_SRC_ALPHA,d["default"].ONE_MINUS_SRC_COLOR,d["default"].SRC_ALPHA,d["default"].SRC_ALPHA_SATURATE,d["default"].SRC_COLOR,d["default"].ZERO],h=function(a){function d(c,d){a.call(this),this.setLoggingName("WebGLBlendFunc"),this.sfactor=b("sfactor",c),this.dfactor=b("dfactor",d)}return i(d,a),d.prototype.destructor=function(b){this.sfactor=void 0,this.dfactor=void 0,a.prototype.destructor.call(this,e["default"](b))},d.prototype.contextFree=function(){},d.prototype.contextGain=function(a){this.execute(a.gl)},d.prototype.contextLost=function(){},d.prototype.execute=function(a){a.blendFunc(c(this.sfactor,a),c(this.dfactor,a))},d}(f["default"]),a("default",h)}}}),System.register("davinci-eight/controls/OrbitControls.js",["./MouseControls","../math/Geometric3","../math/Vector3","../math/Spinor3"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=c["default"].zero(),g=c["default"].zero(),h=c["default"].zero(),i=c["default"].one(),j=c["default"].one(),k=c["default"].zero(),l=function(a){function b(b){a.call(this,b),this.position0=d["default"].zero(),this.attitude0=e["default"].one(),this.setLoggingName("OrbitControls")}return m(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.update=function(){if(this.target){var a=this.moveCurr.distanceTo(this.movePrev);a>0&&(k.copyVector(this.target.getPosition()),j.copySpinor(this.target.getAttitude()),f.zero(),f.x=this.movePrev.x,f.y=this.movePrev.y,f.z=1,g.zero(),g.x=this.moveCurr.x,g.y=this.moveCurr.y,g.z=1,h.copy(g).sub(f),h.rotate(j),k.normalize(),i.copyVector(k).ext(h).normalize(),j.copy(i).scale(+a/2).exp(),this.target&&(k.copyVector(this.target.getPosition()),k.rotate(j),this.target.setPosition(k)))}this.movePrev.copy(this.moveCurr)},b.prototype.reset=function(){this.target&&(this.target.setPosition(this.position0),this.attitude0.addScalar(0))},b.prototype.setTarget=function(a){a?(this.position0.copy(a.getPosition()),this.target=a):this.target=void 0},b}(b["default"]),a("default",l)}}}),System.register("davinci-eight/core/GeometryArrays.js",["./computeAttributes","./computeCount","./computePointers","./computeStride","../config","./ErrorMode","./GeometryLeaf","../base/incLevel","./VertexBuffer"],function(a){var b,c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(a){function h(b){a.call(this,b),this.first=0,this.setLoggingName("GeometryArrays"),this.attributes={},this.vbo=new j["default"](b)}return l(h,a),h.prototype.destructor=function(b){this.vbo.release(),this.vbo=void 0,a.prototype.destructor.call(this,i["default"](b))},h.prototype.contextFree=function(b){this.vbo.contextFree(b),a.prototype.contextFree.call(this,b)},h.prototype.contextGain=function(b){this.vbo.contextGain(b),a.prototype.contextGain.call(this,b)},h.prototype.contextLost=function(){this.vbo.contextLost(),a.prototype.contextLost.call(this)},h.prototype.draw=function(a){var b=this.contextProvider;if(b){this.vbo.bind();var c=this._pointers;if(c)for(var d=c.length,e=0;d>e;e++){var h=c[e],i=a.getAttribLocation(h.name);i>=0&&(b.vertexAttribPointer(i,h.size,h.normalized,this._stride,h.offset),b.enableVertexAttribArray(i))}else switch(f["default"].errorMode){case g["default"].WARNME:console.warn(this._type+".pointers must be an array.")}this.contextProvider.drawArrays(this.mode,this.first,this.count),this.vbo.unbind()}},h.prototype.getAttribute=function(a){return this.attributes[a]},h.prototype.setAttribute=function(a,f){this.attributes[a]=f;var g=Object.keys(this.attributes);this.count=c["default"](this.attributes,g),this._stride=e["default"](this.attributes,g),this._pointers=d["default"](this.attributes,g);var h=b["default"](this.attributes,g);this.vbo.data=new Float32Array(h)},h}(h["default"]),a("default",k)}}}),System.register("davinci-eight/facets/ReflectionFacetE2.js",["../checks/mustBeArray","../checks/mustBeString","../math/Vector2","../math/Matrix2","../i18n/readOnly"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a){this.matrix=e["default"].one(),this.name=c["default"]("name",a),this._normal=(new d["default"]).zero(),this._normal.modified=!0}return Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},set:function(){throw new Error(f["default"]("normal").message)},enumerable:!0,configurable:!0}),a.prototype.getProperty=function(a){return void c["default"]("name",a)},a.prototype.setProperty=function(a,d){return c["default"]("name",a),b["default"]("value",d),this},a.prototype.setUniforms=function(a){this._normal.modified&&(this.matrix.reflection(this._normal),this._normal.modified=!1),a.mat2(this.name,this.matrix,!1)},a}(),a("default",g)}}}),System.register("davinci-eight/facets/ReflectionFacetE3.js",["../checks/mustBeArray","../checks/mustBeString","../math/Geometric3","../math/Matrix4","../i18n/readOnly"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a){this.matrix=e["default"].one(),this.name=c["default"]("name",a),this._normal=d["default"].zero(),this._normal.modified=!0}return Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},set:function(){throw new Error(f["default"]("normal").message)},enumerable:!0,configurable:!0}),a.prototype.getProperty=function(a){return void c["default"]("name",a)},a.prototype.setProperty=function(a,d){return c["default"]("name",a),b["default"]("value",d),this},a.prototype.setUniforms=function(a){this._normal.modified&&(this.matrix.reflection(this._normal),this._normal.modified=!1),a.mat4(this.name,this.matrix,!1)},a}(),a("default",g)}}}),System.register("davinci-eight/facets/Vector3Facet.js",["../checks/mustBeObject","../checks/mustBeString"],function(a){function b(){return e}var c,d,e,f;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e="Vector3Facet",f=function(){function a(a,e){this._name=d["default"]("name",a,b),this._vector=c["default"]("vector",e,b)}return a.prototype.getProperty=function(){return void 0},a.prototype.setProperty=function(){return this},a.prototype.setUniforms=function(a){var b=this._vector;a.uniform3f(this._name,b.x,b.y,b.z)},a}(),a("default",f)}}}),System.register("davinci-eight/facets/ModelE2.js",["../math/Geometric2","../math/Vector2","../math/Spinor2","../i18n/readOnly"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(){this._position=(new b["default"]).zero(),this._attitude=(new b["default"]).zero().addScalar(1),this._posCache=new c["default"],this._attCache=new d["default"],this._position.modified=!0,this._attitude.modified=!0}return Object.defineProperty(a.prototype,"R",{get:function(){return this._attitude},set:function(){throw new Error(e["default"](a.PROP_ATTITUDE).message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"X",{get:function(){return this._position},set:function(){throw new Error(e["default"](a.PROP_POSITION).message)},enumerable:!0,configurable:!0}),a.prototype.getProperty=function(b){switch(b){case a.PROP_ATTITUDE:return this._attCache.copy(this._attitude).coords;case a.PROP_POSITION:return this._posCache.copy(this._position).coords;default:return void console.warn("ModelE2.getProperty "+b)}},a.prototype.setProperty=function(b,c){switch(b){case a.PROP_ATTITUDE:this._attCache.coords=c,this._attitude.copySpinor(this._attCache);break;case a.PROP_POSITION:this._posCache.coords=c,this._position.copyVector(this._posCache);break;default:console.warn("ModelE2.setProperty "+b)}return this},a.PROP_ATTITUDE="R",a.PROP_POSITION="X",a}(),a("default",f)}}}),System.register("davinci-eight/materials/HTMLScriptsMaterial.js",["../base/incLevel","../checks/isString","../checks/mustBeArray","../checks/mustBeObject","../checks/mustBeString","../checks/mustSatisfy","./MaterialBase"],function(a){function b(a,b){var c=b.getElementById(k["default"]("elementId",a));if(c)return c;throw new Error("'"+a+"' is not a valid element identifier.")}function c(a,c){return k["default"]("vsId",a),j["default"]("dom",c),b(a,c).textContent}function d(a,c){return k["default"]("fsId",a),j["default"]("dom",c),b(a,c).textContent}function e(a,b,c){var d=b.getElementById(a);if(d instanceof HTMLScriptElement){var e=d;h["default"](e.type)&&(e.type.indexOf("vertex")>=0?c[0]=a:e.type.indexOf("fragment")>=0&&(c[1]=a)),h["default"](e.textContent)&&(e.textContent.indexOf("gl_Position")>=0?c[0]=a:e.textContent.indexOf("gl_FragColor")>=0&&(c[1]=a))}}function f(a,b){var c=[a[0],a[1]];return e(a[0],b,c),e(a[1],b,c),c}var g,h,i,j,k,l,m,n,o=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=function(a){function b(b,c,d,e){a.call(this,void 0,void 0,d,e),this.loaded=!1,this.setLoggingName("HTMLScriptsMaterial"),i["default"]("scriptIds",b),l["default"]("scriptIds",2===b.length,function(){return"have two script element identifiers."}),this.scriptIds=[b[0],b[1]],this.dom=c}return o(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,g["default"](b))},b.prototype.contextGain=function(b){if(!this.loaded){var e=f(this.scriptIds,this.dom);this.vertexShaderSrc=c(e[0],this.dom),this.fragmentShaderSrc=d(e[1],this.dom),this.loaded=!0}a.prototype.contextGain.call(this,b)},b}(m["default"]),a("default",n)}}}),System.register("davinci-eight/materials/MeshNormalMaterial.js",["../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","./MaterialBase"],function(a){function b(){var a=new e["default"];return a.attribute(f["default"].ATTRIBUTE_POSITION,3),a.attribute(f["default"].ATTRIBUTE_NORMAL,3),a.uniform(f["default"].UNIFORM_COLOR,"vec3"),a.uniform(f["default"].UNIFORM_MODEL_MATRIX,"mat4"),a.uniform(f["default"].UNIFORM_NORMAL_MATRIX,"mat3"),a.uniform(f["default"].UNIFORM_PROJECTION_MATRIX,"mat4"),a.uniform(f["default"].UNIFORM_VIEW_MATRIX,"mat4"),a.uniform(f["default"].UNIFORM_AMBIENT_LIGHT,"vec3"),a.uniform(f["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR,"vec3"),a.uniform(f["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION,"vec3"),a}function c(){return b().vertexShaderSrc()}function d(){return b().fragmentShaderSrc()}var e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(){a.call(this,c(),d(),[],null),this.setLoggingName("MeshNormalMaterial")}return i(b,a),b}(g["default"]),a("default",h)}}}),System.register("davinci-eight/utils/mergeStringMapList.js",[],function(a){function b(a){var b={};return a.forEach(function(a){for(var c=Object.keys(a),d=c.length,e=0;d>e;e++){var f=c[e],g=a[f];b[f]=g}}),b}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/materials/smartProgram.js",["./fragmentShaderSrc","../utils/mergeStringMapList","../checks/mustBeDefined","./MaterialBase","./vColorRequired","./vertexShaderSrc","./vLightRequired"],function(a){function b(a,b,j,k){e["default"]("attributes",a),e["default"]("uniformsList",b);var l=d["default"](b),m=g["default"](a,l),n=i["default"](a,l);return new f["default"](h["default"](a,l,m,n),c["default"](a,l,m,n),j,k)}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){}}}),System.register("davinci-eight/materials/programFromScripts.js",["../checks/mustBeObject","../checks/mustBeString","./MaterialBase"],function(a){function b(a,b,f,g,h){function i(a){var b=f.getElementById(d["default"]("elementId",a));if(b)return b;throw new Error(a+" is not a valid DOM element identifier.")}d["default"]("vsId",a),d["default"]("fsId",b),c["default"]("dom",f);var j=i(a).textContent,k=i(b).textContent;return new e["default"](j,k,g,h)}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/mathcore.js",[],function(a){function b(a,b){return null!==a&&"object"==typeof a&&"function"==typeof a[b]}function c(a,c){return function(d){var e=d;if(b(d,a))return e[a]();if("number"==typeof d){var f=e,g=c(f);return g}throw new TypeError("x must support "+a+"(x)")}}function d(a){return(m(a)+m(-a))/2}function e(a){return(m(a)-m(-a))/2}function f(a){return e(a)/d(a)}function g(a){return a*a}var h,i,j,k,l,m,n,o,p,q,r;return{setters:[],execute:function(){h=Math.abs,i=Math.acos,j=Math.asin,k=Math.atan,l=Math.cos,m=Math.exp,n=Math.log,o=Math.sin,p=Math.sqrt,q=Math.tan,r={acos:c("acos",i),asin:c("asin",j),atan:c("atan",k),cos:c("cos",l),cosh:c("cosh",d),exp:c("exp",m),log:c("log",n),norm:c("norm",h),quad:c("quad",g),sin:c("sin",o),sinh:c("sinh",e),sqrt:c("sqrt",p),tan:c("tan",q),tanh:c("tanh",f),Math:{cosh:d,sinh:e}},a("default",r)}}}),System.register("davinci-eight/math/add2x2.js",[],function(a){function b(a,b,c){var d=a[0],e=a[2],f=a[1],g=a[3],h=b[0],i=b[2],j=b[1],k=b[3];return c[0]=d+h,c[2]=e+i,c[1]=f+j,c[3]=g+k,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/det2x2.js",[],function(a){function b(a){var b=a[0],c=a[2],d=a[1],e=a[3];return b*e-c*d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Matrix2.js",["../math/AbstractMatrix","../math/add2x2","../math/det2x2","../checks/isDefined","../checks/mustBeInteger","../checks/mustBeNumber"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){a.call(this,b,2)}return i(b,a),b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return c["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){var a=this.elements,c=a[0],d=a[1],e=a[2],f=a[3];return b.zero().set(c,e,d,f)},b.prototype.det=function(){return d["default"](this.elements)},b.prototype.inv=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=this.det();return this.set(e,-d,-c,b).scale(1/f)},b.prototype.isOne=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3];return 1===b&&0===d&&0===c&&1===e},b.prototype.isZero=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3];return 0===b&&0===d&&0===c&&0===e},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){var c=a.elements,d=c[0],e=c[1],f=c[2],g=c[3],h=b.elements,i=h[0],j=h[1],k=h[2],l=h[3],m=d*i+f*j,n=d*k+f*l,o=e*i+g*j,p=e*k+g*l;return this.set(m,n,o,p)},b.prototype.neg=function(){return this.scale(-1)},b.prototype.one=function(){return this.set(1,0,0,1)},b.prototype.reflection=function(a){var b=g["default"]("n.x",a.x),c=1-2*b*b;return this.set(c,0,0,1)},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[2+a]]},b.prototype.scale=function(a){var b=this.elements,c=b[0]*a,d=b[1]*a,e=b[2]*a,f=b[3]*a;return this.set(c,e,d,f)},b.prototype.set=function(a,b,c,d){var e=this.elements;return e[0]=a,e[2]=b,e[1]=c,e[3]=d,this},b.prototype.sub=function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=a.elements,h=g[0],i=g[1],j=g[2],k=g[3],l=c-h,m=d-i,n=e-j,o=f-k;return this.set(l,n,m,o)},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){e["default"](a)&&f["default"]("fractionDigits",a);for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){e["default"](a)&&f["default"]("precision",a);for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0,d=this.dimensions;d>c;c++)b.push(this.row(c).map(function(b){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translation=function(a){var b=a.x;return this.set(1,b,0,1)},b.prototype.zero=function(){return this.set(0,0,0,0)},b.prototype.__add__=function(a){return a instanceof b?this.clone().add(a):void 0},b.prototype.__radd__=function(a){return a instanceof b?a.clone().add(this):void 0},b.prototype.__mul__=function(a){return a instanceof b?this.clone().mul(a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?a.clone().mul(this):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__pos__=function(){return this.clone()},b.prototype.__neg__=function(){return this.clone().scale(-1)},b.prototype.__sub__=function(a){return a instanceof b?this.clone().sub(a):void 0},b.prototype.__rsub__=function(a){return a instanceof b?a.clone().sub(this):void 0},b.one=function(){return new b(new Float32Array([1,0,0,1]))},b.reflection=function(a){return b.zero().reflection(a)},b.zero=function(){return new b(new Float32Array([0,0,0,0]))},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/math/Vector4.js",["../math/VectorN"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(b,c){void 0===b&&(b=[0,0,0,0]),void 0===c&&(c=!1),a.call(this,b,c,4)}return d(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[0]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[1]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this.coords[2]},set:function(a){this.modified=this.modified||this.z!==a,this.coords[2]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"w",{get:function(){return this.coords[3]},set:function(a){this.modified=this.modified||this.w!==a,this.coords[3]=a},enumerable:!0,configurable:!0}),b.prototype.setW=function(a){return this.w=a,this},b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.w+=a.w*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},b.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=this.z,e=this.w,f=a.elements;return this.x=f[0]*b+f[4]*c+f[8]*d+f[12]*e,this.y=f[1]*b+f[5]*c+f[9]*d+f[13]*e,this.z=f[2]*b+f[6]*c+f[10]*d+f[14]*e,this.w=f[3]*b+f[7]*c+f[11]*d+f[15]*e,this},b.prototype.clone=function(){return new b([this.x,this.y,this.z,this.w],this.modified)},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w,this},b.prototype.divByScalar=function(a){return this.x/=a,this.y/=a,this.z/=a,this.w/=a,this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},b.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},b.prototype.reflect=function(){return this},b.prototype.rotate=function(){return this},b.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this},b.prototype.slerp=function(){return this},b.prototype.sub=function(a,b){return this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.w-=a.w*b,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},b.prototype.magnitude=function(){throw new Error("TODO: Vector4.magnitude()")},b.prototype.squaredNorm=function(){throw new Error("TODO: Vector4.squaredNorm()")},b.prototype.toExponential=function(){return"TODO Vector4.toExponential"},b.prototype.toFixed=function(){return"TODO Vector4.toFixed"},b.prototype.toPrecision=function(){return"TODO Vector4.toFixed"},b.prototype.toString=function(){return"TODO Vector4.toString"},b.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this.w=0,this},b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/overlay/base/Board.js",["../../base/incLevel","../../core/ShareableBase"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(b,c){a.call(this),this.setLoggingName("Board"),this.container=b,this.renderer=c}return e(c,a),c.prototype.destructor=function(c){a.prototype.destructor.call(this,b["default"](c))},c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/overlay/renderers/CanvasRenderer.js",["./AbstractRenderer"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(){a.call(this)}return d(b,a),b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/overlay/renderers/NoRenderer.js",["./AbstractRenderer"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(){a.apply(this,arguments)}return d(b,a),b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/overlay/renderers/SVGRenderer.js",["./AbstractRenderer"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(){a.call(this)}return d(b,a),b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/overlay/base/GeometryElement.js",["../../base/incLevel","../../core/ShareableBase"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(){a.call(this),this.setLoggingName("GeometryElement")}return e(c,a),c.prototype.destructor=function(c){a.prototype.destructor.call(this,b["default"](c))},c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/overlay/base/Text.js",["./GeometryElement","../../base/incLevel"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function b(){a.call(this),this.setLoggingName("Text")}return e(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,c["default"](b))},b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/overlay/renderers/AbstractRenderer.js",[],function(a){var b;return{setters:[],execute:function(){b=function(){function a(){}return a}(),a("default",b)}}}),System.register("davinci-eight/overlay/renderers/VMLRenderer.js",["./AbstractRenderer"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(){a.call(this)}return d(b,a),b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/overlay/Overlay.js",["./base/Board","./renderers/CanvasRenderer","../utils/getDimensions","../base/incLevel","../checks/mustBeString","../checks/mustBeObject","./renderers/NoRenderer","../core/ShareableBase","./renderers/SVGRenderer","./base/Text","./renderers/VMLRenderer"],function(a){function b(a,b,c,e){g["default"]("elementId",a),h["default"]("dimensions",b),h["default"]("doc",c),g["default"]("rendererKin",e);for(var f=c.getElementById(a);f.firstChild;)f.removeChild(f.firstChild);return"svg"===e?new k["default"](f,b):"vml"===e?new m["default"](f):"canvas"===e?new d["default"](f,b):new i["default"]}var c,d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=function(a){function d(d,f){void 0===f&&(f={}),a.call(this),this.setLoggingName("Overlay");var g=e["default"](d,document);this.renderer=b(d,g,document,"svg"),this.board=new c["default"](d,this.renderer)}return o(d,a),d.prototype.destructor=function(b){this.board.release(),a.prototype.destructor.call(this,f["default"](b))},d.prototype.createText=function(){var a=new l["default"];return a},d}(j["default"]),a("default",n)}}}),System.register("davinci-eight/collections/NumberShareableMap.js",["../core/ShareableBase"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(){a.call(this),this._elements={},this.setLoggingName("NumberShareableMap")}return d(b,a),b.prototype.destructor=function(b){this.forEach(function(a,b){b&&b.release()}),this._elements=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.exists=function(a){var b=this._elements[a];return b?!0:!1},b.prototype.get=function(a){var b=this.getWeakRef(a);return b&&b.addRef(),b},b.prototype.getWeakRef=function(a){return this._elements[a]},b.prototype.put=function(a,b){b&&b.addRef(),this.putWeakRef(a,b)},b.prototype.putWeakRef=function(a,b){var c=this._elements,d=c[a];d&&d.release(),c[a]=b},b.prototype.forEach=function(a){for(var b=this.keys,c=0,d=b.length;d>c;c++){var e=b[c],f=this._elements[e];a(e,f)}},Object.defineProperty(b.prototype,"keys",{get:function(){return Object.keys(this._elements).map(function(a){return parseFloat(a)})},enumerable:!0,configurable:!0}),b.prototype.remove=function(a){this.put(a,void 0),delete this._elements[a]},b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/collections/StringShareableMap.js",["../base/incLevel","../core/ShareableBase"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(){a.call(this),this.elements={},this.setLoggingName("StringShareableMap")}return e(c,a),c.prototype.destructor=function(c){var d=this;this.forEach(function(a){d.putWeakRef(a,void 0)}),a.prototype.destructor.call(this,b["default"](c))},c.prototype.exists=function(a){var b=this.elements[a];return b?!0:!1},c.prototype.get=function(a){var b=this.elements[a];return b?(b.addRef(),b):void 0},c.prototype.getWeakRef=function(a){return this.elements[a]},c.prototype.put=function(a,b){b&&b.addRef(),this.putWeakRef(a,b)},c.prototype.putWeakRef=function(a,b){var c=this.elements,d=c[a];d&&d.release(),c[a]=b},c.prototype.forEach=function(a){for(var b=this.keys,c=0,d=b.length;d>c;c++){var e=b[c];a(e,this.elements[e])}},Object.defineProperty(c.prototype,"keys",{get:function(){return Object.keys(this.elements)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"values",{get:function(){for(var a=[],b=this.keys,c=0,d=b.length;d>c;c++){var e=b[c];a.push(this.elements[e])}return a},enumerable:!0,configurable:!0}),c.prototype.remove=function(a){var b=this.elements[a];return delete this.elements[a],b},c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/geometries/transforms/ConeTransform.js",["../../checks/mustBeBoolean","../../checks/mustBeNumber","../../checks/mustBeString","../../math/R3","../../math/Spinor3","../../math/Vector3"],function(a){function b(a,b,c){c.copy(a);var d=c.squaredNorm();c.add(b,d).divByScalar(Math.sqrt(d)*Math.sqrt(1+d))}var c,d,e,f,g,h,i;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(a,b,g,i,j,k){this.e=f["default"].direction(a),this.cutLine=f["default"].direction(b),this.b=(new h["default"]).cross2(a,b).normalize(),this.clockwise=c["default"]("clockwise",g),this.sliceAngle=d["default"]("sliceAngle",i),this.aPosition=e["default"]("aPosition",j),
this.aTangent=e["default"]("aTangent",k)}return a.prototype.exec=function(a,c,d,e,f){var i=e-1,j=c/i,k=f-1,l=d/k,m=this.clockwise?-1:1,n=m*this.sliceAngle*j,o=Math.cos(n),p=Math.sin(n),q=(new h["default"]).add(this.cutLine,o).add(this.b,p),r=h["default"].lerp(q,this.e,l);a.attributes[this.aPosition]=r;var s=h["default"].zero();b(q,this.e,s),a.attributes[this.aTangent]=g["default"].dual(s,!1)},a}(),a("default",i)}}}),System.register("davinci-eight/geometries/ConicalShellBuilder.js",["./transforms/Approximation","./transforms/Direction","./transforms/Duality","../core/GraphicsProgramSymbols","./primitives/GridTriangleStrip","./AxialPrimitivesBuilder","./transforms/ConeTransform","./transforms/Rotation","../math/R3","./transforms/Scaling","./transforms/Translation","./transforms/CoordsTransform2D"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=e["default"].ATTRIBUTE_POSITION,o=e["default"].ATTRIBUTE_TANGENT,p=e["default"].ATTRIBUTE_NORMAL,q=function(a){function e(b,c,d){a.call(this),this.radialSegments=1,this.thetaSegments=32,this.e=j["default"].direction(b),this.cutLine=j["default"].direction(c),this.clockwise=d}return r(e,a),Object.defineProperty(e.prototype,"radius",{get:function(){return this.stress.x},set:function(a){this.stress.x=a,this.stress.z=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.stress.y},set:function(a){this.stress.y=a},enumerable:!0,configurable:!0}),e.prototype.toPrimitives=function(){this.transforms.push(new h["default"](this.e,this.cutLine,this.clockwise,this.sliceAngle,n,o)),this.transforms.push(new k["default"](this.stress,[n,o])),this.transforms.push(new i["default"](this.tilt,[n,o])),this.transforms.push(new l["default"](this.offset,[n])),this.transforms.push(new d["default"](o,p,!0,!0)),this.transforms.push(new c["default"](p)),this.transforms.push(new b["default"](9,[n,p])),this.useTextureCoord&&this.transforms.push(new m["default"](!1,!1,!1));for(var a=new f["default"](this.thetaSegments,this.radialSegments),e=a.uLength,g=0;e>g;g++)for(var j=a.vLength,q=0;j>q;q++)this.applyTransforms(a.vertex(g,q),g,q,e,j);return[a.toPrimitive()]},e}(g["default"]),a("default",q)}}}),System.register("davinci-eight/geometries/transforms/CylinderTransform.js",["../../checks/mustBeNumber","../../checks/mustBeString","../../math/Spinor3","../../math/Vector3"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a,f,g,h,i,j){this.e=e["default"].copy(a),this.cutLine=e["default"].copy(f),this.generator=d["default"].dual(a,g),this.sliceAngle=b["default"]("sliceAngle",h),this.aPosition=c["default"]("aPosition",i),this.aTangent=c["default"]("aTangent",j)}return a.prototype.exec=function(a,b,c,f,g){var h=f-1,i=b/h,j=g-1,k=c/j,l=this.generator.clone().scale(-this.sliceAngle*i/2).exp(),m=e["default"].copy(this.cutLine).rotate(l);a.attributes[this.aPosition]=m.clone().add(this.e,k),a.attributes[this.aTangent]=d["default"].dual(m,!1)},a}(),a("default",f)}}}),System.register("davinci-eight/geometries/CylindricalShellBuilder.js",["./transforms/Approximation","./transforms/Direction","./transforms/Duality","../core/GraphicsProgramSymbols","./primitives/GridTriangleStrip","./AxialPrimitivesBuilder","./transforms/CylinderTransform","./transforms/Rotation","./transforms/Scaling","./transforms/Translation","./transforms/CoordsTransform2D","../math/Vector3"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=e["default"].ATTRIBUTE_POSITION,o=e["default"].ATTRIBUTE_TANGENT,p=e["default"].ATTRIBUTE_NORMAL,q=function(a){function e(b,c,d){a.call(this),this.radialSegments=1,this.thetaSegments=32,this.e=m["default"].copy(b),this.cutLine=m["default"].copy(c),this.clockwise=d}return r(e,a),Object.defineProperty(e.prototype,"radius",{get:function(){return this.stress.x},set:function(a){this.stress.x=a,this.stress.z=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.stress.y},set:function(a){this.stress.y=a},enumerable:!0,configurable:!0}),e.prototype.toPrimitives=function(){this.transforms.push(new h["default"](this.e,this.cutLine,this.clockwise,this.sliceAngle,n,o)),this.transforms.push(new j["default"](this.stress,[n,o])),this.transforms.push(new i["default"](this.tilt,[n,o])),this.transforms.push(new k["default"](this.offset,[n])),this.transforms.push(new d["default"](o,p,!0,!0)),this.transforms.push(new c["default"](p)),this.transforms.push(new b["default"](9,[n,p])),this.useTextureCoord&&this.transforms.push(new l["default"](!1,!1,!1));for(var a=new f["default"](this.thetaSegments,this.radialSegments),e=a.uLength,g=0;e>g;g++)for(var m=a.vLength,q=0;m>q;q++)this.applyTransforms(a.vertex(g,q),g,q,e,m);var r=a.toPrimitive();return[r]},e}(g["default"]),a("default",q)}}}),System.register("davinci-eight/geometries/transforms/Approximation.js",["../../checks/mustBeNumber","../../math/Coords","../../math/Geometric2","../../math/Geometric3","../../math/Spinor2","../../math/Spinor3","../../math/Vector2","../../math/Vector3"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(a,c){this.n=b["default"]("n",a),this.names=c}return a.prototype.exec=function(a){for(var b=this.names.length,j=0;b>j;j++){var k=this.names[j],l=a.attributes[k];if(l instanceof c["default"])l.approx(this.n);else if(l instanceof i["default"])l.approx(this.n);else if(l instanceof g["default"])l.approx(this.n);else if(l instanceof h["default"])l.approx(this.n);else if(l instanceof f["default"])l.approx(this.n);else if(l instanceof d["default"])l.approx(this.n);else{if(!(l instanceof e["default"]))throw new Error("Expecting "+k+" to be a Coords");l.approx(this.n)}}},a}(),a("default",j)}}}),System.register("davinci-eight/geometries/transforms/Direction.js",["../../checks/mustBeString","../../math/Geometric2","../../math/Geometric3","../../math/Spinor2","../../math/Spinor3","../../math/Vector2","../../math/Vector3"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(a){this.sourceName=b["default"]("sourceName",a)}return a.prototype.exec=function(a){var b=a.attributes[this.sourceName];if(!b)throw new Error("Vertex attribute "+this.sourceName+" was not found");if(b instanceof h["default"])a.attributes[this.sourceName]=b.normalize();else if(b instanceof f["default"])a.attributes[this.sourceName]=b.normalize();else if(b instanceof g["default"])a.attributes[this.sourceName]=b.normalize();else if(b instanceof e["default"])a.attributes[this.sourceName]=b.normalize();else if(b instanceof d["default"])a.attributes[this.sourceName]=b.normalize();else{if(!(b instanceof c["default"]))throw new Error("Expecting "+this.sourceName+" to be a Vector, Spinor, or Geometric");a.attributes[this.sourceName]=b.normalize()}},a}(),a("default",i)}}}),System.register("davinci-eight/math/quadSpinorE2.js",["../checks/isDefined","../checks/isNumber"],function(a){function b(a){if(c["default"](a)){var b=a.α,e=a.β;return d["default"](b)&&d["default"](e)?b*b+e*e:void 0}return void 0}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/Spinor2.js",["../math/Coords","../math/dotVectorCartesianE2","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../i18n/notSupported","../math/quadSpinorE2","../math/rotorFromDirectionsE2","../math/wedgeXY"],function(a){function b(){var a=[0,0];return a[l]=1,a[m]=0,a}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=1,m=0,n=Math.abs,o=Math.atan2,p=Math.log,q=Math.cos,r=Math.sin,s=Math.sqrt,t=function(a){function c(c,d){void 0===c&&(c=b()),void 0===d&&(d=!1),a.call(this,c,d,2)}return u(c,a),Object.defineProperty(c.prototype,"xy",{get:function(){return this.coords[m]},set:function(a){f["default"]("xy",a),this.modified=this.modified||this.xy!==a,this.coords[m]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"alpha",{get:function(){return this.coords[l]},set:function(a){f["default"]("alpha",a),this.modified=this.modified||this.alpha!==a,this.coords[l]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"α",{get:function(){return this.coords[l]},set:function(a){f["default"]("α",a),this.modified=this.modified||this.α!==a,this.coords[l]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"β",{get:function(){return this.coords[m]},set:function(a){f["default"]("β",a),this.modified=this.modified||this.β!==a,this.coords[m]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"beta",{get:function(){return this.coords[m]},set:function(a){f["default"]("beta",a),this.modified=this.modified||this.beta!==a,this.coords[m]=a},enumerable:!0,configurable:!0}),c.prototype.add=function(a,b){return void 0===b&&(b=1),g["default"]("spinor",a),f["default"]("α",b),this.xy+=a.β*b,this.α+=a.α*b,this},c.prototype.add2=function(a,b){return this.α=a.α+b.α,this.xy=a.β+b.β,this},c.prototype.addPseudo=function(a){return f["default"]("β",a),this},c.prototype.addScalar=function(a){return f["default"]("α",a),this.α+=a,this},c.prototype.adj=function(){throw new Error("TODO: Spinor2.adj")},c.prototype.angle=function(){return this.log().grade(2)},c.prototype.clone=function(){var a=c.copy(this);return a.modified=this.modified,a},c.prototype.conj=function(){return this.xy=-this.xy,this},c.prototype.copy=function(a){return g["default"]("spinor",a),this.xy=f["default"]("spinor.β",a.β),this.α=f["default"]("spinor.α",a.α),this},c.prototype.copyScalar=function(a){return this.zero().addScalar(a)},c.prototype.copySpinor=function(a){return this.copy(a)},c.prototype.copyVector=function(){return this.zero()},c.prototype.cos=function(){throw new Error("Spinor2.cos")},c.prototype.cosh=function(){throw new Error("Spinor2.cosh")},c.prototype.div=function(a){return this.div2(this,a)},c.prototype.div2=function(a,b){var c=a.α,d=a.β,e=b.α,f=b.β,g=i["default"](b);return this.α=(c*e+d*f)/g,this.xy=(d*e-c*f)/g,this},c.prototype.divByScalar=function(a){return this.xy/=a,this.α/=a,this},c.prototype.exp=function(){var a=this.α,b=this.β,c=Math.exp(a),d=s(b*b),e=c*(0!==d?r(d)/d:1);return this.α=c*q(d),this.β=b*e,this},c.prototype.inv=function(){return this.conj(),this.divByScalar(this.squaredNormSansUnits()),this},c.prototype.lco=function(a){return this.lco2(this,a)},c.prototype.lco2=function(){return this},c.prototype.lerp=function(a,b){var d=c.copy(a),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(b),f.exp(),this.copy(f),this},c.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},c.prototype.log=function(){var a=this.α,b=this.xy,c=b*b,d=s(c),e=n(a),f=s(a*a+c);this.α=p(f);var g=o(d,e)/d;return this.xy=b*g,this},c.prototype.magnitude=function(){return s(this.squaredNormSansUnits())},c.prototype.magnitudeSansUnits=function(){return s(this.squaredNormSansUnits())},c.prototype.mul=function(a){return this.mul2(this,a)},c.prototype.mul2=function(a,b){var c=a.α,d=a.β,e=b.α,f=b.β;return this.α=c*e-d*f,this.xy=c*f+d*e,this},c.prototype.neg=function(){return this.α=-this.α,this.xy=-this.xy,this},c.prototype.norm=function(){var a=this.magnitudeSansUnits();return this.zero().addScalar(a)},c.prototype.normalize=function(){var a=this.magnitudeSansUnits();return this.xy=this.xy/a,this.α=this.α/a,this},c.prototype.one=function(){return this.α=1,this.xy=0,this},c.prototype.pow=function(){throw new Error("Spinor2.pow")},c.prototype.quad=function(){var a=this.squaredNormSansUnits();return this.zero().addScalar(a)},c.prototype.sin=function(){throw new Error("Spinor2.sin")},c.prototype.sinh=function(){throw new Error("Spinor2.sinh")},c.prototype.squaredNorm=function(){return this.squaredNormSansUnits()},c.prototype.squaredNormSansUnits=function(){return i["default"](this)},c.prototype.rco=function(a){return this.rco2(this,a)},c.prototype.rco2=function(){return this},c.prototype.rev=function(){return this.xy*=-1,this},c.prototype.reflect=function(a){var b=this.α,c=this.xy,d=a.x,e=a.y,f=d*d+e*e;return this.α=f*b,this.xy=-f*c,this},c.prototype.rotate=function(){return console.warn("Spinor2.rotate is not implemented"),this},c.prototype.rotorFromDirections=function(a,b){return j["default"](a,b,this),this},c.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=r(c);return this.xy=-a.β*d,this.α=q(c),this},c.prototype.scp=function(a){return this.scp2(this,a)},c.prototype.scp2=function(){return this},c.prototype.scale=function(a){return f["default"]("α",a),this.xy*=a,this.α*=a,this},c.prototype.slerp=function(a,b){var d=c.copy(a),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(b),f.exp(),this.copy(f),this},c.prototype.stress=function(){throw new Error(h["default"]("stress").message)},c.prototype.sub=function(a,b){return void 0===b&&(b=1),g["default"]("s",a),f["default"]("α",b),this.xy-=a.β*b,this.α-=a.α*b,this},c.prototype.sub2=function(a,b){return this.xy=a.β-b.β,this.α=a.α-b.α,this},c.prototype.versor=function(a,b){var c=a.x,e=a.y,f=b.x,g=b.y;return this.α=d["default"](c,e,f,g),this.xy=k["default"](c,e,0,f,g,0),this},c.prototype.grade=function(a){switch(e["default"]("grade",a),a){case 0:this.xy=0;break;case 2:this.α=0;break;default:this.α=0,this.xy=0}return this},c.prototype.toExponential=function(){return this.toString()},c.prototype.toFixed=function(){return this.toString()},c.prototype.toPrecision=function(){return this.toString()},c.prototype.toString=function(){return"Spinor2({β: "+this.xy+", w: "+this.α+"})"},c.prototype.ext=function(a){return this.ext2(this,a)},c.prototype.ext2=function(){return this},c.prototype.zero=function(){return this.α=0,this.xy=0,this},c.copy=function(a){return(new c).copy(a)},c.lerp=function(a,b,d){return c.copy(a).lerp(b,d)},c.rotorFromDirections=function(a,b){return(new c).rotorFromDirections(a,b)},c}(c["default"]),a("default",t)}}}),System.register("davinci-eight/geometries/transforms/Duality.js",["../../checks/mustBeBoolean","../../checks/mustBeString","../../i18n/notImplemented","../../math/Spinor2","../../math/Spinor3","../../math/Vector2","../../math/Vector3"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(a,d,e,f){this.sourceName=c["default"]("sourceName",a),this.outputName=c["default"]("outputName",d),this.changeSign=b["default"]("changeSign",e),this.removeSource=b["default"]("removeSource",f)}return a.prototype.exec=function(a){var b=a.attributes[this.sourceName];if(!b)throw new Error("Vertex attribute "+this.sourceName+" was not found");if(b instanceof h["default"]){var c=f["default"].dual(b,this.changeSign);a.attributes[this.outputName]=c}else{if(!(b instanceof f["default"]))throw new Error(b instanceof g["default"]?d["default"]("dual(vector: Vector2)").message:b instanceof e["default"]?d["default"]("dual(spinor: Spinor2)").message:"Expecting "+this.sourceName+" to be a Vector3 or Spinor");var i=h["default"].dual(b,this.changeSign);a.attributes[this.outputName]=i}this.removeSource&&delete a.attributes[this.sourceName]},a}(),a("default",i)}}}),System.register("davinci-eight/geometries/AxialPrimitivesBuilder.js",["../geometries/PrimitivesBuilder"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(){a.call(this),this.sliceAngle=2*Math.PI}return d(b,a),b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/geometries/transforms/RingTransform.js",["../../checks/mustBeNumber","../../checks/mustBeString","../../math/Spinor3","../../math/Vector3"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a,f,g,h,i,j,k,l){this.e=e["default"].copy(a),this.innerRadius=b["default"]("a",h),this.outerRadius=b["default"]("b",i),this.sliceAngle=b["default"]("sliceAngle",j),this.generator=d["default"].dual(a,g),this.cutLine=e["default"].copy(f).normalize(),this.aPosition=c["default"]("aPosition",k),this.aTangent=c["default"]("aTangent",l)}return a.prototype.exec=function(a,b,c,f,g){var h=f-1,i=b/h,j=g-1,k=c/j,l=this.innerRadius,m=this.outerRadius,n=this.generator.clone().scale(-this.sliceAngle*i/2).exp(),o=e["default"].copy(this.cutLine).rotate(n).scale(l+(m-l)*k),p=d["default"].dual(this.e,!1);a.attributes[this.aPosition]=o,a.attributes[this.aTangent]=p},a}(),a("default",f)}}}),System.register("davinci-eight/geometries/transforms/Rotation.js",["../../checks/mustBeObject","../../math/Spinor3","../../math/Vector3"],function(a){var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,d){this.R=c["default"].copy(b["default"]("R",a)),this.names=d}return a.prototype.exec=function(a){for(var b=this.names.length,e=0;b>e;e++){var f=this.names[e],g=a.attributes[f];if(3===g.length){var h=d["default"].vector(g.getComponent(0),g.getComponent(1),g.getComponent(2));h.rotate(this.R),a.attributes[f]=h}else{if(4!==g.length)throw new Error("Expecting "+f+" to be a vector with 3 coordinates");var i=c["default"].spinor(g.getComponent(0),g.getComponent(1),g.getComponent(2),g.getComponent(3));i.rotate(this.R),a.attributes[f]=i}}},a}(),a("default",e)}}}),System.register("davinci-eight/geometries/transforms/Scaling.js",["../../checks/mustBeObject","../../math/Spinor3","../../math/Vector3"],function(a){var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,c){this.stress=d["default"].copy(b["default"]("stress",a)),this.names=c}return a.prototype.exec=function(a){for(var b=this.names.length,e=0;b>e;e++){var f=this.names[e],g=a.attributes[f];if(3===g.length){var h=d["default"].vector(g.getComponent(0),g.getComponent(1),g.getComponent(2));h.stress(this.stress),a.attributes[f]=h}else{if(4!==g.length)throw new Error("Expecting "+f+" to be a vector with 3 coordinates");var i=c["default"].spinor(g.getComponent(0),g.getComponent(1),g.getComponent(2),g.getComponent(3));i.stress(this.stress),a.attributes[f]=i}}},a}(),a("default",e)}}}),System.register("davinci-eight/geometries/transforms/Translation.js",["../../checks/mustBeObject","../../math/Vector3"],function(a){var b,c,d;return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(){function a(a,d){this.s=c["default"].copy(b["default"]("s",a)),this.names=d}return a.prototype.exec=function(a){for(var b=this.names.length,d=0;b>d;d++){var e=this.names[d],f=a.attributes[e];if(3!==f.length)throw new Error("Expecting "+e+" to be a vector with 3 coordinates");var g=c["default"].vector(f.getComponent(0),f.getComponent(1),f.getComponent(2));g.add(this.s),a.attributes[e]=g}},a}(),a("default",d)}}}),System.register("davinci-eight/geometries/transforms/CoordsTransform2D.js",["../../core/GraphicsProgramSymbols","../../checks/mustBeBoolean","../../math/Vector2"],function(a){var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b,d){this.flipU=c["default"]("flipU",a),this.flipV=c["default"]("flipV",b),this.exchageUV=c["default"]("exchangeUV",d)}return a.prototype.exec=function(a,c,e,f,g){var h=c/(f-1),i=e/(g-1);a.attributes[b["default"].ATTRIBUTE_COORDS]=new d["default"]([h,i])},a}(),a("default",e)}}}),System.register("davinci-eight/geometries/RingBuilder.js",["./transforms/Approximation","./transforms/Direction","./transforms/Duality","../core/GraphicsProgramSymbols","./primitives/GridTriangleStrip","./AxialPrimitivesBuilder","./transforms/RingTransform","./transforms/Rotation","./transforms/Scaling","./transforms/Translation","./transforms/CoordsTransform2D","../math/Vector3"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=e["default"].ATTRIBUTE_POSITION,o=e["default"].ATTRIBUTE_TANGENT,p=e["default"].ATTRIBUTE_NORMAL,q=function(a){function e(b,c,d){a.call(this),this.innerRadius=0,this.outerRadius=1,this.radialSegments=1,this.thetaSegments=32,this.e=m["default"].copy(b),this.cutLine=m["default"].copy(c),this.clockwise=d}return r(e,a),e.prototype.toPrimitives=function(){this.transforms.push(new h["default"](this.e,this.cutLine,this.clockwise,this.outerRadius,this.innerRadius,this.sliceAngle,n,o)),this.transforms.push(new j["default"](this.stress,[n,o])),this.transforms.push(new i["default"](this.tilt,[n,o])),this.transforms.push(new k["default"](this.offset,[n])),this.transforms.push(new d["default"](o,p,!0,!0)),this.transforms.push(new c["default"](p)),this.transforms.push(new b["default"](9,[n,p])),this.useTextureCoord&&this.transforms.push(new l["default"](!1,!1,!1));for(var a=new f["default"](this.thetaSegments,this.radialSegments),e=a.uLength,g=0;e>g;g++)for(var m=a.vLength,q=0;m>q;q++)this.applyTransforms(a.vertex(g,q),g,q,e,m);return[a.toPrimitive()]},e}(g["default"]),a("default",q)}}}),System.register("davinci-eight/geometries/ArrowBuilder.js",["./AxialPrimitivesBuilder","./ConicalShellBuilder","./CylindricalShellBuilder","../checks/mustBeDefined","../geometries/RingBuilder","../math/R3","../math/Vector3"],function(a){var b,c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(b,c,d){a.call(this),this.heightCone=.2,this.radiusCone=.08,this.radiusShaft=.01,this.thetaSegments=16,e["default"]("axis",b),e["default"]("cutLine",c),this.e=g["default"].direction(b),this.cutLine=g["default"].direction(c),this.clockwise=d}return j(b,a),b.prototype.toPrimitives=function(){var a=1-this.heightCone,b=this.e.neg(),e=h["default"].copy(this.e).scale(a).add(this.offset);e.rotate(this.tilt);var g=h["default"].copy(this.offset);g.rotate(this.tilt);var i=new c["default"](this.e,this.cutLine,this.clockwise);i.radius=this.radiusCone,i.height=this.heightCone,i.tilt.mul(this.tilt),i.offset.copy(e),i.sliceAngle=this.sliceAngle,i.thetaSegments=this.thetaSegments,i.useNormal=this.useNormal,i.usePosition=this.usePosition,i.useTextureCoord=this.useTextureCoord;var j=new f["default"](b,this.cutLine,!this.clockwise);j.innerRadius=this.radiusShaft,j.outerRadius=this.radiusCone,j.tilt.mul(this.tilt),j.offset.copy(e),j.sliceAngle=this.sliceAngle,j.thetaSegments=this.thetaSegments,j.useNormal=this.useNormal,j.usePosition=this.usePosition,j.useTextureCoord=this.useTextureCoord;var k=new d["default"](this.e,this.cutLine,this.clockwise);k.radius=this.radiusShaft,k.height=a,k.tilt.mul(this.tilt),k.offset.copy(g),k.sliceAngle=this.sliceAngle,k.thetaSegments=this.thetaSegments,k.useNormal=this.useNormal,k.usePosition=this.usePosition,k.useTextureCoord=this.useTextureCoord;var l=new f["default"](b,this.cutLine,!this.clockwise);return l.innerRadius=0,l.outerRadius=this.radiusShaft,l.tilt.mul(this.tilt),l.offset.copy(g),l.sliceAngle=this.sliceAngle,l.thetaSegments=this.thetaSegments,l.useNormal=this.useNormal,l.usePosition=this.usePosition,l.useTextureCoord=this.useTextureCoord,[i.toPrimitives(),j.toPrimitives(),k.toPrimitives(),l.toPrimitives()].reduce(function(a,b){return a.concat(b)},[])},b}(b["default"]),a("default",i)}}}),System.register("davinci-eight/geometries/ArrowGeometry.js",["./ArrowBuilder","../core/GeometryContainer","../core/GeometryElements","../base/incLevel","../checks/isDefined","../checks/mustBeObject","../math/R3","../math/Spinor3","../math/Vector3","../core/vertexArraysFromPrimitive"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(a){function c(c){void 0===c&&(c={}),a.call(this,c.tilt),this.setLoggingName("ArrowGeometry"),g["default"]("options",c);var e=new b["default"](h["default"].e2,h["default"].e3,!1);e.stress.copy(f["default"](c.stress)?c.stress:j["default"].vector(1,1,1)),e.tilt.copy(f["default"](c.tilt)?c.tilt:i["default"].one()),e.offset.copy(f["default"](c.offset)?c.offset:j["default"].zero());for(var l=e.toPrimitives(),m=l.length,n=0;m>n;n++){var o=l[n],p=new d["default"](k["default"](o),c.engine);this.addPart(p),p.release()}}return m(c,a),c.prototype.destructor=function(b){a.prototype.destructor.call(this,e["default"](b))},c.prototype.getPrincipalScale=function(){return this.scaling.getElement(0,0)},c.prototype.setPrincipalScale=function(a,b){this.scaling.setElement(0,0,b),this.scaling.setElement(1,1,b),this.scaling.setElement(2,2,b)},c}(c["default"]),a("default",l)}}}),System.register("davinci-eight/visual/Arrow.js",["../geometries/ArrowGeometry","../math/Geometric3","../materials/MeshMaterial","../core/Mesh","../checks/mustBeDefined","../math/quadVectorE3","../math/R3"],function(a){function b(a,b){return a.vector?i["default"].direction(a.vector):b}var c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function f(f){var g=this;void 0===f&&(f={}),a.call(this,void 0,void 0,f.engine),this.setLoggingName("Arrow"),this.direction0=b(f,i["default"].e2),this._vector=d["default"].fromVector(this.direction0);var j={};j.engine=f.engine;var k=new c["default"](j),l=void 0,m=new e["default"](l,f.engine);this.geometry=k,this.material=m,k.release(),m.release(),f.color&&this.color.copy(f.color),f.position&&this.position.copyVector(f.position);var n=!0;this.vectorChangeHandler=function(a,b,c,d){n&&(n=!1,g.attitude.rotorFromDirections(g.direction0,d),g.setPrincipalScale("length",Math.sqrt(h["default"](d))),n=!0)},this.attitudeChangeHandler=function(){n&&(n=!1,g._vector.copyVector(g.direction0).rotate(g.attitude).scale(g.length),n=!0)},this._vector.on("change",this.vectorChangeHandler),this.attitude.on("change",this.attitudeChangeHandler)}return k(f,a),f.prototype.destructor=function(b){this._vector.off("change",this.vectorChangeHandler),this.attitude.off("change",this.attitudeChangeHandler),a.prototype.destructor.call(this,b+1)},Object.defineProperty(f.prototype,"length",{get:function(){return this.getPrincipalScale("length")},set:function(a){this.setPrincipalScale("length",a);var b=Math.sqrt(h["default"](this._vector));this._vector.scale(a/b)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"h",{get:function(){return this._vector},set:function(a){g["default"]("h",a),this._vector.copyVector(a)},enumerable:!0,configurable:!0}),f}(f["default"]),a("default",j)}}}),System.register("davinci-eight/geometries/SphereBuilder.js",["../geometries/arc3","../math/R3","../checks/mustBeNumber","../geometries/Simplex","../geometries/SliceSimplexPrimitivesBuilder","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a){function b(a,b,c,d,e,f,g,j,k){for(var l=m["default"].dual(i["default"].e3,!1),p=f+1,q=g+1,r=0;p>r;r++)for(var s=r/f,t=s*e,u=Math.sin(t),v=o["default"].copy(i["default"].e1).scale(u),w=h["default"](v,d,l,g),x=Math.cos(t),y=x,z=0;q>z;z++){var A=w[z].add(i["default"].e3,y);A.stress(a),A.rotate(b),A.add(c),j.push(A.rotate(b));var B=z/g;k.push(new n["default"]([B,1-s]))}}function c(a,b,c){return a*(c+1)+b}function d(a,b,c){switch(b){case 0:return a+1;case 1:return a;case 2:return a+c+1;case 3:return a+c+2}}function e(a,b,e,f,g,h){for(var i=0;f>i;i++)for(var j=0;g>j;j++){var k=c(i,j,g),l=d(k,0,g),m=d(k,1,g),n=d(k,2,g),p=d(k,3,g),q=o["default"].copy(a[l]).normalize(),r=o["default"].copy(a[m]).normalize(),s=o["default"].copy(a[n]).normalize(),t=o["default"].copy(a[p]).normalize(),u=b[l].clone(),v=b[m].clone(),w=b[n].clone(),x=b[p].clone();h.triangle([a[l],a[m],a[p]],[q,r,t],[u,v,x]),h.triangle([a[n],a[p],a[m]],[s,t,r],[w,x,v])}}function f(a,b,e,f,g,h){for(var i=0;f>i;i++)for(var j=0;g>j;j++){var k=c(i,j,g),l=d(k,0,g),m=d(k,1,g),n=d(k,2,g),p=d(k,3,g),q=o["default"].copy(a[l]).normalize(),r=o["default"].copy(a[m]).normalize(),s=o["default"].copy(a[n]).normalize(),t=o["default"].copy(a[p]).normalize(),u=b[l].clone(),v=b[m].clone(),w=b[n].clone(),x=b[p].clone();h.lineSegment([a[l],a[m]],[q,r],[u,v]),h.lineSegment([a[m],a[n]],[r,s],[v,w]),h.lineSegment([a[n],a[p]],[s,t],[w,x]),h.lineSegment([a[p],a[l]],[t,q],[x,u])}}function g(a,b,e,f,g,h){for(var i=0;f>i;i++)for(var j=0;g>j;j++){var k=c(i,j,g),l=d(k,0,g),m=d(k,1,g),n=d(k,2,g),p=d(k,3,g),q=o["default"].copy(a[l]).normalize(),r=o["default"].copy(a[m]).normalize(),s=o["default"].copy(a[n]).normalize(),t=o["default"].copy(a[p]).normalize(),u=b[l].clone(),v=b[m].clone(),w=b[n].clone(),x=b[p].clone();h.point([a[l]],[q],[u]),h.point([a[m]],[r],[v]),h.point([a[n]],[s],[w]),h.point([a[p]],[t],[x])}}var h,i,j,k,l,m,n,o,p,q=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p=function(a){function c(){a.call(this),this.thetaLength=Math.PI,this.setModified(!0),this.regenerate()}return q(c,a),Object.defineProperty(c.prototype,"radius",{get:function(){return this.stress.x},set:function(a){j["default"]("radius",a),this.stress.x=a,
this.stress.y=a,this.stress.z=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"phiLength",{get:function(){return this.sliceAngle},set:function(a){j["default"]("phiLength",a),this.sliceAngle=a},enumerable:!0,configurable:!0}),c.prototype.isModified=function(){return a.prototype.isModified.call(this)},c.prototype.setModified=function(b){return a.prototype.setModified.call(this,b),this},c.prototype.regenerate=function(){this.data=[];var a=this.curvedSegments,c=this.curvedSegments,d=[],h=[];switch(b(this.stress,this.tilt,this.offset,this.phiLength,this.thetaLength,a,c,d,h),this.k){case k["default"].EMPTY:e(d,h,this.radius,a,c,this);break;case k["default"].POINT:g(d,h,this.radius,a,c,this);break;case k["default"].LINE:f(d,h,this.radius,a,c,this);break;case k["default"].TRIANGLE:e(d,h,this.radius,a,c,this);break;default:console.warn(this.k+"-simplex is not supported for geometry generation.")}this.setModified(!1)},c}(l["default"]),a("default",p)}}}),System.register("davinci-eight/geometries/SphereGeometry.js",["../core/GeometryContainer","../core/GeometryElements","../base/incLevel","../i18n/notSupported","./SphereBuilder","../core/vertexArraysFromPrimitive"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){void 0===b&&(b={}),a.call(this,void 0),this._radius=1,this.setLoggingName("SphereGeometry");for(var d=new f["default"],e=d.toPrimitives(),h=e.length,i=0;h>i;i++){var j=e[i],k=new c["default"](g["default"](j),b.engine);this.addPart(k),k.release()}}return i(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,d["default"](b))},Object.defineProperty(b.prototype,"radius",{get:function(){return this._radius},set:function(a){this._radius=a,this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),b.prototype.getPrincipalScale=function(a){switch(a){case"radius":return this._radius;default:throw new Error(e["default"]("getPrincipalScale('"+a+"')").message)}},b.prototype.setPrincipalScale=function(a,b){switch(a){case"radius":this._radius=b;break;default:throw new Error(e["default"]("setPrincipalScale('"+a+"')").message)}this.setScale(this._radius,this._radius,this._radius)},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/visual/Sphere.js",["./direction","../base/incLevel","../checks/isDefined","../materials/MeshMaterial","../checks/mustBeNumber","./RigidBody","../geometries/SphereGeometry"],function(a){var b,c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function g(c){void 0===c&&(c={}),a.call(this,void 0,void 0,c.engine,b["default"](c)),this.setLoggingName("Sphere");var g={};g.engine=c.engine;var i=new h["default"](g);this.geometry=i,i.release();var j=void 0,k=new e["default"](j,c.engine);this.material=k,k.release(),c.color&&this.color.copy(c.color),c.position&&this.position.copyVector(c.position),this.radius=d["default"](c.radius)?f["default"]("radius",c.radius):1}return j(g,a),g.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,c["default"](b))},Object.defineProperty(g.prototype,"radius",{get:function(){return this.getPrincipalScale("radius")},set:function(a){this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),g}(g["default"]),a("default",i)}}}),System.register("davinci-eight/geometries/CuboidPrimitivesBuilder.js",["../math/G3","./primitives/GridTriangleStrip","./PrimitivesBuilder","../core/GraphicsProgramSymbols","../checks/mustBeNumber","../math/Spinor3","../math/Vector3","../math/Vector2"],function(a){function b(a,b,c,e,g){for(var k=h["default"].wedge(c[0],c[1]).rotate(a),l=i["default"].dual(k,!0).normalize(),m=i["default"].copy(c[0]).scale(-.5),n=i["default"].copy(c[0]).scale(.5),o=i["default"].copy(c[1]).scale(-.5),p=i["default"].copy(c[1]).scale(.5),q=i["default"].copy(c[2]).scale(.5),r=new d["default"](e,g),s=0;s<r.uLength;s++)for(var t=0;t<r.vLength;t++){var u=s/e,v=t/g,w=i["default"].copy(m).lerp(n,u),x=i["default"].copy(o).lerp(p,v),y=r.vertex(s,t),z=i["default"].copy(w).add(x).add(q);z.rotate(a),z.add(b),y.attributes[f["default"].ATTRIBUTE_POSITION]=z,y.attributes[f["default"].ATTRIBUTE_NORMAL]=l,y.attributes[f["default"].ATTRIBUTE_COORDS]=new j["default"]([u,v])}return r}var c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(a){function d(){a.call(this),this.iSegments=1,this.jSegments=1,this.kSegments=1,this.openBack=!1,this.openBase=!1,this.openFront=!1,this.openLeft=!1,this.openRight=!1,this.openCap=!1,this._a=i["default"].copy(c["default"].e1),this._b=i["default"].copy(c["default"].e2),this._c=i["default"].copy(c["default"].e3),this.sides=[]}return l(d,a),Object.defineProperty(d.prototype,"width",{get:function(){return this._a.magnitude()},set:function(a){g["default"]("width",a),this._a.normalize().scale(a)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"height",{get:function(){return this._b.magnitude()},set:function(a){g["default"]("height",a),this._b.normalize().scale(a)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"depth",{get:function(){return this._c.magnitude()},set:function(a){g["default"]("depth",a),this._c.normalize().scale(a)},enumerable:!0,configurable:!0}),d.prototype.regenerate=function(){this.sides=[];var a=this.tilt,c=this.offset;this.openFront||this.sides.push(b(a,c,[this._a,this._b,this._c],this.iSegments,this.jSegments)),this.openRight||this.sides.push(b(a,c,[i["default"].copy(this._c).scale(-1),this._b,this._a],this.kSegments,this.jSegments)),this.openLeft||this.sides.push(b(a,c,[this._c,this._b,i["default"].copy(this._a).scale(-1)],this.kSegments,this.jSegments)),this.openBack||this.sides.push(b(a,c,[i["default"].copy(this._a).scale(-1),this._b,i["default"].copy(this._c).scale(-1)],this.iSegments,this.jSegments)),this.openCap||this.sides.push(b(a,c,[this._a,i["default"].copy(this._c).scale(-1),this._b],this.iSegments,this.kSegments)),this.openBase||this.sides.push(b(a,c,[this._a,this._c,i["default"].copy(this._b).scale(-1)],this.iSegments,this.kSegments))},d.prototype.toPrimitives=function(){return this.regenerate(),this.sides.map(function(a){return a.toPrimitive()})},d}(e["default"]),a("default",k)}}}),System.register("davinci-eight/geometries/BoxGeometry.js",["../core/GeometryContainer","../core/GeometryElements","../base/incLevel","../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeNumber","../i18n/notSupported","./CuboidPrimitivesBuilder","../core/vertexArraysFromPrimitive"],function(a){var b,c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(a){function b(b){void 0===b&&(b={}),a.call(this,b.tilt),this.w=1,this.h=1,this.d=1,this.setLoggingName("BoxGeometry");var d=new i["default"];d.width=e["default"](b.width)?g["default"]("width",b.width):1,d.height=e["default"](b.height)?g["default"]("height",b.height):1,d.depth=e["default"](b.depth)?g["default"]("depth",b.depth):1,e["default"](b.openBack)&&(d.openBack=f["default"]("openBack",b.openBack)),e["default"](b.openBase)&&(d.openBase=f["default"]("openBase",b.openBase)),e["default"](b.openFront)&&(d.openFront=f["default"]("openFront",b.openFront)),e["default"](b.openLeft)&&(d.openLeft=f["default"]("openLeft",b.openLeft)),e["default"](b.openRight)&&(d.openRight=f["default"]("openRight",b.openRight)),e["default"](b.openCap)&&(d.openCap=f["default"]("openCap",b.openCap)),b.tilt&&d.tilt.copy(b.tilt),b.offset&&d.offset.copy(b.offset);for(var h=d.toPrimitives(),k=h.length,l=0;k>l;l++){var m=h[l],n=new c["default"](j["default"](m),b.engine);this.addPart(n),n.release()}}return l(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,d["default"](b))},b.prototype.getPrincipalScale=function(a){switch(a){case"width":return this.w;case"height":return this.h;case"depth":return this.d;default:throw new Error(h["default"]("getPrincipalScale('"+a+"')").message)}},b.prototype.setPrincipalScale=function(a,b){switch(a){case"width":this.w=b;break;case"height":this.h=b;break;case"depth":this.d=b;break;default:throw new Error(h["default"]("setPrincipalScale('"+a+"')").message)}this.setScale(this.w,this.h,this.d)},b}(b["default"]),a("default",k)}}}),System.register("davinci-eight/visual/Box.js",["../geometries/BoxGeometry","./direction","../base/incLevel","../checks/isDefined","../materials/MeshMaterial","../checks/mustBeNumber","./RigidBody"],function(a){var b,c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function h(d){void 0===d&&(d={}),a.call(this,void 0,void 0,d.engine,c["default"](d)),this.setLoggingName("Box");var h={};h.engine=d.engine,h.tilt=d.tilt,h.offset=d.offset,h.openBack=d.openBack,h.openBase=d.openBase,h.openFront=d.openFront,h.openLeft=d.openLeft,h.openRight=d.openRight,h.openCap=d.openCap;var i=new b["default"](h);this.geometry=i,i.release();var j=void 0,k=new f["default"](j,d.engine);this.material=k,k.release(),d.color&&this.color.copy(d.color),d.position&&this.position.copyVector(d.position),d.attitude&&this.attitude.copySpinor(d.attitude),this.width=e["default"](d.width)?g["default"]("width",d.width):1,this.height=e["default"](d.height)?g["default"]("height",d.height):1,this.depth=e["default"](d.depth)?g["default"]("depth",d.depth):1}return j(h,a),h.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,d["default"](b))},Object.defineProperty(h.prototype,"width",{get:function(){return this.getPrincipalScale("width")},set:function(a){this.setPrincipalScale("width",a)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"height",{get:function(){return this.getPrincipalScale("height")},set:function(a){this.setPrincipalScale("height",a)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"depth",{get:function(){return this.getPrincipalScale("depth")},set:function(a){this.setPrincipalScale("depth",a)},enumerable:!0,configurable:!0}),h}(h["default"]),a("default",i)}}}),System.register("davinci-eight/visual/RigidBodyWithUnits.js",["../math/G3","../base/incLevel","../checks/mustBeObject","../core/ShareableBase","../math/Unit"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=f["default"].KILOGRAM.mul(f["default"].METER).div(f["default"].SECOND),h=function(a){function e(c,e){a.call(this),this._mass=b["default"].scalar(1,f["default"].KILOGRAM),this._momentum=b["default"].scalar(0,f["default"].KILOGRAM.mul(f["default"].METER).div(f["default"].SECOND)),this.setLoggingName("RigidBodyWithUnits"),this.mesh=d["default"]("mesh",c),this.mesh.addRef(),this.base=b["default"].direction(d["default"]("axis",e))}return i(e,a),e.prototype.destructor=function(b){this.mesh.release(),this.mesh=void 0,a.prototype.destructor.call(this,c["default"](b))},Object.defineProperty(e.prototype,"axis",{get:function(){return this.base.rotate(this.mesh.attitude)},set:function(a){d["default"]("axis",a),this.mesh.attitude.rotorFromDirections(this.base,a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attitude",{get:function(){return b["default"].fromSpinor(this.mesh.attitude)},set:function(a){var b=this;d["default"]("attitude",a,function(){return b._type}),f["default"].compatible(a.uom,f["default"].ONE),this.mesh.attitude.copySpinor(a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mass",{get:function(){return this._mass},set:function(a){var b=this;d["default"]("mass",a,function(){return b._type}),f["default"].compatible(a.uom,f["default"].KILOGRAM),this._mass=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"momentum",{get:function(){return this._momentum},set:function(a){var b=this;d["default"]("momentum",a,function(){return b._type}),f["default"].compatible(a.uom,g),this._momentum=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return b["default"].fromVector(this.mesh.position,f["default"].METER)},set:function(a){var b=this;d["default"]("position",a,function(){return b._type}),f["default"].compatible(a.uom,f["default"].METER),this.mesh.position.copy(a)},enumerable:!0,configurable:!0}),e}(e["default"]),a("default",h)}}}),System.register("davinci-eight/visual/direction.js",["../math/R3"],function(a){function b(a){return a.axis?c["default"].direction(a.axis):c["default"].e2}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/geometries/arc3.js",["../checks/mustBeDefined","../checks/mustBeInteger","../checks/mustBeNumber","../math/Spinor3","../math/Vector3"],function(a){function b(a,b,h,i){c["default"]("begin",a),e["default"]("angle",b),c["default"]("generator",h),d["default"]("segments",i);var j=[],k=g["default"].copy(a),l=f["default"].copy(h).scale(-b/2/i).exp();j.push(k.clone());for(var m=0;i>m;m++)k.rotate(l),j.push(k.clone());return j}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/geometries/SliceSimplexPrimitivesBuilder.js",["../geometries/SimplexPrimitivesBuilder"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(){a.call(this),this.sliceAngle=2*Math.PI}return d(b,a),b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/geometries/CylinderBuilder.js",["../geometries/arc3","../math/R3","../geometries/SliceSimplexPrimitivesBuilder","../math/Spinor3","../math/Unit","../math/Vector2","../math/Vector3"],function(a){function b(a,b,d,e,j,k,l,m,n,o,p,q,r,s){for(var t=a.scale(g["default"].ONE.scale(.5)),u=a.scale(g["default"].ONE.scale(1/n)),v=n+1,w=0;v>w;w++){for(var x=i["default"].copy(u).scale(w).sub(t),y=[],z=[],A=(n-w)/n,B=c["default"](b,l,m,o),C=B.length,D=0;C>D;D++){var E=B[D],F=f["default"].dual(E,!1);E.add(x),E.stress(e),E.rotate(j),E.add(k),F.stress(e),F.rotate(j);var G=D/o;p.push(E),q.push(F),y.push(p.length-1),z.push(new h["default"]([G,A]))}r.push(y),s.push(z)}}var c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function c(b,c,e){a.call(this),this.openBase=!1,this.openCap=!1,this.openWall=!1,this.e=d["default"].direction(b),this.cutLine=d["default"].direction(c),this.clockwise=e,this.setModified(!0)}return k(c,a),c.prototype.regenerate=function(){this.data=[];var a=this.flatSegments,c=this.curvedSegments,d=f["default"].dual(this.e,!1),e=.5,g=[],j=[],k=[],l=[];if(b(this.e,this.cutLine,this.clockwise,this.stress,this.tilt,this.offset,this.sliceAngle,d,a,c,g,j,k,l),!this.openWall)for(var m=0;c>m;m++)for(var n=0;a>n;n++){var o=k[n][m],p=k[n+1][m],q=k[n+1][m+1],r=k[n][m+1],s=i["default"].dual(j[o],!0).normalize(),t=i["default"].dual(j[p],!0).normalize(),u=i["default"].dual(j[q],!0).normalize(),v=i["default"].dual(j[r],!0).normalize(),w=l[n][m].clone(),x=l[n+1][m].clone(),y=l[n+1][m+1].clone(),z=l[n][m+1].clone();this.triangle([g[p],g[o],g[q]],[t,s,u],[x,w,y]),this.triangle([g[r],g[q],g[o]],[v,u.clone(),s.clone()],[z,y.clone(),w.clone()])}if(!this.openCap){var A=i["default"].copy(this.e).scale(e).add(this.offset),B=f["default"].dual(this.e,!1).stress(this.stress).rotate(this.tilt),C=i["default"].dual(B,!0);g.push(A);for(var m=0;c>m;m++){var o=k[a][m+1],p=g.length-1,q=k[a][m],w=l[a][m+1].clone(),x=new h["default"]([w.x,1]),y=l[a][m].clone();this.triangle([g[o],g[p],g[q]],[C,C,C],[w,x,y])}}if(!this.openBase){var D=i["default"].copy(this.e).scale(-e).add(this.offset),B=f["default"].dual(this.e,!1).neg().stress(this.stress).rotate(this.tilt),C=i["default"].dual(B,!0);g.push(D);for(var m=0;c>m;m++){var o=k[0][m],p=g.length-1,q=k[0][m+1],w=l[0][m].clone(),x=new h["default"]([w.x,1]),y=l[0][m+1].clone();this.triangle([g[o],g[p],g[q]],[C,C,C],[w,x,y])}}this.setModified(!1)},c}(e["default"]),a("default",j)}}}),System.register("davinci-eight/geometries/CylinderGeometry.js",["./CylinderBuilder","../base/incLevel","../checks/isDefined","../checks/mustBeBoolean","../i18n/notSupported","../core/GeometryContainer","../core/GeometryElements","../math/R3","../core/vertexArraysFromPrimitive"],function(a){var b,c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(a){function g(c){void 0===c&&(c={}),a.call(this,c.tilt),this._length=1,this._radius=1,this.setLoggingName("CylinderGeometry");var f=new b["default"](i["default"].e2,i["default"].e3,!1);d["default"](c.openBase)&&(f.openBase=e["default"]("openBase",c.openBase)),d["default"](c.openCap)&&(f.openCap=e["default"]("openCap",c.openCap)),d["default"](c.openWall)&&(f.openWall=e["default"]("openWall",c.openWall)),c.tilt&&f.tilt.copy(c.tilt),c.offset&&f.offset.copy(c.offset);for(var g=f.toPrimitives(),k=g.length,l=0;k>l;l++){var m=g[l],n=new h["default"](j["default"](m),c.engine);this.addPart(n),n.release()}}return l(g,a),g.prototype.destructor=function(b){a.prototype.destructor.call(this,c["default"](b))},Object.defineProperty(g.prototype,"radius",{get:function(){return this._radius},set:function(a){this._radius=a,this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"length",{get:function(){return this._length},set:function(a){this._length=a,this.setPrincipalScale("length",a)},enumerable:!0,configurable:!0}),g.prototype.getPrincipalScale=function(a){switch(a){case"length":return this._length;case"radius":return this._radius;default:throw new Error(f["default"]("getPrincipalScale('"+a+"')").message)}},g.prototype.setPrincipalScale=function(a,b){switch(a){case"length":this._length=b;break;case"radius":this._radius=b;break;default:throw new Error(f["default"]("getPrincipalScale('"+a+"')").message)}this.setScale(this._radius,this._length,this._radius)},g}(g["default"]),a("default",k)}}}),System.register("davinci-eight/visual/RigidBody.js",["../math/Geometric3","../core/Mesh","../checks/mustBeObject","../math/R3","../math/Unit"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function c(c,d,g,h){a.call(this,c,d,g),this.mass=1,this.momentum=b["default"].zero(),this.setLoggingName("RigidBody"),this.initialAxis=e["default"].fromVector(h,f["default"].ONE)}return h(c,a),c.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(c.prototype,"axis",{get:function(){return b["default"].fromVector(this.initialAxis).rotate(this.attitude)},set:function(a){d["default"]("axis",a),this.attitude.rotorFromDirections(this.initialAxis,a)},enumerable:!0,configurable:!0}),c}(c["default"]),a("default",g)}}}),System.register("davinci-eight/visual/Cylinder.js",["./direction","../geometries/CylinderGeometry","../base/incLevel","../checks/isDefined","../materials/MeshMaterial","../checks/mustBeNumber","./RigidBody"],function(a){var b,c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function h(d){void 0===d&&(d={}),a.call(this,void 0,void 0,d.engine,b["default"](d)),this.setLoggingName("Cylinder");var h={};h.engine=d.engine,h.tilt=d.tilt,h.offset=d.offset,h.openCap=d.openCap,h.openBase=d.openBase,h.openWall=d.openWall;var i=new c["default"](h);this.geometry=i,i.release();var j=null,k=new f["default"](j,d.engine);this.material=k,k.release(),d.color&&this.color.copy(d.color),d.position&&this.position.copyVector(d.position),d.attitude&&this.attitude.copySpinor(d.attitude),this.radius=e["default"](d.radius)?g["default"]("radius",d.radius):.5,this.length=e["default"](d.length)?g["default"]("length",d.length):1}return j(h,a),h.prototype.destructor=function(b){a.prototype.destructor.call(this,d["default"](b))},Object.defineProperty(h.prototype,"length",{get:function(){return this.getPrincipalScale("length")},set:function(a){this.setPrincipalScale("length",a)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"radius",{get:function(){return this.getPrincipalScale("radius")},set:function(a){this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),h}(h["default"]),a("default",i)}}}),System.register("davinci-eight/geometries/primitives/LineStrip.js",["./CurvePrimitive","../../core/DrawMode","./elementsForCurve","../../checks/mustBeGE","../../checks/mustBeInteger","../../checks/mustBeLT"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){a.call(this,c["default"].LINE_STRIP,b,!1),this.elements=d["default"](b,!1)}return i(b,a),b.prototype.vertex=function(a){return f["default"]("uIndex",a),e["default"]("uIndex",a,0),g["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/geometries/primitives/numVerticesForCurve.js",["../../checks/mustBeInteger"],function(a){function b(a){return c["default"]("uSegments",a),a+1}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/geometries/primitives/CurvePrimitive.js",["./GeometryPrimitive","../../checks/mustBeGE","../../checks/mustBeLT","../../checks/mustBeBoolean","../../checks/mustBeInteger","./numPostsForFence","./numVerticesForCurve","../../i18n/readOnly"],function(a){var b,c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function b(b,d,g){a.call(this,b,h["default"](d),1),f["default"]("uSegments",d),c["default"]("uSegments",d,0),e["default"]("uClosed",g),this._uSegments=d,this._uClosed=g;for(var i=this.uLength,j=0;i>j;j++){var k=this.vertex(j).coords;k.setComponent(0,j)}}return k(b,a),Object.defineProperty(b.prototype,"uSegments",{get:function(){return this._uSegments},set:function(){throw new Error(i["default"]("uSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"uLength",{get:function(){return g["default"](this._uSegments,this._uClosed)},set:function(){throw new Error(i["default"]("uLength").message)},enumerable:!0,configurable:!0}),b.prototype.vertexTransform=function(a){for(var b=this.vertices.length,c=0;b>c;c++){var d=this.vertices[c],e=d.coords.getComponent(0);a.exec(d,e,0,this.uLength,0)}},b.prototype.vertex=function(a){return f["default"]("uIndex",a),c["default"]("uIndex",a,0),d["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(b["default"]),a("default",j)}}}),System.register("davinci-eight/geometries/primitives/elementsForCurve.js",["../../checks/isDefined","../../checks/mustBeArray","./numPostsForFence"],function(a){function b(a,b,f){f=c["default"](f)?d["default"]("elements",f):[];for(var g=e["default"](a,b),h=0;g>h;h++)f.push(h);return f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/isLT.js",[],function(a){function b(a,b){return b>a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeLT.js",["../checks/mustSatisfy","../checks/isLT"],function(a){function b(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be less than "+e},f),b}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/geometries/primitives/LinePoints.js",["./CurvePrimitive","../../core/DrawMode","./elementsForCurve","../../checks/mustBeGE","../../checks/mustBeInteger","../../checks/mustBeLT"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){a.call(this,c["default"].POINTS,b,!1),this.elements=d["default"](b,!1)}return i(b,a),b.prototype.vertex=function(a){return f["default"]("uIndex",a),e["default"]("uIndex",a,0),g["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/geometries/curveVertexArrays.js",["../core/Color","../core/DrawMode","../core/GraphicsProgramSymbols","./primitives/LineStrip","./primitives/LinePoints","../checks/isDefined","../checks/isFunction","../checks/mustBeNumber","../math/R3","../math/Unit","../math/Vector3"],function(a){function b(a){return n["default"].vector(a,0,0,o["default"].ONE)}function c(a,b){switch(a){case g["default"].POINTS:return new j["default"](b);case g["default"].LINES:return new i["default"](b);default:throw new Error("drawMode must be POINTS, LINES")}}function d(a,c,d){var e=k["default"](d.aPosition)?d.aPosition:b,g=k["default"](d.aColor)?d.aColor:void 0;l["default"](e)&&(a.attributes[h["default"].ATTRIBUTE_POSITION]=p["default"].copy(e(c))),l["default"](g)&&(a.attributes[h["default"].ATTRIBUTE_COLOR]=f["default"].copy(g(c)))}function e(a){var b=k["default"](a.uMin)?m["default"]("uMin",a.uMin):0,e=k["default"](a.uMax)?m["default"]("uMax",a.uMax):1,f=k["default"](a.uSegments)?a.uSegments:1,h=k["default"](a.drawMode)?a.drawMode:g["default"].LINES,i=c(h,f,!1),j=i.uLength;if(f>0)for(var l=0;j>l;l++){var n=i.vertex(l),o=b+(e-b)*l/f;d(n,o,a)}else{var n=i.vertex(0),o=(b+e)/2;d(n,o,a)}var p=i.toVertexArrays();return p}var f,g,h,i,j,k,l,m,n,o,p;return a("default",e),{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a}],execute:function(){}}}),System.register("davinci-eight/geometries/CurveGeometry.js",["../core/GeometryElements","./curveVertexArrays"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function b(b){void 0===b&&(b={}),a.call(this,c["default"](b),b.engine),this.setLoggingName("CurveGeometry")}return e(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/visual/Curve.js",["../core/DrawMode","../core/GraphicsProgramSymbols","../geometries/CurveGeometry","../base/incLevel","../checks/isDefined","../checks/isFunction","../checks/isNull","../checks/isUndefined","../materials/LineMaterial","../core/Mesh","../checks/mustBeGE","../checks/mustBeNumber","../materials/PointMaterial","../math/R3","../math/Unit"],function(a){function b(a){return u["default"].vector(a,0,0,v["default"].ONE)}function c(a){return m["default"](a)||n["default"](a)}function d(a){return m["default"](a)||o["default"](a)}function e(a,d){if(c(a.aPosition))d.aPosition=a.aPosition;else{if(!o["default"](a.aPosition))throw new Error("aPosition must be one of function, null, or undefined.");d.aPosition=b}if(c(a.aColor))d.aColor=a.aColor;else if(!o["default"](a.aColor))throw new Error("aColor must be one of function, null, or undefined.");d.uMax=l["default"](a.uMax)?s["default"]("uMax",a.uMax):.5,d.uMin=l["default"](a.uMin)?s["default"]("uMin",a.uMin):-.5,d.uSegments=l["default"](a.uSegments)?r["default"]("uSegments",a.uSegments,0):1}function f(a,b){var c={};e(a,c),c.drawMode=h["default"].POINTS;var f=new j["default"](c);b.geometry=f,f.release();var g={attributes:{},uniforms:{}};if(d(a.aPosition))g.attributes[i["default"].ATTRIBUTE_POSITION]=3;else if(!n["default"](a.aPosition))throw new Error;m["default"](a.aColor)?g.attributes[i["default"].ATTRIBUTE_COLOR]=3:g.uniforms[i["default"].UNIFORM_COLOR]="vec3",g.uniforms[i["default"].UNIFORM_MODEL_MATRIX]="mat4",g.uniforms[i["default"].UNIFORM_PROJECTION_MATRIX]="mat4",g.uniforms[i["default"].UNIFORM_VIEW_MATRIX]="mat4",g.uniforms[i["default"].UNIFORM_POINT_SIZE]="float";var k=new t["default"](g,a.engine);b.material=k,k.release()}function g(a,b){var c={};e(a,c),c.drawMode=h["default"].LINES;var f=new j["default"](c);b.geometry=f,f.release();var g={attributes:{},uniforms:{}};if(d(a.aPosition))g.attributes[i["default"].ATTRIBUTE_POSITION]=3;else if(!n["default"](a.aPosition))throw new Error;m["default"](a.aColor)?g.attributes[i["default"].ATTRIBUTE_COLOR]=3:g.uniforms[i["default"].UNIFORM_COLOR]="vec3",g.uniforms[i["default"].UNIFORM_MODEL_MATRIX]="mat4",g.uniforms[i["default"].UNIFORM_PROJECTION_MATRIX]="mat4",
g.uniforms[i["default"].UNIFORM_VIEW_MATRIX]="mat4";var k=new p["default"](g,a.engine);b.material=k,k.release()}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a}],execute:function(){w=function(a){function b(b){void 0===b&&(b={}),a.call(this,void 0,void 0,b.engine),this.setLoggingName("Curve");var c=l["default"](b.drawMode)?b.drawMode:h["default"].LINES;switch(c){case h["default"].POINTS:f(b,this);break;case h["default"].LINES:case h["default"].LINE_STRIP:g(b,this);break;default:throw new Error("'"+c+"' is not a valid option for drawMode.")}}return x(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,k["default"](b))},b}(q["default"]),a("default",w)}}}),System.register("davinci-eight/geometries/primitives/GridLines.js",["../../core/DrawMode","./GridPrimitive","../../checks/mustBeInteger","./numPostsForFence"],function(a){function b(a,b,c){return b*c+a}function c(a,c,d,e){for(var f=g["default"](a,c),h=g["default"](d,e),i=[],j=0;f>j;j++)for(var k=0;h>k;k++)a>j&&(i.push(b(j,k,f,h)),i.push(b(j+1,k,f,h))),d>k&&(i.push(b(j,k,f,h)),i.push(b(j,k+1,f,h)));return i}var d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function e(b,e,f,h){a.call(this,d["default"].LINES,b,f),this.elements=c(b,e,f,h);for(var i=g["default"](b,e),j=g["default"](f,h),k=0;i>k;k++)for(var l=0;j>l;l++){var m=this.vertex(k,l).coords;m.setComponent(0,k),m.setComponent(1,l)}}return i(e,a),e.prototype.vertex=function(a,c){return f["default"]("i",a),f["default"]("j",c),this.vertices[b(a,c,this.uLength,this.vLength)]},e}(e["default"]),a("default",h)}}}),System.register("davinci-eight/geometries/primitives/GridPoints.js",["../../core/DrawMode","./GridPrimitive","../../checks/mustBeInteger","./numPostsForFence"],function(a){function b(a,b,c){return b*c+a}function c(a,c,d,e){for(var f=g["default"](a,c),h=g["default"](d,e),i=[],j=0;f>j;j++)for(var k=0;h>k;k++)i.push(b(j,k,f,h));return i}var d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function e(b,e,f,h){a.call(this,d["default"].POINTS,b,f),this.elements=c(b,e,f,h);for(var i=g["default"](b,e),j=g["default"](f,h),k=0;i>k;k++)for(var l=0;j>l;l++){var m=this.vertex(k,l).coords;m.setComponent(0,k),m.setComponent(1,l)}}return i(e,a),e.prototype.vertex=function(a,c){return f["default"]("i",a),f["default"]("j",c),this.vertices[b(a,c,this.uLength,this.vLength)]},e}(e["default"]),a("default",h)}}}),System.register("davinci-eight/geometries/primitives/GeometryPrimitive.js",["./DrawAttribute","./DrawPrimitive","../../checks/mustBeArray","../../checks/mustBeGE","../../checks/mustBeInteger","../../i18n/notSupported","../../core/vertexArraysFromPrimitive","./Vertex","../dataFromVectorN"],function(a){function b(a,b){for(var d={},e=b.length,f=0;e>f;f++)for(var g=b[f],h=Object.keys(g.attributes),i=h.length,j=0;i>j;j++){var l=h[j],m=k["default"](g.attributes[l]),n=m.length,o=d[l];o||(o=d[l]=new c["default"]([],n));for(var p=0;n>p;p++)o.values.push(m[p])}return d}var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(){function a(a,b,c){this.mode=g["default"]("mode",a),g["default"]("numVertices",b),f["default"]("numVertices",b,0),g["default"]("numCoordinates",c),f["default"]("numCoordinates",c,0),this.vertices=[];for(var d=0;b>d;d++)this.vertices.push(new j["default"](c))}return a.prototype.vertexTransform=function(){throw new Error(h["default"]("vertexTransform").message)},a.prototype.toPrimitive=function(){var a=function(){return"toPrimitive"};return e["default"]("elements",this.elements,a),new d["default"](this.mode,this.elements,b(this.elements,this.vertices))},a.prototype.toVertexArrays=function(a){return i["default"](this.toPrimitive(),a)},a}(),a("default",l)}}}),System.register("davinci-eight/geometries/primitives/numVerticesForGrid.js",["../../checks/mustBeInteger"],function(a){function b(a,b){return c["default"]("uSegments",a),c["default"]("vSegments",b),(a+1)*(b+1)}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/geometries/primitives/GridPrimitive.js",["./GeometryPrimitive","./numPostsForFence","./numVerticesForGrid","../../i18n/notSupported","../../i18n/readOnly"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function b(b,c,e){a.call(this,b,d["default"](c,e),2),this._uClosed=!1,this._vClosed=!1,this._uSegments=c,this._vSegments=e}return h(b,a),Object.defineProperty(b.prototype,"uSegments",{get:function(){return this._uSegments},set:function(){throw new Error(f["default"]("uSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"uLength",{get:function(){return c["default"](this._uSegments,this._uClosed)},set:function(){throw new Error(f["default"]("uLength").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"vSegments",{get:function(){return this._vSegments},set:function(){throw new Error(f["default"]("vSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"vLength",{get:function(){return c["default"](this._vSegments,this._vClosed)},set:function(){throw new Error(f["default"]("vLength").message)},enumerable:!0,configurable:!0}),b.prototype.vertexTransform=function(a){for(var b=this.vertices.length,c=0;b>c;c++){var d=this.vertices[c],e=d.coords.getComponent(0),f=d.coords.getComponent(1);a.exec(d,e,f,this.uLength,this.vLength)}},b.prototype.vertex=function(){throw new Error(e["default"]("vertex").message)},b}(b["default"]),a("default",g)}}}),System.register("davinci-eight/geometries/primitives/numPostsForFence.js",["../../checks/mustBeBoolean","../../checks/mustBeGE","../../checks/mustBeInteger"],function(a){function b(a,b){return e["default"]("segmentCount",a),d["default"]("segmentCount",a,0),c["default"]("closed",b),b?a:a+1}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/geometries/primitives/GridTriangleStrip.js",["../../core/DrawMode","../../checks/isDefined","./GridPrimitive","../../checks/mustBeArray","../../checks/mustBeInteger","./numPostsForFence"],function(a){function b(a,b,c){c=d["default"](c)?f["default"]("elements",c):[];for(var e=h["default"](a,!1),g=a+e*b,i=2*e*b,j=0,k=1;i>=k;k+=2)c[j]=(k-1)/2,c[j+1]=c[j]+e,c[j+1]%e===a&&c[j+1]!==a&&c[j+1]!==g&&(c[j+2]=c[j+1],c[j+3]=(1+k)/2,j+=2),j+=2;return c}var c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function d(d,e){a.call(this,c["default"].TRIANGLE_STRIP,d,e),this.elements=b(d,e)}return j(d,a),d.prototype.vertex=function(a,b){return g["default"]("uIndex",a),g["default"]("vIndex",b),this.vertices[(this.vSegments-b)*this.uLength+a]},d}(e["default"]),a("default",i)}}}),System.register("davinci-eight/geometries/gridVertexArrays.js",["../core/Color","../core/DrawMode","../core/GraphicsProgramSymbols","./primitives/GridLines","./primitives/GridPoints","./primitives/GridTriangleStrip","../checks/isDefined","../checks/isFunction","../checks/mustBeNumber","../math/R3","../math/Unit","../math/Vector3"],function(a){function b(a,b){return p["default"].vector(a,b,0,q["default"].ONE)}function c(){return p["default"].e3}function d(a,b,c,d,e){switch(a){case h["default"].POINTS:return new k["default"](b,c,d,e);case h["default"].LINES:return new j["default"](b,c,d,e);case h["default"].TRIANGLE_STRIP:return new l["default"](b,d);default:throw new Error("drawMode must be POINTS, LINES or TRIANGLE_STRIP")}}function e(a,d,e,f){var h=m["default"](f.aPosition)?f.aPosition:b,j=m["default"](f.aNormal)?f.aNormal:c,k=m["default"](f.aColor)?f.aColor:void 0;n["default"](h)&&(a.attributes[i["default"].ATTRIBUTE_POSITION]=r["default"].copy(h(d,e))),n["default"](j)&&(a.attributes[i["default"].ATTRIBUTE_NORMAL]=r["default"].copy(j(d,e))),n["default"](k)&&(a.attributes[i["default"].ATTRIBUTE_COLOR]=g["default"].copy(k(d,e)))}function f(a){var b=m["default"](a.uMin)?o["default"]("uMin",a.uMin):0,c=m["default"](a.uMax)?o["default"]("uMax",a.uMax):1,f=m["default"](a.uSegments)?a.uSegments:1,g=m["default"](a.vMin)?o["default"]("vMin",a.vMin):0,i=m["default"](a.vMax)?o["default"]("vMax",a.vMax):1,j=m["default"](a.vSegments)?a.vSegments:1,k=m["default"](a.drawMode)?a.drawMode:h["default"].LINES,l=d(k,f,!1,j,!1),n=l.uLength,p=l.vLength;if(f>0)if(j>0)for(var q=0;n>q;q++)for(var r=0;p>r;r++){var s=l.vertex(q,r),t=b+(c-b)*q/f,u=g+(i-g)*r/j;e(s,t,u,a)}else for(var q=0;n>q;q++){var s=l.vertex(q,0),t=b+(c-b)*q/f,u=(g+i)/2;e(s,t,u,a)}else if(j>0)for(var r=0;p>r;r++){var s=l.vertex(0,r),t=(b+c)/2,u=g+(i-g)*r/j;e(s,t,u,a)}else{var s=l.vertex(0,0),t=(b+c)/2,u=(g+i)/2;e(s,t,u,a)}var v=l.toVertexArrays();return v}var g,h,i,j,k,l,m,n,o,p,q,r;return a("default",f),{setters:[function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a}],execute:function(){}}}),System.register("davinci-eight/geometries/GridGeometry.js",["../core/GeometryElements","./gridVertexArrays","../base/incLevel"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b){void 0===b&&(b={}),a.call(this,c["default"](b),b.engine),this.setLoggingName("GridGeometry")}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,d["default"](b))},b}(b["default"]),a("default",e)}}}),System.register("davinci-eight/materials/LineMaterial.js",["../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../base/incLevel","../checks/isDefined","../checks/isNull","../checks/isUndefined","./MaterialBase","../checks/mustBeObject"],function(a){function b(a){i["default"](a)||j["default"](a)?(a={attributes:{},uniforms:{}},a.attributes[f["default"].ATTRIBUTE_POSITION]=3,a.uniforms[f["default"].UNIFORM_COLOR]="vec3",a.uniforms[f["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[f["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[f["default"].UNIFORM_VIEW_MATRIX]="mat4"):l["default"]("options",a);for(var b=h["default"](a.attributes)?a.attributes:{},c=h["default"](a.uniforms)?a.uniforms:{},d=new e["default"],g=Object.keys(b),k=0;k<g.length;k++){var m=g[k],n=b[m];d.attribute(m,n)}for(var o=Object.keys(c),p=0;p<o.length;p++){var q=o[p],r=c[q];d.uniform(q,r)}return d}function c(a){return b(a).vertexShaderSrc()}function d(a){return b(a).fragmentShaderSrc()}var e,f,g,h,i,j,k,l,m,n=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=function(a){function b(b,e){a.call(this,c(b),d(b),[],e),this.setLoggingName("LineMaterial")}return n(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,g["default"](b))},b}(k["default"]),a("default",m)}}}),System.register("davinci-eight/materials/PointMaterial.js",["../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../checks/isDefined","../checks/isNull","../checks/isUndefined","./MaterialBase","../checks/mustBeObject"],function(a){function b(a){h["default"](a)||i["default"](a)?(a={attributes:{},uniforms:{}},a.attributes[f["default"].ATTRIBUTE_POSITION]=3,a.uniforms[f["default"].UNIFORM_COLOR]="vec3",a.uniforms[f["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[f["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[f["default"].UNIFORM_VIEW_MATRIX]="mat4",a.uniforms[f["default"].UNIFORM_POINT_SIZE]="float"):k["default"]("options",a);for(var b=g["default"](a.attributes)?a.attributes:{},c=g["default"](a.uniforms)?a.uniforms:{},d=new e["default"],j=Object.keys(b),l=0;l<j.length;l++){var m=j[l],n=b[m];d.attribute(m,n)}for(var o=Object.keys(c),p=0;p<o.length;p++){var q=o[p],r=c[q];d.uniform(q,r)}return d}function c(a){return b(a).vertexShaderSrc()}function d(a){return b(a).fragmentShaderSrc()}var e,f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(a){function b(b,e){a.call(this,c(b),d(b),[],e),this.setLoggingName("PointMaterial")}return m(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(j["default"]),a("default",l)}}}),System.register("davinci-eight/visual/Grid.js",["../core/DrawMode","../core/GraphicsProgramSymbols","../geometries/GridGeometry","../base/incLevel","../checks/isDefined","../checks/isFunction","../checks/isNull","../checks/isUndefined","../materials/LineMaterial","../core/Mesh","../materials/MeshMaterial","../checks/mustBeGE","../checks/mustBeNumber","../materials/PointMaterial","../math/R3","../math/Unit"],function(a){function b(a,b){return x["default"].vector(a,b,0,y["default"].ONE)}function c(){return x["default"].e3}function d(a){return o["default"](a)||p["default"](a)}function e(a){return o["default"](a)||q["default"](a)}function f(a,e){if(d(a.aPosition))e.aPosition=a.aPosition;else{if(!q["default"](a.aPosition))throw new Error("aPosition must be one of function, null, or undefined.");e.aPosition=b}if(d(a.aNormal))e.aNormal=a.aNormal;else{if(!q["default"](a.aNormal))throw new Error("aNormal must be one of function, null, or undefined.");e.aNormal=c}if(d(a.aColor))e.aColor=a.aColor;else if(!q["default"](a.aColor))throw new Error("aColor must be one of function, null, or undefined.");e.uMax=n["default"](a.uMax)?v["default"]("uMax",a.uMax):.5,e.uMin=n["default"](a.uMin)?v["default"]("uMin",a.uMin):-.5,e.uSegments=n["default"](a.uSegments)?u["default"]("uSegments",a.uSegments,0):1,e.vMax=n["default"](a.vMax)?v["default"]("vMax",a.vMax):.5,e.vMin=n["default"](a.vMin)?v["default"]("vMin",a.vMin):-.5,e.vSegments=n["default"](a.vSegments)?u["default"]("vSegments",a.vSegments,0):1}function g(a,b){var c={};f(a,c),c.drawMode=j["default"].POINTS;var d=new l["default"](c);b.geometry=d,d.release();var g={attributes:{},uniforms:{}};if(e(a.aPosition))g.attributes[k["default"].ATTRIBUTE_POSITION]=3;else if(!p["default"](a.aPosition))throw new Error;o["default"](a.aColor)?g.attributes[k["default"].ATTRIBUTE_COLOR]=3:g.uniforms[k["default"].UNIFORM_COLOR]="vec3",g.uniforms[k["default"].UNIFORM_MODEL_MATRIX]="mat4",g.uniforms[k["default"].UNIFORM_PROJECTION_MATRIX]="mat4",g.uniforms[k["default"].UNIFORM_VIEW_MATRIX]="mat4",g.uniforms[k["default"].UNIFORM_POINT_SIZE]="float";var h=new w["default"](g,a.engine);b.material=h,h.release()}function h(a,b){var c={};f(a,c),c.drawMode=j["default"].LINES;var d=new l["default"](c);b.geometry=d,d.release();var g={attributes:{},uniforms:{}};if(e(a.aPosition))g.attributes[k["default"].ATTRIBUTE_POSITION]=3;else if(!p["default"](a.aPosition))throw new Error;o["default"](a.aNormal)&&(g.attributes[k["default"].ATTRIBUTE_NORMAL]=3),o["default"](a.aColor)?g.attributes[k["default"].ATTRIBUTE_COLOR]=3:g.uniforms[k["default"].UNIFORM_COLOR]="vec3",g.uniforms[k["default"].UNIFORM_MODEL_MATRIX]="mat4",g.uniforms[k["default"].UNIFORM_PROJECTION_MATRIX]="mat4",g.uniforms[k["default"].UNIFORM_VIEW_MATRIX]="mat4";var h=new r["default"](g,a.engine);b.material=h,h.release()}function i(a,b){var c={};f(a,c),c.drawMode=j["default"].TRIANGLE_STRIP;var d=new l["default"](c);b.geometry=d,d.release();var g={attributes:{},uniforms:{}};if(e(a.aPosition))g.attributes[k["default"].ATTRIBUTE_POSITION]=3;else if(!p["default"](a.aPosition))throw new Error;if(e(a.aNormal))g.attributes[k["default"].ATTRIBUTE_NORMAL]=3,g.uniforms[k["default"].UNIFORM_NORMAL_MATRIX]="mat3",g.uniforms[k["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]="vec3",g.uniforms[k["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]="vec3";else if(!p["default"](a.aNormal))throw new Error;if(o["default"](a.aColor))g.attributes[k["default"].ATTRIBUTE_COLOR]=3;else if(p["default"](a.aColor))g.uniforms[k["default"].UNIFORM_COLOR]="vec3";else{if(!q["default"](a.aColor))throw new Error;g.uniforms[k["default"].UNIFORM_COLOR]="vec3"}g.uniforms[k["default"].UNIFORM_MODEL_MATRIX]="mat4",g.uniforms[k["default"].UNIFORM_PROJECTION_MATRIX]="mat4",g.uniforms[k["default"].UNIFORM_VIEW_MATRIX]="mat4",g.uniforms[k["default"].UNIFORM_AMBIENT_LIGHT]="vec3";var h=new t["default"](g,a.engine);b.material=h,h.release()}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a}],execute:function(){z=function(a){function b(b){void 0===b&&(b={}),a.call(this,void 0,void 0,null),this.setLoggingName("Grid");var c=n["default"](b.drawMode)?b.drawMode:j["default"].LINES;switch(c){case j["default"].POINTS:g(b,this);break;case j["default"].LINES:case j["default"].LINE_STRIP:h(b,this);break;case j["default"].TRIANGLE_STRIP:case j["default"].TRIANGLES:i(b,this);break;default:throw new Error("'"+c+"' is not a valid option for drawMode.")}}return A(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,m["default"](b))},b}(s["default"]),a("default",z)}}}),System.register("davinci-eight/facets/ColorFacet.js",["../core/Color","../checks/mustBeNumber","../core/GraphicsProgramSymbols"],function(a){function b(a){if("string"!=typeof a){var b="ColorFacet property 'name' must be a string.";throw new TypeError(b)}switch(a){case i.PROP_RGB:return;default:var b="ColorFacet property 'name' must be one of "+[i.PROP_RGB,i.PROP_RED,i.PROP_GREEN,i.PROP_BLUE]+".";throw new Error(b)}}var c,d,e,f,g,h,i;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=0,g=1,h=2,i=function(){function a(){this.color=c["default"].fromRGB(1,1,1),this.uColorName=e["default"].UNIFORM_COLOR}return Object.defineProperty(a.prototype,"r",{get:function(){return this.color.r},set:function(a){d["default"]("red",a),this.color.r=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"g",{get:function(){return this.color.g},set:function(a){d["default"]("green",a),this.color.g=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.color.b},set:function(a){d["default"]("blue",a),this.color.b=a},enumerable:!0,configurable:!0}),a.prototype.scaleRGB=function(a){return this.r*=a,this.g*=a,this.b*=a,this},a.prototype.setRGB=function(a,b,c){return this.r=a,this.g=b,this.b=c,this},a.prototype.getProperty=function(c){switch(b(c),c){case a.PROP_RGB:return[this.r,this.g,this.b];case a.PROP_RED:return[this.r];case a.PROP_GREEN:return[this.g];default:return void 0}},a.prototype.setProperty=function(c,d){switch(b(c),c){case a.PROP_RGB:this.r=d[f],this.g=d[g],this.b=d[h];break;case a.PROP_RED:this.r=d[f]}return this},a.prototype.setUniforms=function(a){var b=this.uColorName;if(b){var c=this.color;a.uniform3f(b,c.r,c.g,c.b)}},a.PROP_RGB="rgb",a.PROP_RED="r",a.PROP_GREEN="g",a.PROP_BLUE="b",a}(),a("default",i)}}}),System.register("davinci-eight/core/Drawable.js",["../checks/isDefined","../checks/mustBeBoolean","../core/ShareableContextConsumer"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(c,d,e){a.call(this,e),this._visible=!0,this.setLoggingName("Drawable"),b["default"](c)&&(c.addRef(),this.geometry=c),b["default"](d)&&(d.addRef(),this.material=d),this._facets={}}return f(d,a),d.prototype.destructor=function(b){this._geometry&&(this._geometry.release(),this._geometry=void 0),this._material&&(this._material.release(),this._material=void 0),a.prototype.destructor.call(this,b+1)},Object.defineProperty(d.prototype,"fragmentShaderSrc",{get:function(){return this._material?this._material.fragmentShaderSrc:void 0},set:function(a){if(!this._material)throw new Error("Unable to set fragmentShaderSrc because "+this._type+".material is not defined.");this._material.fragmentShaderSrc=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"vertexShaderSrc",{get:function(){return this._material?this._material.vertexShaderSrc:void 0},set:function(a){var b=this._material;if(!b)throw new Error("Unableto  set vertexShaderSrc because "+this._type+".material is not defined.");b.vertexShaderSrc=a},enumerable:!0,configurable:!0}),d.prototype.setUniforms=function(){for(var a=this._material,b=this._facets,c=Object.keys(b),d=c.length,e=0;d>e;e++){var f=c[e],g=b[f];g.setUniforms(a)}},d.prototype.draw=function(a){if(this._visible){var b=this._material;b.use();for(var c=a.length,d=0;c>d;d++){var e=a[d];e.setUniforms(b)}this.setUniforms(),this._geometry.draw(b)}},d.prototype.contextFree=function(b){this._geometry.contextFree(b),this._material.contextFree(b),a.prototype.contextFree.call(this,b)},d.prototype.contextGain=function(b){this._geometry.contextGain(b),this._material.contextGain(b),a.prototype.contextGain.call(this,b)},d.prototype.contextLost=function(){this._geometry.contextLost(),this._material.contextLost(),a.prototype.contextLost.call(this)},d.prototype.getFacet=function(a){return this._facets[a]},d.prototype.setFacet=function(a,b){this._facets[a]=b},Object.defineProperty(d.prototype,"geometry",{get:function(){return this._geometry?(this._geometry.addRef(),this._geometry):void 0},set:function(a){this._geometry&&(this._geometry.release(),this._geometry=void 0),a&&(a.addRef(),this._geometry=a,this.contextProvider&&this._geometry.contextGain(this.contextProvider))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"material",{get:function(){return this._material?(this._material.addRef(),this._material):void 0},set:function(a){this._material&&(this._material.release(),this._material=void 0),a&&(a.addRef(),this._material=a,this.contextProvider&&this._material.contextGain(this.contextProvider))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"visible",{get:function(){return this._visible},set:function(a){var b=this;c["default"]("visible",a,function(){return b._type}),this._visible=a},enumerable:!0,configurable:!0}),d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/facets/ModelE3.js",["../math/Geometric3","../math/Vector3","../math/Spinor3"],function(a){var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){"use strict";e=function(){function a(){this._position=b["default"].zero(),this._attitude=b["default"].one(),this._posCache=c["default"].zero(),this._attCache=d["default"].one(),this._position.modified=!0,this._attitude.modified=!0}return Object.defineProperty(a.prototype,"attitude",{get:function(){return this._attitude},set:function(a){this._attitude.copySpinor(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this._position},set:function(a){this._position.copyVector(a)},enumerable:!0,configurable:!0}),a.prototype.getProperty=function(b){switch(b){case a.PROP_ATTITUDE:return this._attCache.copy(this._attitude).coords;case a.PROP_POSITION:return this._posCache.copy(this._position).coords;default:return void console.warn("ModelE3.getProperty "+b)}},a.prototype.setProperty=function(b,c){switch(b){case a.PROP_ATTITUDE:this._attCache.coords=c,this._attitude.copySpinor(this._attCache);break;case a.PROP_POSITION:this._posCache.coords=c,this._position.copyVector(this._posCache);break;default:console.warn("ModelE3.setProperty "+b)}return this},a.PROP_ATTITUDE="R",a.PROP_POSITION="X",a}(),a("default",e)}}}),System.register("davinci-eight/facets/ModelFacet.js",["../math/Matrix3","../math/Matrix4","./ModelE3","../checks/mustBeArray","../checks/mustBeObject","../checks/mustBeString","../i18n/readOnly","../core/GraphicsProgramSymbols"],function(a){var b,c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function d(){a.call(this),this.matS=c["default"].one(),this._matM=c["default"].one(),this._matN=b["default"].one(),this.matR=c["default"].one(),this.matT=c["default"].one(),this.position.modified=!0,this.attitude.modified=!0,this.matS.modified=!0}return k(d,a),Object.defineProperty(d.prototype,"stress",{get:function(){return this.matS},set:function(a){f["default"]("stress",a),this.matS.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"matrix",{get:function(){return this._matM},set:function(){throw new Error(h["default"]("matrix").message)},enumerable:!0,configurable:!0}),d.prototype.setUniforms=function(a){this.updateMatrices(),a.mat4(i["default"].UNIFORM_MODEL_MATRIX,this._matM,!1),a.mat3(i["default"].UNIFORM_NORMAL_MATRIX,this._matN,!1)},d.prototype.updateMatrices=function(){var a=!1;this.position.modified&&(this.matT.translation(this.position),this.position.modified=!1,a=!0),this.attitude.modified&&(this.matR.rotation(this.attitude),this.attitude.modified=!1,a=!0),this.matS.modified&&(a=!0),a&&(this._matM.copy(this.matT).mul(this.matR).mul(this.matS),0!==this._matM.det()?this._matN.normalFromMatrix4(this._matM):this._matN.one())},d.prototype.setProperty=function(b,c){return g["default"]("name",b),e["default"]("data",c),a.prototype.setProperty.call(this,b,c),this},d}(d["default"]),a("default",j)}}}),System.register("davinci-eight/facets/PointSizeFacet.js",["../checks/mustBeArray","../checks/mustBeInteger","../checks/mustBeString","../core/GraphicsProgramSymbols"],function(a){function b(){return g}var c,d,e,f,g,h;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g="PointSizeFacet",h=function(){function a(a){void 0===a&&(a=2),this.pointSize=d["default"]("pointSize",a)}return a.prototype.getProperty=function(){return void 0},a.prototype.setProperty=function(a,d){return e["default"]("name",a,b),c["default"]("value",d,b),this},a.prototype.setUniforms=function(a){a.uniform1f(f["default"].UNIFORM_POINT_SIZE,this.pointSize)},a}(),a("default",h)}}}),System.register("davinci-eight/core/Mesh.js",["../facets/ColorFacet","./Drawable","../base/incLevel","../facets/ModelFacet","../facets/PointSizeFacet","../i18n/notSupported","../i18n/readOnly"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i="color",j="model",k="point",l=function(a){function c(c,d,g){a.call(this,c,d,g),this.setLoggingName("Mesh");var h=new e["default"];this.setFacet(j,h);var l=new b["default"];this.setFacet(i,l);var m=new f["default"];this.setFacet(k,m)}return m(c,a),c.prototype.destructor=function(b){a.prototype.destructor.call(this,d["default"](b))},Object.defineProperty(c.prototype,"attitude",{get:function(){var a=this.getFacet(j);if(a)return a.attitude;throw new Error(g["default"]("attitude").message)},set:function(a){this.setAttitude(a)},enumerable:!0,configurable:!0}),c.prototype.getAttitude=function(){return this.attitude},c.prototype.setAttitude=function(a){var b=this.getFacet(j);if(!b)throw new Error(g["default"]("attitude").message);b.attitude.copySpinor(a)},Object.defineProperty(c.prototype,"color",{get:function(){var a=this.getFacet(i);if(a)return a.color;throw new Error(g["default"]("color").message)},set:function(a){var b=this.getFacet(i);if(!b)throw new Error(g["default"]("color").message);b.color.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"matrix",{get:function(){return this.getFacet(j).matrix},set:function(){throw new Error(h["default"]("matrix").message)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"position",{get:function(){var a=this.getFacet(j);if(a)return a.position;throw new Error(g["default"]("position").message)},set:function(a){this.setPosition(a)},enumerable:!0,configurable:!0}),c.prototype.getPosition=function(){return this.position},c.prototype.setPosition=function(a){var b=this.getFacet(j);if(!b)throw new Error(g["default"]("position").message);b.position.copyVector(a)},Object.defineProperty(c.prototype,"stress",{get:function(){var a=this.getFacet(j);if(a)return a.stress;throw new Error(g["default"]("stress").message)},set:function(a){var b=this.getFacet(j);if(!b)throw new Error(g["default"]("stress").message);b.stress.copy(a)},enumerable:!0,configurable:!0}),c.prototype.getPrincipalScale=function(a){var b=this.geometry;if(b){var c=b.getPrincipalScale(a);return b.release(),c}throw new Error("getPrincipalScale('"+a+"') is not available because geometry is not defined.")},c.prototype.setPrincipalScale=function(a,b){var c=this.geometry;c.setPrincipalScale(a,b);var d=c.scaling;this.stress.copy(d),c.release()},c}(c["default"]),a("default",l)}}}),System.register("davinci-eight/materials/glslAttribType.js",["../core/GraphicsProgramSymbols","../checks/mustBeInteger","../checks/mustBeString"],function(a){function b(a){switch(e["default"]("size",a),a){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Can't compute the GLSL attribute type from size "+a);

}}function c(a,c){switch(f["default"]("key",a),e["default"]("size",c),a){case d["default"].ATTRIBUTE_COLOR:return"vec3";default:return b(c)}}var d,e,f;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/materials/SmartGraphicsProgram.js",["./fragmentShaderSrc","./MaterialBase","./vertexShaderSrc"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function c(c,e,f,g,h){a.call(this,d["default"](c,e,f,g),b["default"](c,e,f,g),[],h),this.setLoggingName("SmartGraphicsProgram")}return f(c,a),c.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},c}(c["default"]),a("default",e)}}}),System.register("davinci-eight/materials/vColorRequired.js",["../core/GraphicsProgramSymbols"],function(a){function b(a,b){return!!a[c["default"].ATTRIBUTE_COLOR]||!!b[c["default"].UNIFORM_COLOR]}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/materials/vLightRequired.js",["../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a){function b(a,b){return c["default"]("attributes",a),c["default"]("uniforms",b),!!b[d["default"].UNIFORM_AMBIENT_LIGHT]||!!b[d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&!!b[d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/materials/fragmentShaderSrc.js",["../config","../checks/mustBeBoolean","../checks/mustBeDefined"],function(a){function b(a,b,g,h){e["default"]("attributes",a),e["default"]("uniforms",b),d["default"]("vColor",g),d["default"]("vLight",h);var i=[];i.push("// fragment shader generated by "+c["default"].NAMESPACE+" "+c["default"].VERSION),f&&(i.push("#ifdef GL_ES"),i.push("#  ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("#  else"),i.push("precision mediump float;"),i.push("#  endif"),i.push("#endif")),g&&i.push("varying highp vec4 vColor;"),h&&i.push("varying highp vec3 vLight;"),i.push("void main(void) {"),i.push(h?g?"  gl_FragColor = vec4(vColor.xyz * vLight, vColor.a);":"  gl_FragColor = vec4(vLight, 1.0);":g?"  gl_FragColor = vColor;":"  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);"),i.push("}"),i.push("");var j=i.join("\n");return j}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=!1}}}),System.register("davinci-eight/core/getAttribVarName.js",["../checks/isDefined","../checks/mustBeObject","../checks/mustBeString"],function(a){function b(a,b){return d["default"]("attribute",a),e["default"]("varName",b),c["default"](a.name)?e["default"]("attribute.name",a.name):b}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/core/getUniformVarName.js",["../checks/isDefined","../checks/expectArg"],function(a){function b(a,b){return d["default"]("uniform",a).toBeObject(),d["default"]("varName",b).toBeString(),c["default"](a.name)?d["default"]("uniform.name",a.name).toBeString().value:b}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/materials/vertexShaderSrc.js",["../config","../core/getAttribVarName","../core/getUniformVarName","../checks/mustBeBoolean","../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a){function b(a,b){return f["default"](a[b],b)}function c(a,c,f,t){h["default"]("attributes",a),h["default"]("uniforms",c),g["default"]("vColor",f),g["default"]("vLight",t);var u=[];u.push("// vertex shader generated by "+d["default"].NAMESPACE+" "+d["default"].VERSION);for(var v in a)a.hasOwnProperty(v)&&u.push(k+a[v].glslType+j+e["default"](a[v],v)+n);for(var w in c)c.hasOwnProperty(w)&&u.push(l+c[w].glslType+j+b(c,w)+n);f&&u.push("varying highp vec4 vColor;"),t&&u.push("varying highp vec3 vLight;"),u.push("void main(void) {");var x=[];if(x.unshift(n),a[i["default"].ATTRIBUTE_POSITION])switch(a[i["default"].ATTRIBUTE_POSITION].glslType){case"float":x.unshift(p),x.unshift("1.0"),x.unshift(m),x.unshift("0.0"),x.unshift(m),x.unshift("0.0"),x.unshift(m),x.unshift(e["default"](a[i["default"].ATTRIBUTE_POSITION],i["default"].ATTRIBUTE_POSITION)),x.unshift(o),x.unshift("vec4");break;case"vec2":x.unshift(p),x.unshift("1.0"),x.unshift(m),x.unshift("0.0"),x.unshift(m),x.unshift(e["default"](a[i["default"].ATTRIBUTE_POSITION],i["default"].ATTRIBUTE_POSITION)),x.unshift(o),x.unshift("vec4");break;case"vec3":x.unshift(p),x.unshift("1.0"),x.unshift(m),x.unshift(e["default"](a[i["default"].ATTRIBUTE_POSITION],i["default"].ATTRIBUTE_POSITION)),x.unshift(o),x.unshift("vec4");break;case"vec4":x.unshift(e["default"](a[i["default"].ATTRIBUTE_POSITION],i["default"].ATTRIBUTE_POSITION))}else x.unshift("vec4(0.0, 0.0, 0.0, 1.0)");if(c[i["default"].UNIFORM_REFLECTION_ONE_MATRIX]&&(x.unshift(q),x.unshift(b(c,i["default"].UNIFORM_REFLECTION_ONE_MATRIX))),c[i["default"].UNIFORM_REFLECTION_TWO_MATRIX]&&(x.unshift(q),x.unshift(b(c,i["default"].UNIFORM_REFLECTION_TWO_MATRIX))),c[i["default"].UNIFORM_MODEL_MATRIX]&&(x.unshift(q),x.unshift(b(c,i["default"].UNIFORM_MODEL_MATRIX))),c[i["default"].UNIFORM_VIEW_MATRIX]&&(x.unshift(q),x.unshift(b(c,i["default"].UNIFORM_VIEW_MATRIX))),c[i["default"].UNIFORM_PROJECTION_MATRIX]&&(x.unshift(q),x.unshift(b(c,i["default"].UNIFORM_PROJECTION_MATRIX))),x.unshift(r),x.unshift("gl_Position"),x.unshift("  "),u.push(x.join("")),c[i["default"].UNIFORM_POINT_SIZE]&&u.push("  gl_PointSize = "+b(c,i["default"].UNIFORM_POINT_SIZE)+";"),f)if(a[i["default"].ATTRIBUTE_COLOR]){var y=e["default"](a[i["default"].ATTRIBUTE_COLOR],i["default"].ATTRIBUTE_COLOR);switch(a[i["default"].ATTRIBUTE_COLOR].glslType){case"vec4":u.push("  vColor = "+y+n);break;case"vec3":u.push("  vColor = vec4("+y+", 1.0);");break;default:throw new Error("Unexpected type for color attribute: "+a[i["default"].ATTRIBUTE_COLOR].glslType)}}else if(c[i["default"].UNIFORM_COLOR]){var z=b(c,i["default"].UNIFORM_COLOR);switch(c[i["default"].UNIFORM_COLOR].glslType){case"vec4":u.push("  vColor = "+z+n);break;case"vec3":u.push("  vColor = vec4("+z+", 1.0);");break;default:throw new Error("Unexpected type for color uniform: "+c[i["default"].UNIFORM_COLOR].glslType)}}else u.push("  vColor = vec4(1.0, 1.0, 1.0, 1.0);");t&&(c[i["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&c[i["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]&&c[i["default"].UNIFORM_NORMAL_MATRIX]&&a[i["default"].ATTRIBUTE_NORMAL]?(u.push("  vec3 L = normalize("+b(c,i["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION)+");"),u.push("  vec3 N = normalize("+b(c,i["default"].UNIFORM_NORMAL_MATRIX)+" * "+e["default"](a[i["default"].ATTRIBUTE_NORMAL],i["default"].ATTRIBUTE_NORMAL)+");"),u.push("  // The minus sign arises because L is the light direction, so we need dot(N, -L) = -dot(N, L)"),u.push("  float "+s+" = max(-dot(N, L), 0.0);"),u.push(c[i["default"].UNIFORM_AMBIENT_LIGHT]?"  vLight = "+b(c,i["default"].UNIFORM_AMBIENT_LIGHT)+" + "+s+" * "+b(c,i["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";":"  vLight = "+s+" * "+b(c,i["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";")):u.push(c[i["default"].UNIFORM_AMBIENT_LIGHT]?"  vLight = "+b(c,i["default"].UNIFORM_AMBIENT_LIGHT)+";":"  vLight = vec3(1.0, 1.0, 1.0);")),u.push("}"),u.push("");var A=u.join("\n");return A}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=" ",k="attribute"+j,l="uniform"+j,m=","+j,n=";",o="(",p=")",q=j+"*"+j,r=j+"="+j,s="directionalLightCosineFactor"}}}),System.register("davinci-eight/materials/GraphicsProgramBuilder.js",["../core/getAttribVarName","./glslAttribType","../checks/mustBeInteger","../checks/mustBeString","../materials/SmartGraphicsProgram","./vColorRequired","./vLightRequired","./fragmentShaderSrc","./vertexShaderSrc"],function(a){function b(a){for(var b={},f=Object.keys(a),g=f.length,h=0;g>h;h++){var i=f[h],j=a[i],k=e["default"]("size",j.size),l=c["default"](j,i);b[l]={glslType:d["default"](i,k)}}return b}var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(){function a(a){if(this.aMeta={},this.uParams={},a)for(var b=a.attributes,c=Object.keys(b),d=0,e=c.length;e>d;d++){var f=c[d],g=b[f];this.attribute(f,g.size)}}return a.prototype.attribute=function(a,b){return f["default"]("name",a),e["default"]("size",b),this.aMeta[a]={size:b},this},a.prototype.uniform=function(a,b){return f["default"]("name",a),f["default"]("type",b),this.uParams[a]={glslType:b},this},a.prototype.build=function(a){var c=b(this.aMeta),d=h["default"](c,this.uParams),e=i["default"](c,this.uParams);return new g["default"](c,this.uParams,d,e,a)},a.prototype.vertexShaderSrc=function(){var a=b(this.aMeta),c=h["default"](a,this.uParams),d=i["default"](a,this.uParams);return k["default"](a,this.uParams,c,d)},a.prototype.fragmentShaderSrc=function(){var a=b(this.aMeta),c=h["default"](a,this.uParams),d=i["default"](a,this.uParams);return j["default"](a,this.uParams,c,d)},a}(),a("default",l)}}}),System.register("davinci-eight/core/AttribLocation.js",["../i18n/readOnly"],function(a){var b,c;return{setters:[function(a){b=a}],execute:function(){c=function(){function a(a){this._name=a.name}return Object.defineProperty(a.prototype,"index",{get:function(){return this._index},set:function(){throw new Error(b["default"]("index").message)},enumerable:!0,configurable:!0}),a.prototype.contextFree=function(){this._index=void 0,this._gl=void 0},a.prototype.contextGain=function(a,b){this._index=a.getAttribLocation(b,this._name),this._gl=a},a.prototype.contextLost=function(){this._index=void 0,this._gl=void 0},a.prototype.vertexPointer=function(a,b,c,d){void 0===b&&(b=!1),void 0===c&&(c=0),void 0===d&&(d=0),this._gl.vertexAttribPointer(this._index,a,this._gl.FLOAT,b,c,d)},a.prototype.enable=function(){this._gl.enableVertexAttribArray(this._index)},a.prototype.disable=function(){this._gl.disableVertexAttribArray(this._index)},a.prototype.toString=function(){return["attribute",this._name].join(" ")},a}(),a("default",c)}}}),System.register("davinci-eight/core/makeWebGLShader.js",["../config","./ErrorMode"],function(a){function b(a,b){return b===a.VERTEX_SHADER?"VERTEX_SHADER":b===a.FRAGMENT_SHADER?"FRAGMENT_SHADER":"type => "+b+" shader"}function c(a,c,f){var g=a.createShader(f);a.shaderSource(g,c),a.compileShader(g);var h=a.getShaderParameter(g,a.COMPILE_STATUS);if(h)return g;if(a.isContextLost())throw new Error("Context lost while compiling "+b(a,f)+".");var i=a.getShaderInfoLog(g);switch(a.deleteShader(g),d["default"].errorMode){case e["default"].WARNME:d["default"].warn("Error compiling "+b(a,f)+". Cause: "+i+".")}throw new Error(i)}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/core/makeWebGLProgram.js",["./makeWebGLShader"],function(a){function b(a,b,d,e){var f=c["default"](a,b,a.VERTEX_SHADER),g=c["default"](a,d,a.FRAGMENT_SHADER),h=a.createProgram();a.attachShader(h,f),a.attachShader(h,g);for(var i=0;i<e.length;++i)a.bindAttribLocation(h,i,e[i]);a.linkProgram(h);var j=a.getProgramParameter(h,a.LINK_STATUS);if(j||a.isContextLost())return h;var k=a.getProgramInfoLog(h);throw a.detachShader(h,f),a.deleteShader(f),a.detachShader(h,g),a.deleteShader(g),a.deleteProgram(h),new Error("Error linking program: "+k)}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/core/UniformLocation.js",["../config","../core/ErrorMode","../checks/isNull","../checks/mustBeObject"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a){if(d["default"](a)){var f="UniformLocation constructor called with null info: WebGLActiveInfo.";switch(b["default"].errorMode){case c["default"].IGNORE:this.name=null;break;case c["default"].WARNME:console.warn(f),this.name=null;break;default:throw new Error(f)}}else e["default"]("info",a),this.name=a.name}return a.prototype.contextFree=function(){this.contextLost()},a.prototype.contextGain=function(a,b){this.contextLost(),this.gl=a,this.location=d["default"](this.name)?null:a.getUniformLocation(b,this.name)},a.prototype.contextLost=function(){this.gl=void 0,this.location=void 0},a.prototype.uniform1f=function(a){this.gl.uniform1f(this.location,a)},a.prototype.uniform2f=function(a,b){this.gl.uniform2f(this.location,a,b)},a.prototype.uniform3f=function(a,b,c){this.gl.uniform3f(this.location,a,b,c)},a.prototype.uniform4f=function(a,b,c,d){this.gl.uniform4f(this.location,a,b,c,d)},a.prototype.matrix2fv=function(a,b){this.gl.uniformMatrix2fv(this.location,a,b)},a.prototype.matrix3fv=function(a,b){this.gl.uniformMatrix3fv(this.location,a,b)},a.prototype.matrix4fv=function(a,b){this.gl.uniformMatrix4fv(this.location,a,b)},a.prototype.uniform1fv=function(a){this.gl.uniform1fv(this.location,a)},a.prototype.uniform2fv=function(a){this.gl.uniform2fv(this.location,a)},a.prototype.uniform3fv=function(a){this.gl.uniform3fv(this.location,a)},a.prototype.uniform4fv=function(a){this.gl.uniform4fv(this.location,a)},a.prototype.toString=function(){return["uniform",this.name].join(" ")},a}(),a("default",f)}}}),System.register("davinci-eight/materials/MaterialBase.js",["../core/AttribLocation","../config","../base/incLevel","../checks/isDefined","../checks/isString","../checks/isNull","../core/makeWebGLProgram","../core/ErrorMode","../checks/mustBeArray","../checks/mustBeString","../checks/mustBeUndefined","../i18n/readOnly","../core/ShareableContextConsumer","../core/UniformLocation"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p=function(a){function n(b,c,d,f){a.call(this,f),this._attributes={},this._uniforms={},this.setLoggingName("MaterialBase"),e["default"](b)&&!g["default"](b)&&(this._vertexShaderSrc=k["default"]("vertexShaderSrc",b)),e["default"](c)&&!g["default"](c)&&(this._fragmentShaderSrc=k["default"]("fragmentShaderSrc",c)),this._attribs=j["default"]("attribs",d)}return q(n,a),n.prototype.destructor=function(b){0===b&&this.cleanUp(),l["default"](this._type,this._program),a.prototype.destructor.call(this,d["default"](b))},n.prototype.contextGain=function(c){var d=c.gl;if(!this._program&&f["default"](this._vertexShaderSrc)&&f["default"](this._fragmentShaderSrc)){this._program=h["default"](d,this._vertexShaderSrc,this._fragmentShaderSrc,this._attribs),this._attributes={},this._uniforms={};for(var e=d.getProgramParameter(this._program,d.ACTIVE_ATTRIBUTES),g=0;e>g;g++){var i=d.getActiveAttrib(this._program,g);this._attributes[i.name]=new b["default"](i)}for(var j=d.getProgramParameter(this._program,d.ACTIVE_UNIFORMS),k=0;j>k;k++){var l=d.getActiveUniform(this._program,k);this._uniforms[l.name]=new o["default"](l)}for(var m in this._attributes)this._attributes.hasOwnProperty(m)&&this._attributes[m].contextGain(d,this._program);for(var n in this._uniforms)this._uniforms.hasOwnProperty(n)&&this._uniforms[n].contextGain(d,this._program)}a.prototype.contextGain.call(this,c)},n.prototype.contextLost=function(){this._program=void 0;for(var b in this._attributes)this._attributes.hasOwnProperty(b)&&this._attributes[b].contextLost();for(var c in this._uniforms)this._uniforms.hasOwnProperty(c)&&this._uniforms[c].contextLost();a.prototype.contextLost.call(this)},n.prototype.contextFree=function(b){if(this._program){var c=b.gl;c?c.isContextLost()||c.deleteProgram(this._program):console.warn("memory leak: WebGLProgram has not been deleted because WebGLRenderingContext is not available anymore."),this._program=void 0}for(var d in this._attributes)this._attributes.hasOwnProperty(d)&&this._attributes[d].contextFree();for(var e in this._uniforms)this._uniforms.hasOwnProperty(e)&&this._uniforms[e].contextFree();a.prototype.contextFree.call(this,b)},n.prototype.use=function(){var a=this.gl;a?a.useProgram(this._program):console.warn(this._type+".use() missing WebGL rendering context.")},Object.defineProperty(n.prototype,"vertexShaderSrc",{get:function(){return this._vertexShaderSrc},set:function(a){if(this._vertexShaderSrc=k["default"]("vertexShaderSrc",a),this.contextProvider){this.contextProvider.addRef();var b=this.contextProvider;try{this.contextFree(b),this.contextGain(b)}finally{b.release()}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fragmentShaderSrc",{get:function(){return this._fragmentShaderSrc},set:function(a){if(this._fragmentShaderSrc=k["default"]("fragmentShaderSrc",a),this.contextProvider){this.contextProvider.addRef();var b=this.contextProvider;try{this.contextFree(b),this.contextGain(b)}finally{b.release()}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"attributeNames",{get:function(){var a=this._attributes;return a?Object.keys(a):void 0},set:function(){throw new Error(m["default"]("attributeNames").message)},enumerable:!0,configurable:!0}),n.prototype.enableAttrib=function(a){var b=this._attributes[a];b&&b.enable()},n.prototype.enableAttribs=function(){var a=this._attributes;if(a)for(var b=Object.keys(a),c=0,d=b.length;d>c;c++)a[b[c]].enable()},n.prototype.disableAttrib=function(a){var b=this._attributes[a];b&&b.disable()},n.prototype.disableAttribs=function(){var a=this._attributes;if(a)for(var b=Object.keys(a),c=0,d=b.length;d>c;c++)a[b[c]].disable()},n.prototype.getAttribLocation=function(a){var b=this._attributes[a];return b?b.index:-1},n.prototype.getUniformLocation=function(a){var b=this._uniforms;if(b[a])return this._uniforms[a];var d="uniform "+a+" not found.";switch(c["default"].errorMode){case i["default"].WARNME:return console.warn(d),new o["default"](null);case i["default"].IGNORE:return new o["default"](null);default:throw new Error(d)}},n.prototype.hasUniformLocation=function(a){return e["default"](this._uniforms[a])},n.prototype.vertexPointer=function(a,b,c,d,e){var f=this._attributes[a];f.vertexPointer(b,c,d,e)},n.prototype.uniform1f=function(a,b){var c=this._uniforms[a];c&&c.uniform1f(b)},n.prototype.uniform2f=function(a,b,c){var d=this._uniforms[a];d&&d.uniform2f(b,c)},n.prototype.uniform3f=function(a,b,c,d){var e=this._uniforms[a];e&&e.uniform3f(b,c,d)},n.prototype.uniform4f=function(a,b,c,d,e){var f=this._uniforms[a];f&&f.uniform4f(b,c,d,e)},n.prototype.mat2=function(a,b,c){var d=this._uniforms[a];d&&d.matrix2fv(c,b.elements)},n.prototype.mat3=function(a,b,c){var d=this._uniforms[a];d&&d.matrix3fv(c,b.elements)},n.prototype.mat4=function(a,b,c){var d=this._uniforms[a];d&&d.matrix4fv(c,b.elements)},n.prototype.vec2=function(a,b){var c=this._uniforms[a];c&&c.uniform2f(b.x,b.y)},n.prototype.vec3=function(a,b){var c=this._uniforms[a];c&&c.uniform3f(b.x,b.y,b.z)},n.prototype.vec4=function(a,b){var c=this._uniforms[a];c&&c.uniform4f(b.x,b.y,b.z,b.w)},n.prototype.vector2fv=function(a,b){var c=this._uniforms[a];c&&c.uniform2fv(b)},n.prototype.vector3fv=function(a,b){var c=this._uniforms[a];c&&c.uniform3fv(b)},n.prototype.vector4fv=function(a,b){var c=this._uniforms[a];c&&c.uniform4fv(b)},n}(n["default"]),a("default",p)}}}),System.register("davinci-eight/materials/MeshMaterial.js",["../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../base/incLevel","../checks/isDefined","../checks/isNull","../checks/isUndefined","./MaterialBase","../checks/mustBeObject"],function(a){function b(a){j["default"](a)||i["default"](a)?(a={attributes:{},uniforms:{}},a.attributes[f["default"].ATTRIBUTE_POSITION]=3,a.attributes[f["default"].ATTRIBUTE_NORMAL]=3,a.uniforms[f["default"].UNIFORM_COLOR]="vec3",a.uniforms[f["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[f["default"].UNIFORM_NORMAL_MATRIX]="mat3",a.uniforms[f["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[f["default"].UNIFORM_VIEW_MATRIX]="mat4",a.uniforms[f["default"].UNIFORM_AMBIENT_LIGHT]="vec3",a.uniforms[f["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]="vec3",a.uniforms[f["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]="vec3"):l["default"]("options",a);for(var b=h["default"](a.attributes)?a.attributes:{},c=h["default"](a.uniforms)?a.uniforms:{},d=new e["default"],g=Object.keys(b),k=0;k<g.length;k++){var m=g[k],n=b[m];d.attribute(m,n)}for(var o=Object.keys(c),p=0;p<o.length;p++){var q=o[p],r=c[q];d.uniform(q,r)}return d}function c(a){return b(a).vertexShaderSrc()}function d(a){return b(a).fragmentShaderSrc()}var e,f,g,h,i,j,k,l,m,n=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=function(a){function b(b,e){a.call(this,c(b),d(b),[],e),this.setLoggingName("MeshMaterial")}return n(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,g["default"](b))},b}(k["default"]),a("default",m)}}}),System.register("davinci-eight/core/GeometryLeaf.js",["../config","./ErrorMode","../base/incLevel","../checks/isNumber","../i18n/notImplemented","../i18n/notSupported","../i18n/readOnly","./ShareableContextConsumer"],function(a){var b,c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function i(b){a.call(this,b),this.setLoggingName("GeometryLeaf")}return k(i,a),i.prototype.destructor=function(b){a.prototype.destructor.call(this,d["default"](b))},Object.defineProperty(i.prototype,"drawMode",{get:function(){return this._drawMode},set:function(a){this._drawMode=a,this.contextProvider&&(this.drawMode=this.contextProvider.drawModeToGL(a))},enumerable:!0,configurable:!0}),i.prototype.isLeaf=function(){return!0},Object.defineProperty(i.prototype,"partsLength",{get:function(){return 0},set:function(){throw new Error(h["default"]("partsLength").message)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaling",{get:function(){throw new Error(f["default"]("get scaling").message)},set:function(){throw new Error(f["default"]("set scaling").message)},enumerable:!0,configurable:!0}),i.prototype.addPart=function(){throw new Error(g["default"]("addPart").message)},i.prototype.contextGain=function(d){if(e["default"](this._drawMode))this.mode=d.drawModeToGL(this._drawMode);else switch(b["default"].errorMode){case c["default"].WARNME:console.warn(this._type+".drawMode must be a number.")}if(!e["default"](this._stride))switch(b["default"].errorMode){case c["default"].WARNME:console.warn(this._type+".stride must be a number.")}a.prototype.contextGain.call(this,d)},i.prototype.removePart=function(){throw new Error(g["default"]("removePart").message)},i.prototype.getPart=function(){throw new Error(g["default"]("getPart").message)},i.prototype.draw=function(){throw new Error(g["default"]("draw").message)},i.prototype.hasPrincipalScale=function(a){throw new Error(f["default"]("hasPrincipalScale("+a+")").message)},i.prototype.getPrincipalScale=function(){throw new Error(f["default"]("getPrincipalScale").message)},i.prototype.setPrincipalScale=function(){throw new Error(f["default"]("setPrincipalScale").message)},i}(i["default"]),a("default",j)}}}),System.register("davinci-eight/core/IndexBuffer.js",["../base/incLevel","../checks/mustBeObject","../checks/mustBeUndefined","./ShareableContextConsumer"],function(a){function b(a,b,c){if(a){var d=a.gl;d&&b&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b),c&&d.bufferData(d.ELEMENT_ARRAY_BUFFER,c,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null))}}var c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function f(b){a.call(this,b),this.setLoggingName("IndexBuffer"),this.synchUp()}return h(f,a),f.prototype.destructor=function(b){this.cleanUp(),e["default"](this._type,this.webGLBuffer),a.prototype.destructor.call(this,c["default"](b))},Object.defineProperty(f.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a,b(this.contextProvider,this.webGLBuffer,this._data)},enumerable:!0,configurable:!0}),f.prototype.contextFree=function(b){if(d["default"]("contextProvider",b),this.webGLBuffer){var c=b.gl;c?c.deleteBuffer(this.webGLBuffer):console.error(this._type+" must leak WebGLBuffer because WebGLRenderingContext is "+typeof c),this.webGLBuffer=void 0}a.prototype.contextFree.call(this,b)},f.prototype.contextGain=function(c){d["default"]("contextProvider",c);var e=c.gl;this.webGLBuffer||(this.webGLBuffer=e.createBuffer(),b(c,this.webGLBuffer,this._data)),a.prototype.contextGain.call(this,c)},f.prototype.contextLost=function(){this.webGLBuffer=void 0,a.prototype.contextLost.call(this)},f.prototype.bind=function(){var a=this.gl;a?a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.webGLBuffer):console.warn(this._type+".bind() ignored because no context.")},f.prototype.unbind=function(){var a=this.gl;a?a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null):console.warn(this._type+".unbind() ignored because no context.")},f}(f["default"]),a("default",g)}}}),System.register("davinci-eight/core/VertexBuffer.js",["../checks/mustBeObject","../checks/mustBeUndefined","./ShareableContextConsumer"],function(a){function b(a,b,c){if(a){var d=a.gl;d&&b&&(d.bindBuffer(d.ARRAY_BUFFER,b),c&&d.bufferData(d.ARRAY_BUFFER,c,d.STATIC_DRAW),d.bindBuffer(d.ARRAY_BUFFER,null))}}var c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function e(b){a.call(this,b),this.setLoggingName("VertexBuffer"),this.synchUp()}return g(e,a),e.prototype.destructor=function(b){this.cleanUp(),d["default"](this._type,this.webGLBuffer),a.prototype.destructor.call(this,b+1)},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a,b(this.contextProvider,this.webGLBuffer,this._data)},enumerable:!0,configurable:!0}),e.prototype.contextFree=function(b){if(c["default"]("contextProvider",b),this.webGLBuffer){var d=b.gl;d?d.deleteBuffer(this.webGLBuffer):console.error(this._type+" must leak WebGLBuffer because WebGLRenderingContext is "+typeof d),this.webGLBuffer=void 0}a.prototype.contextFree.call(this,b)},e.prototype.contextGain=function(d){c["default"]("contextProvider",d);var e=d.gl;this.webGLBuffer||(this.webGLBuffer=e.createBuffer(),b(d,this.webGLBuffer,this._data)),a.prototype.contextGain.call(this,d)},e.prototype.contextLost=function(){this.webGLBuffer=void 0,a.prototype.contextLost.call(this)},e.prototype.bind=function(){var a=this.gl;a?a.bindBuffer(a.ARRAY_BUFFER,this.webGLBuffer):console.warn(this._type+".bind() ignored because no context.")},e.prototype.unbind=function(){var a=this.gl;a?a.bindBuffer(a.ARRAY_BUFFER,null):console.warn(this._type+".unbind() ignored because no context.")},e}(e["default"]),a("default",f)}}}),System.register("davinci-eight/core/GeometryElements.js",["../config","./ErrorMode","./GeometryLeaf","../base/incLevel","./IndexBuffer","../checks/isArray","../checks/isNull","../checks/isObject","../checks/isUndefined","../checks/mustBeArray","../checks/mustBeObject","../i18n/readOnly","./VertexBuffer"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=function(a){function d(b,c){a.call(this,c),this.offset=0,this.setLoggingName("GeometryElements"),this.ibo=new f["default"](c),this.vbo=new n["default"](c),h["default"](b)||j["default"](b)?this._pointers=[]:i["default"](b)?(this.drawMode=b.drawMode,this.setIndices(b.indices),this._attributes=b.attributes,this._stride=b.stride,h["default"](b.pointers)||j["default"](b.pointers)?this._pointers=[]:g["default"](b.pointers)?this._pointers=b.pointers:k["default"]("data.pointers",b.pointers),this.vbo.data=new Float32Array(b.attributes)):l["default"]("data",b)}return p(d,a),d.prototype.destructor=function(b){this.ibo.release(),this.ibo=void 0,this.vbo.release(),this.vbo=void 0,a.prototype.destructor.call(this,e["default"](b))},Object.defineProperty(d.prototype,"attributes",{get:function(){return this._attributes},set:function(a){g["default"](a)&&(this._attributes=a,this.vbo.data=new Float32Array(a))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"data",{get:function(){return{drawMode:this.drawMode,indices:this._indices,attributes:this._attributes,stride:this._stride,pointers:this._pointers}},set:function(){throw new Error(m["default"]("data").message)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"indices",{get:function(){return this._indices},set:function(a){this.setIndices(a)},enumerable:!0,configurable:!0}),d.prototype.setIndices=function(a){h["default"](a)||j["default"](a)||(g["default"](a)?(this._indices=a,this.count=a.length,this.ibo.data=new Uint16Array(a)):k["default"]("indices",a))},Object.defineProperty(d.prototype,"pointers",{get:function(){return this._pointers},set:function(a){this._pointers=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"stride",{get:function(){return this._stride},set:function(a){this._stride=a},enumerable:!0,configurable:!0}),d.prototype.contextFree=function(b){this.ibo.contextFree(b),this.vbo.contextFree(b),a.prototype.contextFree.call(this,b)},d.prototype.contextGain=function(b){this.ibo.contextGain(b),this.vbo.contextGain(b),a.prototype.contextGain.call(this,b)},d.prototype.contextLost=function(){this.ibo.contextLost(),this.vbo.contextLost(),a.prototype.contextLost.call(this)},d.prototype.draw=function(a){var d=this.contextProvider;if(d){this.vbo.bind();var e=this._pointers;if(e)for(var f=e.length,g=0;f>g;g++){var h=e[g],i=a.getAttribLocation(h.name);i>=0&&(d.vertexAttribPointer(i,h.size,h.normalized,this._stride,h.offset),d.enableVertexAttribArray(i))}else switch(b["default"].errorMode){case c["default"].WARNME:console.warn(this._type+".pointers must be an array.")}if(this.ibo.bind(),this.count)d.drawElements(this.mode,this.count,this.offset);else switch(b["default"].errorMode){case c["default"].WARNME:
console.warn(this._type+".indices must be an array.")}this.ibo.unbind(),this.vbo.unbind()}},d}(d["default"]),a("default",o)}}}),System.register("davinci-eight/i18n/shouldBeImplementedBy.js",["../checks/mustBeString"],function(a){function b(a,b){c["default"]("name",a);var d={get message(){return"Method '"+a+"' should be implemented by "+b+"."}};return d}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/core/GeometryContainer.js",["../collections/ShareableArray","../base/incLevel","../math/Matrix4","../i18n/notSupported","../i18n/readOnly","../core/ShareableBase","../i18n/shouldBeImplementedBy","../math/Spinor3"],function(a){var b,c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function g(c){a.call(this),this.scaling=d["default"].one(),this.canonicalScale=d["default"].one(),this.K=d["default"].one(),this.Kinv=d["default"].one(),this.Kidentity=!0,this.setLoggingName("GeometryContainer"),this._parts=new b["default"]([]),c&&!i["default"].isOne(c)&&(this.Kidentity=!1,this.K.rotation(c),this.Kinv.copy(this.K).inv())}return k(g,a),g.prototype.destructor=function(b){this._parts.release(),this._parts=void 0,a.prototype.destructor.call(this,c["default"](b))},Object.defineProperty(g.prototype,"data",{get:function(){throw new Error(e["default"]("data").message)},set:function(){throw new Error(e["default"]("data").message)},enumerable:!0,configurable:!0}),g.prototype.isLeaf=function(){return!1},Object.defineProperty(g.prototype,"partsLength",{get:function(){return this._parts.length},set:function(){throw new Error(f["default"]("partsLength").message)},enumerable:!0,configurable:!0}),g.prototype.addPart=function(a){this._parts.push(a)},g.prototype.removePart=function(a){var b=this._parts.splice(a,1);b.release()},g.prototype.getPart=function(a){return this._parts.get(a)},g.prototype.draw=function(a){this._parts.forEach(function(b){b.draw(a)})},g.prototype.contextFree=function(a){this._parts.forEach(function(b){b.contextFree(a)})},g.prototype.contextGain=function(a){this._parts.forEach(function(b){b.contextGain(a)})},g.prototype.contextLost=function(){this._parts.forEach(function(a){a.contextLost()})},g.prototype.hasPrincipalScale=function(){throw new Error(h["default"]("hasPrincipalScale",this._type).message)},g.prototype.getPrincipalScale=function(){throw new Error(h["default"]("getPrincipalScale",this._type).message)},g.prototype.setPrincipalScale=function(){throw new Error(h["default"]("setPrincipalScale",this._type).message)},g.prototype.setScale=function(a,b,c){this.Kidentity?(this.scaling.setElement(0,0,a),this.scaling.setElement(1,1,b),this.scaling.setElement(2,2,c)):(this.canonicalScale.copy(this.Kinv).mul(this.scaling).mul(this.K),this.canonicalScale.setElement(0,0,a),this.canonicalScale.setElement(1,1,b),this.canonicalScale.setElement(2,2,c),this.scaling.copy(this.K).mul(this.canonicalScale).mul(this.Kinv))},g}(g["default"]),a("default",j)}}}),System.register("davinci-eight/math/mulSpinorE3YZ.js",[],function(a){function b(a,b){return a.yz*b.α-a.zx*b.xy+a.xy*b.zx+a.α*b.yz}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulSpinorE3ZX.js",[],function(a){function b(a,b){return a.yz*b.xy+a.zx*b.α-a.xy*b.yz+a.α*b.zx}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulSpinorE3XY.js",[],function(a){function b(a,b){return-a.yz*b.zx+a.zx*b.yz+a.xy*b.α+a.α*b.xy}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulSpinorE3alpha.js",[],function(a){function b(a,b){return-a.yz*b.yz-a.zx*b.zx-a.xy*b.xy+a.α*b.α}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Spinor3.js",["../math/Coords","../math/dotVectorCartesianE3","./mulSpinorE3YZ","./mulSpinorE3ZX","./mulSpinorE3XY","./mulSpinorE3alpha","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../math/quadSpinorE3","../math/rotorFromDirectionsE3","./toStringCustom","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a){function b(a){return[a.yz,a.zx,a.xy,a.α]}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a}],execute:function(){r=0,s=1,t=2,u=3,v=["e23","e31","e12","1"],w=Math.exp,x=Math.cos,y=Math.sin,z=Math.sqrt,A=Math.random(),B=function(a){function c(b,c){if(a.call(this,b,!1,4),c!==A)throw new Error("Use the static creation methods instead of the constructor")}return C(c,a),Object.defineProperty(c.prototype,"yz",{get:function(){return this.coords[r]},set:function(a){j["default"]("yz",a),this.modified=this.modified||this.yz!==a,this.coords[r]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"zx",{get:function(){return this.coords[s]},set:function(a){j["default"]("zx",a),this.modified=this.modified||this.zx!==a,this.coords[s]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"xy",{get:function(){return this.coords[t]},set:function(a){j["default"]("xy",a),this.modified=this.modified||this.xy!==a,this.coords[t]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"alpha",{get:function(){return this.coords[u]},set:function(a){j["default"]("alpha",a),this.modified=this.modified||this.alpha!==a,this.coords[u]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"α",{get:function(){return this.coords[u]},set:function(a){j["default"]("α",a),this.modified=this.modified||this.α!==a,this.coords[u]=a},enumerable:!0,configurable:!0}),c.prototype.add=function(a,b){return void 0===b&&(b=1),k["default"]("spinor",a),j["default"]("α",b),this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.α+=a.α*b,this},c.prototype.add2=function(a,b){return this.α=a.α+b.α,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this},c.prototype.addPseudo=function(a){return j["default"]("β",a),this},c.prototype.addScalar=function(a){return j["default"]("α",a),this.α+=a,this},c.prototype.adj=function(){throw new Error("TODO: Spinor3.adj")},c.prototype.angle=function(){return this.log().grade(2)},c.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},c.prototype.clone=function(){return c.copy(this)},c.prototype.conj=function(){return this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},c.prototype.copy=function(a){if(a)return this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.α=a.α,this;throw new Error("source for copy must be a spinor")},c.prototype.copyScalar=function(a){return this.zero().addScalar(a)},c.prototype.copySpinor=function(a){return this.copy(a)},c.prototype.copyVector=function(){return this.zero()},c.prototype.div=function(a){return this.div2(this,a)},c.prototype.div2=function(a,b){var c=a.α,d=a.yz,e=a.zx,f=a.xy,g=b.α,h=b.yz,i=b.zx,j=b.xy;return this.α=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},c.prototype.divByScalar=function(a){return this.yz/=a,this.zx/=a,this.xy/=a,this.α/=a,this},c.prototype.dual=function(a,b){return this.α=0,this.yz=a.x,this.zx=a.y,this.xy=a.z,b&&this.neg(),this},c.prototype.equals=function(a){if(a instanceof c){var b=a;return this.yz===b.yz&&this.zx===b.zx&&this.xy===b.xy&&this.α===b.α}return!1},c.prototype.exp=function(){var a=this.α,b=this.yz,c=this.zx,d=this.xy,e=w(a),f=z(b*b+c*c+d*d),g=e*(0!==f?y(f)/f:1);return this.α=e*x(f),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},c.prototype.inv=function(){return this.conj(),this.divByScalar(this.squaredNormSansUnits()),this},c.prototype.lco=function(a){return this.lco2(this,a)},c.prototype.lco2=function(){return this},c.prototype.lerp=function(a,b){var d=c.copy(a),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(b),f.exp(),this.copy(f),this},c.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},c.prototype.log=function(){var a=this.α,b=this.yz,c=this.zx,d=this.xy,e=b*b+c*c+d*d,f=z(e),g=Math.abs(a),h=z(a*a+e);this.α=Math.log(h);var i=Math.atan2(f,g)/f;return this.yz=b*i,this.zx=c*i,this.xy=d*i,this},c.prototype.magnitude=function(){return z(this.squaredNormSansUnits())},c.prototype.magnitudeSansUnits=function(){return z(this.squaredNormSansUnits())},c.prototype.mul=function(a){var b=h["default"](this,a),c=e["default"](this,a),d=f["default"](this,a),i=g["default"](this,a);return this.α=b,this.yz=c,this.zx=d,this.xy=i,this},c.prototype.mul2=function(a,b){var c=h["default"](a,b),d=e["default"](a,b),i=f["default"](a,b),j=g["default"](a,b);return this.α=c,this.yz=d,this.zx=i,this.xy=j,this},c.prototype.neg=function(){return this.α=-this.α,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},c.prototype.norm=function(){var a=this.magnitudeSansUnits();return this.zero().addScalar(a)},c.prototype.normalize=function(){var a=this.magnitude();return this.yz=this.yz/a,this.zx=this.zx/a,this.xy=this.xy/a,this.α=this.α/a,this},c.prototype.one=function(){return this.α=1,this.yz=0,this.zx=0,this.xy=0,this},c.prototype.quad=function(){var a=this.squaredNormSansUnits();return this.zero().addScalar(a)},c.prototype.squaredNorm=function(){return l["default"](this)},c.prototype.squaredNormSansUnits=function(){return l["default"](this)},c.prototype.stress=function(a){return this.yz=this.yz*a.y*a.z,this.zx=this.zx*a.z*a.x,this.xy=this.xy*a.x*a.y,this},c.prototype.rco=function(a){return this.rco2(this,a)},c.prototype.rco2=function(){return this},c.prototype.rev=function(){return this.yz*=-1,this.zx*=-1,this.xy*=-1,this},c.prototype.reflect=function(a){var b=this.α,c=this.yz,d=this.zx,e=this.xy,f=a.x,g=a.y,h=a.z,i=f*f+g*g+h*h,j=f*c+g*d+h*e;return this.α=i*b,this.xy=2*h*j-i*e,this.yz=2*f*j-i*c,this.zx=2*g*j-i*d,this},c.prototype.rotate=function(a){return this.rev(),this.mul2(a,this),this.rev(),this.mul2(a,this),this},c.prototype.rotorFromDirections=function(a,b){return m["default"](a,b,this),this},c.prototype.rotorFromAxisAngle=function(a,b){var c=b/2,d=y(c);return this.yz=-a.x*d,this.zx=-a.y*d,this.xy=-a.z*d,this.α=x(c),this},c.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=y(c);return this.yz=-a.yz*d,this.zx=-a.zx*d,this.xy=-a.xy*d,this.α=x(c),this},c.prototype.scp=function(a){return this.scp2(this,a)},c.prototype.scp2=function(){return this},c.prototype.scale=function(a){return j["default"]("α",a),this.yz*=a,this.zx*=a,this.xy*=a,this.α*=a,this},c.prototype.slerp=function(a,b){var d=c.copy(a),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(b),f.exp(),this.copy(f),this},c.prototype.sub=function(a,b){return void 0===b&&(b=1),k["default"]("s",a),j["default"]("α",b),this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.α-=a.α*b,this},c.prototype.sub2=function(a,b){return this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.α=a.α-b.α,this},c.prototype.versor=function(a,b){var c=a.x,e=a.y,f=a.z,g=b.x,h=b.y,i=b.z;return this.α=d["default"](c,e,f,g,h,i),this.yz=p["default"](c,e,f,g,h,i),this.zx=q["default"](c,e,f,g,h,i),this.xy=o["default"](c,e,f,g,h,i),this},c.prototype.wedge=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.α=0,this.yz=p["default"](c,d,e,f,g,h),this.zx=q["default"](c,d,e,f,g,h),this.xy=o["default"](c,d,e,f,g,h),this},c.prototype.grade=function(a){switch(i["default"]("grade",a),a){case 0:this.yz=0,this.zx=0,this.xy=0;break;case 2:this.α=0;break;default:this.α=0,this.yz=0,this.zx=0,this.xy=0}return this},c.prototype.toExponential=function(a){var c=function(b){return b.toExponential(a)};return n["default"](b(this),void 0,c,v)},c.prototype.toFixed=function(a){var c=function(b){return b.toFixed(a)};return n["default"](b(this),void 0,c,v)},c.prototype.toPrecision=function(a){var c=function(b){return b.toPrecision(a)};return n["default"](b(this),void 0,c,v)},c.prototype.toString=function(a){var c=function(b){return b.toString(a)};return n["default"](b(this),void 0,c,v)},c.prototype.ext=function(a){return this.ext2(this,a)},c.prototype.ext2=function(){return this},c.prototype.zero=function(){return this.α=0,this.yz=0,this.zx=0,this.xy=0,this},c.copy=function(a){var b=c.zero().copy(a);return b.modified=!1,b},c.dual=function(a,b){return c.zero().dual(a,b)},c.isOne=function(a){return 1===a.α&&0===a.yz&&0===a.zx&&0===a.xy},c.lerp=function(a,b,d){return c.copy(a).lerp(b,d)},c.one=function(){return c.spinor(0,0,0,1)},c.rotorFromDirections=function(a,b){return c.zero().rotorFromDirections(a,b)},c.spinor=function(a,b,d,e){return new c([a,b,d,e],A)},c.wedge=function(a,b){var d=a.x,e=a.y,f=a.z,g=b.x,h=b.y,i=b.z,j=p["default"](d,e,f,g,h,i),k=q["default"](d,e,f,g,h,i),l=o["default"](d,e,f,g,h,i);return c.spinor(j,k,l,0)},c.zero=function(){return c.spinor(0,0,0,0)},c}(c["default"]),a("default",B)}}}),System.register("davinci-eight/geometries/PrimitivesBuilder.js",["../core/GeometryElements","../core/GeometryContainer","../math/Spinor3","../math/Vector3","../core/vertexArraysFromPrimitive"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(){this.stress=e["default"].vector(1,1,1),this.tilt=d["default"].one(),this.offset=e["default"].zero(),this.transforms=[],this.useNormal=!0,this.usePosition=!0,this.useTextureCoord=!1}return a.prototype.applyTransforms=function(a,b,c,d,e){for(var f=this.transforms.length,g=0;f>g;g++)this.transforms[g].exec(a,b,c,d,e)},a.prototype.toGeometry=function(a){for(var d=new c["default"](this.tilt),e=this.toPrimitives(),g=e.length,h=0;g>h;h++){var i=e[h],j=new b["default"](f["default"](i),a);d.addPart(j),j.release()}return d},a.prototype.toVertexArrays=function(){for(var a=[],b=this.toPrimitives(),c=b.length,d=0;c>d;d++)a.push(f["default"](b[d]));return a},a.prototype.toPrimitives=function(){return console.warn("toPrimitives() must be implemented by derived classes."),[]},a}(),a("default",g)}}}),System.register("davinci-eight/collections/copyToArray.js",[],function(a){function b(a,b,c){void 0===b&&(b=[]),void 0===c&&(c=0);for(var d=a.length,e=0;d>e;e++)b[c+e]=a[e];return b}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/dataFromVectorN.js",["../math/Geometric2","../math/Geometric3","../math/Vector2","../math/Vector3"],function(a){function b(a){if(a instanceof d["default"]){var b=a;return[b.x,b.y,b.z]}if(a instanceof c["default"]){var g=a;return[g.x,g.y]}if(a instanceof f["default"]){var h=a;return[h.x,h.y,h.z]}if(a instanceof e["default"]){var i=a;return[i.x,i.y]}return a.coords}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/geometries/primitives/DrawAttribute.js",[],function(a){function b(){return!0}function c(a){if(!b(a))throw new Error("values must be a number[]");return a}function d(a,b){return a%b===0}function e(a,b){if("number"!=typeof a)throw new Error("size must be a number");if(!d(b.length,a))throw new Error("values.length must be an exact multiple of size");return a}var f;return{setters:[],execute:function(){f=function(){function a(a,b){this.values=c(a),this.size=e(b,a)}return a}(),a("default",f)}}}),System.register("davinci-eight/geometries/primitives/DrawPrimitive.js",["../../checks/mustBeArray","../../checks/mustBeInteger","../../checks/mustBeObject"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(){return"DrawPrimitive constructor"},f=function(){function a(a,f,g){this.attributes={},this.mode=c["default"]("mode",a,e),this.indices=b["default"]("indices",f,e),this.attributes=d["default"]("attributes",g,e)}return a}(),a("default",f)}}}),System.register("davinci-eight/geometries/computeUniqueVertices.js",[],function(a){function b(a){function b(a){var b=a.toString();if(c[b]){var e=c[b];a.index=e.index}else a.index=d.length,d.push(a),c[b]=a}var c={},d=[];return a.forEach(function(a){a.vertices.forEach(function(a){b(a)})}),d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/simplicesToPrimitive.js",["../collections/copyToArray","./dataFromVectorN","./primitives/DrawAttribute","../core/DrawMode","./primitives/DrawPrimitive","./simplicesToGeometryMeta","./computeUniqueVertices","../checks/expectArg","./Simplex","../math/VectorN"],function(a){function b(a,b){for(var c=[],d=0;a>d;d++)c.push(b);return c}function c(a,b){n["default"]("name",a).toBeString(),n["default"]("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.name;return d?d:a}throw new Error("Unable to compute name; missing attribute specification for "+a)}function d(a,b){n["default"]("key",a).toBeString(),n["default"]("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.size;return n["default"]("size",d).toBeNumber(),c.size}throw new Error("Unable to compute size; missing attribute specification for "+a)}function e(a,b){return a.concat(b)}function f(a,f){n["default"]("simplices",a).toBeObject();var q=l["default"](a);f?n["default"]("geometryMeta",f).toBeObject():f=q;var r,s,t=f.attributes,u=Object.keys(t),v=u.length,w=m["default"](a),x=w.length,y=a.map(o["default"].indices).reduce(e,[]),z=[];for(r=0;v>r;r++){var A=u[r],B=d(A,t),C=b(x*B,void 0);z.push({data:C,dimensions:B,name:c(A,t)})}for(s=0;x>s;s++){var D=w[s],E=D.attributes;for(D.index!==s&&n["default"]("vertex.index",s).toSatisfy(!1,"vertex.index must equal loop index, i"),r=0;v>r;r++){var F=z[r],G=F.dimensions,H=E[u[r]];H||(H=new p["default"](b(G,0),!1,G));var C=h["default"](H);g["default"](C,F.data,s*F.dimensions)}}var I={};for(r=0;v>r;r++){var F=z[r],C=F.data;I[F.name]=new i["default"](C,F.dimensions)}switch(f.k){case o["default"].TRIANGLE:return new k["default"](j["default"].TRIANGLES,y,I);case o["default"].LINE:return new k["default"](j["default"].LINES,y,I);case o["default"].POINT:return new k["default"](j["default"].POINTS,y,I);case o["default"].EMPTY:return new k["default"](j["default"].POINTS,y,I);default:throw new Error("k => "+f.k)}}var g,h,i,j,k,l,m,n,o,p;return a("default",f),{setters:[function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a}],execute:function(){}}}),System.register("davinci-eight/geometries/dataLength.js",["../math/Geometric2","../math/Geometric3","../math/Vector2","../math/Vector3"],function(a){function b(a){if(a instanceof d["default"]){if(8!==a.length)throw new Error("source.length is expected to be 8");return 3}if(a instanceof c["default"]){if(4!==a.length)throw new Error("source.length is expected to be 4");return 2}if(a instanceof f["default"]){if(3!==a.length)throw new Error("source.length is expected to be 3");return 3}if(a instanceof e["default"]){if(2!==a.length)throw new Error("source.length is expected to be 2");return 2}return a.length}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/geometries/simplicesToGeometryMeta.js",["./dataLength","../checks/expectArg","../checks/isDefined","./Simplex"],function(a){function b(a,b){var c=[];return JSON.stringify(a,function(a,b){if("object"==typeof b&&null!==b){if(-1!==c.indexOf(b))return;c.push(b)}return b},b)}function c(a){for(var c=void 0,h={},i=a.length,j=0;i>j;j++){var k=a[j];k instanceof g["default"]||e["default"]("simplex",k).toSatisfy(!1,"Every element must be a Simplex @ simplicesToGeometryMeta(). Found "+b(k,2));var l=k.vertices;c=k.k;for(var m=0,n=l.length;n>m;m++)for(var o=l[m],p=o.attributes,q=Object.keys(p),r=q.length,s=0;r>s;s++){var t=q[s],u=p[t],v=d["default"](u),w=h[t];if(w){if(w.size!==v)throw new Error("Something is rotten in Denmark!")}else h[t]={size:v}}}if(f["default"](c)){var x={get attributes(){return h},get k(){return c}};return x}return void 0}var d,e,f,g;return a("default",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/geometries/SimplexPrimitivesBuilder.js",["../math/G3","../checks/mustBeBoolean","../checks/mustBeInteger","../geometries/PrimitivesBuilder","../geometries/Simplex","../core/GraphicsProgramSymbols","../geometries/simplicesToPrimitive","../geometries/simplicesToGeometryMeta","../math/Vector1","../math/Vector3"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(a){function e(){a.call(this),this.data=[],this._k=new j["default"]([f["default"].TRIANGLE]),this.curvedSegments=16,this.flatSegments=1,this.orientationColors=!1,this._k.modified=!0}return m(e,a),Object.defineProperty(e.prototype,"k",{get:function(){return this._k.x},set:function(a){this._k.x=d["default"]("k",a)},enumerable:!0,configurable:!0}),e.prototype.regenerate=function(){throw new Error("`protected regenerate(): void` method should be implemented in derived class.")},e.prototype.isModified=function(){return this._k.modified},e.prototype.setModified=function(a){return c["default"]("modified",a),this._k.modified=a,this},e.prototype.boundary=function(a){return this.regenerate(),this.data=f["default"].boundary(this.data,a),this.check()},e.prototype.check=function(){return this.meta=i["default"](this.data),this},e.prototype.subdivide=function(a){return this.regenerate(),this.data=f["default"].subdivide(this.data,a),this.check(),this},e.prototype.toPrimitives=function(){return this.regenerate(),this.check(),[h["default"](this.data,this.meta)]},e.prototype.mergeVertices=function(a){void 0===a&&(a=4)},e.prototype.triangle=function(a,c,d){var e=new f["default"](f["default"].TRIANGLE);return e.vertices[0].attributes[g["default"].ATTRIBUTE_POSITION]=a[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_POSITION]=a[1],e.vertices[2].attributes[g["default"].ATTRIBUTE_POSITION]=a[2],e.vertices[0].attributes[g["default"].ATTRIBUTE_NORMAL]=c[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_NORMAL]=c[1],e.vertices[2].attributes[g["default"].ATTRIBUTE_NORMAL]=c[2],e.vertices[0].attributes[g["default"].ATTRIBUTE_COORDS]=d[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_COORDS]=d[1],e.vertices[2].attributes[g["default"].ATTRIBUTE_COORDS]=d[2],this.orientationColors&&(e.vertices[0].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e1),e.vertices[1].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e2),e.vertices[2].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e3)),this.data.push(e)},e.prototype.lineSegment=function(a,c,d){var e=new f["default"](f["default"].LINE);return e.vertices[0].attributes[g["default"].ATTRIBUTE_POSITION]=a[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_POSITION]=a[1],e.vertices[0].attributes[g["default"].ATTRIBUTE_NORMAL]=c[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_NORMAL]=c[1],e.vertices[0].attributes[g["default"].ATTRIBUTE_COORDS]=d[0],e.vertices[1].attributes[g["default"].ATTRIBUTE_COORDS]=d[1],this.orientationColors&&(e.vertices[0].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e1),e.vertices[1].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e2)),this.data.push(e)},e.prototype.point=function(a,c,d){var e=new f["default"](f["default"].POINT);return e.vertices[0].attributes[g["default"].ATTRIBUTE_POSITION]=a[0],e.vertices[0].attributes[g["default"].ATTRIBUTE_NORMAL]=c[0],e.vertices[0].attributes[g["default"].ATTRIBUTE_COORDS]=d[0],this.orientationColors&&(e.vertices[0].attributes[g["default"].ATTRIBUTE_COLOR]=k["default"].copy(b["default"].e1)),this.data.push(e)},e.prototype.empty=function(){var a=new f["default"](f["default"].EMPTY);return this.data.push(a)},e}(e["default"]),a("default",l)}}}),System.register("davinci-eight/geometries/primitives/Vertex.js",["../../math/Coords","../../checks/mustBeGE","../../checks/mustBeInteger"],function(a){function b(a,b){return b?a+b.toString():a}function c(a){var c=a.attributes,d=Object.keys(c).map(function(a){var d=c[a];return b(a,d)}).join(" ");return d}var d,e,f,g;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a){this.attributes={},f["default"]("numCoordinates",a),e["default"]("numCoordinates",a,0);for(var b=[],c=0;a>c;c++)b.push(0);this.coords=new d["default"](b,!1,a)}return a.prototype.toString=function(){return c(this)},a}(),a("default",g)}}}),System.register("davinci-eight/geometries/Simplex.js",["../checks/expectArg","../checks/isInteger","./primitives/Vertex","../math/VectorN"],function(a){function b(a,b,c,d){return i["default"](b)&&b>=c&&d>=b?b:void h["default"](a,b).toSatisfy(!1,a+" must be an integer in the range ["+c+","+d+"]")}function c(a){return b("count",a,0,7)}function d(a,b){return a.concat(b)}function e(a,b,c,d){void 0===d&&(d=[]),h["default"]("b",b).toSatisfy(a.length===b.length,"a must be the same length as b");var e,f=a.length,g=1-c;for(e=0;f>e;e++)d.push(g*a[e]+c*b[e]);return d}function f(a,b,c){for(var d={},e=Object.keys(a),f=e.length,h=0;f>h;h++){var i=e[h];d[i]=g(a[i],b[i],c)}return d}function g(a,b,c){return new k["default"](e(a.coords,b.coords,c))}var h,i,j,k,l;return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(){function a(a){this.vertices=[],i["default"](a)||h["default"]("k",a).toBeNumber();for(var b=a+1,c=0,d=0;b>d;d++)this.vertices.push(new j["default"](c))}return Object.defineProperty(a.prototype,"k",{get:function(){return this.vertices.length-1},enumerable:!0,configurable:!0}),a.indices=function(a){return a.vertices.map(function(a){return a.index})},a.boundaryMap=function(b){var c=b.vertices,d=b.k;if(d===a.TRIANGLE){var e=new a(d-1);e.vertices[0].attributes=c[0].attributes,e.vertices[1].attributes=c[1].attributes;var f=new a(d-1);f.vertices[0].attributes=c[1].attributes,f.vertices[1].attributes=c[2].attributes;var g=new a(d-1);return g.vertices[0].attributes=c[2].attributes,g.vertices[1].attributes=c[0].attributes,[e,f,g]}if(d===a.LINE){var h=new a(d-1);h.vertices[0].attributes=b.vertices[0].attributes;var i=new a(d-1);return i.vertices[0].attributes=b.vertices[1].attributes,[h,i]}if(d===a.POINT)return[new a(d-1)];if(d===a.EMPTY)return[];throw new Error("Unexpected k-simplex, k = "+b.k+" @ Simplex.boundaryMap()")},a.subdivideMap=function(b){h["default"]("simplex",b).toBeObject();var c=[],d=b.vertices,e=b.k;if(e===a.TRIANGLE){var g=d[0].attributes,i=d[1].attributes,j=d[2].attributes,k=f(g,i,.5),l=f(i,j,.5),m=f(j,g,.5),n=new a(e);n.vertices[0].attributes=j,n.vertices[1].attributes=m,n.vertices[2].attributes=l;var o=new a(e);o.vertices[0].attributes=g,o.vertices[1].attributes=k,o.vertices[2].attributes=m;var p=new a(e);p.vertices[0].attributes=i,p.vertices[1].attributes=l,p.vertices[2].attributes=k;var q=new a(e);q.vertices[0].attributes=k,q.vertices[1].attributes=l,q.vertices[2].attributes=m,c.push(n),c.push(o),c.push(p),c.push(q)}else if(e===a.LINE){var g=d[0].attributes,i=d[1].attributes,r=f(g,i,.5),s=new a(e);s.vertices[0].attributes=g,s.vertices[1].attributes=r;var t=new a(e);t.vertices[0].attributes=r,t.vertices[1].attributes=i,c.push(s),c.push(t)}else if(e===a.POINT)c.push(b);else if(e!==a.EMPTY)throw new Error(e+"-simplex is not supported");return c},a.boundary=function(b,e){void 0===e&&(e=1),c(e);for(var f=0;e>f;f++)b=b.map(a.boundaryMap).reduce(d,[]);return b},a.subdivide=function(b,e){void 0===e&&(e=1),c(e);for(var f=0;e>f;f++)b=b.map(a.subdivideMap).reduce(d,[]);return b},a.setAttributeValues=function(a,b){var c,d=Object.keys(a),e=d.length;for(c=0;e>c;c++){var f=d[c],g=a[f],h=g.length,i=void 0;for(i=0;h>i;i++)b.vertices[i].attributes[f]=g[i]}},a.EMPTY=-1,a.POINT=0,a.LINE=1,a.TRIANGLE=2,a.TETRAHEDRON=3,a.FIVE_CELL=4,a}(),a("default",l)}}}),System.register("davinci-eight/geometries/PolyhedronBuilder.js",["../math/G3","../geometries/SimplexPrimitivesBuilder","../geometries/Simplex","../core/GraphicsProgramSymbols","../math/Vector2","../math/Vector3"],function(a){function b(a){return Math.atan2(a.z,-a.x)}function c(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}function d(a,d){var e=k["default"].copy(a).normalize();d.push(e);var f=b(a)/2/Math.PI+.5,g=c(a)/Math.PI+.5,h=e;return h.uv=new j["default"]([f,1-g]),e}function e(a,b,c){return 0>c&&1===a.x&&(a=new j["default"]([a.x-1,a.y])),0===b.x&&0===b.z&&(a=new j["default"]([c/2/Math.PI+.5,a.y])),a.clone()}var f,g,h,i,j,k,l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(a){function c(c,g,j,l){function m(a,b,c){var d=(a.x+b.x+c.x)/3,e=(a.y+b.y+c.y)/3,g=(a.z+b.z+c.z)/3;return new f["default"](0,d,e,g,0,0,0,0)}function n(a,c,d,f){var g=b(m(a,c,d)),j=a,l=c,n=d,o=e(j.uv,a,g),p=e(l.uv,c,g),q=e(n.uv,d,g),r=new h["default"](h["default"].TRIANGLE);r.vertices[0].attributes[i["default"].ATTRIBUTE_POSITION]=k["default"].copy(a),r.vertices[0].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(a),r.vertices[0].attributes[i["default"].ATTRIBUTE_COORDS]=o,r.vertices[1].attributes[i["default"].ATTRIBUTE_POSITION]=k["default"].copy(c),r.vertices[1].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(c),r.vertices[1].attributes[i["default"].ATTRIBUTE_COORDS]=p,r.vertices[2].attributes[i["default"].ATTRIBUTE_POSITION]=k["default"].copy(d),r.vertices[2].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(d),r.vertices[2].attributes[i["default"].ATTRIBUTE_COORDS]=q,f.data.push(r)}function o(a,b,c,e){for(var f=Math.pow(2,b),g=d(a.vertices[0].attributes[i["default"].ATTRIBUTE_POSITION],c),h=d(a.vertices[1].attributes[i["default"].ATTRIBUTE_POSITION],c),j=d(a.vertices[2].attributes[i["default"].ATTRIBUTE_POSITION],c),l=[],m=0;f>=m;m++){l[m]=[];for(var o=d(k["default"].copy(g).lerp(j,m/f),c),p=d(k["default"].copy(h).lerp(j,m/f),c),q=f-m,r=0;q>=r;r++)l[m][r]=0===r&&m===f?o:d(k["default"].copy(o).lerp(p,r/q),c)}for(var m=0;f>m;m++)for(var r=0;2*(f-m)-1>r;r++){var s=Math.floor(r/2);r%2===0?n(l[m][s+1],l[m+1][s],l[m][s],e):n(l[m][s+1],l[m+1][s+1],l[m+1][s],e)}}void 0===j&&(j=1),void 0===l&&(l=0),a.call(this);for(var p=[],q=0,r=c.length;r>q;q+=3)d(new k["default"]([c[q],c[q+1],c[q+2]]),p);for(var s=[],q=0,t=0,r=g.length;r>q;q+=3,t++){var u=p[g[q]],v=p[g[q+1]],w=p[g[q+2]],x=new h["default"](h["default"].TRIANGLE);x.vertices[0].attributes[i["default"].ATTRIBUTE_POSITION]=u,x.vertices[0].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(u),x.vertices[1].attributes[i["default"].ATTRIBUTE_POSITION]=v,x.vertices[1].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(v),x.vertices[2].attributes[i["default"].ATTRIBUTE_POSITION]=w,x.vertices[2].attributes[i["default"].ATTRIBUTE_NORMAL]=k["default"].copy(w),s[t]=x}for(var q=0,y=s.length;y>q;q++)o(s[q],l,p,this);

for(var q=0,z=p.length;z>q;q++)p[q].scale(j);this.mergeVertices()}return m(c,a),c.prototype.regenerate=function(){},c}(g["default"]),a("default",l)}}}),System.register("davinci-eight/core/computeCount.js",["../checks/mustBeInteger"],function(a){function b(a,b){for(var d=b.length,e=0;d>e;e++){var f=b[e],g=a[f],h=g.values.length,i=c["default"]("size",g.size);return h/i}return 0}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/core/computeAttributes.js",["./computeCount"],function(a){function b(a,b){for(var d=b.length,e=[],f=c["default"](a,b),g=0;f>g;g++)for(var h=0;d>h;h++)for(var i=b[h],j=a[i],k=j.size,l=0;k>l;l++)e.push(j.values[g*k+l]);return e}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/core/computePointers.js",[],function(a){function b(a,b){for(var c=b.length,d=[],e=0,f=0;c>f;f++){var g=b[f],h=a[g];d.push({name:g,size:h.size,normalized:!0,offset:e}),e+=4*h.size}return d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/computeStride.js",[],function(a){function b(a,b){for(var c=b.length,d=0,e=0;c>e;e++){var f=b[e],g=a[f];d+=4*g.size}return d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/vertexArraysFromPrimitive.js",["./computeAttributes","./computePointers","./computeStride"],function(a){function b(a,b){var f=b?b:Object.keys(a.attributes),g={drawMode:a.mode,indices:a.indices,attributes:c["default"](a.attributes,f),stride:e["default"](a.attributes,f),pointers:d["default"](a.attributes,f)};return g}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/geometries/TetrahedronGeometry.js",["../core/GeometryContainer","../core/GeometryElements","../checks/isDefined","../checks/mustBeNumber","../geometries/PolyhedronBuilder","../core/vertexArraysFromPrimitive"],function(a){var b,c,d,e,f,g,h,i,j,k=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1],j=function(a){function b(b){void 0===b&&(b={}),a.call(this,b.tilt),this.setLoggingName("TetrahedronGeometry");for(var j=d["default"](b.radius)?e["default"]("radius",b.radius):1,k=new f["default"](h,i,j),l=k.toPrimitives(),m=l.length,n=0;m>n;n++){var o=l[n],p=new c["default"](g["default"](o),b.engine);this.addPart(p),p.release()}}return k(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(b["default"]),a("default",j)}}}),System.register("davinci-eight/visual/Tetrahedron.js",["../core/Mesh","../materials/MeshMaterial","../geometries/TetrahedronGeometry"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b){void 0===b&&(b={}),a.call(this,void 0,void 0,b.engine),this.setLoggingName("Tetrahedron");var e={};e.engine=b.engine;var f=new d["default"](e),g=null,h=new c["default"](g,b.engine);this.geometry=f,this.material=h,f.release(),h.release()}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"radius",{get:function(){return this.getPrincipalScale("radius")},set:function(a){this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),b}(b["default"]),a("default",e)}}}),System.register("davinci-eight/visual/TrailConfig.js",["../config","../core/ErrorMode","../checks/isBoolean","../checks/mustBeBoolean"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){"use strict";f=function(){function a(){this._enabled=!0,this.interval=10,this.retain=10}return Object.defineProperty(a.prototype,"enabled",{get:function(){return this._enabled},set:function(a){if(d["default"](a))this._enabled=a;else switch(b["default"].errorMode){case c["default"].IGNORE:break;case c["default"].WARNME:console.warn("TrailConfig.enabled must be a boolean");break;default:e["default"]("enabled",a)}},enumerable:!0,configurable:!0}),a}(),a("default",f)}}}),System.register("davinci-eight/visual/Trail.js",["../base/incLevel","../checks/mustBeObject","../core/ShareableBase","./TrailConfig"],function(a){var b,c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function d(b){a.call(this),this.Xs=[],this.Rs=[],this.config=new e["default"],this.counter=0,this.setLoggingName("Trail"),c["default"]("mesh",b),b.addRef(),this.mesh=b}return g(d,a),d.prototype.destructor=function(c){this.mesh.release(),this.mesh=void 0,a.prototype.destructor.call(this,b["default"](c))},d.prototype.erase=function(){this.Xs=[],this.Rs=[]},d.prototype.snapshot=function(){if(this.config.enabled){for(this.counter%this.config.interval===0&&(this.Xs.unshift(this.mesh.position.clone()),this.Rs.unshift(this.mesh.attitude.clone()));this.Xs.length>this.config.retain;)this.Xs.pop(),this.Rs.pop();this.counter++}},d.prototype.draw=function(a){if(this.config.enabled){for(var b=this.mesh.position.clone(),c=this.mesh.attitude.clone(),d=this.Xs.length,e=0;d>e;e++)this.mesh.position.copyVector(this.Xs[e]),this.mesh.attitude.copySpinor(this.Rs[e]),this.mesh.draw(a);this.mesh.position.copy(b),this.mesh.attitude.copy(c)}},d}(d["default"]),a("default",f)}}}),System.register("davinci-eight/visual/DrawList.js",["../base/incLevel","../collections/ShareableArray","../core/ShareableContextConsumer"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(b){a.call(this,b),this.setLoggingName("DrawList"),this.things=new c["default"]([])}return f(d,a),d.prototype.destructor=function(c){this.things.release(),a.prototype.destructor.call(this,b["default"](c))},d.prototype.add=function(a){this.things.push(a)},d.prototype.draw=function(a){for(var b=this.things.length,c=0;b>c;c++){var d=this.things.getWeakRef(c);d.draw(a)}},d.prototype.contextFree=function(b){for(var c=this.things.length,d=0;c>d;d++){var e=this.things.getWeakRef(d);e.contextFree(b)}a.prototype.contextFree.call(this,b)},d.prototype.contextGain=function(b){for(var c=this.things.length,d=0;c>d;d++){var e=this.things.getWeakRef(d);e.contextGain(b)}a.prototype.contextGain.call(this,b)},d.prototype.contextLost=function(){for(var b=this.things.length,c=0;b>c;c++){var d=this.things.getWeakRef(c);d.contextLost()}a.prototype.contextLost.call(this)},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/math/G2.js",["../geometries/b2","../geometries/b3","./extE2","./gauss","./lcoE2","./rcoE2","./mulE2","../i18n/notImplemented","../i18n/notSupported","../i18n/readOnly","./scpE2","./stringFromCoordinates","./Unit"],function(a){function b(a,b,c,d,e,f,g,h){return a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,+(a+e)}function c(a,b,c,d,e,f,g,h){return a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,+(b+f)}function d(a,b,c,d,e,f,g,h){return a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,+(c+g)}function e(a,b,c,d,e,f,g,h){return a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,+(d+h)}function f(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a-e);break;case 1:j=+(b-f);break;case 2:j=+(c-g);break;case 3:j=+(d-h);break;default:throw new Error("index must be in the range [0..3]")}return+j}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return{setters:[function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a}],execute:function(){t=0,u=1,v=2,w=3,x=function(){function a(a,b,c,d,e){if(void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this._coords=[0,0,0,0],this._coords[t]=a,this._coords[u]=b,this._coords[v]=c,this._coords[w]=d,this.uom=e,this.uom&&1!==this.uom.multiplier){var f=this.uom.multiplier;this._coords[t]*=f,this._coords[u]*=f,this._coords[v]*=f,this._coords[w]*=f,this.uom=new s["default"](1,e.dimensions,e.labels)}}return Object.defineProperty(a,"zero",{get:function(){return a._zero},set:function(){throw new Error(p["default"]("zero").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a,"one",{get:function(){return a._one},set:function(){throw new Error(p["default"]("one").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a,"e1",{get:function(){return a._e1},set:function(){throw new Error(p["default"]("e1").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a,"e2",{get:function(){return a._e2},set:function(){throw new Error(p["default"]("e2").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a,"I",{get:function(){return a._I},set:function(){throw new Error(p["default"]("I").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"α",{get:function(){return this._coords[t]},set:function(){throw new Error(p["default"]("α").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this._coords[t]},set:function(){throw new Error(p["default"]("alpha").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this._coords[u]},set:function(){throw new Error(p["default"]("x").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._coords[v]},set:function(){throw new Error(p["default"]("y").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"β",{get:function(){return this._coords[w]},set:function(){throw new Error(p["default"]("β").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beta",{get:function(){return this._coords[w]},set:function(){throw new Error(p["default"]("beta").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"coords",{get:function(){return[this.α,this.x,this.y,this.β]},enumerable:!0,configurable:!0}),a.prototype.coordinate=function(a){switch(a){case 0:return this.α;case 1:return this.x;case 2:return this.y;case 3:return this.β;default:throw new Error("index must be in the range [0..3]")}},a.add=function(a,f){var g=a[0],h=a[1],i=a[2],j=a[3],k=f[0],l=f[1],m=f[2],n=f[3],o=b(g,h,i,j,k,l,m,n),p=c(g,h,i,j,k,l,m,n),q=d(g,h,i,j,k,l,m,n),r=e(g,h,i,j,k,l,m,n);return[o,p,q,r]},a.prototype.add=function(b){var c=a.add(this.coords,b.coords);return new a(c[0],c[1],c[2],c[3],s["default"].compatible(this.uom,b.uom))},a.prototype.addPseudo=function(b){return new a(this.α,this.x,this.y,this.β+b.multiplier,s["default"].compatible(this.uom,b))},a.prototype.addScalar=function(b){return new a(this.α+b.multiplier,this.x,this.y,this.β,s["default"].compatible(this.uom,b))},a.prototype.adj=function(){throw new Error("TODO: adj")},a.prototype.__add__=function(b){return b instanceof a?this.add(b):"number"==typeof b?this.add(new a(b,0,0,0,void 0)):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.add(this):"number"==typeof b?new a(b,0,0,0,void 0).add(this):void 0},a.prototype.angle=function(){return this.log().grade(2)},a.prototype.conj=function(){throw new Error(n["default"]("conj").message)},a.prototype.cubicBezier=function(b,c,d,e){var f=h["default"](b,this.α,c.α,d.α,e.α),g=h["default"](b,this.x,c.x,d.x,e.x),i=h["default"](b,this.y,c.y,d.y,e.y),j=h["default"](b,this.β,c.β,d.β,e.β);return new a(f,g,i,j,this.uom)},a.prototype.direction=function(){var b=this.magnitudeSansUnits();return 1!==b?new a(this.α/b,this.x/b,this.y/b,this.β/b):this.uom?new a(this.α,this.x,this.y,this.β):this},a.prototype.distanceTo=function(){throw new Error(n["default"]("diistanceTo").message)},a.prototype.equals=function(){throw new Error(n["default"]("equals").message)},a.sub=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3],l=f(c,d,e,g,h,i,j,k,0),m=f(c,d,e,g,h,i,j,k,1),n=f(c,d,e,g,h,i,j,k,2),o=f(c,d,e,g,h,i,j,k,3);return[l,m,n,o]},a.prototype.sub=function(b){var c=a.sub(this.coords,b.coords);return new a(c[0],c[1],c[2],c[3],s["default"].compatible(this.uom,b.uom))},a.prototype.__sub__=function(b){return b instanceof a?this.sub(b):"number"==typeof b?this.sub(new a(b,0,0,0,void 0)):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.sub(this):"number"==typeof b?new a(b,0,0,0,void 0).sub(this):void 0},a.prototype.mul=function(b){var c=this.α,d=this.x,e=this.y,f=this.β,g=b.α,h=b.x,i=b.y,j=b.β,k=m["default"](c,d,e,f,g,h,i,j,0),l=m["default"](c,d,e,f,g,h,i,j,1),n=m["default"](c,d,e,f,g,h,i,j,2),o=m["default"](c,d,e,f,g,h,i,j,3);return new a(k,l,n,o,s["default"].mul(this.uom,b.uom))},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):"number"==typeof b?this.mul(new a(b,0,0,0,void 0)):void 0},a.prototype.__rmul__=function(b){if(b instanceof a){var c=b;return c.mul(this)}if("number"==typeof b){var d=b;return new a(d,0,0,0,void 0).mul(this)}},a.prototype.scale=function(b){return new a(this.α*b,this.x*b,this.y*b,this.β*b,this.uom)},a.prototype.div=function(a){return this.mul(a.inv())},a.prototype.divByScalar=function(b){return new a(this.α/b,this.x/b,this.y/b,this.β/b,this.uom)},a.prototype.__div__=function(b){if(b instanceof a)return this.div(b);if("number"==typeof b){var c=b;return this.div(new a(c,0,0,0,void 0))}},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):"number"==typeof b?new a(b,0,0,0,void 0).div(this):void 0},a.prototype.scp=function(b){var c=this.α,d=this.x,e=this.y,f=this.β,g=b.α,h=b.x,i=b.y,j=b.β,k=q["default"](c,d,e,f,g,h,i,j,0);return new a(k,0,0,0,s["default"].mul(this.uom,b.uom))},a.ext=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],j=b[2],k=b[3],l=i["default"](c,d,e,f,g,h,j,k,0),m=i["default"](c,d,e,f,g,h,j,k,1),n=i["default"](c,d,e,f,g,h,j,k,2),o=i["default"](c,d,e,f,g,h,j,k,3);return[l,m,n,o]},a.prototype.ext=function(b){var c=a.ext(this.coords,b.coords);return new a(c[0],c[1],c[2],c[3],s["default"].mul(this.uom,b.uom))},a.prototype.__wedge__=function(b){if(b instanceof a){var c=b;return this.ext(c)}if("number"==typeof b){var d=b;return this.ext(new a(d,0,0,0,void 0))}},a.prototype.__rwedge__=function(b){if(b instanceof a){var c=b;return c.ext(this)}if("number"==typeof b){var d=b;return new a(d,0,0,0,void 0).ext(this)}},a.lshift=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3],l=k["default"](c,d,e,f,g,h,i,j,0),m=k["default"](c,d,e,f,g,h,i,j,1),n=k["default"](c,d,e,f,g,h,i,j,2),o=k["default"](c,d,e,f,g,h,i,j,3);return[l,m,n,o]},a.prototype.lerp=function(){throw new Error(n["default"]("lerp").message)},a.prototype.lco=function(b){var c=a.lshift(this.coords,b.coords);return new a(c[0],c[1],c[2],c[3],s["default"].mul(this.uom,b.uom))},a.prototype.__lshift__=function(b){if(b instanceof a){var c=b;return this.lco(c)}if("number"==typeof b){var d=b;return this.lco(new a(d,0,0,0,void 0))}},a.prototype.__rlshift__=function(b){if(b instanceof a){var c=b;return c.lco(this)}if("number"==typeof b){var d=b;return new a(d,0,0,0,void 0).lco(this)}},a.rshift=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3],k=l["default"](c,d,e,f,g,h,i,j,0),m=l["default"](c,d,e,f,g,h,i,j,1),n=l["default"](c,d,e,f,g,h,i,j,2),o=l["default"](c,d,e,f,g,h,i,j,3);return[k,m,n,o]},a.prototype.rco=function(b){var c=a.rshift(this.coords,b.coords);return new a(c[0],c[1],c[2],c[3],s["default"].mul(this.uom,b.uom))},a.prototype.__rshift__=function(b){return b instanceof a?this.rco(b):"number"==typeof b?this.rco(new a(b,0,0,0,void 0)):void 0},a.prototype.__rrshift__=function(b){return b instanceof a?b.rco(this):"number"==typeof b?new a(b,0,0,0,void 0).rco(this):void 0},a.prototype.__vbar__=function(b){return b instanceof a?this.scp(b):"number"==typeof b?this.scp(new a(b,0,0,0,void 0)):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?b.scp(this):"number"==typeof b?new a(b,0,0,0,void 0).scp(this):void 0},a.prototype.pow=function(){throw new Error(n["default"]("pow").message)},a.prototype.__bang__=function(){return this.inv()},a.prototype.__pos__=function(){return this},a.prototype.neg=function(){return new a(-this.α,-this.x,-this.y,-this.β,this.uom)},a.prototype.__neg__=function(){return this.neg()},a.prototype.__tilde__=function(){return this.rev()},a.prototype.grade=function(b){switch(b){case 0:return new a(this.α,0,0,0,this.uom);case 1:return new a(0,this.x,this.y,0,this.uom);case 2:return new a(0,0,0,this.β,this.uom);default:return new a(0,0,0,0,this.uom)}},a.prototype.cos=function(){throw new Error(n["default"]("cos").message)},a.prototype.cosh=function(){throw new Error(n["default"]("cosh").message)},a.prototype.exp=function(){if(s["default"].assertDimensionless(this.uom),this.isSpinor()){var b=Math.exp(this.α),c=Math.cos(this.β),d=Math.sin(this.β);return new a(b*c,0,0,b*d)}throw new Error(n["default"]("exp("+this.toString()+")").message)},a.prototype.inv=function(){var b=this.α,c=this.x,d=this.y,e=this.β,f=[[b,c,d,-e],[c,b,e,-d],[d,-e,b,c],[e,-d,c,b]],g=[1,0,0,0],h=j["default"](f,g),i=this.uom?this.uom.inv():void 0;return new a(h[0],h[1],h[2],h[3],i)},a.prototype.isSpinor=function(){return 0===this.x&&0===this.y},a.prototype.log=function(){throw new Error(n["default"]("log").message)},a.prototype.magnitude=function(){return this.norm()},a.prototype.magnitudeSansUnits=function(){return Math.sqrt(this.squaredNormSansUnits())},a.prototype.norm=function(){return new a(this.magnitudeSansUnits(),0,0,0,this.uom)},a.prototype.quad=function(){return new a(this.squaredNormSansUnits(),0,0,0,s["default"].mul(this.uom,this.uom))},a.prototype.quadraticBezier=function(b,c,d){var e=g["default"](b,this.α,c.α,d.α),f=g["default"](b,this.x,c.x,d.x),h=g["default"](b,this.y,c.y,d.y),i=g["default"](b,this.β,c.β,d.β);return new a(e,f,h,i,this.uom)},a.prototype.squaredNorm=function(){return this.quad()},a.prototype.squaredNormSansUnits=function(){var a=this.α,b=this.x,c=this.y,d=this.β;return a*a+b*b+c*c+d*d},a.prototype.stress=function(){throw new Error(o["default"]("stress").message)},a.prototype.reflect=function(b){var c=a.fromVectorE2(b);return c.mul(this).mul(c).scale(-1)},a.prototype.rev=function(){return new a(this.α,this.x,this.y,-this.β,this.uom)},a.prototype.rotate=function(b){var c=this.x,d=this.y,e=b.α,f=b.β,g=e*e,h=f*f,i=g-h,j=2*e*f,k=g+h;return new a(k*this.α,i*c+j*d,i*d-j*c,k*this.β,this.uom)},a.prototype.sin=function(){throw new Error(n["default"]("sin").message)},a.prototype.sinh=function(){throw new Error(n["default"]("sinh").message)},a.prototype.slerp=function(){throw new Error(n["default"]("slerp").message)},a.prototype.tan=function(){return this.sin().div(this.cos())},a.prototype.isOne=function(){return 1===this.α&&0===this.x&&0===this.y&&0===this.β},a.prototype.isNaN=function(){return isNaN(this.α)||isNaN(this.x)||isNaN(this.y)||isNaN(this.β)},a.prototype.isZero=function(){return 0===this.α&&0===this.x&&0===this.y&&0===this.β},a.prototype.toStringCustom=function(a,b){var c=r["default"](this.coords,a,b);if(this.uom){var d=this.uom.toString().trim();return d?c+" "+d:c}return c},a.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return this.toStringCustom(b,["1","e1","e2","e12"])},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return this.toStringCustom(b,["1","e1","e2","e12"])},a.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return this.toStringCustom(b,["1","e1","e2","e12"])},a.prototype.toString=function(a){var b=function(b){return b.toString(a)};return this.toStringCustom(b,["1","e1","e2","e12"])},a.prototype.toStringIJK=function(){var a=function(a){return a.toString()};return this.toStringCustom(a,["1","i","j","I"])},a.copy=function(b){return b instanceof a?b:new a(b.α,b.x,b.y,b.β,void 0)},a.fromVectorE2=function(b){return b?b instanceof a?new a(0,b.x,b.y,0,b.uom):new a(0,b.x,b.y,0,void 0):void 0},a.vector=function(b,c,d){return new a(0,b,c,0,d)},a._zero=new a(0,0,0,0),a._one=new a(1,0,0,0),a._e1=new a(0,1,0,0),a._e2=new a(0,0,1,0),a._I=new a(0,0,0,1),a.kilogram=new a(1,0,0,0,s["default"].KILOGRAM),a.meter=new a(1,0,0,0,s["default"].METER),a.second=new a(1,0,0,0,s["default"].SECOND),a.coulomb=new a(1,0,0,0,s["default"].COULOMB),a.ampere=new a(1,0,0,0,s["default"].AMPERE),a.kelvin=new a(1,0,0,0,s["default"].KELVIN),a.mole=new a(1,0,0,0,s["default"].MOLE),a.candela=new a(1,0,0,0,s["default"].CANDELA),a}(),a("default",x)}}}),System.register("davinci-eight/math/extE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e);break;case 1:j=+(a*f+b*e);break;case 2:j=+(a*g+c*e);break;case 3:j=+(a*h+b*g-c*f+d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/lcoE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(a*f-c*h);break;case 2:j=+(a*g+b*h);break;case 3:j=+(a*h);break;default:throw new Error("index must be in the range [0..3]")}return+j}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(a*f+b*e-c*h+d*g);break;case 2:j=+(a*g+b*h+c*e-d*f);break;case 3:j=+(a*h+b*g-c*f+d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/rcoE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(-b*e-d*g);break;case 2:j=+(-c*e+d*f);break;case 3:j=+(d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/dotVectorE2.js",["../checks/isDefined"],function(a){function b(a,b){return c["default"](a)&&c["default"](b)?a.x*b.x+a.y*b.y:void 0}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/math/dotVectorCartesianE2.js",[],function(a){function b(a,b,c,d){return a*c+b*d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/quadVectorE2.js",["../math/dotVectorCartesianE2","../checks/isDefined","../checks/isNumber"],function(a){function b(a){if(d["default"](a)){var b=a.x,f=a.y;return e["default"](b)&&e["default"](f)?c["default"](b,f,b,f):void 0}return void 0}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/rotorFromDirectionsE2.js",["./dotVectorE2","./quadVectorE2"],function(a){function b(a,b,f){var g=d["default"](a),h=e(g),i=d["default"](b),j=e(i),k=j*h,l=c["default"](b,a),m=e(2*(i*g+k*l));return 0===m?void 0:(f=f.versor(b,a),f=f.addScalar(k),f=f.divByScalar(m),void 0)}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=Math.sqrt}}}),System.register("davinci-eight/math/scpE2.js",[],function(a){function b(a,b,c,d,e,f,g,h,i){switch(i){case 0:return a*e+b*f+c*g-d*h;case 1:return 0;case 2:return 0;case 3:return 0;default:throw new Error("index must be in the range [0..3]")}}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Geometric2.js",["./arraysEQ","../geometries/b2","../geometries/b3","./Coords","./dotVectorE2","./G2","./extE2","./gauss","../checks/isDefined","../checks/isNumber","../checks/isObject","./lcoE2","./mulE2","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../i18n/notImplemented","../i18n/notSupported","./rcoE2","./rotorFromDirectionsE2","./scpE2","./stringFromCoordinates","./wedgeXY"],function(a){function b(a){return[a.α,a.x,a.y,a.β]}function c(a){if(n["default"](a)){var b=a;return m["default"](b.x)&&m["default"](b.y)?m["default"](b.α)&&m["default"](b.β)?(console.warn("Copying GeometricE2 to Geometric2"),U.copy(b)):(console.warn("Copying VectorE2 to Geometric2"),U.fromVector(b)):m["default"](b.α)&&m["default"](b.β)?(console.warn("Copying SpinorE2 to Geometric2"),U.fromSpinor(b)):void 0}return void 0}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a}],execute:function(){A=0,B=1,C=2,D=3,E=Math.abs,F=Math.atan2,G=Math.exp,H=Math.log,I=Math.cos,J=Math.sin,K=Math.sqrt,L="←",M="→",N="↑",O="↓",P="↻",Q="↺",R=["1",[L,M],[O,N],[P,Q]],S=["1",["W","E"],["S","N"],[P,Q]],T=["1","e1","e2","I"],U=function(a){function g(){a.call(this,[0,0,0,0],!1,4)}return V(g,a),Object.defineProperty(g.prototype,"α",{get:function(){return this.coords[A]},set:function(a){this.modified=this.modified||this.coords[A]!==a,this.coords[A]=a},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"alpha",{get:function(){return this.coords[A]},set:function(a){this.modified=this.modified||this.coords[A]!==a,this.coords[A]=a},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"x",{get:function(){return this.coords[B]},set:function(a){this.modified=this.modified||this.coords[B]!==a,this.coords[B]=a},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"y",{get:function(){return this.coords[C]},set:function(a){this.modified=this.modified||this.coords[C]!==a,this.coords[C]=a},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"β",{get:function(){return this.coords[D]},set:function(a){this.modified=this.modified||this.coords[D]!==a,this.coords[D]=a},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"beta",{get:function(){return this.coords[D]},set:function(a){this.modified=this.modified||this.coords[D]!==a,this.coords[D]=a},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"xy",{get:function(){return this.coords[D]},set:function(a){this.modified=this.modified||this.coords[D]!==a,this.coords[D]=a},enumerable:!0,configurable:!0}),g.prototype.add=function(a,b){return void 0===b&&(b=1),s["default"]("M",a),r["default"]("α",b),this.α+=a.α*b,this.x+=a.x*b,this.y+=a.y*b,this.β+=a.β*b,this},g.prototype.add2=function(a,b){return s["default"]("a",a),s["default"]("b",b),this.α=a.α+b.α,this.x=a.x+b.x,this.y=a.y+b.y,this.β=a.β+b.β,this},g.prototype.addPseudo=function(a){return r["default"]("β",a),this.β+=a,this},g.prototype.addScalar=function(a){return r["default"]("α",a),this.α+=a,this},g.prototype.addVector=function(a,b){return void 0===b&&(b=1),s["default"]("v",a),r["default"]("α",b),this.x+=a.x*b,this.y+=a.y*b,this},g.prototype.adj=function(){throw new Error(t["default"]("adj").message)},g.prototype.angle=function(){return this.log().grade(2)},g.prototype.clone=function(){var a=new g;return a.copy(this),a},g.prototype.conj=function(){return this.β=-this.β,this},g.prototype.cos=function(){throw new Error(t["default"]("cos").message)},g.prototype.cosh=function(){throw new Error(t["default"]("cosh").message)},g.prototype.distanceTo=function(a){var b=this.α-a.α,c=this.x-a.x,d=this.y-a.y,e=this.β-a.β;return Math.sqrt(x["default"](b,c,d,e,b,c,d,e,0))},g.prototype.copy=function(a){return s["default"]("M",a),this.α=a.α,this.x=a.x,this.y=a.y,this.β=a.β,this},g.prototype.copyScalar=function(a){return this.zero().addScalar(a)},g.prototype.copySpinor=function(a){return s["default"]("spinor",a),this.α=a.α,this.x=0,this.y=0,this.β=a.β,this},g.prototype.copyVector=function(a){return s["default"]("vector",a),this.α=0,this.x=a.x,this.y=a.y,this.β=0,this},g.prototype.cubicBezier=function(a,b,c,d){var e=f["default"](a,this.α,b.α,c.α,d.α),g=f["default"](a,this.x,b.x,c.x,d.x),h=f["default"](a,this.y,b.y,c.y,d.y),i=f["default"](a,this.β,b.β,c.β,d.β);return this.α=e,this.x=g,this.y=h,this.β=i,this},g.prototype.normalize=function(){var a=this.magnitude();return this.α=this.α/a,this.x=this.x/a,this.y=this.y/a,this.β=this.β/a,this},g.prototype.div=function(a){return this.div2(this,a)},g.prototype.div2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β;this.copy(b).inv();var g=this.α,h=this.x,i=this.y,j=this.β;return this.α=p["default"](c,d,e,f,g,h,i,j,0),this.x=p["default"](c,d,e,f,g,h,i,j,1),this.y=p["default"](c,d,e,f,g,h,i,j,2),this.β=p["default"](c,d,e,f,g,h,i,j,3),this},g.prototype.divByScalar=function(a){return r["default"]("α",a),this.α/=a,this.x/=a,this.y/=a,this.β/=a,this},g.prototype.dual=function(a){var b=-a.β,c=+a.y,d=-a.x,e=+a.α;return this.α=b,this.x=c,this.y=d,this.β=e,this},g.prototype.equals=function(a){if(a instanceof g){var b=a;return d["default"](this.coords,b.coords)}return!1},g.prototype.exp=function(){var a=this.α,b=this.β,c=G(a),d=K(b*b),e=c*(0!==d?J(d)/d:1);return this.α=c*I(d),this.β=b*e,this},g.prototype.ext=function(a){return this.ext2(this,a)},g.prototype.ext2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β,g=b.α,h=b.x,i=b.y,k=b.β;return this.α=j["default"](c,d,e,f,g,h,i,k,0),this.x=j["default"](c,d,e,f,g,h,i,k,1),this.y=j["default"](c,d,e,f,g,h,i,k,2),this.β=j["default"](c,d,e,f,g,h,i,k,3),this},g.prototype.inv=function(){var a=this.α,b=this.x,c=this.y,d=this.β,e=[[a,b,c,-d],[b,a,d,-c],[c,-d,a,b],[d,-c,b,a]],f=[1,0,0,0],g=k["default"](e,f);return this.α=g[0],this.x=g[1],this.y=g[2],this.β=g[3],this},g.prototype.isOne=function(){return 1===this.α&&0===this.x&&0===this.y&&0===this.β},g.prototype.isZero=function(){return 0===this.α&&0===this.x&&0===this.y&&0===this.β},g.prototype.lco=function(a){return this.lco2(this,a)},g.prototype.lco2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β,g=b.α,h=b.x,i=b.y,j=b.β;return this.α=o["default"](c,d,e,f,g,h,i,j,0),this.x=o["default"](c,d,e,f,g,h,i,j,1),this.y=o["default"](c,d,e,f,g,h,i,j,2),this.β=o["default"](c,d,e,f,g,h,i,j,3),this},g.prototype.lerp=function(a,b){return s["default"]("target",a),r["default"]("α",b),this.α+=(a.α-this.α)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.β+=(a.β-this.β)*b,this},g.prototype.lerp2=function(a,b,c){return s["default"]("a",a),s["default"]("b",b),r["default"]("α",c),this.copy(a).lerp(b,c),this},g.prototype.log=function(){var a=this.α,b=this.β;return this.α=H(K(a*a+b*b)),this.x=0,this.y=0,this.β=F(b,a),this},g.prototype.magnitude=function(){return K(this.squaredNormSansUnits())},g.prototype.magnitudeSansUnits=function(){return K(this.squaredNormSansUnits())},g.prototype.mul=function(a){return this.mul2(this,a)},g.prototype.mul2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β,g=b.α,h=b.x,i=b.y,j=b.β;

return this.α=p["default"](c,d,e,f,g,h,i,j,0),this.x=p["default"](c,d,e,f,g,h,i,j,1),this.y=p["default"](c,d,e,f,g,h,i,j,2),this.β=p["default"](c,d,e,f,g,h,i,j,3),this},g.prototype.neg=function(){return this.α=-this.α,this.x=-this.x,this.y=-this.y,this.β=-this.β,this},g.prototype.norm=function(){return this.α=this.magnitudeSansUnits(),this.x=0,this.y=0,this.β=0,this},g.prototype.one=function(){return this.α=1,this.x=0,this.y=0,this.β=0,this},g.prototype.pow=function(){throw new Error(t["default"]("pow").message)},g.prototype.quad=function(){return this.α=this.squaredNormSansUnits(),this.x=0,this.y=0,this.β=0,this},g.prototype.quadraticBezier=function(a,b,c){var d=e["default"](a,this.α,b.α,c.α),f=e["default"](a,this.x,b.x,c.x),g=e["default"](a,this.y,b.y,c.y),h=e["default"](a,this.β,b.β,c.β);return this.α=d,this.x=f,this.y=g,this.β=h,this},g.prototype.rco=function(a){return this.rco2(this,a)},g.prototype.rco2=function(a,b){var c=a.α,d=a.x,e=a.y,f=a.β,g=b.α,h=b.x,i=b.y,j=b.β;return this.α=v["default"](c,d,e,f,g,h,i,j,0),this.x=v["default"](c,d,e,f,g,h,i,j,1),this.y=v["default"](c,d,e,f,g,h,i,j,2),this.β=v["default"](c,d,e,f,g,h,i,j,3),this},g.prototype.reflect=function(a){s["default"]("n",a);var b=i["default"].fromVectorE2(a),c=i["default"].copy(this),d=b.mul(c).mul(b).scale(-1);return this.copy(d),this},g.prototype.rev=function(){return this.α=this.α,this.x=this.x,this.y=this.y,this.β=-this.β,this},g.prototype.sin=function(){throw new Error(t["default"]("sin").message)},g.prototype.sinh=function(){throw new Error(t["default"]("sinh").message)},g.prototype.rotate=function(a){s["default"]("R",a);var b=this.x,c=this.y,d=a.β,e=a.α,f=e*b+d*c,g=e*c-d*b;return this.x=f*e+g*d,this.y=g*e-f*d,this},g.prototype.rotorFromDirections=function(a,b){return w["default"](a,b,this),this},g.prototype.rotorFromGeneratorAngle=function(a,b){s["default"]("B",a),r["default"]("θ",b);var c=a.β,d=b/2;return this.α=I(E(c)*d),this.x=0,this.y=0,this.β=-J(c*d),this},g.prototype.scp=function(a){return this.scp2(this,a)},g.prototype.scp2=function(a,b){return this.α=x["default"](a.α,a.x,a.y,a.β,b.α,b.x,b.y,b.β,0),this.x=0,this.y=0,this.β=0,this},g.prototype.scale=function(a){return r["default"]("α",a),this.α*=a,this.x*=a,this.y*=a,this.β*=a,this},g.prototype.slerp=function(){throw new Error(t["default"]("slerp").message)},g.prototype.stress=function(){throw new Error(u["default"]("stress").message)},g.prototype.versor=function(a,b){var c=a.x,d=a.y,e=b.x,f=b.y;return this.α=h["default"](a,b),this.x=0,this.y=0,this.β=z["default"](c,d,0,e,f,0),this},g.prototype.squaredNorm=function(){return this.squaredNormSansUnits()},g.prototype.squaredNormSansUnits=function(){var a=this.α,b=this.x,c=this.y,d=this.β;return a*a+b*b+c*c+d*d},g.prototype.sub=function(a,b){return void 0===b&&(b=1),s["default"]("M",a),r["default"]("α",b),this.α-=a.α*b,this.x-=a.x*b,this.y-=a.y*b,this.β-=a.β*b,this},g.prototype.sub2=function(a,b){return s["default"]("a",a),s["default"]("b",b),this.α=a.α-b.α,this.x=a.x-b.x,this.y=a.y-b.y,this.β=a.β-b.β,this},g.prototype.toExponential=function(a){var c=function(b){return b.toExponential(a)};return y["default"](b(this),c,g.BASIS_LABELS)},g.prototype.toFixed=function(a){var c=function(b){return b.toFixed(a)};return y["default"](b(this),c,g.BASIS_LABELS)},g.prototype.toPrecision=function(a){var c=function(b){return b.toPrecision(a)};return y["default"](b(this),c,g.BASIS_LABELS)},g.prototype.toString=function(a){var c=function(b){return b.toString(a)};return y["default"](b(this),c,g.BASIS_LABELS)},g.prototype.grade=function(a){switch(q["default"]("grade",a),a){case 0:this.x=0,this.y=0,this.β=0;break;case 1:this.α=0,this.β=0;break;case 2:this.α=0,this.x=0,this.y=0;break;default:this.α=0,this.x=0,this.y=0,this.β=0}return this},g.prototype.zero=function(){return this.α=0,this.x=0,this.y=0,this.β=0,this},g.prototype.__add__=function(a){if(a instanceof g)return g.copy(this).add(a);if("number"==typeof a)return g.scalar(a).add(this);var b=c(a);return b?b.add(this):void 0},g.prototype.__div__=function(a){return a instanceof g?g.copy(this).div(a):"number"==typeof a?g.copy(this).divByScalar(a):void 0},g.prototype.__rdiv__=function(a){return a instanceof g?g.copy(a).div(this):"number"==typeof a?g.scalar(a).div(this):void 0},g.prototype.__mul__=function(a){if(a instanceof g)return g.copy(this).mul(a);if("number"==typeof a)return g.copy(this).scale(a);var b=c(a);return b?this.__mul__(b):void 0},g.prototype.__rmul__=function(a){if(a instanceof g)return g.copy(a).mul(this);if("number"==typeof a)return g.copy(this).scale(a);var b=c(a);return b?b.mul(this):void 0},g.prototype.__radd__=function(a){if(a instanceof g)return g.copy(a).add(this);if("number"==typeof a)return g.scalar(a).add(this);var b=c(a);return b?b.add(this):void 0},g.prototype.__sub__=function(a){return a instanceof g?g.copy(this).sub(a):"number"==typeof a?g.scalar(-a).add(this):void 0},g.prototype.__rsub__=function(a){return a instanceof g?g.copy(a).sub(this):"number"==typeof a?g.scalar(a).sub(this):void 0},g.prototype.__wedge__=function(a){return a instanceof g?g.copy(this).ext(a):"number"==typeof a?g.copy(this).scale(a):void 0},g.prototype.__rwedge__=function(a){return a instanceof g?g.copy(a).ext(this):"number"==typeof a?g.copy(this).scale(a):void 0},g.prototype.__lshift__=function(a){return a instanceof g?g.copy(this).lco(a):"number"==typeof a?g.copy(this).lco(g.scalar(a)):void 0},g.prototype.__rlshift__=function(a){return a instanceof g?g.copy(a).lco(this):"number"==typeof a?g.scalar(a).lco(this):void 0},g.prototype.__rshift__=function(a){return a instanceof g?g.copy(this).rco(a):"number"==typeof a?g.copy(this).rco(g.scalar(a)):void 0},g.prototype.__rrshift__=function(a){return a instanceof g?g.copy(a).rco(this):"number"==typeof a?g.scalar(a).rco(this):void 0},g.prototype.__vbar__=function(a){return a instanceof g?g.copy(this).scp(a):"number"==typeof a?g.copy(this).scp(g.scalar(a)):void 0},g.prototype.__rvbar__=function(a){return a instanceof g?g.copy(a).scp(this):"number"==typeof a?g.scalar(a).scp(this):void 0},g.prototype.__bang__=function(){return g.copy(this).inv()},g.prototype.__tilde__=function(){return g.copy(this).rev()},g.prototype.__pos__=function(){return g.copy(this)},g.prototype.__neg__=function(){return g.copy(this).neg()},g.copy=function(a){var b=new g;return b.α=a.α,b.x=a.x,b.y=a.y,b.β=a.β,b},g.e1=function(){return g.vector(1,0)},g.e2=function(){return g.vector(0,1)},g.fromCartesian=function(a,b,c,d){var e=new g;return e.α=a,e.x=b,e.y=c,e.β=d,e},g.fromSpinor=function(a){return(new g).copySpinor(a)},g.fromVector=function(a){return l["default"](a)?(new g).copyVector(a):void 0},g.I=function(){return g.pseudo(1)},g.lerp=function(a,b,c){return g.copy(a).lerp(b,c)},g.one=function(){return g.scalar(1)},g.rotorFromDirections=function(a,b){return(new g).rotorFromDirections(a,b)},g.pseudo=function(a){return g.fromCartesian(0,0,0,a)},g.scalar=function(a){return g.fromCartesian(a,0,0,0)},g.vector=function(a,b){return g.fromCartesian(0,a,b,0)},g.zero=function(){return g.scalar(0)},g.BASIS_LABELS=T,g.BASIS_LABELS_COMPASS=S,g.BASIS_LABELS_GEOMETRIC=R,g.BASIS_LABELS_STANDARD=T,g}(g["default"]),a("default",U)}}}),System.register("davinci-eight/controls/MouseControls.js",["../math/Geometric2","../base/incLevel","../checks/mustBeObject","../core/ShareableBase"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},g=[65,83,68],h=function(a){function e(c){var e=this;a.call(this),this.enabled=!0,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.minDistance=0,this.maxDistance=1/0,this.mode=f.NONE,this.prevMode=f.NONE,this.moveCurr=new b["default"],this.movePrev=new b["default"],this.zoomStart=new b["default"],this.zoomEnd=new b["default"],this.panStart=new b["default"],this.panEnd=new b["default"],this.screenLoc=new b["default"],this.circleExt=new b["default"],this.screenExt=new b["default"],this.mouseOnCircle=new b["default"],this.mouseOnScreen=new b["default"],this.setLoggingName("MouseControls"),this.wnd=d["default"]("wnd",c),this.mousedown=function(a){e.enabled&&(a.preventDefault(),a.stopPropagation(),e.mode===f.NONE&&(e.mode=a.button),e.mode!==f.ROTATE||e.noRotate?e.mode!==f.ZOOM||e.noZoom?e.mode!==f.PAN||e.noPan||(e.updateMouseOnScreen(a),e.panStart.copy(e.mouseOnScreen),e.panEnd.copy(e.mouseOnScreen)):(e.updateMouseOnScreen(a),e.zoomStart.copy(e.mouseOnScreen),e.zoomEnd.copy(e.mouseOnScreen)):(e.updateMouseOnCircle(a),e.moveCurr.copy(e.mouseOnCircle),e.movePrev.copy(e.mouseOnCircle)),e.wnd.document.addEventListener("mousemove",e.mousemove,!1),e.wnd.document.addEventListener("mouseup",e.mouseup,!1))},this.mousemove=function(a){e.enabled&&(a.preventDefault(),a.stopPropagation(),e.mode!==f.ROTATE||e.noRotate?e.mode!==f.ZOOM||e.noZoom?e.mode!==f.PAN||e.noPan||(e.updateMouseOnScreen(a),e.panEnd.copy(e.mouseOnScreen)):(e.updateMouseOnScreen(a),e.zoomEnd.copy(e.mouseOnScreen)):(e.movePrev.copy(e.moveCurr),e.updateMouseOnCircle(a),e.moveCurr.copy(e.mouseOnCircle)))},this.mouseup=function(a){e.enabled&&(a.preventDefault(),a.stopPropagation(),e.mode=f.NONE,e.wnd.document.removeEventListener("mousemove",e.mousemove),e.wnd.document.removeEventListener("mouseup",e.mouseup))},this.mousewheel=function(a){if(e.enabled){a.preventDefault(),a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=a.detail/3),e.zoomStart.y+=.01*b}},this.keydown=function(a){e.enabled&&(e.wnd.removeEventListener("keydown",e.keydown,!1),e.prevMode=e.mode,e.mode===f.NONE&&(a.keyCode!==g[f.ROTATE]||e.noRotate?a.keyCode!==g[f.ZOOM]||e.noRotate?a.keyCode!==g[f.PAN]||e.noRotate||(e.mode=f.PAN):e.mode=f.ZOOM:e.mode=f.ROTATE))},this.keyup=function(){e.enabled&&(e.mode=e.prevMode,e.wnd.addEventListener("keydown",e.keydown,!1))},this.contextmenu=function(a){a.preventDefault()}}return i(e,a),e.prototype.destructor=function(b){this.domElement&&this.unsubscribe(),a.prototype.destructor.call(this,c["default"](b))},e.prototype.subscribe=function(a){this.domElement&&this.unsubscribe(),this.domElement=a,this.domElement.addEventListener("contextmenu",this.contextmenu,!1),this.domElement.addEventListener("mousedown",this.mousedown,!1),this.domElement.addEventListener("mousewheel",this.mousewheel,!1),this.domElement.addEventListener("DOMMouseScroll",this.mousewheel,!1),this.wnd.addEventListener("keydown",this.keydown,!1),this.wnd.addEventListener("keyup",this.keydown,!1),this.handleResize()},e.prototype.unsubscribe=function(){this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu,!1),this.domElement.removeEventListener("mousedown",this.mousedown,!1),this.domElement.removeEventListener("mousewheel",this.mousewheel,!1),this.domElement.removeEventListener("DOMMouseScroll",this.mousewheel,!1),this.domElement=void 0,this.wnd.removeEventListener("keydown",this.keydown,!1),this.wnd.removeEventListener("keyup",this.keydown,!1))},e.prototype.reset=function(){this.mode=f.NONE},e.prototype.updateMouseOnCircle=function(a){this.mouseOnCircle.x=a.pageX,this.mouseOnCircle.y=-a.pageY,this.mouseOnCircle.sub(this.screenLoc).scale(2).sub(this.circleExt).divByScalar(this.circleExt.x)},e.prototype.updateMouseOnScreen=function(a){this.mouseOnScreen.x=a.pageX,this.mouseOnScreen.y=-a.pageY,this.mouseOnScreen.sub(this.screenLoc),this.mouseOnScreen.x/=this.circleExt.x,this.mouseOnScreen.y/=this.circleExt.y},e.prototype.handleResize=function(){var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screenLoc.x=a.left+window.pageXOffset-b.clientLeft,this.screenLoc.y=-(a.top+window.pageYOffset-b.clientTop),this.circleExt.x=a.width,this.circleExt.y=-a.height,this.screenExt.x=a.width,this.screenExt.y=a.height},e}(e["default"]),a("default",h)}}}),System.register("davinci-eight/math/Vector2.js",["../math/Coords","../geometries/b2","../geometries/b3","../i18n/notImplemented","./randomRange","../math/stringFromCoordinates"],function(a){var b,c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=Math.sqrt,i=0,j=1,k=function(a){function b(b,c){void 0===b&&(b=[0,0]),void 0===c&&(c=!1),a.call(this,b,c,2)}return l(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[i]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[i]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[j]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[j]=a},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},b.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=a.elements;return this.x=d[0]*b+d[2]*c,this.y=d[1]*b+d[3]*c,this},b.prototype.clone=function(){return new b([this.x,this.y])},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},b.prototype.cubicBezier=function(a,b,c,e){var f=d["default"](a,this.x,b.x,c.x,e.x),g=d["default"](a,this.y,b.y,c.y,e.y);return this.x=f,this.y=g,this},b.prototype.distanceTo=function(a){return h(this.quadranceTo(a))},b.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},b.prototype.scale=function(a){return this.x*=a,this.y*=a,this},b.prototype.divByScalar=function(a){return this.x/=a,this.y/=a,this},b.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},b.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},b.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},b.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},b.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},b.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},b.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},b.prototype.dot=function(a){return this.x*a.x+this.y*a.y},b.prototype.magnitude=function(){return h(this.squaredNorm())},b.prototype.normalize=function(){return this.divByScalar(this.magnitude())},b.prototype.squaredNorm=function(){return this.x*this.x+this.y*this.y},b.prototype.quadranceTo=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},b.prototype.quadraticBezier=function(a,b,d){var e=c["default"](a,this.x,b.x,d.x),f=c["default"](a,this.y,b.y,d.y);return this.x=e,this.y=f,this},b.prototype.reflect=function(){throw new Error(e["default"]("reflect").message)},b.prototype.rotate=function(a){var b=this.x,c=this.y,d=a.α,e=a.β,f=d*d-e*e,g=2*d*e;return this.x=f*b+g*c,this.y=f*c-g*b,this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},b.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},b.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},b.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this},b.prototype.slerp=function(){throw new Error(e["default"]("slerp").message)},b.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return g["default"](this.coords,b,["e1","e2"])},b.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return g["default"](this.coords,b,["e1","e2"])},b.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return g["default"](this.coords,b,["e1","e2"])},b.prototype.toString=function(a){var b=function(b){return b.toString(a)};return g["default"](this.coords,b,["e1","e2"])},b.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},b.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},b.prototype.zero=function(){return this.x=0,this.y=0,this},b.copy=function(a){return b.vector(a.x,a.y)},b.lerp=function(a,c,d){return b.copy(c).sub(a).scale(d).add(a)},b.random=function(){var a=f["default"](-1,1),c=f["default"](-1,1);return b.vector(a,c).normalize()},b.vector=function(a,c){return new b([a,c])},b.zero=function(){return b.vector(0,0)},b}(b["default"]),a("default",k)}}}),System.register("davinci-eight/controls/TrackballControls.js",["../math/Geometric3","./MouseControls","../checks/mustBeObject","../math/Vector2","../math/Vector3"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function c(c,g){void 0===g&&(g=window),a.call(this,g),this.rotateSpeed=6,this.zoomSpeed=4,this.panSpeed=1,this.eye=new f["default"],this.look=new b["default"],this.moveDirection=new f["default"],this.eyeDirection=new f["default"],this.objectUpDirection=new f["default"],this.objectSidewaysDirection=new f["default"],this.axis=new f["default"],this.rotor=new b["default"],this.mouseChange=new e["default"],this.pan=new f["default"],this.objectUp=new f["default"],this.setLoggingName("TrackballControls"),d["default"]("camera",c),this.camera=c,this.target0=this.look.clone(),this.position0=this.camera.position.clone(),this.up0=this.camera.up.clone(),this.update()}return h(c,a),c.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},c.prototype.reset=function(){this.look.copy(this.target0),this.camera.position.copy(this.position0),this.camera.up.copy(this.up0),this.eye.copy(this.camera.position).sub(this.look),this.camera.look.copy(this.look),a.prototype.reset.call(this)},c.prototype.update=function(){this.eye.copy(this.camera.position).sub(this.look),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.camera.position.copy(this.look).add(this.eye),this.checkDistances(),this.camera.look.copy(this.look)},c.prototype.rotateCamera=function(){this.moveDirection.setXYZ(this.moveCurr.x-this.movePrev.x,this.moveCurr.y-this.movePrev.y,0);var a=this.moveDirection.magnitude();a&&(this.eye.copy(this.camera.position).sub(this.look),this.eyeDirection.copy(this.eye).normalize(),this.objectUpDirection.copy(this.camera.up).normalize(),this.objectSidewaysDirection.copy(this.objectUpDirection).cross(this.eyeDirection),this.objectUpDirection.scale(this.moveCurr.y-this.movePrev.y),this.objectSidewaysDirection.scale(this.moveCurr.x-this.movePrev.x),this.moveDirection.copy(this.objectUpDirection).add(this.objectSidewaysDirection).normalize(),this.axis.copy(this.moveDirection).cross(this.eyeDirection),a*=this.rotateSpeed,this.rotor.rotorFromAxisAngle(this.axis,a),this.eye.rotate(this.rotor),this.camera.up.rotate(this.rotor)),this.movePrev.copy(this.moveCurr)},c.prototype.zoomCamera=function(){var a=1+(this.zoomEnd.y-this.zoomStart.y)*this.zoomSpeed;1!==a&&a>0&&(this.eye.scale(a),this.zoomStart.copy(this.zoomEnd))},c.prototype.panCamera=function(){this.mouseChange.copy(this.panEnd).sub(this.panStart),this.mouseChange.squaredNorm()&&(this.mouseChange.scale(this.eye.magnitude()*this.panSpeed),this.pan.copy(this.eye).cross(this.camera.up).normalize().scale(this.mouseChange.x),this.objectUp.copy(this.camera.up).normalize().scale(this.mouseChange.y),this.pan.add(this.objectUp),this.camera.position.add(this.pan),this.look.addVector(this.pan),this.panStart.copy(this.panEnd))},c.prototype.checkDistances=function(){},c}(c["default"]),a("default",g)}}}),System.register("davinci-eight/visual/World.js",["../core/Color","../facets/AmbientLight","../base/incLevel","../i18n/readOnly","../core/ShareableBase"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function f(d,e,f,g){a.call(this),this._ambientLight=new c["default"](b["default"].fromRGB(.3,.3,.3)),this.setLoggingName("World"),d.addRef(),this.renderer=d,e.addRef(),this.drawList=e,this.drawList.subscribe(d,!0),this._ambients=f,this._ambients.push(this._ambientLight),g.addRef(),this._controls=g}return h(f,a),f.prototype.destructor=function(b){this.controls.release(),this.drawList.unsubscribe(!0),this.drawList.release(),this.renderer.release(),a.prototype.destructor.call(this,d["default"](b))},Object.defineProperty(f.prototype,"ambients",{get:function(){return this._ambients},set:function(){throw new Error(e["default"]("ambients").message)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"ambientLight",{get:function(){return this._ambientLight},set:function(){throw new Error(e["default"]("ambientLight").message)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canvas",{get:function(){return this.renderer.canvas},set:function(){throw new Error(e["default"]("canvas").message)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"controls",{get:function(){return this._controls},set:function(){throw new Error(e["default"]("controls").message)},enumerable:!0,configurable:!0}),f.prototype.add=function(a){this.drawList.add(a)},f}(f["default"]),a("default",g)}}}),System.register("davinci-eight/visual/bootstrap.js",["../core/Color","../math/R3","../facets/DirectionalLight","../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeFunction","../checks/mustBeNumber","../checks/mustBeObject","../checks/mustBeString","./DrawList","../facets/PerspectiveCamera","../core/refChange","../controls/TrackballControls","./World","../core/Engine"],function(a){function b(a,b,r){function s(a){y=window.requestAnimationFrame(s),t.clear(),z.update(),w.direction.copy(x.look).sub(x.position);try{b(a)}catch(c){window.cancelAnimationFrame(y),console.warn(c)}u.draw(v)}void 0===r&&(r={}),k["default"]("canvasId",a),h["default"]("animate",b),j["default"]("options",r),r.height=f["default"](r.height)?i["default"]("options.height",r.height):void 0,r.memcheck=f["default"](r.memcheck)?g["default"]("options.memcheck",r.memcheck):!0,r.onload=f["default"](r.onload)?h["default"]("options.onload",r.onload):void 0,r.onunload=f["default"](r.onunload)?h["default"]("options.onunload",r.onunload):void 0,r.width=f["default"](r.width)?i["default"]("options.width",r.width):void 0,r.memcheck&&n["default"]("start","bootstrap");var t=new q["default"];t.clearColor(.1,.1,.1,1);var u=new l["default"](t),v=[],w=new e["default"](d["default"].e3.neg(),c["default"].white);v.push(w);var x=new m["default"](45*Math.PI/180,1,.1,1e3);x.position.setXYZ(0,0,7),x.look.setXYZ(0,0,0),x.up.setXYZ(0,1,0),v.push(x);var y,z=new o["default"](x),A=new p["default"](t,u,v,z);return window.onload=function(){var b=document.getElementById(a);b.height=f["default"](r.height)?r.height:600,b.width=f["default"](r.width)?r.width:600,t.start(b),z.subscribe(A.canvas),z.rotateSpeed=4,r.onload&&r.onload(),y=window.requestAnimationFrame(s)},window.onunload=function(){r.onunload&&r.onunload(),z.release(),u.release(),t.release(),r.memcheck&&(n["default"]("stop","onunload"),n["default"]("dump","onunload"))},A}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a}],execute:function(){}}}),System.register("davinci-eight/visual/SingleViewApp.js",["../base/AnimationApp","../core/Scene","./Viewport"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c){void 0===c&&(c=window),a.call(this,b,c),this.view=new d["default"](this.engine)}return f(b,a),b.prototype.initialize=function(){a.prototype.initialize.call(this);var b=this.view;b.setPortal(0,0,this.canvas.width,this.canvas.height);var d=new c["default"](this.engine);try{b.scene=d}finally{d.release()}},b.prototype.draw=function(){this.view.draw()},b.prototype.destructor=function(){this.view.release(),a.prototype.destructor.call(this)},b}(b["default"]),a("default",e)}}}),System.register("davinci-eight/utils/animation.js",["../checks/expectArg"],function(a){function b(){}function c(a){if(a){var b="Exception raised during animate function: "+a;console.warn(b)}}function d(){return!1}function e(a,e){void 0===e&&(e={});var g,h,i=1,j=2,k=3,l=f["default"]("options.window",e.window||window).toNotBeNull().value,m=f["default"]("options.setUp",e.setUp||b).value,n=f["default"]("options.tearDown",e.tearDown||c).value,o=f["default"]("options.terminate",e.terminate||d).toNotBeNull().value,p=!1,q=0,r=1e3,s=null,t=i,u=function(b){if(g&&(q=q+b-g),g=b,p||o(q/r)){p=!1,l.cancelAnimationFrame(s),w.isRunning?(t=k,g=void 0):console.error("stopSignal received while not running."),l.document.removeEventListener("keydown",v,!1);try{n(h)}catch(c){console.warn("Exception raised during tearDown function: "+c)}}else{s=l.requestAnimationFrame(u);try{a(q/r)}catch(c){h=c,p=!0}}},v=function(a){27===a.keyCode&&(p=!0,a.preventDefault())},w={start:function(){if(w.isRunning)throw new Error("The `start` method may only be called when not running.");m(),l.document.addEventListener("keydown",v,!1),t=j,s=l.requestAnimationFrame(u)},stop:function(){if(!w.isRunning)throw new Error("The `stop` method may only be called when running.");p=!0},reset:function(){if(!w.isPaused)throw new Error("The `reset` method may only be called when paused.");g=void 0,q=0,t=i},get time(){return q/r},lap:function(){if(!w.isRunning)throw new Error("The `lap` method may only be called when running.")},get isRunning(){return t===j},get isPaused(){return t===k}};return w}var f;return a("default",e),{setters:[function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/checks/isFunction.js",[],function(a){function b(a){return"function"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeFunction.js",["../checks/mustSatisfy","../checks/isFunction"],function(a){function b(){return"be a function"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/mustBeUndefined.js",["../checks/mustSatisfy","../checks/isUndefined"],function(a){function b(){return"be 'undefined'"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/base/BrowserApp.js",["../checks/isDefined","../checks/isFunction","../checks/isUndefined","../collections/ShareableArray","../checks/mustBeFunction","../checks/mustBeObject","../checks/mustBeUndefined","../core/refChange"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(a){var c=this;void 0===a&&(a=window),i["default"]("quiet"),i["default"]("start"),this.window=a,this.domLoaded=function(){c.window.document.removeEventListener("DOMContentLoaded",c.domLoaded),c.domLoaded=void 0,c.shutDown=function(){a.removeEventListener("unload",c.shutDown),c.shutDown=void 0,h["default"]("shutDown",c.shutDown),h["default"]("domLoaded",c.domLoaded),c.destructor(),b["default"](c.managed)&&(console.warn("You must call super.destructor() as the last statement in your BroswerApp-derived class."),c.managed.release(),c.managed=void 0)},g["default"]("window",c.window),f["default"]("shutDown",c.shutDown),h["default"]("domLoaded",c.domLoaded),c.window.addEventListener("unload",c.shutDown),c.initialize()},g["default"]("window",this.window),h["default"]("shutDown",this.shutDown),f["default"]("domLoaded",this.domLoaded),a.document.addEventListener("DOMContentLoaded",this.domLoaded)}return a.prototype.isWaiting=function(){return c["default"](this.domLoaded)},a.prototype.isRunning=function(){return c["default"](this.shutDown)},a.prototype.isZombie=function(){return d["default"](this.shutDown)&&d["default"](this.domLoaded)},a.prototype.manage=function(a){if(!this.managed)throw new Error("You must call super.initialize() as the first statement in your BroswerApp-derived initialize method.");this.managed.pushWeakRef(a)},a.prototype.initialize=function(){d["default"](this.managed)&&(this.managed=new e["default"])},a.prototype.destructor=function(){this.managed&&(this.managed.release(),this.managed=void 0),i["default"]("stop"),i["default"]("dump")},a}(),a("default",j)}}}),System.register("davinci-eight/utils/getCanvasElementById.js",["../checks/mustBeString","../checks/mustBeObject"],function(a){function b(a,b){void 0===b&&(b=window.document),c["default"]("elementId",a),d["default"]("document",b);var e=b.getElementById(a);if(e instanceof HTMLCanvasElement)return e;throw new Error(a+" is not an HTMLCanvasElement.")}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/utils/exists.js",[],function(a){function b(a){return!(void 0===a||null===a)}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/utils/isBrowser.js",[],function(a){function b(){return"object"==typeof window&&"object"==typeof document}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/utils/getDimensions.js",["./exists","./isBrowser"],function(a){function b(a,b){var e=/\d+(\.\d*)?px/;if(!d["default"]()||null===a)return{width:500,height:500};var f=b.getElementById(a);if(!c["default"](f))throw new Error("\nHTML container element '"+a+"' not found.");var g=f.style.display;if("none"!==g&&null!==g){if(f.clientWidth>0&&f.clientHeight>0)return{width:f.clientWidth,height:f.clientHeight};var h=window.getComputedStyle?window.getComputedStyle(f):f.style;return{width:e.test(h.width)?parseFloat(h.width):0,height:e.test(h.height)?parseFloat(h.height):0}}var i=f.style,j=i.visibility,k=i.position,l=i.display;i.visibility="hidden",i.position="absolute",i.display="block";var m=f.clientWidth,n=f.clientHeight;return i.display=l,i.position=k,i.visibility=j,{width:m,height:n}}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/base/EngineApp.js",["./BrowserApp","../core/Engine","../utils/getCanvasElementById","../utils/getDimensions","../checks/mustBeNumber","../checks/mustBeString"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,d){void 0===d&&(d=window),
a.call(this,d),this.engine=new c["default"],this.canvasId=g["default"]("canvasId",b)}return i(b,a),b.prototype.destructor=function(){this.engine&&(this.engine.stop(),this.engine.release(),this.engine=void 0),a.prototype.destructor.call(this)},b.prototype.clear=function(){this.engine.clear()},b.prototype.initialize=function(){a.prototype.initialize.call(this);var b=this.window.document;if(this.canvas=d["default"](this.canvasId,b),!this.canvas)throw new Error(this.canvasId+" must be the elementId of a canvas element.");var c=e["default"](this.canvasId,b);this.canvas.width=f["default"]("canvas.width",c.width),this.canvas.height=f["default"]("canvas.height",c.height),this.engine.start(this.canvas)},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/base/AnimationApp.js",["../utils/animation","./EngineApp"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(c,d){var e=this;void 0===d&&(d=window),a.call(this,c,d);var f={};f.window=this.window;var g=function(a){e.animate(a)};this.animation=b["default"](g,f)}return e(c,a),c.prototype.destructor=function(){a.prototype.destructor.call(this)},c.prototype.initialize=function(){a.prototype.initialize.call(this)},c.prototype.animate=function(){throw new Error("derived class must implement the protected animate(time: number): void method.")},c.prototype.start=function(){this.animation.isRunning||this.animation.start()},c.prototype.stop=function(){this.animation.isRunning&&this.animation.stop()},c.prototype.reset=function(){this.animation.isPaused&&this.animation.reset()},c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/core/cleanUp.js",[],function(a){function b(a,b){a&&(a.isContextLost()?b.contextLost():b.contextFree(a))}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/ShareableContextConsumer.js",["./cleanUp","./Engine","../base/incLevel","../checks/isUndefined","../checks/isNull","../checks/mustBeBoolean","../checks/mustBeObject","../i18n/readOnly","./ShareableBase"],function(a){var b,c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(a){function j(b){if(a.call(this),this.setLoggingName("ShareableContextConsumer"),b instanceof c["default"])this.subscribe(b,!1);else if(!f["default"](b)&&!e["default"](b))throw new Error("engine must be an Engine or null or undefined. typeof engine => "+typeof b)}return l(j,a),j.prototype.destructor=function(b){this.unsubscribe(!1),a.prototype.destructor.call(this,d["default"](b))},j.prototype.subscribe=function(a,b){a=h["default"]("engine",a),b=g["default"]("synchronize",b),this.engine?this.engine!==a&&(this.unsubscribe(b),this.subscribe(a,b)):(a.addRef(),this.engine=a,a.addContextListener(this),b&&a.synchronize(this))},j.prototype.synchUp=function(){var a=this.engine;a&&a.synchronize(this)},j.prototype.cleanUp=function(){b["default"](this.contextProvider,this)},j.prototype.unsubscribe=function(a){a=g["default"]("synchronize",a),this.engine&&(a&&b["default"](this.contextProvider,this),this.engine.removeContextListener(this),this.engine.release(),this.engine=void 0)},j.prototype.contextFree=function(){this.contextProvider&&(this.contextProvider.release(),this.contextProvider=void 0)},j.prototype.contextGain=function(a){this.contextProvider!==a&&(this.contextProvider&&(this.contextProvider.release(),this.contextProvider=void 0),a.addRef(),this.contextProvider=a)},j.prototype.contextLost=function(){this.contextProvider&&(this.contextProvider.release(),this.contextProvider=void 0)},Object.defineProperty(j.prototype,"gl",{get:function(){return this.contextProvider?this.contextProvider.gl:void 0},set:function(){throw new Error(i["default"]("gl").message)},enumerable:!0,configurable:!0}),j}(j["default"]),a("default",k)}}}),System.register("davinci-eight/core/Scene.js",["../collections/ShareableArray","../base/incLevel","../checks/mustBeObject","../core/ShareableBase","../core/ShareableContextConsumer"],function(a){function b(a){e["default"]("drawable",a);var b=new c["default"]([]),d=a.geometry;if(d.isLeaf()){var f=new h(d,a);b.pushWeakRef(f)}else for(var g=d.partsLength,i=0;g>i;i++){var j=d.getPart(i),f=new h(j,a);j.release(),b.pushWeakRef(f)}return d.release(),b}var c,d,e,f,g,h,i,j=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,c){a.call(this),this.setLoggingName("ScenePart"),this._geometry=b,this._geometry.addRef(),this._drawable=c,this._drawable.addRef()}return j(b,a),b.prototype.destructor=function(b){this._geometry.release(),this._drawable.release(),this._geometry=void 0,this._drawable=void 0,a.prototype.destructor.call(this,d["default"](b))},b.prototype.draw=function(a){if(this._drawable.visible){var b=this._drawable.material;if(b.use(),a)for(var c=a.length,d=0;c>d;d++){var e=a[d];e.setUniforms(b)}this._drawable.setUniforms(),this._geometry.draw(b),b.release()}},b}(f["default"]),i=function(a){function d(b){a.call(this,b),this.setLoggingName("Scene"),e["default"]("engine",b),this._drawables=new c["default"]([]),this._parts=new c["default"]([]),this.synchUp()}return j(d,a),d.prototype.destructor=function(b){this.cleanUp(),this._drawables.release(),this._parts.release(),a.prototype.destructor.call(this,b+1)},d.prototype.add=function(a){e["default"]("drawable",a),this._drawables.push(a);for(var c=b(a),d=c.length,f=0;d>f;f++){var g=c.get(f);this._parts.push(g),g.release()}c.release(),this.synchUp()},d.prototype.contains=function(a){return e["default"]("drawable",a),this._drawables.indexOf(a)>=0},d.prototype.draw=function(a){for(var b=this._parts,c=b.length,d=0;c>d;d++)b.getWeakRef(d).draw(a)},d.prototype.find=function(a){return this._drawables.find(a)},d.prototype.findOne=function(a){return this._drawables.findOne(a)},d.prototype.findOneByName=function(a){return this.findOne(function(b){return b.name===a})},d.prototype.findByName=function(a){return this.find(function(b){return b.name===a})},d.prototype.remove=function(a){e["default"]("drawable",a);var b=this._drawables.indexOf(a);b>=0&&this._drawables.splice(b,1).release()},d.prototype.contextFree=function(b){for(var c=0;c<this._drawables.length;c++){var d=this._drawables.getWeakRef(c);d.contextFree(b)}a.prototype.contextFree.call(this,b)},d.prototype.contextGain=function(b){for(var c=0;c<this._drawables.length;c++){var d=this._drawables.getWeakRef(c);d.contextGain(b)}a.prototype.contextGain.call(this,b)},d.prototype.contextLost=function(){for(var b=0;b<this._drawables.length;b++){var c=this._drawables.getWeakRef(b);c.contextLost()}a.prototype.contextLost.call(this)},d}(g["default"]),a("default",i)}}}),System.register("davinci-eight/facets/AmbientLight.js",["../core/Color","../checks/mustBeArray","../checks/mustBeNumber","../checks/mustBeObject","../checks/mustBeString","../core/GraphicsProgramSymbols"],function(a){function b(){return i}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i="AmbientLight",j=function(){function a(a){f["default"]("color",a),this.color=c["default"].white.clone(),this.color.r=e["default"]("color.r",a.r),this.color.g=e["default"]("color.g",a.g),this.color.b=e["default"]("color.b",a.b)}return a.prototype.getProperty=function(){return void 0},a.prototype.setProperty=function(a,c){return g["default"]("name",a,b),d["default"]("value",c,b),this},a.prototype.setUniforms=function(a){var b=this.color;a.uniform3f(h["default"].UNIFORM_AMBIENT_LIGHT,b.r,b.g,b.b)},a}(),a("default",j)}}}),System.register("davinci-eight/math/clamp.js",["../checks/mustBeNumber"],function(a){function b(a,b,d){return c["default"]("x",a),c["default"]("min",b),c["default"]("max",d),b>a?b:a>d?d:a}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/core/principalAngle.js",[],function(a){function b(a){return a>2*Math.PI?b(a-2*Math.PI):0>a?b(a+2*Math.PI):a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/Color.js",["../math/clamp","../math/Coords","../config","../core/ErrorMode","../checks/isDefined","../checks/mustBeArray","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNumber","./principalAngle"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=0,m=1,n=2,o=function(a){function c(b,c,d){a.call(this,[b,c,d],!1,3),h["default"]("r",b,0),i["default"]("r",b,1),h["default"]("g",c,0),i["default"]("g",c,1),h["default"]("b",d,0),i["default"]("b",d,1)}return p(c,a),Object.defineProperty(c.prototype,"r",{get:function(){return this.coords[l]},set:function(a){this.coords[l]=b["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"g",{get:function(){return this.coords[m]},set:function(a){this.coords[m]=b["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"b",{get:function(){return this.coords[n]},set:function(a){this.coords[n]=b["default"](a,0,1)},enumerable:!0,configurable:!0}),c.prototype.add=function(){return this},c.prototype.add2=function(){return this},c.prototype.applyMatrix=function(){return this},c.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},c.prototype.clone=function(){return new c(this.r,this.g,this.b)},c.prototype.copy=function(a){return f["default"](a)?(this.r=a.r,this.g=a.g,this.b=a.b,this):(this.r=Math.random(),this.g=Math.random(),this.b=Math.random(),void 0)},c.prototype.divByScalar=function(){return this},c.prototype.lerp=function(a,b){return this.r+=(a.r-this.r)*b,this.g+=(a.g-this.g)*b,this.b+=(a.b-this.b)*b,this},Object.defineProperty(c.prototype,"luminance",{get:function(){return c.luminance(this.r,this.g,this.b)},enumerable:!0,configurable:!0}),c.prototype.neg=function(){return this},c.prototype.reflect=function(){return this},c.prototype.rotate=function(){return this},c.prototype.scale=function(){return this},c.prototype.slerp=function(){return this},c.prototype.stress=function(){return this},c.prototype.sub=function(){return this},c.prototype.sub2=function(){return this},c.prototype.toExponential=function(){return this.toString()},c.prototype.toFixed=function(){return this.toString()},c.prototype.toPrecision=function(){return this.toString()},c.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+")"},c.prototype.zero=function(){return this},c.copy=function(a){return new c(a.r,a.g,a.b)},c.luminance=function(a,b,c){j["default"]("r",a),j["default"]("g",b),j["default"]("b",c);var d=Math.pow,e=2.2;return.2126*d(a,e)+.7152*d(c,e)+.0722*d(c,e)},c.fromCoords=function(a){g["default"]("coords",a);var b=j["default"]("r",a[l]),d=j["default"]("g",a[m]),e=j["default"]("b",a[n]);return new c(b,d,e)},c.fromHSL=function(a,b,d){function e(a,b,e){var g=d-.5*f;return new c(a+g,b+g,e+g)}j["default"]("H",a),j["default"]("S",b),j["default"]("L",d);var f=(1-Math.abs(2*d-1))*b,g=k["default"](a)/Math.PI*3%6,h=f*(1-Math.abs(g%2-1));return g>=0&&1>g?e(f,h,0):g>=1&&2>g?e(h,f,0):g>=2&&3>g?e(0,f,f*(g-2)):g>=3&&4>g?e(0,f*(4-g),f):g>=4&&5>g?e(h,0,f):g>=5&&6>g?e(f,0,h):e(0,0,0)},c.fromRGB=function(a,d,e){return j["default"]("r",a),j["default"]("g",d),j["default"]("b",e),new c(b["default"](a,0,1),b["default"](d,0,1),b["default"](e,0,1))},c.isInstance=function(a){return a instanceof c},c.lerp=function(a,d,e){return c.copy(a).lerp(d,b["default"](e,0,1))},c.mustBe=function(a,b){if(c.isInstance(b))return b;switch(d["default"].errorMode){case e["default"].IGNORE:return c.random();case e["default"].WARNME:return console.warn(a+" must be a Color."),c.random();default:throw new Error(a+" must be a Color.")}},c.random=function(){return c.fromRGB(Math.random(),Math.random(),Math.random())},c.black=new c(0,0,0),c.blue=new c(0,0,1),c.green=new c(0,1,0),c.cyan=new c(0,1,1),c.red=new c(1,0,0),c.magenta=new c(1,0,1),c.yellow=new c(1,1,0),c.white=new c(1,1,1),c.gray=new c(.5,.5,.5),c}(c["default"]),a("default",o)}}}),System.register("davinci-eight/facets/DirectionalLight.js",["../core/Color","../checks/mustBeObject","../checks/mustBeString","../core/GraphicsProgramSymbols","../math/R3","../math/Vector3"],function(a){function b(){return i}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i="DirectionalLight",j=function(){function a(a,b){void 0===a&&(a=g["default"].e3.neg()),void 0===b&&(b=c["default"].white),d["default"]("direction",a),d["default"]("color",b),this._direction=h["default"].copy(a).normalize(),this._color=c["default"].copy(b)}return Object.defineProperty(a.prototype,"color",{get:function(){return this._color},set:function(a){this._color.copy(c["default"].mustBe("color",a))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"direction",{get:function(){return this._direction},set:function(b){if(!h["default"].isInstance(b))throw new Error(a.PROP_DIRECTION+" must be a Vector3.");this._direction.copy(b)},enumerable:!0,configurable:!0}),a.prototype.getProperty=function(c){switch(e["default"]("name",c,b),c){case a.PROP_COLOR:return this._color.coords;case a.PROP_DIRECTION:return this._direction.coords;default:console.warn("unknown property: "+c)}},a.prototype.setProperty=function(c,f){switch(e["default"]("name",c,b),d["default"]("value",f,b),c){case a.PROP_COLOR:this._color.coords=f;break;case a.PROP_DIRECTION:this._direction.coords=f;break;default:console.warn("unknown property: "+c)}return this},a.prototype.setColor=function(a){return d["default"]("color",a),this._color.copy(a),this},a.prototype.setDirection=function(a){return d["default"]("direction",a),this._direction.copy(a).normalize(),this},a.prototype.setUniforms=function(a){var b=this._direction;a.uniform3f(f["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION,b.x,b.y,b.z);var c=this.color;a.uniform3f(f["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR,c.r,c.g,c.b)},a.PROP_COLOR="color",a.PROP_DIRECTION="direction",a}(),a("default",j)}}}),System.register("davinci-eight/commands/EIGHTLogger.js",["../config","../core/ShareableBase"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(){a.call(this),this.setLoggingName("EIGHTLogger")}return e(c,a),c.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},c.prototype.contextFree=function(){},c.prototype.contextGain=function(){console.log(b["default"].NAMESPACE+" "+b["default"].VERSION+" ("+b["default"].GITHUB+") "+b["default"].LAST_MODIFIED)},c.prototype.contextLost=function(){},Object.defineProperty(c.prototype,"name",{get:function(){return this._type},enumerable:!0,configurable:!0}),c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/core/DrawMode.js",[],function(a){var b;return{setters:[],execute:function(){!function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_STRIP=2]="LINE_STRIP",a[a.TRIANGLES=3]="TRIANGLES",a[a.TRIANGLE_STRIP=4]="TRIANGLE_STRIP"}(b||(b={})),a("default",b)}}}),System.register("davinci-eight/core/drawModeToGL.js",["./DrawMode"],function(a){function b(a,b){switch(a){case c["default"].TRIANGLE_STRIP:return b.TRIANGLE_STRIP;case c["default"].TRIANGLES:return b.TRIANGLES;case c["default"].LINE_STRIP:return b.LINE_STRIP;case c["default"].LINES:return b.LINES;case c["default"].POINTS:return b.POINTS;default:throw new Error("Unexpected mode: "+a)}}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/base/DefaultContextProvider.js",["../core/drawModeToGL","../i18n/readOnly","../core/ShareableBase"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(b){a.call(this),this.setLoggingName("DefaultContextProvider"),this.engine=b}return f(d,a),d.prototype.destructor=function(b){this.engine=void 0,a.prototype.destructor.call(this,b+1)},Object.defineProperty(d.prototype,"gl",{get:function(){if(this.engine)return this.engine.gl;throw new Error(this._type+".engine is undefined.")},set:function(){throw new Error(c["default"]("gl").message)},enumerable:!0,configurable:!0}),d.prototype.disableVertexAttribArray=function(a){var b=this.gl;b.disableVertexAttribArray(a)},d.prototype.drawArrays=function(a,b,c){var d=this.gl;d.drawArrays(a,b,c)},d.prototype.drawElements=function(a,b,c){var d=this.gl;d.drawElements(a,b,d.UNSIGNED_SHORT,c)},d.prototype.drawModeToGL=function(a){return b["default"](a,this.gl)},d.prototype.enableVertexAttribArray=function(a){var b=this.gl;b.enableVertexAttribArray(a)},d.prototype.isContextLost=function(){var a=this.gl;if(a)return a.isContextLost();throw new Error("WebGLRenderingContext is undefined.")},d.prototype.vertexAttribPointer=function(a,b,c,d,e){var f=this.gl;f.vertexAttribPointer(a,b,f.FLOAT,c,d,e)},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/core/initWebGL.js",["../checks/isDefined"],function(a){function b(a,b){if(c["default"](a)){var d;try{d=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)}catch(e){}if(d)return d;throw new Error("Unable to initialize WebGL. Your browser may not support it.")}return void 0}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/checks/isBoolean.js",[],function(a){function b(a){return"boolean"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeBoolean.js",["../checks/mustSatisfy","../checks/isBoolean"],function(a){function b(){return"be `boolean`"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/base/incLevel.js",["../checks/mustBeInteger"],function(a){function b(a){return c["default"]("levelUp",a)+1}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/collections/ShareableArray.js",["../base/incLevel","../i18n/readOnly","../core/ShareableBase"],function(a){function b(a){if(a){for(var b=new f(a),c=0,d=a.length;d>c;c++){var e=a[c];e&&e.release()}return b}return void 0}var c,d,e,f,g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function e(b){void 0===b&&(b=[]),a.call(this),this.setLoggingName("ShareableArray"),this._elements=b;for(var c=0,d=this._elements.length;d>c;c++)this._elements[c].addRef()}return g(e,a),e.prototype.destructor=function(b){for(var d=0,e=this._elements.length;e>d;d++)this._elements[d].release();this._elements=void 0,a.prototype.destructor.call(this,c["default"](b))},e.prototype.find=function(a){for(var b=new e([]),c=this._elements,d=c.length,f=0;d>f;f++){var g=c[f];a(g)&&b.push(g)}return b},e.prototype.findOne=function(a){for(var b=this._elements,c=0,d=b.length;d>c;c++){var e=b[c];if(a(e))return e.addRef(),e}return void 0},e.prototype.get=function(a){var b=this.getWeakRef(a);return b&&b.addRef(),b},e.prototype.getWeakRef=function(a){return this._elements[a]},e.prototype.indexOf=function(a,b){return this._elements.indexOf(a,b)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements?this._elements.length:void console.warn("ShareableArray is now a zombie, length is undefined")},set:function(){throw new Error(d["default"]("length").message)},enumerable:!0,configurable:!0}),e.prototype.slice=function(a,b){return new e(this._elements.slice(a,b))},e.prototype.splice=function(a,c){return b(this._elements.splice(a,c))},e.prototype.shift=function(){return this._elements.shift()},e.prototype.forEach=function(a){return this._elements.forEach(a)},e.prototype.push=function(a){return a&&a.addRef(),this.pushWeakRef(a)},e.prototype.pushWeakRef=function(a){return this._elements.push(a)},e.prototype.pop=function(){return this._elements.pop()},e.prototype.unshift=function(a){return a.addRef(),this.unshiftWeakRef(a)},e.prototype.unshiftWeakRef=function(a){return this._elements.unshift(a)},e}(e["default"]),a("default",f)}}}),System.register("davinci-eight/commands/VersionLogger.js",["../core/ShareableBase"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c="EIGHT.VersionLogger",d=function(a){function b(){a.call(this),this.setLoggingName(c)}return e(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){},b.prototype.contextGain=function(a){var b=a.gl;console.log(b.getParameter(b.VERSION))},b.prototype.contextLost=function(){},Object.defineProperty(b.prototype,"name",{get:function(){return c},enumerable:!0,configurable:!0}),b}(b["default"]),a("default",d)}}}),System.register("davinci-eight/commands/WebGLClearColor.js",["../checks/mustBeNumber","../core/ShareableBase"],function(a){var b,c,d,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(a){function c(c,d,e,f){void 0===c&&(c=0),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=1),a.call(this),this.setLoggingName("WebGLClearColor"),this.red=b["default"]("red",c),this.green=b["default"]("green",d),this.blue=b["default"]("blue",e),this.alpha=b["default"]("alpha",f)}return e(c,a),c.prototype.destructor=function(b){this.red=void 0,this.green=void 0,this.blue=void 0,this.alpha=void 0,a.prototype.destructor.call(this,b+1)},c.prototype.contextFree=function(){},c.prototype.contextGain=function(a){b["default"]("red",this.red),b["default"]("green",this.green),b["default"]("blue",this.blue),b["default"]("alpha",this.alpha),a.gl.clearColor(this.red,this.green,this.blue,this.alpha)},c.prototype.contextLost=function(){},c}(c["default"]),a("default",d)}}}),System.register("davinci-eight/commands/WebGLEnable.js",["../commands/glCapability","../checks/mustBeNumber","../core/ShareableBase"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(b){a.call(this),this.setLoggingName("WebGLEnable"),this._capability=c["default"]("capability",b)}return f(d,a),d.prototype.destructor=function(b){this._capability=void 0,a.prototype.destructor.call(this,b+1)},d.prototype.contextFree=function(){},d.prototype.contextGain=function(a){a.gl.enable(b["default"](this._capability,a.gl))},d.prototype.contextLost=function(){},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/commands/Capability.js",[],function(a){var b;return{setters:[],execute:function(){!function(a){a[a.BLEND=0]="BLEND",a[a.CULL_FACE=1]="CULL_FACE",a[a.DEPTH_TEST=2]="DEPTH_TEST",a[a.POLYGON_OFFSET_FILL=3]="POLYGON_OFFSET_FILL",a[a.SCISSOR_TEST=4]="SCISSOR_TEST"}(b||(b={})),a("default",b)}}}),System.register("davinci-eight/commands/glCapability.js",["../commands/Capability","../checks/isDefined","../checks/mustBeDefined","../checks/mustBeInteger"],function(a){function b(a,b){if(!d["default"](a))return void 0;switch(f["default"]("capability",a),e["default"]("gl",b),a){case c["default"].BLEND:return b.BLEND;case c["default"].CULL_FACE:return b.CULL_FACE;case c["default"].DEPTH_TEST:return b.DEPTH_TEST;case c["default"].POLYGON_OFFSET_FILL:return b.POLYGON_OFFSET_FILL;case c["default"].SCISSOR_TEST:return b.SCISSOR_TEST;default:throw new Error(a+" is not a valid capability.")}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/commands/WebGLDisable.js",["../commands/glCapability","../checks/mustBeNumber","../core/ShareableBase"],function(a){var b,c,d,e,f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function d(b){a.call(this),this.setLoggingName("WebGLDisable"),this._capability=c["default"]("capability",b)}return f(d,a),d.prototype.destructor=function(b){this._capability=void 0,a.prototype.destructor.call(this,b+1)},d.prototype.contextFree=function(){},d.prototype.contextGain=function(a){a.gl.disable(b["default"](this._capability,a.gl))},d.prototype.contextLost=function(){},d}(d["default"]),a("default",e)}}}),System.register("davinci-eight/core/Engine.js",["../commands/Capability","../config","../commands/EIGHTLogger","./ErrorMode","../base/DefaultContextProvider","../base/incLevel","./initWebGL","../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeDefined","../checks/mustBeObject","../i18n/readOnly","../collections/ShareableArray","./ShareableBase","../commands/VersionLogger","../commands/WebGLClearColor","../commands/WebGLEnable","../commands/WebGLDisable"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a}],execute:function(){t=function(a){function o(c){var e=this;a.call(this),this._users=[],this._commands=new n["default"]([]),this._mayUseCache=!0,this._viewportArgs={x:void 0,y:void 0,width:void 0,height:void 0},this.setLoggingName("Engine"),this._attributes=c,this._commands.pushWeakRef(new d["default"]),this._commands.pushWeakRef(new p["default"]),this._contextProvider=new f["default"](this),this.enable(b["default"].DEPTH_TEST),this.clearColor(.1,.1,.1,1),this._webGLContextLost=function(a){i["default"](e._canvas)&&(a.preventDefault(),e._gl=void 0,e._users.forEach(function(a){a.contextLost()}))},this._webGLContextRestored=function(a){i["default"](e._canvas)&&(a.preventDefault(),e._gl=h["default"](e._canvas,c),e._users.forEach(function(a){a.contextGain(e._contextProvider)}))}}return u(o,a),o.prototype.destructor=function(b){for(this.stop(),this._contextProvider.release();this._users.length>0;)this._users.pop();this._commands.release(),a.prototype.destructor.call(this,g["default"](b))},o.prototype.addContextListener=function(a){l["default"]("user",a);var b=this._users.indexOf(a);0>b?this._users.push(a):console.warn("user already exists for addContextListener")},Object.defineProperty(o.prototype,"canvas",{get:function(){return this._canvas||this.start(document.createElement("canvas")),this._canvas},set:function(){throw new Error(m["default"]("canvas").message)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"commands",{get:function(){return this._commands.addRef(),this._commands},set:function(){throw new Error(m["default"]("commands").message)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mayUseCache",{get:function(){return this._mayUseCache},set:function(a){this._mayUseCache=j["default"]("mayUseCache",a)},enumerable:!0,configurable:!0}),o.prototype.clearColor=function(a,b,c,d){this._commands.pushWeakRef(new q["default"](a,b,c,d));var e=this._gl;return e&&e.clearColor(a,b,c,d),this},o.prototype.disable=function(a){return this._commands.pushWeakRef(new s["default"](a)),this},o.prototype.enable=function(a){return this._commands.pushWeakRef(new r["default"](a)),this},Object.defineProperty(o.prototype,"gl",{get:function(){return this._gl?this._gl:void 0},set:function(){throw new Error(m["default"]("gl").message)},enumerable:!0,configurable:!0}),o.prototype.removeContextListener=function(a){l["default"]("user",a);var b=this._users.indexOf(a);b>=0&&this._users.splice(b,1)},o.prototype.clear=function(){var a=this._gl;a&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},o.prototype.getMaxViewportDims=function(){var a=this._gl;return a?a.getParameter(a.MAX_VIEWPORT_DIMS):void 0},o.prototype.getViewport=function(){var a=this._gl;return a?a.getParameter(a.VIEWPORT):void 0},o.prototype.viewport=function(a,b,d,f){var g=this._gl;if(g)if(this._mayUseCache){var h=this._viewportArgs;(a!==h.x||b!==h.y||d!==h.width||f!==h.height)&&(g.viewport(a,b,d,f),h.x=a,h.y=b,h.width=d,h.height=f)}else g.viewport(a,b,d,f);else c["default"].errorMode===e["default"].WARNME&&console.warn(this._type+".viewport("+a+", "+b+", "+d+", "+f+") ignored because no context.");return this},o.prototype.start=function(a){if(!(a instanceof HTMLCanvasElement))return console.warn("canvas must be an HTMLCanvasElement to start the context."),this;k["default"]("canvas",a);var b=i["default"](this._canvas);return b?void console.warn(this._type+" Ignoring start() because already started."):(this._canvas=a,i["default"](this._canvas)&&(this._gl=h["default"](this._canvas,this._attributes),this.emitStartEvent(),this._canvas.addEventListener("webglcontextlost",this._webGLContextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._webGLContextRestored,!1)),this)},o.prototype.stop=function(){return i["default"](this._canvas)&&(this._canvas.removeEventListener("webglcontextrestored",this._webGLContextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._webGLContextLost,!1),this._gl&&(this.emitStopEvent(),this._gl=void 0),this._canvas=void 0),this},o.prototype.emitStartEvent=function(){var a=this;this._users.forEach(function(b){a.emitContextGain(b)}),this._commands.forEach(function(b){a.emitContextGain(b)})},o.prototype.emitContextGain=function(a){this._gl.isContextLost()?a.contextLost():a.contextGain(this._contextProvider)},o.prototype.emitStopEvent=function(){var a=this;this._users.forEach(function(b){a.emitContextFree(b);

}),this._commands.forEach(function(b){a.emitContextFree(b)})},o.prototype.emitContextFree=function(a){this._gl.isContextLost()?a.contextLost():a.contextFree(this._contextProvider)},o.prototype.synchronize=function(a){this._gl&&this.emitContextGain(a)},o}(o["default"]),a("default",t)}}}),System.register("davinci-eight/base/exchange.js",[],function(a){function b(a,b){return a!==b?(b&&b.addRef(),a&&a.release(),b):a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/arraysEQ.js",["../checks/isDefined","../checks/isNull","../checks/isUndefined"],function(a){function b(a,b){if(c["default"](a)){if(c["default"](b)){if(d["default"](a))return d["default"](b);if(d["default"](b))return!1;var f=a.length,g=b.length;if(f===g){for(var h=0;f>h;h++)if(a[h]!==b[h])return!1;return!0}return!1}return!1}return e["default"](b)}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/utils/EventEmitter.js",[],function(a){var b;return{setters:[],execute:function(){b=function(){function a(a){this.owner=a}return a.prototype.addEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];return c||(c=this._eventRegistry[a]=[]),-1===c.indexOf(b)&&c.push(b),b},a.prototype.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}},a.prototype.emit=function(a,b,c){if(this._eventRegistry){var d=this._eventRegistry[a];if(d){var e=d.length;if(e)for(var f=0;e>f;f++)d[f](a,b,c,this.owner)}}},a}(),a("default",b)}}}),System.register("davinci-eight/math/isScalarG3.js",[],function(a){function b(a){return 0===a.x&&0===a.y&&0===a.z&&0===a.xy&&0===a.yz&&0===a.zx&&0===a.β}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/quadVectorE3.js",["../math/dotVectorCartesianE3","../checks/isDefined","../checks/isNumber"],function(a){function b(a){if(d["default"](a)){var b=a.x,f=a.y,g=a.z;return e["default"](b)&&e["default"](f)&&e["default"](g)?c["default"](b,f,g,b,f,g):void 0}return void 0}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/rotorFromDirectionsE3.js",["./dotVectorE3","./quadVectorE3","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a){function b(a,b,i){var j=d["default"](a),k=h(j),l=d["default"](b),m=h(l),n=m*k,o=c["default"](b,a),p=h(2*(l*j+n*o));if(0!==p)i=i.versor(b,a),i=i.addScalar(n),i=i.divByScalar(p);else{var q=Math.random(),r=Math.random(),s=Math.random();i.zero(),i.yz=f["default"](q,r,s,a.x,a.y,a.z),i.zx=g["default"](q,r,s,a.x,a.y,a.z),i.xy=e["default"](q,r,s,a.x,a.y,a.z),i.normalize(),i.rotorFromGeneratorAngle(i,Math.PI)}}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=Math.sqrt}}}),System.register("davinci-eight/math/Geometric3.js",["./Coords","./arraysEQ","./dotVectorE3","./G3","../utils/EventEmitter","./extG3","./gauss","./isScalarG3","./lcoG3","./mulG3","../i18n/notImplemented","./rcoG3","./rotorFromDirectionsE3","./scpG3","./squaredNormG3","./stringFromCoordinates","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a){function b(a){return[a.α,a.x,a.y,a.z,a.xy,a.yz,a.zx,a.β]}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a}],execute:function(){v=0,w=1,x=2,y=3,z=4,A=5,B=6,C=7,D=["1","e1","e2","e3","e12","e23","e31","e123"],E="change",F=Math.atan2,G=Math.exp,H=Math.cos,I=Math.log,J=Math.sin,K=Math.sqrt,L=function(a){function c(){a.call(this,[0,0,0,0,0,0,0,0],!1,8),this.eventBus=new g["default"](this)}return M(c,a),c.prototype.on=function(a,b){this.eventBus.addEventListener(a,b)},c.prototype.off=function(a,b){this.eventBus.removeEventListener(a,b)},c.prototype.setCoordinate=function(a,b,c){var d=this.coords,e=d[a];b!==e&&(d[a]=b,this.modified=!0,this.eventBus.emit(E,c,b))},Object.defineProperty(c.prototype,"α",{get:function(){return this.coords[v]},set:function(a){this.setCoordinate(v,a,"α")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"alpha",{get:function(){return this.coords[v]},set:function(a){this.setCoordinate(v,a,"alpha")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"x",{get:function(){return this.coords[w]},set:function(a){this.setCoordinate(w,a,"x")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.coords[x]},set:function(a){this.setCoordinate(x,a,"y")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"z",{get:function(){return this.coords[y]},set:function(a){this.setCoordinate(y,a,"z")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"yz",{get:function(){return this.coords[A]},set:function(a){this.setCoordinate(A,a,"yz")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"zx",{get:function(){return this.coords[B]},set:function(a){this.setCoordinate(B,a,"zx")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"xy",{get:function(){return this.coords[z]},set:function(a){this.setCoordinate(z,a,"xy")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"β",{get:function(){return this.coords[C]},set:function(a){this.setCoordinate(C,a,"β")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"beta",{get:function(){return this.coords[C]},set:function(a){this.setCoordinate(C,a,"beta")},enumerable:!0,configurable:!0}),c.prototype.add=function(a,b){return void 0===b&&(b=1),this.α+=a.α*b,this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.β+=a.β*b,this},c.prototype.addPseudo=function(a){return this.β+=a,this},c.prototype.addScalar=function(a){return this.α+=a,this},c.prototype.addVector=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},c.prototype.add2=function(a,b){return this.α=a.α+b.α,this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this.β=a.β+b.β,this},c.prototype.adj=function(){throw new Error("TODO: Geometric3.adj")},c.prototype.angle=function(){return this.log().grade(2)},c.prototype.clone=function(){return c.copy(this)},c.prototype.conj=function(){return this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},c.prototype.lco=function(a){return this.lco2(this,a)},c.prototype.lco2=function(a,b){return k["default"](a,b,this)},c.prototype.rco=function(a){return this.rco2(this,a)},c.prototype.rco2=function(a,b){return n["default"](a,b,this)},c.prototype.copy=function(a){return this.α=a.α,this.x=a.x,this.y=a.y,this.z=a.z,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.β=a.β,this},c.prototype.copyScalar=function(a){return this.zero().addScalar(a)},c.prototype.copySpinor=function(a){return this.zero(),this.α=a.α,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this},c.prototype.copyVector=function(a){return this.zero(),this.x=a.x,this.y=a.y,this.z=a.z,this},c.prototype.div=function(a){if(j["default"](a))return this.divByScalar(a.α);throw new Error("division with arbitrary multivectors is not supported")},c.prototype.divByScalar=function(a){return this.α/=a,this.x/=a,this.y/=a,this.z/=a,this.yz/=a,this.zx/=a,this.xy/=a,this.β/=a,this},c.prototype.div2=function(a,b){var c=a.α,d=a.yz,e=a.zx,f=a.xy,g=b.α,h=b.yz,i=b.zx,j=b.xy;return this.α=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},c.prototype.dual=function(a){var b=-a.β,c=-a.yz,d=-a.zx,e=-a.xy,f=a.x,g=a.y,h=a.z,i=a.α;return this.α=b,this.x=c,this.y=d,this.z=e,this.yz=f,this.zx=g,this.xy=h,this.β=i,this},c.prototype.equals=function(a){if(a instanceof c){var b=a;return d["default"](this.coords,b.coords)}return!1},c.prototype.exp=function(){var a=G(this.α),b=this.yz,c=this.zx,d=this.xy,e=K(b*b+c*c+d*d),f=0!==e?J(e)/e:1,g=H(e);return this.α=g,this.yz=b*f,this.zx=c*f,this.xy=d*f,this.scale(a)},c.prototype.inv=function(){var a=this.α,b=this.x,c=this.y,d=this.z,e=this.xy,f=this.yz,g=this.zx,h=this.β,j=[[a,b,c,d,-e,-f,-g,-h],[b,a,e,-g,-c,-h,d,-f],[c,-e,a,f,b,-d,-h,-g],[d,g,-f,a,-h,c,-b,-e],[e,-c,b,h,a,g,-f,d],[f,h,-d,c,-g,a,e,b],[g,d,h,-b,f,-e,a,c],[h,f,g,e,d,b,c,a]],k=[1,0,0,0,0,0,0,0],l=i["default"](j,k);return this.α=l[0],this.x=l[1],this.y=l[2],this.z=l[3],this.xy=l[4],this.yz=l[5],this.zx=l[6],this.β=l[7],this},c.prototype.isOne=function(){return 1===this.α&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.β},c.prototype.isZero=function(){return 0===this.α&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.β},c.prototype.lerp=function(a,b){return this.α+=(a.α-this.α)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.yz+=(a.yz-this.yz)*b,this.zx+=(a.zx-this.zx)*b,this.xy+=(a.xy-this.xy)*b,this.β+=(a.β-this.β)*b,this},c.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},c.prototype.log=function(){var a=this.α,b=this.yz,c=this.zx,d=this.xy,e=b*b+c*c+d*d,f=K(e),g=F(f,a)/f;return this.α=I(K(a*a+e)),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},c.prototype.magnitude=function(){return K(this.squaredNormSansUnits())},c.prototype.magnitudeSansUnits=function(){return K(this.squaredNormSansUnits())},c.prototype.mul=function(a){return this.mul2(this,a)},c.prototype.mul2=function(a,b){return l["default"](a,b,this._coords),this},c.prototype.neg=function(){return this.α=-this.α,this.x=-this.x,this.y=-this.y,this.z=-this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.β=-this.β,this},c.prototype.norm=function(){return this.α=this.magnitudeSansUnits(),this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0,this},c.prototype.normalize=function(){var a=this.magnitude();return 0!==a&&(this.α=this.α/a,this.x=this.x/a,this.y=this.y/a,this.z=this.z/a,this.yz=this.yz/a,this.zx=this.zx/a,this.xy=this.xy/a,this.β=this.β/a),this},c.prototype.one=function(){return this.α=1,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0,this},c.prototype.quad=function(){return this.α=this.squaredNormSansUnits(),this.yz=0,this.zx=0,this.xy=0,this},c.prototype.squaredNorm=function(){return this.squaredNormSansUnits()},c.prototype.squaredNormSansUnits=function(){return q["default"](this)},c.prototype.reflect=function(a){var b=f["default"].fromVector(a),c=f["default"].copy(this),d=b.mul(c).mul(b).scale(-1);return this.copy(d),this},c.prototype.rev=function(){return this.α=+this.α,this.x=+this.x,this.y=+this.y,this.z=+this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.β=-this.β,this},c.prototype.__tilde__=function(){return c.copy(this).rev()},c.prototype.rotate=function(a){var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.α,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},c.prototype.rotorFromDirections=function(a,b){return o["default"](a,b,this),this},c.prototype.rotorFromAxisAngle=function(a,b){var c=b/2,d=J(c);return this.yz=-a.x*d,this.zx=-a.y*d,this.xy=-a.z*d,this.α=H(c),this},c.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=J(c);return this.yz=-a.yz*d,this.zx=-a.zx*d,this.xy=-a.xy*d,this.α=H(c),this},c.prototype.scp=function(a){return this.scp2(this,a)},c.prototype.scp2=function(a,b){return p["default"](a,b,this)},c.prototype.scale=function(a){return this.α*=a,this.x*=a,this.y*=a,this.z*=a,this.yz*=a,this.zx*=a,this.xy*=a,this.β*=a,this},c.prototype.slerp=function(){throw new Error(m["default"]("slerp").message)},c.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},c.prototype.versor=function(a,b){var c=a.x,d=a.y,f=a.z,g=b.x,h=b.y,i=b.z;return this.zero(),this.α=e["default"](a,b),this.yz=t["default"](c,d,f,g,h,i),this.zx=u["default"](c,d,f,g,h,i),this.xy=s["default"](c,d,f,g,h,i),this},c.prototype.sub=function(a,b){return void 0===b&&(b=1),this.α-=a.α*b,this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.β-=a.β*b,this},c.prototype.subVector=function(a,b){return void 0===b&&(b=1),this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this},c.prototype.sub2=function(a,b){return this.α=a.α-b.α,this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.β=a.β-b.β,this},c.prototype.toExponential=function(a){var c=function(b){return b.toExponential(a)};return r["default"](b(this),c,D)},c.prototype.toFixed=function(a){var c=function(b){return b.toFixed(a)};return r["default"](b(this),c,D)},c.prototype.toPrecision=function(a){var c=function(b){return b.toPrecision(a)};return r["default"](b(this),c,D)},c.prototype.toString=function(a){var c=function(b){return b.toString(a)};return r["default"](b(this),c,D)},c.prototype.grade=function(a){switch(a){case 0:this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0;break;case 1:this.α=0,this.yz=0,this.zx=0,this.xy=0,this.β=0;break;case 2:this.α=0,this.x=0,this.y=0,this.z=0,this.β=0;break;case 3:this.α=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0;break;default:this.α=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0}return this},c.prototype.ext=function(a){return this.ext2(this,a)},c.prototype.ext2=function(a,b){return h["default"](a,b,this)},c.prototype.zero=function(){return this.α=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.β=0,this},c.prototype.__add__=function(a){return a instanceof c?c.copy(this).add(a):"number"==typeof a?c.copy(this).add(c.scalar(a)):void 0},c.prototype.__div__=function(a){return a instanceof c?c.copy(this).div(a):"number"==typeof a?c.copy(this).divByScalar(a):void 0},c.prototype.__rdiv__=function(a){return a instanceof c?c.copy(a).div(this):"number"==typeof a?c.scalar(a).div(this):void 0},c.prototype.__mul__=function(a){return a instanceof c?c.copy(this).mul(a):"number"==typeof a?c.copy(this).scale(a):void 0},c.prototype.__rmul__=function(a){return a instanceof c?c.copy(a).mul(this):"number"==typeof a?c.copy(this).scale(a):void 0},c.prototype.__radd__=function(a){return a instanceof c?c.copy(a).add(this):"number"==typeof a?c.scalar(a).add(this):void 0},c.prototype.__sub__=function(a){return a instanceof c?c.copy(this).sub(a):"number"==typeof a?c.scalar(a).neg().add(this):void 0},c.prototype.__rsub__=function(a){return a instanceof c?c.copy(a).sub(this):"number"==typeof a?c.scalar(a).sub(this):void 0},c.prototype.__wedge__=function(a){return a instanceof c?c.copy(this).ext(a):"number"==typeof a?c.copy(this).scale(a):void 0},c.prototype.__rwedge__=function(a){return a instanceof c?c.copy(a).ext(this):"number"==typeof a?c.copy(this).scale(a):void 0},c.prototype.__lshift__=function(a){return a instanceof c?c.copy(this).lco(a):"number"==typeof a?c.copy(this).lco(c.scalar(a)):void 0},c.prototype.__rlshift__=function(a){return a instanceof c?c.copy(a).lco(this):"number"==typeof a?c.scalar(a).lco(this):void 0},c.prototype.__rshift__=function(a){return a instanceof c?c.copy(this).rco(a):"number"==typeof a?c.copy(this).rco(c.scalar(a)):void 0},c.prototype.__rrshift__=function(a){return a instanceof c?c.copy(a).rco(this):"number"==typeof a?c.scalar(a).rco(this):void 0},c.prototype.__vbar__=function(a){return a instanceof c?c.copy(this).scp(a):"number"==typeof a?c.copy(this).scp(c.scalar(a)):void 0},c.prototype.__rvbar__=function(a){return a instanceof c?c.copy(a).scp(this):"number"==typeof a?c.scalar(a).scp(this):void 0},c.prototype.__bang__=function(){return c.copy(this).inv()},c.prototype.__pos__=function(){return c.copy(this)},c.prototype.__neg__=function(){return c.copy(this).neg()},c.zero=function(){return new c},c.one=function(){return(new c).addScalar(1)},c.e1=function(){return c.vector(1,0,0)},c.e2=function(){return c.vector(0,1,0)},c.e3=function(){return c.vector(0,0,1)},c.I=function(){return(new c).addPseudo(1)},c.copy=function(a){var b=new c;return b.α=a.α,b.x=a.x,b.y=a.y,b.z=a.z,b.yz=a.yz,b.zx=a.zx,b.xy=a.xy,b.β=a.β,b},c.fromScalar=function(a){return(new c).copyScalar(a.α)},c.fromSpinor=function(a){var b=new c;return b.α=a.α,b.yz=a.yz,b.zx=a.yz,b.xy=a.xy,b},c.fromVector=function(a){var b=new c;return b.x=a.x,b.y=a.y,b.z=a.z,b},c.lerp=function(a,b,d){return c.copy(a).lerp(b,d)},c.rotorFromDirections=function(a,b){return(new c).rotorFromDirections(a,b)},c.scalar=function(a){return(new c).copyScalar(a)},c.vector=function(a,b,d){var e=new c;return e.x=a,e.y=b,e.z=d,e},c}(c["default"]),a("default",L)}}}),System.register("davinci-eight/math/addE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a+i);break;case 1:r=+(b+j);break;case 2:r=+(c+k);break;case 3:r=+(d+l);break;case 4:r=+(e+m);break;case 5:r=+(f+n);break;case 6:r=+(g+o);break;case 7:r=+(h+p);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/b2.js",[],function(a){function b(a,b){var c=1-a;return c*c*b}function c(a,b){return 2*(1-a)*a*b}function d(a,b){return a*a*b}function e(a,e,f,g){return b(a,e)+c(a,f)+d(a,g)}return a("default",e),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/b3.js",[],function(a){function b(a,b){var c=1-a;return c*c*c*b}function c(a,b){var c=1-a;return 3*c*c*a*b}function d(a,b){var c=1-a;return 3*c*a*a*b}function e(a,b){return a*a*a*b}function f(a,f,g,h,i){return b(a,f)+c(a,g)+d(a,h)+e(a,i)}return a("default",f),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/extE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i);break;case 1:r=+(a*j+b*i);break;case 2:r=+(a*k+c*i);break;case 3:r=+(a*l+d*i);break;case 4:r=+(a*m+b*k-c*j+e*i);break;case 5:r=+(a*n+c*l-d*k+f*i);break;case 6:r=+(a*o-b*l+d*j+g*i);break;case 7:r=+(a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/extG3.js",["../math/compG3Get","../math/extE3","../math/compG3Set"],function(a){function b(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;8>w;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/lcoE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(a*j-c*m+d*o-f*p);break;case 2:r=+(a*k+b*m-d*n-g*p);break;case 3:r=+(a*l-b*o+c*n-e*p);break;case 4:r=+(a*m+d*p);break;case 5:r=+(a*n+b*p);break;case 6:r=+(a*o+c*p);break;case 7:r=+(a*p);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/lcoG3.js",["../math/compG3Get","../math/lcoE3","../math/compG3Set"],function(a){function b(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;8>w;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/mulG3.js",["../math/compG3Get","../math/mulE3"],function(a){function b(a,b,e){for(var f=a.α,g=a.x,h=a.y,i=a.z,j=a.xy,k=a.yz,l=a.zx,m=a.β,n=c["default"](b,0),o=c["default"](b,1),p=c["default"](b,2),q=c["default"](b,3),r=c["default"](b,4),s=c["default"](b,5),t=c["default"](b,6),u=c["default"](b,7),v=e.length,w=0;v>w;w++)e[w]=d["default"](f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,w)}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/gauss.js",[],function(a){function b(a,b){for(var c=[],d=0;a>d;d++)c.push(b);return c}function c(a,b,c){for(var d=h(a[b][b]),e=b,f=b+1;c>f;f++)h(a[f][b])>d&&(d=h(a[f][b]),e=f);return e}function d(a,b,c,d){for(var e=d+1,f=b;e>f;f++){var g=a[c][f];a[c][f]=a[b][f],a[b][f]=g}}function e(a,b,c){for(var d=b+1;c>d;d++)for(var e=-a[d][b]/a[b][b],f=b;c+1>f;f++)b===f?a[d][f]=0:a[d][f]+=e*a[b][f]}function f(a,c){for(var d=b(c,0),e=c-1;e>-1;e--){d[e]=a[e][c]/a[e][e];for(var f=e-1;f>-1;f--)a[f][c]-=a[f][e]*d[e]}return d}function g(a,b){for(var g=a.length,h=0;g>h;h++){var i=a[h],j=b[h];i.push(j)}for(var k=0;g>k;k++)d(a,k,c(a,k,g),g),e(a,k,g);return f(a,g)}var h;return a("default",g),{setters:[],execute:function(){h=Math.abs}}}),System.register("davinci-eight/math/quadSpinorE3.js",["../checks/isDefined","../checks/isNumber"],function(a){function b(a){if(c["default"](a)){var b=a.α,e=a.yz,f=a.zx,g=a.xy;return d["default"](b)&&d["default"](e)&&d["default"](f)&&d["default"](g)?b*b+e*e+f*f+g*g:void 0}return void 0}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/rcoE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(+b*i+e*k-g*l-h*n);break;case 2:r=+(+c*i-e*j+f*l-h*o);break;case 3:r=+(+d*i-f*k+g*j-h*m);break;case 4:r=+(+e*i+h*l);break;case 5:r=+(+f*i+h*j);break;case 6:r=+(+g*i+h*k);break;case 7:r=+(+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/rcoG3.js",["../math/compG3Get","../math/rcoE3","../math/compG3Set"],function(a){function b(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;8>w;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/compG3Get.js",[],function(a){function b(a,b){switch(b){case c:return a.α;case d:return a.x;case e:return a.y;case f:return a.z;case g:return a.xy;case h:return a.yz;case i:return a.zx;case j:return a.β;default:throw new Error("index => "+b)}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[],execute:function(){c=0,d=1,e=2,f=3,g=4,h=5,i=6,j=7}}}),System.register("davinci-eight/math/mulE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(a*j+b*i-c*m+d*o+e*k-f*p-g*l-h*n);break;case 2:r=+(a*k+b*m+c*i-d*n-e*j+f*l-g*p-h*o);break;case 3:r=+(a*l-b*o+c*n+d*i-e*p-f*k+g*j-h*m);break;case 4:r=+(a*m+b*k-c*j+d*p+e*i-f*o+g*n+h*l);break;case 5:r=+(a*n+b*p+c*l-d*k+e*o+f*i-g*m+h*j);break;case 6:r=+(a*o-b*l+c*p+d*j-e*n+f*m+g*i+h*k);break;case 7:r=+(a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/compG3Set.js",[],function(a){function b(a,b,k){switch(b){case c:a.α=k;break;case d:a.x=k;break;case e:a.y=k;break;case f:a.z=k;break;case g:a.xy=k;break;case h:a.yz=k;break;case i:a.zx=k;break;case j:a.β=k;break;default:throw new Error("index => "+b)}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[],execute:function(){c=0,d=1,e=2,f=3,g=4,h=5,i=6,j=7}}}),System.register("davinci-eight/math/scpG3.js",["../math/compG3Get","../math/mulE3","../math/compG3Set"],function(a){function b(a,b,f){var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7);return e["default"](f,0,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,0)),e["default"](f,1,0),e["default"](f,2,0),e["default"](f,3,0),e["default"](f,4,0),e["default"](f,5,0),e["default"](f,6,0),e["default"](f,7,0),f}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/squaredNormG3.js",[],function(a){function b(a){var b=a.α,c=a.x,d=a.y,e=a.z,f=a.yz,g=a.zx,h=a.xy,i=a.β;return b*b+c*c+d*d+e*e+f*f+g*g+h*h+i*i}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/subE3.js",[],function(a){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a-i);break;case 1:r=+(b-j);break;case 2:r=+(c-k);break;case 3:r=+(d-l);break;case 4:r=+(e-m);break;case 5:r=+(f-n);break;case 6:r=+(g-o);break;case 7:r=+(h-p);break;default:throw new Error("index must be in the range [0..7]")}return+r}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/BASIS_LABELS_G3_GEOMETRIC.js",[],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[],execute:function(){b="1",c="←",d="→",e="↑",f="↓",g="⊙",h="⊗",i="↻",j="↺",k="⊶",l="⊷",m="⬘",n="⬙",o="☐",p="■",q=[[b,b],[c,d],[f,e],[h,g],[i,j],[m,n],[l,k],[p,o]],a("default",q)}}}),System.register("davinci-eight/math/BASIS_LABELS_G3_HAMILTON.js",[],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[],execute:function(){b="1",c="i",d="j",e="k",f="ij",g="jk",h="ki",i="ijk",j=[[b],[c],[d],[e],[f],[g],[h],[i]],a("default",j)}}}),System.register("davinci-eight/math/BASIS_LABELS_G3_STANDARD.js",[],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[],execute:function(){b="1",c="e1",d="e2",e="e3",f="e12",g="e23",h="e31",i="I",j=[[b],[c],[d],[e],[f],[g],[h],[i]],a("default",j)}}}),System.register("davinci-eight/math/BASIS_LABELS_G3_STANDARD_HTML.js",[],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[],execute:function(){b="1",c="<b>e</b><sub>1</sub>",d="<b>e</b><sub>2</sub>",e="<b>e</b><sub>3</sub>",f=c+d,g=d+e,h=e+c,i=c+d+e,j=[[b],[c],[d],[e],[f],[g],[h],[i]],a("default",j)}}}),System.register("davinci-eight/math/G3.js",["./addE3","../geometries/b2","../geometries/b3","./extG3","./lcoG3","./mulG3","./gauss","../i18n/notImplemented","../i18n/notSupported","./quadSpinorE3","./rcoG3","../i18n/readOnly","./scpG3","./squaredNormG3","./stringFromCoordinates","./subE3","./Unit","./BASIS_LABELS_G3_GEOMETRIC","./BASIS_LABELS_G3_HAMILTON","./BASIS_LABELS_G3_STANDARD","./BASIS_LABELS_G3_STANDARD_HTML"],function(a){function b(a,b,c,d,e,f){var g=d(b,0),h=d(b,1),i=d(b,2),j=d(b,3),k=d(b,4),l=d(b,5),m=d(b,6),n=d(b,7),o=d(c,0),p=d(c,1),q=d(c,2),r=d(c,3),s=d(c,4),t=d(c,5),u=d(c,6),v=d(c,7),w=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,0),x=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,1),y=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,2),z=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,3),A=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,4),B=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,5),C=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,6),D=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,7);return e(w,x,y,z,A,B,C,D,f)}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a}],execute:function(){x=0,y=1,z=2,A=3,B=4,C=5,D=6,E=7,F=function(){function a(a,b,c,d,e,f,g,h,i){if(this._coords=[0,0,0,0,0,0,0,0],this._coords[x]=a,this._coords[y]=b,this._coords[z]=c,this._coords[A]=d,this._coords[B]=e,this._coords[C]=f,this._coords[D]=g,this._coords[E]=h,this.uom=i,this.uom&&1!==this.uom.multiplier){var j=this.uom.multiplier;this._coords[x]*=j,this._coords[y]*=j,this._coords[z]*=j,this._coords[A]*=j,this._coords[B]*=j,this._coords[C]*=j,this._coords[D]*=j,this._coords[E]*=j,this.uom=new s["default"](1,i.dimensions,i.labels)}}return Object.defineProperty(a,"BASIS_LABELS_GEOMETRIC",{get:function(){return t["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(a,"BASIS_LABELS_HAMILTON",{get:function(){return u["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(a,"BASIS_LABELS_STANDARD",{get:function(){return v["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(a,"BASIS_LABELS_STANDARD_HTML",{get:function(){return w["default"]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"α",{get:function(){return this._coords[x]},set:function(){throw new Error(n["default"]("α").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this._coords[x]},set:function(){throw new Error(n["default"]("alpha").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this._coords[y]},set:function(){throw new Error(n["default"]("x").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._coords[z]},set:function(){throw new Error(n["default"]("y").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this._coords[A]},set:function(){throw new Error(n["default"]("z").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xy",{get:function(){return this._coords[B]},set:function(){throw new Error(n["default"]("xy").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yz",{get:function(){return this._coords[C]},set:function(){throw new Error(n["default"]("yz").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"zx",{get:function(){return this._coords[D]},set:function(){throw new Error(n["default"]("zx").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"β",{get:function(){return this._coords[E]},set:function(){throw new Error(n["default"]("β").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"beta",{get:function(){return this._coords[E]},set:function(){throw new Error(n["default"]("beta").message)},enumerable:!0,configurable:!0}),a.fromCartesian=function(b,c,d,e,f,g,h,i,j){return new a(b,c,d,e,f,g,h,i,j);

},Object.defineProperty(a.prototype,"coords",{get:function(){return[this.α,this.x,this.y,this.z,this.xy,this.yz,this.zx,this.β]},enumerable:!0,configurable:!0}),a.prototype.coordinate=function(a){switch(a){case 0:return this.α;case 1:return this.x;case 2:return this.y;case 3:return this.z;case 4:return this.xy;case 5:return this.yz;case 6:return this.zx;case 7:return this.β;default:throw new Error("index must be in the range [0..7]")}},a.prototype.add=function(d){var e=function(a,b){return a[b]},f=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return b(c["default"],this.coords,d.coords,e,f,s["default"].compatible(this.uom,d.uom))},a.prototype.addPseudo=function(b){return new a(this.α,this.x,this.y,this.z,this.xy,this.yz,this.zx,this.β+b.multiplier,s["default"].compatible(this.uom,b))},a.prototype.addScalar=function(b){return new a(this.α+b.multiplier,this.x,this.y,this.z,this.xy,this.yz,this.zx,this.β,s["default"].compatible(this.uom,b))},a.prototype.__add__=function(b){return b instanceof a?this.add(b):b instanceof s["default"]?this.addScalar(b):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.add(this):b instanceof s["default"]?this.addScalar(b):void 0},a.prototype.adj=function(){throw new Error(j["default"]("adj").message)},a.prototype.angle=function(){return this.log().grade(2)},a.prototype.conj=function(){return new a(this.α,-this.x,-this.y,-this.z,-this.xy,-this.yz,-this.zx,+this.β,this.uom)},a.prototype.cubicBezier=function(b,c,d,f){var g=e["default"](b,this.x,c.x,d.x,f.x),h=e["default"](b,this.y,c.y,d.y,f.y),i=e["default"](b,this.z,c.z,d.z,f.z);return new a(0,g,h,i,0,0,0,0,this.uom)},a.prototype.direction=function(){return this.div(this.norm())},a.prototype.sub=function(c){var d=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return b(r["default"],this.coords,c.coords,d,e,s["default"].compatible(this.uom,c.uom))},a.prototype.__sub__=function(b){return b instanceof a?this.sub(b):b instanceof s["default"]?this.addScalar(b.neg()):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.sub(this):b instanceof s["default"]?this.neg().addScalar(b):void 0},a.prototype.mul=function(b){var c=new a(0,0,0,0,0,0,0,0,s["default"].mul(this.uom,b.uom));return h["default"](this,b,c._coords),c},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):"number"==typeof b?this.scale(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):"number"==typeof b?this.scale(b):void 0},a.prototype.scale=function(b){return new a(this.α*b,this.x*b,this.y*b,this.z*b,this.xy*b,this.yz*b,this.zx*b,this.β*b,this.uom)},a.prototype.div=function(a){return this.mul(a.inv())},a.prototype.divByScalar=function(b){return new a(this.α/b,this.x/b,this.y/b,this.z/b,this.xy/b,this.yz/b,this.zx/b,this.β/b,this.uom)},a.prototype.__div__=function(b){return b instanceof a?this.div(b):"number"==typeof b?this.divByScalar(b):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).div(this):void 0},a.prototype.dual=function(){throw new Error(j["default"]("dual").message)},a.prototype.scp=function(b){var c=new a(1,0,0,0,0,0,0,0,s["default"].mul(this.uom,b.uom));return o["default"](this,b,a.mutator(c)),c},a.prototype.ext=function(b){var c=new a(1,0,0,0,0,0,0,0,s["default"].mul(this.uom,b.uom));return f["default"](this,b,a.mutator(c)),c},a.prototype.__vbar__=function(b){return b instanceof a?this.scp(b):"number"==typeof b?this.scp(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?b.scp(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).scp(this):void 0},a.prototype.__wedge__=function(b){return b instanceof a?this.ext(b):"number"==typeof b?this.scale(b):void 0},a.prototype.__rwedge__=function(b){return b instanceof a?b.ext(this):"number"==typeof b?this.scale(b):void 0},a.prototype.lco=function(b){var c=new a(1,0,0,0,0,0,0,0,s["default"].mul(this.uom,b.uom));return g["default"](this,b,a.mutator(c)),c},a.prototype.__lshift__=function(b){return b instanceof a?this.lco(b):"number"==typeof b?this.lco(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rlshift__=function(b){return b instanceof a?b.lco(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).lco(this):void 0},a.prototype.rco=function(b){var c=new a(1,0,0,0,0,0,0,0,s["default"].mul(this.uom,b.uom));return m["default"](this,b,a.mutator(c)),c},a.prototype.__rshift__=function(b){return b instanceof a?this.rco(b):"number"==typeof b?this.rco(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rrshift__=function(b){return b instanceof a?b.rco(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).rco(this):void 0},a.prototype.pow=function(){throw new Error("pow")},a.prototype.__bang__=function(){return this.inv()},a.prototype.__pos__=function(){return this},a.prototype.neg=function(){return new a(-this.α,-this.x,-this.y,-this.z,-this.xy,-this.yz,-this.zx,-this.β,this.uom)},a.prototype.__neg__=function(){return this.neg()},a.prototype.rev=function(){return new a(this.α,this.x,this.y,this.z,-this.xy,-this.yz,-this.zx,-this.β,this.uom)},a.prototype.__tilde__=function(){return this.rev()},a.prototype.grade=function(b){switch(b){case 0:return a.fromCartesian(this.α,0,0,0,0,0,0,0,this.uom);case 1:return a.fromCartesian(0,this.x,this.y,this.z,0,0,0,0,this.uom);case 2:return a.fromCartesian(0,0,0,0,this.xy,this.yz,this.zx,0,this.uom);case 3:return a.fromCartesian(0,0,0,0,0,0,0,this.β,this.uom);default:return a.fromCartesian(0,0,0,0,0,0,0,0,this.uom)}},a.prototype.cross=function(b){var c,d,e,f,g,h,i,j,k;return d=this.x,g=this.y,j=this.z,e=b.x,h=b.y,k=b.z,c=g*k-j*h,f=j*e-d*k,i=d*h-g*e,new a(0,c,f,i,0,0,0,0,s["default"].mul(this.uom,b.uom))},a.prototype.isOne=function(){return 1===this.α&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.β},a.prototype.isZero=function(){return 0===this.α&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.β},a.prototype.lerp=function(){throw new Error(j["default"]("lerp").message)},a.prototype.cos=function(){s["default"].assertDimensionless(this.uom);var b=Math.cos(this.α);return new a(b,0,0,0,0,0,0,0)},a.prototype.cosh=function(){throw new Error(j["default"]("cosh").message)},a.prototype.distanceTo=function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return Math.sqrt(b*b+c*c+d*d)},a.prototype.equals=function(a){return this.α===a.α&&this.x===a.x&&this.y===a.y&&this.z===a.z&&this.xy===a.xy&&this.yz===a.yz&&this.zx===a.zx&&this.β===a.β?this.uom?a.uom?!0:!1:a.uom?!1:!0:!1},a.prototype.exp=function(){s["default"].assertDimensionless(this.uom);var b=this.grade(2),c=b.norm();if(c.isZero())return new a(1,0,0,0,0,0,0,0,this.uom);var d=c.cos(),e=c.sin(),f=b.direction();return d.add(f.mul(e))},a.prototype.inv=function(){var b=this.α,c=this.x,d=this.y,e=this.z,f=this.xy,g=this.yz,h=this.zx,j=this.β,k=[[b,c,d,e,-f,-g,-h,-j],[c,b,f,-h,-d,-j,e,-g],[d,-f,b,g,c,-e,-j,-h],[e,h,-g,b,-j,d,-c,-f],[f,-d,c,j,b,h,-g,e],[g,j,-e,d,-h,b,f,c],[h,e,j,-c,g,-f,b,d],[j,g,h,f,e,c,d,b]],l=[1,0,0,0,0,0,0,0],m=i["default"](k,l),n=this.uom?this.uom.inv():void 0;return new a(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],n)},a.prototype.log=function(){throw new Error(j["default"]("log").message)},a.prototype.magnitude=function(){return this.norm()},a.prototype.magnitudeSansUnits=function(){return Math.sqrt(this.squaredNormSansUnits())},a.prototype.norm=function(){return new a(this.magnitudeSansUnits(),0,0,0,0,0,0,0,this.uom)},a.prototype.quad=function(){return this.squaredNorm()},a.prototype.quadraticBezier=function(b,c,e){var f=d["default"](b,this.x,c.x,e.x),g=d["default"](b,this.y,c.y,e.y),h=d["default"](b,this.z,c.z,e.z);return new a(0,f,g,h,0,0,0,0,this.uom)},a.prototype.squaredNorm=function(){return new a(this.squaredNormSansUnits(),0,0,0,0,0,0,0,s["default"].mul(this.uom,this.uom))},a.prototype.squaredNormSansUnits=function(){return p["default"](this)},a.prototype.stress=function(){throw new Error(k["default"]("stress").message)},a.prototype.reflect=function(b){var c=a.fromVector(b);return c.mul(this).mul(c).scale(-1)},a.prototype.rotate=function(b){var c=this.x,d=this.y,e=this.z,f=b.xy,g=b.yz,h=b.zx,i=b.α,j=l["default"](b),k=i*c-h*e+f*d,m=i*d-f*c+g*e,n=i*e-g*d+h*c,o=g*c+h*d+f*e,p=j*this.α,q=k*i+o*g+m*f-n*h,r=m*i+o*h+n*g-k*f,s=n*i+o*f+k*h-m*g,t=j*this.β;return a.fromCartesian(p,q,r,s,0,0,0,t,this.uom)},a.prototype.sin=function(){s["default"].assertDimensionless(this.uom);var b=Math.sin(this.α);return new a(b,0,0,0,0,0,0,0,void 0)},a.prototype.sinh=function(){throw new Error(j["default"]("sinh").message)},a.prototype.slerp=function(){throw new Error(j["default"]("slerp").message)},a.prototype.sqrt=function(){return new a(Math.sqrt(this.α),0,0,0,0,0,0,0,s["default"].sqrt(this.uom))},a.prototype.tan=function(){return this.sin().div(this.cos())},a.prototype.toStringCustom=function(a,b){var c=q["default"](this.coords,a,b);if(this.uom){var d=this.uom.toString().trim();return d?c+" "+d:c}return c},a.prototype.toExponential=function(b){var c=function(a){return a.toExponential(b)};return this.toStringCustom(c,a.BASIS_LABELS)},a.prototype.toFixed=function(b){var c=function(a){return a.toFixed(b)};return this.toStringCustom(c,a.BASIS_LABELS)},a.prototype.toPrecision=function(b){var c=function(a){return a.toPrecision(b)};return this.toStringCustom(c,a.BASIS_LABELS)},a.prototype.toString=function(b){var c=function(a){return a.toString(b)};return this.toStringCustom(c,a.BASIS_LABELS)},a.mutator=function(a){var b={set α(b){a._coords[x]=b},set alpha(b){a._coords[x]=b},set x(b){a._coords[y]=b},set y(b){a._coords[z]=b},set z(b){a._coords[A]=b},set yz(b){a._coords[C]=b},set zx(b){a._coords[D]=b},set xy(b){a._coords[B]=b},set β(b){a._coords[E]=b},set beta(b){a._coords[E]=b}};return b},a.copy=function(b,c){return new a(b.α,b.x,b.y,b.z,b.xy,b.yz,b.zx,b.β,c)},a.direction=function(b){return b?new a(0,b.x,b.y,b.z,0,0,0,0).direction():void 0},a.fromSpinor=function(b){return b?new a(b.α,0,0,0,b.xy,b.yz,b.zx,0,void 0):void 0},a.fromVector=function(b,c){return b?new a(0,b.x,b.y,b.z,0,0,0,0,c):void 0},a.random=function(b){return new a(Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),b)},a.scalar=function(b,c){return new a(b,0,0,0,0,0,0,0,c)},a.vector=function(b,c,d,e){return new a(0,b,c,d,0,0,0,0,e)},a.BASIS_LABELS=v["default"],a.zero=new a(0,0,0,0,0,0,0,0),a.one=new a(1,0,0,0,0,0,0,0),a.e1=new a(0,1,0,0,0,0,0,0),a.e2=new a(0,0,1,0,0,0,0,0),a.e3=new a(0,0,0,1,0,0,0,0),a.kilogram=new a(1,0,0,0,0,0,0,0,s["default"].KILOGRAM),a.meter=new a(1,0,0,0,0,0,0,0,s["default"].METER),a.second=new a(1,0,0,0,0,0,0,0,s["default"].SECOND),a.coulomb=new a(1,0,0,0,0,0,0,0,s["default"].COULOMB),a.ampere=new a(1,0,0,0,0,0,0,0,s["default"].AMPERE),a.kelvin=new a(1,0,0,0,0,0,0,0,s["default"].KELVIN),a.mole=new a(1,0,0,0,0,0,0,0,s["default"].MOLE),a.candela=new a(1,0,0,0,0,0,0,0,s["default"].CANDELA),a}(),a("default",F)}}}),System.register("davinci-eight/math/Coords.js",["./VectorN"],function(a){var b,c,d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=function(a){function b(b,c,d){a.call(this,b,c,d)}return d(b,a),b.prototype.approx=function(a){for(var b=0,c=this._coords.length,d=0;c>d;d++)b=Math.max(b,Math.abs(this._coords[d]));for(var e=b*Math.pow(10,-a),d=0;c>d;d++)Math.abs(this._coords[d])<e&&(this._coords[d]=0)},b.prototype.equals=function(a){if(a instanceof b){for(var c=this._coords.length,d=0;c>d;d++)if(this.coords[d]!==a[d])return console.log(d+" is different"),!1;return!0}return console.log("It's not a Coords"),!1},b}(b["default"]),a("default",c)}}}),System.register("davinci-eight/math/dotVectorCartesianE3.js",[],function(a){function b(a,b,c,d,e,f){return a*d+b*e+c*f}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/dotVectorE3.js",["../math/dotVectorCartesianE3","../checks/isDefined"],function(a){function b(a,b){return d["default"](a)&&d["default"](b)?c["default"](a.x,a.y,a.z,b.x,b.y,b.z):void 0}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/add3x3.js",[],function(a){function b(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d+m,c[3]=e+n,c[6]=f+o,c[1]=g+p,c[4]=h+q,c[7]=i+r,c[2]=j+s,c[5]=k+t,c[8]=l+u,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/det3x3.js",[],function(a){function b(a){var b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return b*f*j+c*g*h+d*e*i-b*g*i-c*e*j-d*f*h}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/inv3x3.js",["../math/det3x3"],function(a){function b(a,b){var d=c["default"](a),e=a[0],f=a[3],g=a[6],h=a[1],i=a[4],j=a[7],k=a[2],l=a[5],m=a[8],n=i*m-j*l,o=g*l-f*m,p=f*j-g*i,q=j*k-h*m,r=e*m-g*k,s=g*h-e*j,t=h*l-i*k,u=f*k-e*l,v=e*i-f*h,w=1/d;b[0]=n*w,b[3]=o*w,b[6]=p*w,b[1]=q*w,b[4]=r*w,b[7]=s*w,b[2]=t*w,b[5]=u*w,b[8]=v*w}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/math/mul3x3.js",[],function(a){function b(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d*m+e*p+f*s,c[3]=d*n+e*q+f*t,c[6]=d*o+e*r+f*u,c[1]=g*m+h*p+i*s,c[4]=g*n+h*q+i*t,c[7]=g*o+h*r+i*u,c[2]=j*m+k*p+l*s,c[5]=j*n+k*q+l*t,c[8]=j*o+k*r+l*u,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Matrix3.js",["../math/AbstractMatrix","../math/add3x3","../math/det3x3","../math/inv3x3","../math/mul3x3","../checks/mustBeNumber"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b){a.call(this,b,3)}return i(b,a),b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return c["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){return b.zero().copy(this)},b.prototype.det=function(){return d["default"](this.elements)},b.prototype.invertUpperLeft=function(a,b){void 0===b&&(b=!1);var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4];var e=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===e){var f="Matrix3.invertUpperLeft(): can't invert matrix, determinant is 0";if(b)throw new Error(f);return console.warn(f),this.one(),this}return this.scale(1/e),this},b.prototype.inv=function(){return e["default"](this.elements,this.elements),this},b.prototype.isOne=function(){var a=this.elements,b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return 1===b&&0===c&&0===d&&0===e&&1===f&&0===g&&0===h&&0===i&&1===j},b.prototype.isZero=function(){var a=this.elements,b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return 0===b&&0===c&&0===d&&0===e&&0===f&&0===g&&0===h&&0===i&&0===j},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.rmul=function(a){return f["default"](a.elements,this.elements,this.elements),this},b.prototype.mul2=function(a,b){return f["default"](a.elements,b.elements,this.elements),this},b.prototype.neg=function(){return this.scale(-1)},b.prototype.normalFromMatrix4=function(a){return this.invertUpperLeft(a).transpose()},b.prototype.one=function(){return this.set(1,0,0,0,1,0,0,0,1)},b.prototype.reflection=function(a){var b=g["default"]("n.x",a.x),c=g["default"]("n.y",a.y),d=-2*b*c,e=1-2*b*b,f=1-2*c*c;return this.set(e,d,0,d,f,0,0,0,1),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[3+a],b[6+a]]},b.prototype.rotate=function(a){return this.rmul(b.rotation(a))},b.prototype.rotation=function(a){var b=a.α,c=a.β,d=b*b-c*c,e=2*b*c;return this.set(d,e,0,-e,d,0,0,0,1),this},b.prototype.scale=function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},b.prototype.set=function(a,b,c,d,e,f,g,h,i){var j=this.elements;return j[0]=a,j[3]=b,j[6]=c,j[1]=d,j[4]=e,j[7]=f,j[2]=g,j[5]=h,j[8]=i,this},b.prototype.sub=function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[5],l=a.elements,m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s=l[6],t=l[7],u=l[8],v=c-m,w=d-n,x=e-o,y=f-p,z=g-q,A=h-r,B=i-s,C=j-t,D=k-u;return this.set(v,y,B,w,z,C,x,A,D)},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translation=function(a){var b=a.x,c=a.y;return this.set(1,0,b,0,1,c,0,0,1)},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},b.prototype.zero=function(){return this.set(0,0,0,0,0,0,0,0,0)},b.prototype.__add__=function(a){return a instanceof b?this.clone().add(a):void 0},b.prototype.__radd__=function(a){return a instanceof b?a.clone().add(this):void 0},b.prototype.__mul__=function(a){return a instanceof b?this.clone().mul(a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?a.clone().mul(this):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__pos__=function(){return this.clone()},b.prototype.__neg__=function(){return this.clone().scale(-1)},b.prototype.__sub__=function(a){return a instanceof b?this.clone().sub(a):void 0},b.prototype.__rsub__=function(a){return a instanceof b?a.clone().sub(this):void 0},b.one=function(){return new b(new Float32Array([1,0,0,0,1,0,0,0,1]))},b.reflection=function(a){return b.zero().reflection(a)},b.rotation=function(a){return b.zero().rotation(a)},b.translation=function(a){return b.zero().translation(a)},b.zero=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0]))},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight/math/randomRange.js",[],function(a){function b(a,b){return(b-a)*Math.random()+a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/toStringCustom.js",["../math/stringFromCoordinates"],function(a){function b(a,b,d,e){var f=c["default"](a,d,e);if(b){var g=b.toString().trim();return g?f+" "+g:f}return f}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/math/wedgeXY.js",[],function(a){function b(a,b,c,d,e){return a*e-b*d}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/wedgeYZ.js",[],function(a){function b(a,b,c,d,e,f){return b*f-c*e}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/wedgeZX.js",[],function(a){function b(a,b,c,d,e,f){return c*d-a*f}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Vector3.js",["./Coords","./dotVectorE3","./Matrix3","../checks/isDefined","../checks/isNumber","./randomRange","./toStringCustom","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a){function b(a){return[a.x,a.y,a.z]}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=Math.sqrt,n=0,o=1,p=2,q=["e1","e2","e3"],r=function(a){function c(b,c){void 0===b&&(b=[0,0,0]),void 0===c&&(c=!1),a.call(this,b,c,3)}return s(c,a),c.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z},Object.defineProperty(c.prototype,"x",{get:function(){return this.coords[n]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[n]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.coords[o]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[o]=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"z",{get:function(){return this.coords[p]},set:function(a){this.modified=this.modified||this.z!==a,this.coords[p]=a},enumerable:!0,configurable:!0}),c.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},c.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[3]*c+e[6]*d,this.y=e[1]*b+e[4]*c+e[7]*d,this.z=e[2]*b+e[5]*c+e[8]*d,this},c.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},c.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},c.prototype.reflect=function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=2*(b*e+c*f+d*g);return this.x=b-h*e,this.y=c-h*f,this.z=d-h*g,this},c.prototype.rotate=function(a){var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.α,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},c.prototype.clone=function(){return new c([this.x,this.y,this.z])},c.prototype.copy=function(a){if(a)return this.x=a.x,this.y=a.y,this.z=a.z,this;throw new Error("source for copy must be a vector")},c.prototype.copyCoordinates=function(a){return this.x=a[n],this.y=a[o],this.z=a[p],this},c.prototype.cross=function(a){return this.cross2(this,a)},c.prototype.cross2=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=k["default"](c,d,e,f,g,h),this.y=l["default"](c,d,e,f,g,h),this.z=j["default"](c,d,e,f,g,h),this},c.prototype.distanceTo=function(a){return f["default"](a)?m(this.quadranceTo(a)):void 0},c.prototype.quadranceTo=function(a){if(f["default"](a)){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d}return void 0},c.prototype.divByScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},c.prototype.dot=function(a){return c.dot(this,a)},c.prototype.dual=function(a,b){return b?(this.x=a.yz,this.y=a.zx,this.z=a.xy):(this.x=-a.yz,this.y=-a.zx,this.z=-a.xy),this},c.prototype.equals=function(a){return a instanceof c?this.x===a.x&&this.y===a.y&&this.z===a.z:!1},c.prototype.magnitude=function(){return m(this.squaredNorm())},c.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},c.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},c.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},c.prototype.normalize=function(){var a=this.magnitude();return 0!==a?this.divByScalar(a):this.zero()},c.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this},c.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},c.prototype.setXYZ=function(a,b,c){return this.x=a,this.y=b,this.z=c,this},c.prototype.setY=function(a){return this.y=a,this},c.prototype.slerp=function(){return this},c.prototype.squaredNorm=function(){return d["default"](this,this)},c.prototype.sub=function(a,b){return void 0===b&&(b=1),this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this},c.prototype.toExponential=function(a){var c=function(b){return b.toExponential(a)};return i["default"](b(this),void 0,c,q)},c.prototype.toFixed=function(a){var c=function(b){return b.toFixed(a)};return i["default"](b(this),void 0,c,q)},c.prototype.toPrecision=function(a){var c=function(b){return b.toPrecision(a)};return i["default"](b(this),void 0,c,q)},c.prototype.toString=function(a){var c=function(b){return b.toString(a)};return i["default"](b(this),void 0,c,q)},c.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this},c.prototype.__add__=function(a){return a instanceof c?this.clone().add(a,1):void 0},c.prototype.__sub__=function(a){return a instanceof c?this.clone().sub(a):void 0},c.prototype.__mul__=function(a){return g["default"](a)?this.clone().scale(a):void 0},c.prototype.__rmul__=function(a){return"number"==typeof a?this.clone().scale(a):a instanceof e["default"]?this.clone().applyMatrix(a):void 0},c.copy=function(a){return new c([a.x,a.y,a.z])},c.dual=function(a,b){return new c(b?[a.yz,a.zx,a.xy]:[-a.yz,-a.zx,-a.xy])},c.isInstance=function(a){return a instanceof c},c.lerp=function(a,b,d){return c.copy(b).sub(a).scale(d).add(a)},c.random=function(){var a=h["default"](-1,1),b=h["default"](-1,1),d=h["default"](-1,1);return c.vector(a,b,d).normalize()},c.vector=function(a,b,d){return new c([a,b,d])},c.zero=function(){return new c([0,0,0])},c}(c["default"]),a("default",r)}}}),System.register("davinci-eight/facets/viewArrayFromEyeLookUp.js",["../math/Vector3","../checks/mustSatisfy","../checks/isDefined"],function(a){function b(a,b,i,j){var k=e["default"](j)?j:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);return d["default"]("matrix",16===k.length,function(){return"matrix must have length 16"}),f.copy(a).sub(b),0===f.x&&0===f.y&&0===f.z?f.z=1:f.normalize(),f.approx(12).normalize(),g.copy(i).cross(f).approx(12).normalize(),h.copy(f).cross(g).approx(12).normalize(),k[0]=g.x,k[4]=g.y,k[8]=g.z,k[12]=-c["default"].dot(a,g),k[1]=h.x,k[5]=h.y,k[9]=h.z,k[13]=-c["default"].dot(a,h),k[2]=f.x,k[6]=f.y,k[10]=f.z,k[14]=-c["default"].dot(a,f),k[3]=0,k[7]=0,k[11]=0,k[15]=1,k}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=new c["default"],g=new c["default"],h=new c["default"]}}}),System.register("davinci-eight/facets/viewMatrixFromEyeLookUp.js",["../checks/isDefined","../math/Matrix4","./viewArrayFromEyeLookUp"],function(a){function b(a,b,f,g){var h=c["default"](g)?g:d["default"].one();return e["default"](a,b,f,h.elements),h}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/facets/createView.js",["../math/Geometric3","../math/G3","../math/R3","../math/Vector3","../math/Matrix4","../checks/mustBeNumber","../checks/mustBeObject","../core/GraphicsProgramSymbols","../checks/isUndefined","./viewMatrixFromEyeLookUp","../i18n/readOnly"],function(a){function b(a){void 0===a&&(a={});var b=f["default"].copy(d["default"].e3),c=f["default"].copy(d["default"].zero),e=f["default"].copy(d["default"].e2),u=g["default"].one(),v=k["default"](a.viewMatrixName)?j["default"].UNIFORM_VIEW_MATRIX:a.viewMatrixName;b.modified=!0,c.modified=!0,e.modified=!0;var w={setProperty:function(){return w},getAttitude:function(){return p.copyVector(b).subVector(c).normalize(),n.copyVector(e).dual(n).rco(p).neg(),o.copy(n).ext(p).dual(o),q.one().add(n.mul(r)).add(o.mul(s)).add(p.mul(t)),q.normalize(),q},setAttitude:function(a){var d=c.distanceTo(b);q.copySpinor(a),n.copy(r).rotate(q),o.copy(s).rotate(q),p.copy(t).rotate(q),b.copy(c).add(p,d)},getPosition:function(){return b},setPosition:function(a){b.copy(a)},get eye(){return b},set eye(a){w.setEye(a)},setEye:function(a){return i["default"]("eye",a),b.x=h["default"]("eye.x",a.x),b.y=h["default"]("eye.y",a.y),b.z=h["default"]("eye.z",a.z),w},get look(){return c},set look(a){w.setLook(a)},setLook:function(a){return i["default"]("look",a),c.x=a.x,c.y=a.y,c.z=a.z,w},get up(){return e},set up(a){w.setUp(a)},setUp:function(a){return i["default"]("up",a),e.x=a.x,e.y=a.y,e.z=a.z,e.normalize(),w},get viewMatrix(){return u},set viewMatrix(a){throw new Error(m["default"]("viewMatrix").message)},setUniforms:function(a){(b.modified||c.modified||e.modified)&&(l["default"](b,c,e,u),b.modified=!1,c.modified=!1,e.modified=!1),a.mat4(v,u,!1)}};return w}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=c["default"].zero(),o=c["default"].zero(),p=c["default"].zero(),q=c["default"].one(),r=c["default"].fromVector(e["default"].e1),s=c["default"].fromVector(e["default"].e2),t=c["default"].fromVector(e["default"].e3)}}}),System.register("davinci-eight/core/GraphicsProgramSymbols.js",[],function(a){var b;return{setters:[],execute:function(){b=function(){function a(){}return a.ATTRIBUTE_COLOR="aColor",a.ATTRIBUTE_GEOMETRY_INDEX="aGeometryIndex",a.ATTRIBUTE_NORMAL="aNormal",a.ATTRIBUTE_POSITION="aPosition",a.ATTRIBUTE_TANGENT="aTangent",a.ATTRIBUTE_COORDS="aCoords",a.UNIFORM_ALPHA="uAlpha",a.UNIFORM_AMBIENT_LIGHT="uAmbientLight",a.UNIFORM_COLOR="uColor",a.UNIFORM_DIRECTIONAL_LIGHT_COLOR="uDirectionalLightColor",a.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION="uDirectionalLightDirection",a.UNIFORM_POINT_LIGHT_COLOR="uPointLightColor",a.UNIFORM_POINT_LIGHT_POSITION="uPointLightPosition",a.UNIFORM_POINT_SIZE="uPointSize",a.UNIFORM_PROJECTION_MATRIX="uProjection",a.UNIFORM_REFLECTION_ONE_MATRIX="uReflectionOne",a.UNIFORM_REFLECTION_TWO_MATRIX="uReflectionTwo",a.UNIFORM_MODEL_MATRIX="uModel",a.UNIFORM_NORMAL_MATRIX="uNormal",a.UNIFORM_VIEW_MATRIX="uView",a.VARYING_COLOR="vColor",a.VARYING_LIGHT="vLight",a}(),a("default",b)}}}),System.register("davinci-eight/math/VectorN.js",["../checks/isDefined","../checks/isUndefined","../checks/mustSatisfy"],function(a){function b(a){return"push(value: "+a+"): number"}function c(a){return"pop(): "+a}function d(a){return a+" is not allowed for a fixed size vector"}function e(){return d(b("T"))}function f(){return d(c("T"))}var g,h,i,j;return{setters:[function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(a,b,c){void 0===b&&(b=!1),this.modified=b,g["default"](c)?(this._size=c,this._coords=a,i["default"]("data.length",a.length===c,function(){return""+c})):(this._size=void 0,this._coords=a)}return Object.defineProperty(a.prototype,"coords",{get:function(){return this._coords},set:function(a){this._coords=a,this.modified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this.coords.length},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a(this._coords,this.modified,this._size)},a.prototype.getComponent=function(a){return this.coords[a]},a.prototype.pop=function(){if(h["default"](this._size))return this.coords.pop();throw new Error(f())},a.prototype.push=function(a){if(h["default"](this._size)){var b=this.coords,c=b.push(a);return this.coords=b,c}throw new Error(e())},a.prototype.setComponent=function(a,b){var c=this.coords,d=c[a];b!==d&&(c[a]=b,this.coords=c,this.modified=!0)},a.prototype.toArray=function(a,b){void 0===a&&(a=[]),void 0===b&&(b=0);for(var c=this.coords,d=c.length,e=0;d>e;e++)a[b+e]=c[e];return a},a.prototype.toLocaleString=function(){return this.coords.toLocaleString();

},a.prototype.toString=function(){return this.coords.toString()},a}(),a("default",j)}}}),System.register("davinci-eight/math/Vector1.js",["../math/VectorN"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a}],execute:function(){c=Math.exp,d=Math.log,e=Math.sqrt,f=0,g=function(a){function b(b,c){void 0===b&&(b=[0]),void 0===c&&(c=!1),a.call(this,b,c,1)}return h(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[f]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[f]=a},enumerable:!0,configurable:!0}),b.prototype.set=function(a){return this.x=a,this},b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this},b.prototype.scp=function(){return this},b.prototype.adj=function(){throw new Error("TODO: Vector1.adj")},b.prototype.applyMatrix=function(a){var b=this.x,c=a.elements;return this.x=c[0]*b,this},b.prototype.conj=function(){return this},b.prototype.copy=function(a){return this.x=a.x,this},b.prototype.det=function(){return this.x},b.prototype.dual=function(){return this},b.prototype.exp=function(){return this.x=c(this.x),this},b.prototype.one=function(){return this.x=1,this},b.prototype.inv=function(){return this.x=1/this.x,this},b.prototype.lco=function(){return this},b.prototype.log=function(){return this.x=d(this.x),this},b.prototype.mul=function(a){return this.x*=a.x,this},b.prototype.norm=function(){return this},b.prototype.div=function(a){return this.x/=a.x,this},b.prototype.divByScalar=function(a){return this.x/=a,this},b.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this},b.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this},b.prototype.floor=function(){return this.x=Math.floor(this.x),this},b.prototype.ceil=function(){return this.x=Math.ceil(this.x),this},b.prototype.rev=function(){return this},b.prototype.rco=function(){return this},b.prototype.round=function(){return this.x=Math.round(this.x),this},b.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this},b.prototype.scale=function(a){return this.x*=a,this},b.prototype.stress=function(a){return this.x*=a.x,this},b.prototype.sub=function(a){return this.x-=a.x,this},b.prototype.subScalar=function(a){return this.x-=a,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this},b.prototype.neg=function(){return this.x=-this.x,this},b.prototype.distanceTo=function(a){return e(this.quadranceTo(a))},b.prototype.dot=function(a){return this.x*a.x},b.prototype.magnitude=function(){return e(this.squaredNorm())},b.prototype.normalize=function(){return this.divByScalar(this.magnitude())},b.prototype.mul2=function(){return this},b.prototype.quad=function(){var a=this.x;return this.x=a*a,this},b.prototype.squaredNorm=function(){return this.x*this.x},b.prototype.quadranceTo=function(a){var b=this.x-a.x;return b*b},b.prototype.reflect=function(){return this},b.prototype.reflection=function(){return this},b.prototype.rotate=function(){return this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.equals=function(a){return a.x===this.x},b.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this},b.prototype.slerp=function(){return this},b.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a},b.prototype.toExponential=function(){return"TODO: Vector1.toExponential"},b.prototype.toFixed=function(){return"TODO: Vector1.toFixed"},b.prototype.toPrecision=function(){return"TODO: Vector1.toPrecision"},b.prototype.toString=function(){return"TODO: Vector1.toString"},b.prototype.translation=function(){return this.one()},b.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this},b.prototype.clone=function(){return new b([this.x])},b.prototype.ext=function(){return this},b.prototype.zero=function(){return this.x=0,this},b.random=function(){return new(b[Math.random()])},b.zero=function(){return new b[0]},b}(b["default"]),a("default",g)}}}),System.register("davinci-eight/checks/mustBeDefined.js",["../checks/mustSatisfy","../checks/isDefined"],function(a){function b(){return"not be 'undefined'"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/AbstractMatrix.js",["../checks/mustBeDefined","../checks/mustBeInteger","../checks/expectArg","../i18n/readOnly"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a,e){this._elements=b["default"]("elements",a),this._dimensions=c["default"]("dimensions",e),this._length=e*e,d["default"]("elements",a).toSatisfy(a.length===this._length,"elements must have length "+this._length),this.modified=!1}return Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._dimensions},set:function(){throw new Error(e["default"]("dimensions").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elements",{get:function(){return this._elements},set:function(a){d["default"]("elements",a).toSatisfy(a.length===this._length,"elements length must be "+this._length),this._elements=a},enumerable:!0,configurable:!0}),a.prototype.copy=function(a){return this.elements.set(a.elements),this},a.prototype.getElement=function(a,b){return this.elements[a+b*this._dimensions]},a.prototype.isOne=function(){for(var a=0;a<this._dimensions;a++)for(var b=0;b<this._dimensions;b++){var c=this.getElement(a,b);if(a===b){if(1!==c)return!1}else if(0!==c)return!1}return!0},a.prototype.setElement=function(a,b,c){this.elements[a+b*this._dimensions]=c},a}(),a("default",f)}}}),System.register("davinci-eight/math/add4x4.js",[],function(a){function b(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];return c[0]=d+t,c[4]=e+u,c[8]=f+v,c[12]=g+w,c[1]=h+x,c[5]=i+y,c[9]=j+z,c[13]=k+A,c[2]=l+B,c[6]=m+C,c[10]=n+D,c[14]=o+E,c[3]=p+F,c[7]=q+G,c[11]=r+H,c[15]=s+I,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/det4x4.js",[],function(a){function b(a){var b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=b*g,s=b*h,t=b*i,u=c*f,v=c*h,w=c*i,x=d*f,y=d*g,z=d*i,A=e*f,B=e*g,C=e*h;return n*((C-z)*k+(w-B)*l+(y-v)*m)+o*((z-C)*j+(A-t)*l+(s-x)*m)+p*((B-w)*j+(t-A)*k+(u-r)*m)+q*((v-y)*j+(x-s)*k+(r-u)*l)}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/inv4x4.js",[],function(a){function b(a,b){var c=a[0],d=a[4],e=a[8],f=a[12],g=a[1],h=a[5],i=a[9],j=a[13],k=a[2],l=a[6],m=a[10],n=a[14],o=a[3],p=a[7],q=a[11],r=a[15],s=i*n*p-j*m*p+j*l*q-h*n*q-i*l*r+h*m*r,t=f*m*p-e*n*p-f*l*q+d*n*q+e*l*r-d*m*r,u=e*j*p-f*i*p+f*h*q-d*j*q-e*h*r+d*i*r,v=f*i*l-e*j*l-f*h*m+d*j*m+e*h*n-d*i*n,w=j*m*o-i*n*o-j*k*q+g*n*q+i*k*r-g*m*r,x=e*n*o-f*m*o+f*k*q-c*n*q-e*k*r+c*m*r,y=f*i*o-e*j*o-f*g*q+c*j*q+e*g*r-c*i*r,z=e*j*k-f*i*k+f*g*m-c*j*m-e*g*n+c*i*n,A=h*n*o-j*l*o+j*k*p-g*n*p-h*k*r+g*l*r,B=f*l*o-d*n*o-f*k*p+c*n*p+d*k*r-c*l*r,C=d*j*o-f*h*o+f*g*p-c*j*p-d*g*r+c*h*r,D=f*h*k-d*j*k-f*g*l+c*j*l+d*g*n-c*h*n,E=i*l*o-h*m*o-i*k*p+g*m*p+h*k*q-g*l*q,F=d*m*o-e*l*o+e*k*p-c*m*p-d*k*q+c*l*q,G=e*h*o-d*i*o-e*g*p+c*i*p+d*g*q-c*h*q,H=d*i*k-e*h*k+e*g*l-c*i*l-d*g*m+c*h*m,I=c*s+g*t+k*u+o*v,J=1/I;b[0]=s*J,b[4]=t*J,b[8]=u*J,b[12]=v*J,b[1]=w*J,b[5]=x*J,b[9]=y*J,b[13]=z*J,b[2]=A*J,b[6]=B*J,b[10]=C*J,b[14]=D*J,b[3]=E*J,b[7]=F*J,b[11]=G*J,b[15]=H*J}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mul4x4.js",[],function(a){function b(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];return c[0]=d*t+e*x+f*B+g*F,c[4]=d*u+e*y+f*C+g*G,c[8]=d*v+e*z+f*D+g*H,c[12]=d*w+e*A+f*E+g*I,c[1]=h*t+i*x+j*B+k*F,c[5]=h*u+i*y+j*C+k*G,c[9]=h*v+i*z+j*D+k*H,c[13]=h*w+i*A+j*E+k*I,c[2]=l*t+m*x+n*B+o*F,c[6]=l*u+m*y+n*C+o*G,c[10]=l*v+m*z+n*D+o*H,c[14]=l*w+m*A+n*E+o*I,c[3]=p*t+q*x+r*B+s*F,c[7]=p*u+q*y+r*C+s*G,c[11]=p*v+q*z+r*D+s*H,c[15]=p*w+q*A+r*E+s*I,c}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Matrix4.js",["../math/AbstractMatrix","../math/add4x4","./det4x4","../math/inv4x4","../math/mul4x4"],function(a){var b,c,d,e,f,g,h=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function b(b){a.call(this,b,4)}return h(b,a),b.one=function(){return new b(new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]))},b.zero=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))},b.scaling=function(a){return b.one().scaling(a)},b.translation=function(a){return b.one().translation(a)},b.rotation=function(a){return b.one().rotation(a)},b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return c["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){return b.zero().copy(this)},b.prototype.compose=function(a,b,c){return this.scaling(a),this.rotate(b),this.translate(c),this},b.prototype.copy=function(a){return this.elements.set(a.elements),this},b.prototype.det=function(){return d["default"](this.elements)},b.prototype.inv=function(){return e["default"](this.elements,this.elements),this},b.prototype.one=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},b.prototype.scale=function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},b.prototype.frustum=function(a,b,c,d,e,f){var g=this.elements,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},b.prototype.rotationAxis=function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1)},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){return f["default"](a.elements,b.elements,this.elements),this},b.prototype.rmul=function(a){return this.mul2(a,this)},b.prototype.reflection=function(a){var b=a.x,c=a.y,d=a.z,e=-2*b*c,f=-2*c*d,g=-2*d*b,h=1-2*b*b,i=1-2*c*c,j=1-2*d*d;return this.set(h,e,g,0,e,i,f,0,g,f,j,0,0,0,0,1),this},b.prototype.rotate=function(a){return this.rmul(b.rotation(a))},b.prototype.rotation=function(a){var b=-a.yz,c=-a.zx,d=-a.xy,e=a.α,f=b+b,g=c+c,h=d+d,i=b*f,j=b*g,k=b*h,l=c*g,m=c*h,n=d*h,o=e*f,p=e*g,q=e*h;return this.set(1-l-n,j-q,k+p,0,j+q,1-i-n,m-o,0,k-p,m+o,1-i-l,0,0,0,0,1),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[4+a],b[8+a],b[12+a]]},b.prototype.scaleXYZ=function(a){return this.rmul(b.scaling(a))},b.prototype.scaling=function(a){return this.set(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1)},b.prototype.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translate=function(a){return this.rmul(b.translation(a))},b.prototype.translation=function(a){var b=a.x,c=a.y,d=a.z;return this.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1)},b.prototype.zero=function(){return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},b.prototype.__mul__=function(a){return a instanceof b?b.one().mul2(this,a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?b.one().mul2(a,this):"number"==typeof a?this.clone().scale(a):void 0},b}(b["default"]),a("default",g)}}}),System.register("davinci-eight/facets/frustumMatrix.js",["../checks/expectArg","../checks/isDefined"],function(a){function b(a,b,e,f,g,h,i){c["default"]("left",a).toBeNumber(),c["default"]("right",b).toBeNumber(),c["default"]("bottom",e).toBeNumber(),c["default"]("top",f).toBeNumber(),c["default"]("near",g).toBeNumber(),c["default"]("far",h).toBeNumber();var j=d["default"](i)?i:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);c["default"]("m",j).toSatisfy(16===j.length,"elements must have length 16");var k=2*g/(b-a),l=2*g/(f-e),m=(b+a)/(b-a),n=(f+e)/(f-e),o=-(h+g)/(h-g),p=-2*h*g/(h-g);return j[0]=k,j[4]=0,j[8]=m,j[12]=0,j[1]=0,j[5]=l,j[9]=n,j[13]=0,j[2]=0,j[6]=0,j[10]=o,j[14]=p,j[3]=0,j[7]=0,j[11]=-1,j[15]=0,j}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/checks/isUndefined.js",[],function(a){function b(a){return"undefined"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/expectArg.js",["../checks/isUndefined","../checks/mustBeNumber"],function(a){function b(a,b){return d["default"](b)?a:b()}function c(a,c){var f={toSatisfy:function(a,b){if(d["default"](a))throw new Error("condition must be specified");if(d["default"](b))throw new Error("message must be specified");if(!a)throw new Error(b);return f},toBeBoolean:function(d){var e=typeof c;if("boolean"!==e)throw new Error(b("Expecting argument "+a+": "+e+" to be a boolean.",d));return f},toBeDefined:function(){var b=typeof c;if("undefined"===b){var d="Expecting argument "+a+": "+b+" to be defined.";throw new Error(d)}return f},toBeInClosedInterval:function(b,d){var g=c,h=g;if(e["default"]("x",h),h>=b&&d>=h)return f;var i="Expecting argument "+a+" => "+c+" to be in the range ["+b+", "+d+"].";throw new Error(i)},toBeFunction:function(){var b=typeof c;if("function"!==b){var d="Expecting argument "+a+": "+b+" to be a function.";throw new Error(d)}return f},toBeNumber:function(d){var e=typeof c;if("number"!==e)throw new Error(b("Expecting argument "+a+": "+e+" to be a number.",d));return f},toBeObject:function(d){var e=typeof c;if("object"!==e)throw new Error(b("Expecting argument "+a+": "+e+" to be an object.",d));return f},toBeString:function(){var b=typeof c;if("string"!==b){var d="Expecting argument "+a+": "+b+" to be a string.";throw new Error(d)}return f},toBeUndefined:function(){var b=typeof c;if("undefined"!==b){var d="Expecting argument "+a+": "+b+" to be undefined.";throw new Error(d)}return f},toNotBeNull:function(){if(null===c){var b="Expecting argument "+a+" to not be null.";throw new Error(b)}return f},get value(){return c}};return f}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/facets/perspectiveArray.js",["./frustumMatrix","../checks/expectArg"],function(a){function b(a,b,e,f,g){d["default"]("fov",a).toBeNumber(),d["default"]("aspect",b).toBeNumber(),d["default"]("near",e).toBeNumber(),d["default"]("far",f).toBeNumber();var h=e*Math.tan(.5*a),i=-h,j=i*b,k=h*b;return c["default"](j,k,i,h,e,f,g)}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/facets/perspectiveMatrix.js",["../checks/isDefined","../math/Matrix4","./perspectiveArray"],function(a){function b(a,b,f,g,h){var i=c["default"](h)?h:d["default"].one();return e["default"](a,b,f,g,i.elements),i}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/facets/createPerspective.js",["./createView","../math/Matrix4","../core/GraphicsProgramSymbols","../i18n/readOnly","../math/Vector1","../checks/isUndefined","../checks/mustBeNumber","./perspectiveMatrix"],function(a){function b(a){a=a||{};var b=new g["default"]([h["default"](a.fov)?75*Math.PI/180:a.fov]),k=new g["default"]([h["default"](a.aspect)?1:a.aspect]),l=new g["default"]([h["default"](a.near)?.1:a.near]),m=new g["default"]([i["default"]("options.far",h["default"](a.far)?2e3:a.far)]),n=h["default"](a.projectionMatrixName)?e["default"].UNIFORM_PROJECTION_MATRIX:a.projectionMatrixName,o=c["default"](a),p=d["default"].one(),q=!0,r={setProperty:function(){return r},getAttitude:function(){return o.getAttitude()},setAttitude:function(a){return o.setAttitude(a)},getPosition:function(){return o.getPosition()},setPosition:function(a){return o.setPosition(a)},get eye(){return o.eye},set eye(a){o.eye=a},setEye:function(a){return o.setEye(a),r},get look(){return o.look},set look(a){o.look=a},setLook:function(a){return o.setLook(a),r},get up(){return o.up},set up(a){o.up=a},setUp:function(a){return o.setUp(a),r},get fov(){return b.x},set fov(a){r.setFov(a)},setFov:function(a){return i["default"]("fov",a),q=q||b.x!==a,b.x=a,r},get aspect(){return k.x},set aspect(a){r.setAspect(a)},setAspect:function(a){return i["default"]("aspect",a),q=q||k.x!==a,k.x=a,r},get near(){return l.x},set near(a){r.setNear(a)},setNear:function(a){return a!==l.x&&(l.x=a,q=!0),r},get far(){return m.x},set far(a){r.setFar(a)},setFar:function(a){return a!==m.x&&(m.x=a,q=!0),r},get projectionMatrix(){return q&&(j["default"](b.x,k.x,l.x,m.x,p),q=!1),p},set projectionMatrix(a){throw new Error(f["default"]("projectionMatrix").message)},get viewMatrix(){return o.viewMatrix},set viewMatrix(a){o.viewMatrix=a},setUniforms:function(a){q&&(j["default"](b.x,k.x,l.x,m.x,p),q=!1),a.mat4(n,p,!1),o.setUniforms(a)}};return r}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){}}}),System.register("davinci-eight/checks/isGE.js",[],function(a){function b(a,b){return a>=b}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeGE.js",["../checks/mustSatisfy","../checks/isGE"],function(a){function b(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be greater than or equal to "+e},f),b}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/checks/isLE.js",[],function(a){function b(a,b){return b>=a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeLE.js",["../checks/mustSatisfy","../checks/isLE"],function(a){function b(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be less than or equal to "+e},f),b}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/facets/PerspectiveCamera.js",["./createPerspective","../i18n/readOnly","../checks/mustBeObject","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNumber","../checks/mustBeString","../math/R3"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(a,c,d,h){void 0===a&&(a=45*Math.PI/180),void 0===c&&(c=1),void 0===d&&(d=.1),void 0===h&&(h=2e3),g["default"]("fov",a),e["default"]("fov",a,0),f["default"]("fov",a,Math.PI),g["default"]("aspect",c),e["default"]("aspect",c,0),g["default"]("near",d),e["default"]("near",d,0),g["default"]("far",h),e["default"]("far",h,0),this.inner=b["default"]({fov:a,aspect:c,near:d,far:h}),this.position.copy(i["default"].e3).scale(10)}return a.prototype.setUniforms=function(a){this.inner.setNear(this.near),this.inner.setFar(this.far),this.inner.setUniforms(a)},a.prototype.getProperty=function(b){switch(h["default"]("name",b),b){case a.PROP_EYE:case a.PROP_POSITION:return this.eye.coords}},a.prototype.setProperty=function(b,c){switch(h["default"]("name",b),d["default"]("value",c),b){case a.PROP_EYE:case a.PROP_POSITION:this.eye.copyCoordinates(c)}return this},Object.defineProperty(a.prototype,"aspect",{get:function(){return this.inner.aspect},set:function(a){this.inner.aspect=a},enumerable:!0,configurable:!0}),a.prototype.setAspect=function(a){return this.inner.aspect=a,this},a.prototype.getAttitude=function(){return this.inner.getAttitude()},a.prototype.setAttitude=function(a){return this.inner.setAttitude(a)},Object.defineProperty(a.prototype,"eye",{get:function(){return this.inner.eye},set:function(a){this.inner.eye.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this.inner.eye},set:function(a){this.inner.eye.copy(a)},enumerable:!0,configurable:!0}),a.prototype.getPosition=function(){return this.inner.getPosition()},a.prototype.setPosition=function(a){return this.inner.setPosition(a)},a.prototype.setEye=function(a){return this.inner.setEye(a),this},Object.defineProperty(a.prototype,"fov",{get:function(){return this.inner.fov},set:function(){throw new Error(c["default"]("fov").message)},enumerable:!0,configurable:!0}),a.prototype.setFov=function(a){return g["default"]("fov",a),this.inner.fov=a,this},Object.defineProperty(a.prototype,"look",{get:function(){return this.inner.look},set:function(a){this.inner.setLook(a)},enumerable:!0,configurable:!0}),a.prototype.setLook=function(a){return this.inner.setLook(a),this},Object.defineProperty(a.prototype,"near",{get:function(){return this.inner.near},set:function(a){this.inner.near=a},enumerable:!0,configurable:!0}),a.prototype.setNear=function(a){return this.inner.setNear(a),this},Object.defineProperty(a.prototype,"far",{get:function(){return this.inner.far},set:function(a){this.inner.far=a},enumerable:!0,configurable:!0}),a.prototype.setFar=function(a){return this.inner.setFar(a),this},Object.defineProperty(a.prototype,"up",{get:function(){return this.inner.up},set:function(){throw new Error(c["default"]("up").message)},enumerable:!0,configurable:!0}),a.prototype.setUp=function(a){return this.inner.setUp(a),this},Object.defineProperty(a.prototype,"projectionMatrix",{get:function(){return this.inner.projectionMatrix},set:function(){throw new Error(c["default"]("projectionMatrix").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"viewMatrix",{get:function(){return this.inner.viewMatrix},set:function(a){this.inner.viewMatrix=a},enumerable:!0,configurable:!0}),a.PROP_POSITION="X",a.PROP_EYE="eye",a}(),a("default",j)}}}),System.register("davinci-eight/checks/isNull.js",[],function(a){function b(a){return null===a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeNumber.js",["../checks/mustSatisfy","../checks/isNumber"],function(a){function b(){return"be a `number`"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/isObject.js",[],function(a){function b(a){return"object"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeObject.js",["../checks/mustSatisfy","../checks/isObject"],function(a){function b(){return"be an `object`"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/isArray.js",[],function(a){function b(a){return"[object Array]"===Object.prototype.toString.call(a)}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeArray.js",["../checks/mustSatisfy","../checks/isArray"],function(a){function b(){return"be an array"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/stringFromCoordinates.js",["../checks/isDefined","../checks/mustBeArray"],function(a){function b(a){if("string"==typeof a)return"1"===a;var c=g["default"]("label",a);return 2===c.length?b(c[0])&&b(c[1]):1===c.length?b(c[0]):!1}function c(a,b,c){if("string"==typeof b)c.push(b);else{var d=g["default"]("label",b);if(2===d.length)c.push(a>0?d[1]:d[0]);else if(1===d.length)c.push(d[0]);else if(0!==d.length)throw new Error("Unexpected basis label array length: "+d.length)}}function d(a,d,e,f){if(0!==a){if(a>=0)f.length>0&&f.push("+");else if("string"==typeof e)f.push("-");else{var h=g["default"]("label",e);2===h.length?h[0]!==h[1]?f.length>0&&f.push("+"):f.push("-"):f.push(1===h.length?"-":"-")}var i=Math.abs(a);1===i?c(a,e,f):(f.push(d(i)),b(e)||(f.push("*"),c(a,e,f)))}}function e(a,b,c){for(var e=[],g=0,h=a.length;h>g;g++){var i=a[g];if(!f["default"](i))return void 0;d(i,b,c[g],e)}return e.length>0?e.join(""):"0"}var f,g;return a("default",e),{setters:[function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/math/QQ.js",["../checks/mustBeInteger","../i18n/readOnly"],function(a){var b,c,d,e;return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=Math.random(),e=function(){function a(a,c,e){if(e!==d)throw new Error("Use the static create method instead of the constructor");b["default"]("n",a),b["default"]("d",c);var f,g=function(a,b){var c;for(0>a&&(a=-a),0>b&&(b=-b),b>a&&(c=a,a=b,b=c);;){if(a%=b,0===a)return b;if(b%=a,0===b)return a}};if(0===c)throw new Error("denominator must not be zero");f=0===a?1:g(Math.abs(a),Math.abs(c)),0>c&&(a=-a,c=-c),this._numer=a/f,this._denom=c/f}return Object.defineProperty(a.prototype,"numer",{get:function(){return this._numer},set:function(){throw new Error(c["default"]("numer").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"denom",{get:function(){return this._denom},set:function(){throw new Error(c["default"]("denom").message)},enumerable:!0,configurable:!0}),a.prototype.add=function(b){return a.valueOf(this._numer*b._denom+this._denom*b._numer,this._denom*b._denom)},a.prototype.sub=function(b){return a.valueOf(this._numer*b._denom-this._denom*b._numer,this._denom*b._denom)},a.prototype.mul=function(b){return a.valueOf(this._numer*b._numer,this._denom*b._denom)},a.prototype.div=function(b){var c=this._numer*b._denom,d=this._denom*b._numer;return 0===c?0===d?a.valueOf(c,d):a.ZERO:0===d?a.valueOf(c,d):a.valueOf(c,d)},a.prototype.isOne=function(){return 1===this._numer&&1===this._denom},a.prototype.isZero=function(){return 0===this._numer&&1===this._denom},a.prototype.hashCode=function(){return 37*this.numer+13*this.denom},a.prototype.inv=function(){return a.valueOf(this._denom,this._numer)},a.prototype.neg=function(){return a.valueOf(-this._numer,this._denom)},a.prototype.equals=function(b){return b instanceof a?this._numer*b._denom===this._denom*b._numer:!1},a.prototype.toString=function(){return""+this._numer+"/"+this._denom},a.prototype.__add__=function(b){return b instanceof a?this.add(b):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.add(this):void 0},a.prototype.__sub__=function(b){return b instanceof a?this.sub(b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.sub(this):void 0},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):void 0},a.prototype.__div__=function(b){return b instanceof a?this.div(b):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):void 0},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this.neg()},a.valueOf=function(b,c){if(0===b){if(0!==c)return a.ZERO}else if(0===c);else{if(b===c)return a.ONE;if(1===b){if(2===c)return a.POS_01_02;if(3===c)return a.POS_01_03;if(4===c)return a.POS_01_04;if(5===c)return a.POS_01_05;if(-3===c)return a.NEG_01_03}else if(-1===b){if(1===c)return a.NEG_01_01;if(3===c)return a.NEG_01_03}else if(2===b){if(1===c)return a.POS_02_01;if(3===c)return a.POS_02_03}else if(-2===b){if(1===c)return a.NEG_02_01}else if(3===b){if(1===c)return a.POS_03_01}else if(-3===b){if(1===c)return a.NEG_03_01}else if(4===b){if(1===c)return a.POS_04_01}else if(5===b){if(1===c)return a.POS_05_01}else if(6===b){if(1===c)return a.POS_06_01}else if(7===b){if(1===c)return a.POS_07_01}else if(8===b&&1===c)return a.POS_08_01}return new a(b,c,d)},a.POS_08_01=new a(8,1,d),a.POS_07_01=new a(7,1,d),a.POS_06_01=new a(6,1,d),a.POS_05_01=new a(5,1,d),a.POS_04_01=new a(4,1,d),a.POS_03_01=new a(3,1,d),a.POS_02_01=new a(2,1,d),a.ONE=new a(1,1,d),a.POS_01_02=new a(1,2,d),a.POS_01_03=new a(1,3,d),a.POS_01_04=new a(1,4,d),a.POS_01_05=new a(1,5,d),a.ZERO=new a(0,1,d),a.NEG_01_03=new a(-1,3,d),a.NEG_01_01=new a(-1,1,d),a.NEG_02_01=new a(-2,1,d),a.NEG_03_01=new a(-3,1,d),a.POS_02_03=new a(2,3,d),a}(),a("default",e)}}}),System.register("davinci-eight/math/Dimensions.js",["../math/QQ","../i18n/notSupported"],function(a){function b(a,b){if(b instanceof c["default"])return b;throw new Error("Argument '"+b+"' must be a QQ")}var c,d,e,f,g,h,i;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=c["default"].valueOf(0,1),f=c["default"].valueOf(1,1),g=c["default"].valueOf(2,1),h=c["default"].valueOf(-1,1),i=function(){function a(a,c,d,e,f,g,h){if(this.M=a,this.L=c,this.T=d,this.Q=e,this.temperature=f,this.amount=g,this.intensity=h,b("M",a),b("L",c),b("T",d),b("Q",e),b("temperature",f),b("amount",g),b("intensity",h),7!==arguments.length)throw new Error("Expecting 7 arguments")}return a.prototype.compatible=function(a){if(this.M.equals(a.M)&&this.L.equals(a.L)&&this.T.equals(a.T)&&this.Q.equals(a.Q)&&this.temperature.equals(a.temperature)&&this.amount.equals(a.amount)&&this.intensity.equals(a.intensity))return this;throw this.isOne()?a.isOne()?new Error:new Error("Dimensions must be equal (dimensionless, "+a+")"):new Error(a.isOne()?"Dimensions must be equal ("+this+", dimensionless)":"Dimensions must be equal ("+this+", "+a+")")},a.prototype.mul=function(b){return new a(this.M.add(b.M),this.L.add(b.L),this.T.add(b.T),this.Q.add(b.Q),this.temperature.add(b.temperature),this.amount.add(b.amount),this.intensity.add(b.intensity))},a.prototype.div=function(b){return new a(this.M.sub(b.M),this.L.sub(b.L),this.T.sub(b.T),this.Q.sub(b.Q),this.temperature.sub(b.temperature),this.amount.sub(b.amount),this.intensity.sub(b.intensity))},a.prototype.pow=function(b){return new a(this.M.mul(b),this.L.mul(b),this.T.mul(b),this.Q.mul(b),this.temperature.mul(b),this.amount.mul(b),this.intensity.mul(b));

},a.prototype.sqrt=function(){return new a(this.M.div(g),this.L.div(g),this.T.div(g),this.Q.div(g),this.temperature.div(g),this.amount.div(g),this.intensity.div(g))},a.prototype.isOne=function(){return this.M.isZero()&&this.L.isZero()&&this.T.isZero()&&this.Q.isZero()&&this.temperature.isZero()&&this.amount.isZero()&&this.intensity.isZero()},a.prototype.isZero=function(){throw new Error(d["default"]("isZero").message)},a.prototype.inv=function(){return new a(this.M.neg(),this.L.neg(),this.T.neg(),this.Q.neg(),this.temperature.neg(),this.amount.neg(),this.intensity.neg())},a.prototype.neg=function(){throw new Error(d["default"]("neg").message)},a.prototype.toString=function(){var a=function(a,b){return 0===a.numer?null:1===a.denom?1===a.numer?""+b:""+b+" ** "+a.numer:""+b+" ** "+a};return[a(this.M,"mass"),a(this.L,"length"),a(this.T,"time"),a(this.Q,"charge"),a(this.temperature,"thermodynamic temperature"),a(this.amount,"amount of substance"),a(this.intensity,"luminous intensity")].filter(function(a){return"string"==typeof a}).join(" * ")},a.prototype.__add__=function(b){return b instanceof a?this.compatible(b):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.compatible(this):void 0},a.prototype.__sub__=function(b){return b instanceof a?this.compatible(b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.compatible(this):void 0},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):void 0},a.prototype.__div__=function(b){return b instanceof a?this.div(b):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):void 0},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this},a.ONE=new a(e,e,e,e,e,e,e),a.MASS=new a(f,e,e,e,e,e,e),a.LENGTH=new a(e,f,e,e,e,e,e),a.TIME=new a(e,e,f,e,e,e,e),a.CHARGE=new a(e,e,e,f,e,e,e),a.CURRENT=new a(e,e,h,f,e,e,e),a.TEMPERATURE=new a(e,e,e,e,f,e,e),a.AMOUNT=new a(e,e,e,e,e,f,e),a.INTENSITY=new a(e,e,e,e,e,e,f),a}(),a("default",i)}}}),System.register("davinci-eight/i18n/notImplemented.js",["../checks/mustBeString"],function(a){function b(a){c["default"]("name",a);var b={get message(){return"'"+a+"' method is not yet implemented."}};return b}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/i18n/notSupported.js",["../checks/mustBeString"],function(a){function b(a){c["default"]("name",a);var b={get message(){return"Method `"+a+"` is not supported."}};return b}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/math/Unit.js",["../math/Dimensions","../i18n/notImplemented","../i18n/notSupported"],function(a){function b(a,b){return new o(a.multiplier+b.multiplier,a.dimensions.compatible(b.dimensions),a.labels)}function c(a,b){return new o(a.multiplier-b.multiplier,a.dimensions.compatible(b.dimensions),a.labels)}function d(a,b){return new o(a.multiplier*b.multiplier,a.dimensions.mul(b.dimensions),a.labels)}function e(a,b){return new o(a*b.multiplier,b.dimensions,b.labels)}function f(a,b){return new o(a.multiplier/b.multiplier,a.dimensions.div(b.dimensions),a.labels)}var g,h,i,j,k,l,m,n,o;return{setters:[function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=["kg","m","s","C","K","mol","cd"],k=[[-1,1,-3,1,2,1,2,1,0,1,0,1,0,1],[-1,1,-2,1,1,1,2,1,0,1,0,1,0,1],[-1,1,-2,1,2,1,2,1,0,1,0,1,0,1],[-1,1,0,1,0,1,1,1,0,1,0,1,0,1],[0,1,-3,1,0,1,1,1,0,1,0,1,0,1],[0,1,2,1,-2,1,0,1,0,1,0,1,0,1],[0,1,0,1,-1,1,0,1,0,1,0,1,0,1],[0,1,0,1,-1,1,1,1,0,1,0,1,0,1],[0,1,1,1,-2,1,0,1,0,1,0,1,0,1],[0,1,1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,-1,1,-2,1,0,1,0,1,0,1,0,1],[1,1,-1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,0,1,-3,1,0,1,0,1,0,1,0,1],[1,1,0,1,-2,1,0,1,0,1,0,1,0,1],[1,1,0,1,-1,1,-1,1,0,1,0,1,0,1],[1,1,1,1,-3,1,0,1,-1,1,0,1,0,1],[1,1,1,1,-2,1,-1,1,0,1,0,1,0,1],[1,1,1,1,-2,1,0,1,0,1,0,1,0,1],[1,1,1,1,0,1,-2,1,0,1,0,1,0,1],[1,1,2,1,-2,1,0,1,-1,1,0,1,0,1],[0,1,2,1,-2,1,0,1,-1,1,0,1,0,1],[1,1,2,1,-2,1,0,1,-1,1,-1,1,0,1],[1,1,2,1,-2,1,0,1,0,1,-1,1,0,1],[1,1,2,1,-2,1,0,1,0,1,0,1,0,1],[1,1,2,1,-1,1,0,1,0,1,0,1,0,1],[1,1,2,1,-3,1,0,1,0,1,0,1,0,1],[1,1,2,1,-2,1,-1,1,0,1,0,1,0,1],[1,1,2,1,-1,1,-2,1,0,1,0,1,0,1],[1,1,2,1,0,1,-2,1,0,1,0,1,0,1],[1,1,2,1,-1,1,-1,1,0,1,0,1,0,1]],l=[["F/m"],["S"],["F"],["C/kg"],["C/m ** 3"],["J/kg"],["Hz"],["A"],["m/s ** 2"],["m/s"],["kg·m/s"],["Pa"],["Pa·s"],["W/m ** 2"],["N/m"],["T"],["W/(m·K)"],["V/m"],["N"],["H/m"],["J/K"],["J/(kg·K)"],["J/(mol·K)"],["J/mol"],["J"],["J·s"],["W"],["V"],["Ω"],["H"],["Wb"]],m=function(a,b,c,d){var e=function(a,b){return 0===a.numer?null:1===a.denom?1===a.numer?""+b:""+b+" ** "+a.numer:""+b+" ** "+a},f=1===a||c.isOne()?"":" ",g=1===a?"":b,h=[e(c.M,d[0]),e(c.L,d[1]),e(c.T,d[2]),e(c.Q,d[3]),e(c.temperature,d[4]),e(c.amount,d[5]),e(c.intensity,d[6])].filter(function(a){return"string"==typeof a}).join(" ");return""+g+f+h},n=function(a,b,c,d){for(var e=c.M,f=c.L,g=c.T,h=c.Q,i=c.temperature,j=c.amount,n=c.intensity,o=0,p=k.length;p>o;o++){var q=k[o];if(e.numer===q[0]&&e.denom===q[1]&&f.numer===q[2]&&f.denom===q[3]&&g.numer===q[4]&&g.denom===q[5]&&h.numer===q[6]&&h.denom===q[7]&&i.numer===q[8]&&i.denom===q[9]&&j.numer===q[10]&&j.denom===q[11]&&n.numer===q[12]&&n.denom===q[13])return 1!==a?a+" * "+l[o][0]:l[o][0]}return m(a,b,c,d)},o=function(){function a(a,b,c){if(this.multiplier=a,this.dimensions=b,this.labels=c,7!==c.length)throw new Error("Expecting 7 elements in the labels array.");this.multiplier=a,this.dimensions=b,this.labels=c}return a.prototype.compatible=function(b){if(b instanceof a)return this.dimensions.compatible(b.dimensions),this;throw new Error("Illegal Argument for Unit.compatible: "+b)},a.prototype.add=function(a){return b(this,a)},a.prototype.__add__=function(c){return c instanceof a?b(this,c):void 0},a.prototype.__radd__=function(c){return c instanceof a?b(c,this):void 0},a.prototype.sub=function(a){return c(this,a)},a.prototype.__sub__=function(b){return b instanceof a?c(this,b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?c(b,this):void 0},a.prototype.mul=function(a){return d(this,a)},a.prototype.__mul__=function(b){return b instanceof a?d(this,b):"number"==typeof b?e(b,this):void 0},a.prototype.__rmul__=function(b){return b instanceof a?d(b,this):"number"==typeof b?e(b,this):void 0},a.prototype.div=function(a){return f(this,a)},a.prototype.divByScalar=function(b){return new a(this.multiplier/b,this.dimensions,this.labels)},a.prototype.__div__=function(b){return b instanceof a?f(this,b):"number"==typeof b?new a(this.multiplier/b,this.dimensions,this.labels):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?f(b,this):"number"==typeof b?new a(b/this.multiplier,this.dimensions.inv(),this.labels):void 0},a.prototype.pattern=function(){var a=[];return a.push(this.dimensions.M.numer),a.push(this.dimensions.M.denom),a.push(this.dimensions.L.numer),a.push(this.dimensions.L.denom),a.push(this.dimensions.T.numer),a.push(this.dimensions.T.denom),a.push(this.dimensions.Q.numer),a.push(this.dimensions.Q.denom),a.push(this.dimensions.temperature.numer),a.push(this.dimensions.temperature.denom),a.push(this.dimensions.amount.numer),a.push(this.dimensions.amount.denom),a.push(this.dimensions.intensity.numer),a.push(this.dimensions.intensity.denom),JSON.stringify(a)},a.prototype.pow=function(b){return new a(Math.pow(this.multiplier,b.numer/b.denom),this.dimensions.pow(b),this.labels)},a.prototype.inv=function(){return new a(1/this.multiplier,this.dimensions.inv(),this.labels)},a.prototype.neg=function(){return new a(-this.multiplier,this.dimensions,this.labels)},a.prototype.isOne=function(){return this.dimensions.isOne()&&1===this.multiplier},a.prototype.isZero=function(){return this.dimensions.isZero()||0===this.multiplier},a.prototype.lerp=function(){throw new Error(h["default"]("lerp").message)},a.prototype.norm=function(){return new a(Math.abs(this.multiplier),this.dimensions,this.labels)},a.prototype.quad=function(){return new a(this.multiplier*this.multiplier,this.dimensions.mul(this.dimensions),this.labels)},a.prototype.reflect=function(){return this},a.prototype.rotate=function(){return this},a.prototype.scale=function(b){return new a(this.multiplier*b,this.dimensions,this.labels)},a.prototype.slerp=function(){throw new Error(h["default"]("slerp").message)},a.prototype.sqrt=function(){return new a(Math.sqrt(this.multiplier),this.dimensions.sqrt(),this.labels)},a.prototype.stress=function(){throw new Error(i["default"]("stress").message)},a.prototype.toExponential=function(a){return n(this.multiplier,this.multiplier.toExponential(a),this.dimensions,this.labels)},a.prototype.toFixed=function(a){return n(this.multiplier,this.multiplier.toFixed(a),this.dimensions,this.labels)},a.prototype.toPrecision=function(a){return n(this.multiplier,this.multiplier.toPrecision(a),this.dimensions,this.labels)},a.prototype.toString=function(a){return n(this.multiplier,this.multiplier.toString(a),this.dimensions,this.labels)},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return this.neg()},a.isOne=function(b){if(void 0===b)return!0;if(b instanceof a)return b.isOne();throw new Error("isOne argument must be a Unit or undefined.")},a.assertDimensionless=function(b){if(!a.isOne(b))throw new Error("uom must be dimensionless.")},a.compatible=function(a,b){if(a){if(b)return a.compatible(b);if(a.isOne())return void 0;throw new Error(a+" is incompatible with 1")}if(b){if(b.isOne())return void 0;throw new Error("1 is incompatible with "+b)}return void 0},a.mul=function(b,c){return b?c?b.mul(c):a.isOne(c)?b:void 0:a.isOne(b)?c:void 0},a.div=function(a,b){return a?b?a.div(b):a:b?b.inv():void 0},a.sqrt=function(b){return"undefined"!=typeof b?b.isOne()?void 0:new a(Math.sqrt(b.multiplier),b.dimensions.sqrt(),b.labels):void 0},a.ONE=new a(1,g["default"].ONE,j),a.KILOGRAM=new a(1,g["default"].MASS,j),a.METER=new a(1,g["default"].LENGTH,j),a.SECOND=new a(1,g["default"].TIME,j),a.COULOMB=new a(1,g["default"].CHARGE,j),a.AMPERE=new a(1,g["default"].CURRENT,j),a.KELVIN=new a(1,g["default"].TEMPERATURE,j),a.MOLE=new a(1,g["default"].AMOUNT,j),a.CANDELA=new a(1,g["default"].INTENSITY,j),a}(),a("default",o)}}}),System.register("davinci-eight/math/R3.js",["../checks/isDefined","../checks/isObject","../checks/isNull","../checks/isNumber","../i18n/notImplemented","../checks/mustBeNumber","../checks/mustBeObject","../i18n/readOnly","./stringFromCoordinates","./Unit"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=["e1","e2","e3"],m=function(){function a(a,b,c,d){g["default"]("x",a),g["default"]("y",b),g["default"]("z",c),h["default"]("uom",d);var e=d.multiplier;1!==e?(this._coords=[e*a,e*b,e*c],this._uom=new k["default"](1,d.dimensions,d.labels)):(this._coords=[a,b,c],this._uom=d)}return Object.defineProperty(a.prototype,"x",{get:function(){return this._coords[0]},set:function(){throw new Error(i["default"]("x").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._coords[1]},set:function(){throw new Error(i["default"]("y").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this._coords[2]},set:function(){throw new Error(i["default"]("z").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"uom",{get:function(){return this._uom},set:function(){throw new Error(i["default"]("uom").message)},enumerable:!0,configurable:!0}),a.prototype.add=function(a,b){throw void 0===b&&(b=1),new Error(f["default"]("add").message)},a.prototype.divByScalar=function(b){return new a(this.x,this.y,this.z,this.uom.div(b))},a.prototype.lerp=function(){throw new Error(f["default"]("lerp").message)},a.prototype.magnitude=function(){return this.squaredNorm().sqrt()},a.prototype.neg=function(){return new a(-this.x,-this.y,-this.z,this.uom)},a.prototype.reflect=function(){throw new Error(f["default"]("reflect").message)},a.prototype.rotate=function(b){var c=this.x,d=this.y,e=this.z,f=b.xy,g=b.yz,h=b.zx,i=b.α,j=i*c-h*e+f*d,k=i*d-f*c+g*e,l=i*e-g*d+h*c,m=g*c+h*d+f*e,n=j*i+m*g+k*f-l*h,o=k*i+m*h+l*g-j*f,p=l*i+m*f+j*h-k*g;return new a(n,o,p,this.uom)},a.prototype.scale=function(b){return new a(this.x,this.y,this.z,this.uom.mul(b))},a.prototype.slerp=function(){throw new Error(f["default"]("slerp").message)},a.prototype.squaredNorm=function(){var a=this.x,b=this.y,c=this.z;return this.uom.quad().scale(a*a+b*b+c*c)},a.prototype.stress=function(b){return a.vector(this.x*b.x,this.y*b.y,this.z*b.z,this.uom)},a.prototype.sub=function(a,b){throw void 0===b&&(b=1),new Error(f["default"]("sub").message)},a.prototype.toStringCustom=function(a,b){var c=j["default"](this._coords,a,b);if(this.uom){var d=this.uom.toString().trim();return d?c+" "+d:c}return c},a.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return this.toStringCustom(b,l)},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return this.toStringCustom(b,l)},a.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return this.toStringCustom(b,l)},a.prototype.toString=function(a){var b=function(b){return b.toString(a)};return this.toStringCustom(b,l)},a.prototype.__add__=function(b){return c["default"](b)&&!d["default"](b)&&e["default"](b.x)&&e["default"](b.y)&&e["default"](b.z)?a.vector(this.x+b.x,this.y+b.y,this.z+b.z,this.uom):void 0},a.fromVector=function(b,c){return new a(b.x,b.y,b.z,c)},a.direction=function(c){if(b["default"](c)){var d=c.x,e=c.y,f=c.z,g=Math.sqrt(d*d+e*e+f*f);return new a(d/g,e/g,f/g,k["default"].ONE)}return void 0},a.vector=function(b,c,d,e){return new a(b,c,d,e)},a.zero=new a(0,0,0,k["default"].ONE),a.e1=new a(1,0,0,k["default"].ONE),a.e2=new a(0,1,0,k["default"].ONE),a.e3=new a(0,0,1,k["default"].ONE),a}(),a("default",m)}}}),System.register("davinci-eight/checks/isEQ.js",[],function(a){function b(a,b){return a===b}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeEQ.js",["../checks/mustSatisfy","../checks/isEQ"],function(a){function b(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be equal to "+e},f),b}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/checks/isNumber.js",[],function(a){function b(a){return"number"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isInteger.js",["../checks/isNumber"],function(a){function b(a){return c["default"](a)&&a%1===0}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/checks/mustBeInteger.js",["../checks/mustSatisfy","../checks/isInteger"],function(a){function b(){return"be an integer"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/mustSatisfy.js",[],function(a){function b(a,b,c,d){if(!b){var e=c?c():"satisfy some condition",f=d?" in "+d():"";throw new Error(a+" must "+e+f+".")}}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isString.js",[],function(a){function b(a){return"string"==typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeString.js",["../checks/mustSatisfy","../checks/isString"],function(a){function b(){return"be a string"}function c(a,c,f){return d["default"](a,e["default"](c),b,f),c}var d,e;return a("default",c),{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/i18n/readOnly.js",["../checks/mustBeString"],function(a){function b(a){c["default"]("name",a);var b={get message(){return"Property `"+a+"` is readonly."}};return b}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),System.register("davinci-eight/core/ErrorMode.js",[],function(a){var b;return{setters:[],execute:function(){!function(a){a[a.STRICT=0]="STRICT",a[a.IGNORE=1]="IGNORE",a[a.WARNME=2]="WARNME"}(b||(b={})),a("default",b)}}}),System.register("davinci-eight/config.js",["./core/ErrorMode"],function(a){var b,c,d;return{setters:[function(a){b=a}],execute:function(){c=function(){function a(){this._errorMode=b["default"].STRICT,this.GITHUB="https://github.com/geometryzen/davinci-eight",this.LAST_MODIFIED="2016-03-14",this.NAMESPACE="EIGHT",this.VERSION="2.222.0"}return Object.defineProperty(a.prototype,"errorMode",{get:function(){return this._errorMode},set:function(a){switch(a){case b["default"].IGNORE:case b["default"].STRICT:case b["default"].WARNME:this._errorMode=a;break;default:throw new Error("errorMode must be one of IGNORE, STRICT, or WARNME.")}},enumerable:!0,configurable:!0}),a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.log(a)},a.prototype.info=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.info(a)},a.prototype.warn=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.warn(a)},a.prototype.error=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.error(a)},a}(),d=new c,a("default",d)}}}),System.register("davinci-eight/checks/isDefined.js",[],function(a){function b(a){return"undefined"!=typeof a}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/refChange.js",["../config","../checks/isDefined"],function(a){function b(a){return s+": "+a}function c(a){return l["default"].log(b(a))}function d(a){return l["default"].warn(b(a))}function e(a){return l["default"].error(b(a))}function f(){var a=Object.keys(n);a.forEach(function(a){var b=n[a];0===b.refCount&&delete n[a]})}function g(){for(var a=Object.keys(n),b=a.length,c=0,d=0;b>d;d++){var e=a[d],f=n[e];c+=f.refCount}return c}function h(){return p&&d("Nothing to see because skip mode is "+p),f(),g()}function i(a){return"There are "+a+" outstanding reference counts."}function j(){var a=h();return a>0?(l["default"].warn("Memory Leak!"),l["default"].warn(i(a)),l["default"].warn(JSON.stringify(n,null,2))):o&&l["default"].log(i(a)),a}function k(a,d,f){if(void 0===f&&(f=0),0===f||!p){if(q)if(r){if(d===r){var g=n[a];c(g?f+" on "+a+" @ "+d:f+" on "+a+" @ "+d)}}else c(f+" on "+a+" @ "+d);if(1===f){var g=n[a];g?g.name=d:(g={refCount:0,name:d,zombie:!1},n[a]=g),g.refCount+=f}else if(-1===f){var g=n[a];g?(g.refCount+=f,0===g.refCount?g.zombie=!0:g.refCount<0&&e("refCount < 0 for "+d)):e(f+" on "+a+" @ "+d)}else{if(0!==f)throw new Error(b("change must be +1 or -1 for normal recording, or 0 for logging to the console."));var i=m["default"](d)?a+" @ "+d:a;if("stop"===a)return o&&c(i),h();if("dump"===a)return j();if("verbose"===a)o=!0;else if("quiet"===a)o=!1;else if("start"===a)o&&c(i),p=!1,q=!1;else if("reset"===a)o&&c(i),n={},o=!0,p=!0,q=!1,r=void 0;else{if("trace"!==a)throw new Error(b("Unexpected command uuid => "+a+", name => "+d));o&&c(i),p=!1,q=!0,r=d}}}}var l,m,n,o,p,q,r,s;return a("default",k),{setters:[function(a){l=a},function(a){m=a}],execute:function(){n={},o=!0,p=!0,q=!1,r=void 0,s="refChange"}}}),System.register("davinci-eight/core/uuid4.js",[],function(a){function b(){var a=function(a){return Math.pow(2,a)},b=a(6),c=a(8),d=a(12),e=a(16),f=a(32),g=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}}return a("default",b),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/ShareableBase.js",["../checks/isDefined","../checks/mustBeEQ","../checks/mustBeInteger","../checks/mustBeString","../i18n/readOnly","./refChange","./uuid4"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(){this._refCount=1,this._uuid=h["default"]().generate(),this._levelUp=-1,this._type="ShareableBase",this._levelUp+=1,g["default"](this._uuid,this._type,1)}return a.prototype.destructor=function(a,b){void 0===b&&(b=!1),d["default"]("levelUp",a),c["default"](this._type+" constructor-destructor chain mismatch: destructor index "+a,a,this._levelUp),b&&console.warn("`protected destructor(): void` method should be implemented by `"+this._type+"`."),this._levelUp=void 0},Object.defineProperty(a.prototype,"levelUp",{get:function(){return this._levelUp},set:function(){throw new Error(f["default"]("levelUp").message)},enumerable:!0,configurable:!0}),a.prototype.isZombie=function(){return"undefined"==typeof this._refCount},a.prototype.addRef=function(){return this._refCount++,g["default"](this._uuid,this._type,1),this._refCount},a.prototype.getLoggingName=function(){return this._type},a.prototype.setLoggingName=function(a){this._type=e["default"]("name",a),this._levelUp+=1,g["default"](this._uuid,a,1),g["default"](this._uuid,a,-1)},a.prototype.release=function(){this._refCount--,g["default"](this._uuid,this._type,-1);var a=this._refCount;if(0===a&&(this.destructor(0,!0),this._refCount=void 0,b["default"](this._levelUp)))throw new Error(this._type+".destructor method is not calling all the way up the chain.");return a},Object.defineProperty(a.prototype,"uuid",{get:function(){return this._uuid},set:function(){throw new Error(f["default"]("uuid").message)},enumerable:!0,configurable:!0}),a}(),a("default",i)}}}),System.register("davinci-eight/visual/Viewport.js",["../facets/AmbientLight","../core/Color","../facets/DirectionalLight","../core/Engine","../base/exchange","../checks/mustBeInteger","../facets/PerspectiveCamera","../math/R3","../core/ShareableBase"],function(a){var b,c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(a){function j(f){if(a.call(this),this.ambients=[],this.ambLight=new b["default"](c["default"].gray),this.dirLight=new d["default"](i["default"].e3.neg(),c["default"].gray),this.camera=new h["default"],this.x=0,this.y=0,this.width=0,this.height=0,this.setLoggingName("Viewport"),!(f instanceof e["default"]))throw new Error("engine must be an Engine");f.addRef(),this.engine=f,this.ambients.push(this.ambLight),this.ambients.push(this.dirLight),this.ambients.push(this.camera)}return l(j,a),Object.defineProperty(j.prototype,"scene",{get:function(){var a=this._scene;return a?(a.addRef(),a):void 0},set:function(a){this._scene=f["default"](this._scene,a)},enumerable:!0,configurable:!0}),j.prototype.draw=function(){this._scene&&(this.engine&&this.engine.viewport(this.x,this.y,this.width,this.height),this._scene.draw(this.ambients))},j.prototype.setPortal=function(a,b,c,d){g["default"]("x",a),g["default"]("y",b),g["default"]("width",c),g["default"]("width",c),this.x=a,this.y=b,this.width=c,this.height=d,this.camera&&this.camera.setAspect(c/d)},j.prototype.destructor=function(b){this.engine=f["default"](this.engine,void 0),this._scene=f["default"](this._scene,void 0),a.prototype.destructor.call(this,b+1)},j}(j["default"]),a("default",k)}}}),System.register("davinci-eight/visual/MultiViewApp.js",["../base/AnimationApp","../checks/mustBeGE","../checks/mustBeInteger","../core/Scene","../collections/ShareableArray","./Viewport"],function(a){var b,c,d,e,f,g,h,i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,e,h){void 0===h&&(h=window),a.call(this,e,h),this.views=new f["default"],d["default"]("numViews",b),c["default"]("numViews",b,0);for(var i=0;b>i;i++)this.views.pushWeakRef(new g["default"](this.engine))}return i(b,a),b.prototype.initialize=function(){a.prototype.initialize.call(this);for(var b=this.canvas.width,c=this.canvas.height,d=new e["default"](this.engine),f=this.views,g=f.length,h=0;g>h;h++){var i=f.getWeakRef(h);i.scene=d,i.setPortal(0,0,b,c)}d.release()},b.prototype.draw=function(){for(var a=this.views,b=a.length,c=0;b>c;c++){var d=a.getWeakRef(c);d.draw()}},b.prototype.destructor=function(){this.views.release(),a.prototype.destructor.call(this)},b}(b["default"]),a("default",h)}}}),System.register("davinci-eight.js",["./davinci-eight/base/AnimationApp","./davinci-eight/base/BrowserApp","./davinci-eight/base/EngineApp","./davinci-eight/commands/BlendFactor","./davinci-eight/commands/WebGLBlendFunc","./davinci-eight/commands/WebGLClearColor","./davinci-eight/commands/Capability","./davinci-eight/commands/WebGLDisable","./davinci-eight/commands/WebGLEnable","./davinci-eight/controls/OrbitControls","./davinci-eight/controls/TrackballControls","./davinci-eight/core/AttribLocation","./davinci-eight/core/Color","./davinci-eight/config","./davinci-eight/core/Drawable","./davinci-eight/core/DrawMode","./davinci-eight/core/ErrorMode","./davinci-eight/core/GeometryArrays","./davinci-eight/core/GeometryContainer","./davinci-eight/core/GeometryElements","./davinci-eight/core/GraphicsProgramSymbols","./davinci-eight/core/Mesh","./davinci-eight/core/Scene","./davinci-eight/core/UniformLocation","./davinci-eight/core/Engine","./davinci-eight/core/VertexBuffer","./davinci-eight/facets/AmbientLight","./davinci-eight/facets/ColorFacet","./davinci-eight/facets/DirectionalLight","./davinci-eight/facets/ModelFacet","./davinci-eight/facets/PointSizeFacet","./davinci-eight/facets/ReflectionFacetE2","./davinci-eight/facets/ReflectionFacetE3","./davinci-eight/facets/Vector3Facet","./davinci-eight/facets/frustumMatrix","./davinci-eight/facets/PerspectiveCamera","./davinci-eight/facets/perspectiveMatrix","./davinci-eight/facets/viewMatrixFromEyeLookUp","./davinci-eight/facets/ModelE2","./davinci-eight/facets/ModelE3","./davinci-eight/geometries/primitives/DrawAttribute","./davinci-eight/geometries/primitives/DrawPrimitive","./davinci-eight/geometries/Simplex","./davinci-eight/geometries/primitives/Vertex","./davinci-eight/geometries/ArrowGeometry","./davinci-eight/geometries/BoxGeometry","./davinci-eight/geometries/CylinderGeometry","./davinci-eight/geometries/GridGeometry","./davinci-eight/geometries/SphereGeometry","./davinci-eight/geometries/TetrahedronGeometry","./davinci-eight/geometries/ArrowBuilder","./davinci-eight/geometries/ConicalShellBuilder","./davinci-eight/geometries/CylindricalShellBuilder","./davinci-eight/geometries/CylinderBuilder","./davinci-eight/geometries/RingBuilder","./davinci-eight/materials/HTMLScriptsMaterial","./davinci-eight/materials/LineMaterial","./davinci-eight/materials/MeshMaterial","./davinci-eight/materials/MeshNormalMaterial","./davinci-eight/materials/PointMaterial","./davinci-eight/materials/GraphicsProgramBuilder","./davinci-eight/materials/smartProgram","./davinci-eight/materials/programFromScripts","./davinci-eight/math/Dimensions","./davinci-eight/math/G2","./davinci-eight/math/G3","./davinci-eight/math/mathcore","./davinci-eight/math/Vector1","./davinci-eight/math/Matrix2","./davinci-eight/math/Matrix3","./davinci-eight/math/Matrix4","./davinci-eight/math/QQ","./davinci-eight/math/R3","./davinci-eight/math/Unit","./davinci-eight/math/Geometric2","./davinci-eight/math/Geometric3","./davinci-eight/math/Spinor2","./davinci-eight/math/Spinor3","./davinci-eight/math/Vector2","./davinci-eight/math/Vector3","./davinci-eight/math/Vector4","./davinci-eight/math/VectorN","./davinci-eight/overlay/Overlay","./davinci-eight/utils/getCanvasElementById","./davinci-eight/collections/ShareableArray","./davinci-eight/collections/NumberShareableMap","./davinci-eight/core/refChange","./davinci-eight/core/ShareableBase","./davinci-eight/collections/StringShareableMap","./davinci-eight/utils/animation","./davinci-eight/visual/Arrow","./davinci-eight/visual/Sphere","./davinci-eight/visual/Box","./davinci-eight/visual/RigidBody","./davinci-eight/visual/RigidBodyWithUnits","./davinci-eight/visual/Cylinder","./davinci-eight/visual/Curve","./davinci-eight/visual/Grid","./davinci-eight/visual/Tetrahedron","./davinci-eight/visual/Trail","./davinci-eight/visual/Viewport","./davinci-eight/visual/bootstrap","./davinci-eight/visual/SingleViewApp","./davinci-eight/visual/MultiViewApp"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za;return{setters:[function(a){b=a},function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a},function(a){D=a},function(a){E=a},function(a){F=a},function(a){G=a},function(a){H=a},function(a){I=a},function(a){J=a},function(a){K=a},function(a){L=a},function(a){M=a},function(a){N=a},function(a){O=a},function(a){P=a},function(a){Q=a},function(a){R=a},function(a){S=a},function(a){T=a},function(a){U=a},function(a){V=a},function(a){W=a},function(a){X=a},function(a){Y=a},function(a){Z=a},function(a){$=a},function(a){_=a},function(a){aa=a},function(a){ba=a},function(a){ca=a},function(a){da=a},function(a){ea=a},function(a){fa=a},function(a){ga=a},function(a){ha=a},function(a){ia=a},function(a){ja=a},function(a){ka=a},function(a){la=a},function(a){ma=a},function(a){na=a},function(a){oa=a},function(a){pa=a},function(a){qa=a},function(a){ra=a},function(a){sa=a},function(a){ta=a},function(a){ua=a},function(a){va=a},function(a){wa=a},function(a){xa=a},function(a){ya=a},function(a){za=a},function(a){Aa=a},function(a){Ba=a},function(a){Ca=a},function(a){Da=a},function(a){Ea=a},function(a){Fa=a},function(a){Ga=a},function(a){Ha=a},function(a){Ia=a},function(a){Ja=a},function(a){Ka=a},function(a){La=a},function(a){Ma=a},function(a){Na=a},function(a){Oa=a},function(a){Pa=a},function(a){Qa=a},function(a){Ra=a},function(a){Sa=a},function(a){Ta=a},function(a){Ua=a},function(a){Va=a},function(a){Wa=a},function(a){Xa=a},function(a){Ya=a}],execute:function(){Za={get LAST_MODIFIED(){return o["default"].LAST_MODIFIED},get errorMode(){return o["default"].errorMode},set errorMode(a){if("number"!=typeof a)throw new TypeError("errorMode must be a ErrorMode");o["default"].errorMode=a},get VERSION(){return o["default"].VERSION},get AnimationApp(){
return b["default"]},get BrowserApp(){return c["default"]},get EngineApp(){return d["default"]},get HTMLScriptsMaterial(){return ca["default"]},get LineMaterial(){return da["default"]},get MeshMaterial(){return ea["default"]},get MeshNormalMaterial(){return fa["default"]},get PointMaterial(){return ga["default"]},get GraphicsProgramBuilder(){return ha["default"]},get BlendFactor(){return e["default"]},get Capability(){return h["default"]},get WebGLBlendFunc(){return f["default"]},get WebGLClearColor(){return g["default"]},get WebGLDisable(){return i["default"]},get WebGLEnable(){return j["default"]},get ModelE2(){return N["default"]},get ModelE3(){return O["default"]},get ModelFacet(){return E["default"]},get Simplex(){return R["default"]},get Vertex(){return S["default"]},get frustumMatrix(){return J["default"]},get perspectiveMatrix(){return L["default"]},get viewMatrix(){return M["default"]},get Scene(){return x["default"]},get Drawable(){return p["default"]},get PerspectiveCamera(){return K["default"]},get getCanvasElementById(){return Ea["default"]},get Engine(){return z["default"]},get animation(){return Ka["default"]},get DrawMode(){return q["default"]},get ErrorMode(){return r["default"]},get AttribLocation(){return m["default"]},get UniformLocation(){return y["default"]},get VertexBuffer(){return A["default"]},get smartProgram(){return ia["default"]},get Color(){return n["default"]},get OrbitControls(){return k["default"]},get TrackballControls(){return l["default"]},get AmbientLight(){return B["default"]},get ColorFacet(){return C["default"]},get DirectionalLight(){return D["default"]},get PointSizeFacet(){return F["default"]},get ReflectionFacetE2(){return G["default"]},get ReflectionFacetE3(){return H["default"]},get Vector3Facet(){return I["default"]},get ArrowBuilder(){return Z["default"]},get ArrowGeometry(){return T["default"]},get BoxGeometry(){return U["default"]},get ConicalShellBuilder(){return $["default"]},get CylinderBuilder(){return aa["default"]},get CylinderGeometry(){return V["default"]},get CylindricalShellBuilder(){return _["default"]},get GridGeometry(){return W["default"]},get RingBuilder(){return ba["default"]},get SphereGeometry(){return X["default"]},get TetrahedronGeometry(){return Y["default"]},get Dimensions(){return ka["default"]},get Unit(){return ua["default"]},get G2(){return la["default"]},get G3(){return ma["default"]},get Matrix2(){return pa["default"]},get Matrix3(){return qa["default"]},get Matrix4(){return ra["default"]},get QQ(){return sa["default"]},get R3(){return ta["default"]},get Geometric2(){return va["default"]},get Geometric3(){return wa["default"]},get Vector1(){return oa["default"]},get Spinor2(){return xa["default"]},get Spinor3(){return ya["default"]},get Vector2(){return za["default"]},get Vector3(){return Aa["default"]},get Vector4(){return Ba["default"]},get VectorN(){return Ca["default"]},get GraphicsProgramSymbols(){return v["default"]},get GeometryArrays(){return s["default"]},get GeometryContainer(){return t["default"]},get GeometryElements(){return u["default"]},get Overlay(){return Da["default"]},get programFromScripts(){return ja["default"]},get DrawAttribute(){return P["default"]},get DrawPrimitive(){return Q["default"]},get ShareableArray(){return Fa["default"]},get NumberShareableMap(){return Ga["default"]},get refChange(){return Ha["default"]},get ShareableBase(){return Ia["default"]},get StringShareableMap(){return Ja["default"]},get cos(){return na["default"].cos},get cosh(){return na["default"].cosh},get exp(){return na["default"].exp},get log(){return na["default"].log},get norm(){return na["default"].norm},get quad(){return na["default"].quad},get sin(){return na["default"].sin},get sinh(){return na["default"].sinh},get sqrt(){return na["default"].sqrt},get Arrow(){return La["default"]},get Sphere(){return Ma["default"]},get Box(){return Na["default"]},get Mesh(){return w["default"]},get RigidBody(){return Oa["default"]},get RigidBodyWithUnits(){return Pa["default"]},get Cylinder(){return Qa["default"]},get Curve(){return Ra["default"]},get Grid(){return Sa["default"]},get Tetrahedron(){return Ta["default"]},get Trail(){return Ua["default"]},get Viewport(){return Va["default"]},get SingleViewApp(){return Xa["default"]},get MultiViewApp(){return Ya["default"]},get bootstrap(){return Wa["default"]}},a("default",Za)}}});