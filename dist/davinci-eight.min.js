/*! davinci-eight 2016-10-31 */
!function(a,b){var c,d,b,e=a.define;!function(a){function e(a,b){return v.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=b&&b.split("/"),p=t.map,q=p&&p["*"]||{};if(a){for(a=a.split("/"),g=a.length-1,t.nodeIdCompat&&x.test(a[g])&&(a[g]=a[g].replace(x,"")),"."===a[0].charAt(0)&&o&&(n=o.slice(0,o.length-1),a=n.concat(a)),k=0;k<a.length;k++)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(0===k||1===k&&".."===a[2]||".."===a[k-1])continue;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}if((o||q)&&p){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),o)for(l=o.length;l>0;l-=1)if(e=p[o.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=w.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),o.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){r[a]=b}}function j(b){if(e(s,b)){var c=s[b];delete s[b],u[b]=!0,n.apply(a,c)}if(!e(r,b)&&!e(u,b))throw new Error("No "+b);return r[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return a?k(a):[]}function m(a){return function(){return t&&t.config&&t.config[a]||{}}}var n,o,p,q,r={},s={},t={},u={},v=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;p=function(a,b){var c,d=k(a),e=d[0],g=b[1];return a=d[1],e&&(e=f(e,g),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(g)):f(a,g):(a=f(a,g),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},q={require:function(a){return g(a)},exports:function(a){var b=r[a];return"undefined"!=typeof b?b:r[a]={}},module:function(a){return{id:a,uri:"",exports:r[a],config:m(a)}}},n=function(b,c,d,f){var h,k,m,n,o,t,v,w=[],x=typeof d;if(f=f||b,t=l(f),"undefined"===x||"function"===x){for(c=!c.length&&d.length?["require","exports","module"]:c,o=0;o<c.length;o+=1)if(n=p(c[o],t),k=n.f,"require"===k)w[o]=q.require(b);else if("exports"===k)w[o]=q.exports(b),v=!0;else if("module"===k)h=w[o]=q.module(b);else if(e(r,k)||e(s,k)||e(u,k))w[o]=j(k);else{if(!n.p)throw new Error(b+" missing "+k);n.p.load(n.n,g(f,!0),i(k),{}),w[o]=r[k]}m=d?d.apply(r[b],w):void 0,b&&(h&&h.exports!==a&&h.exports!==r[b]?r[b]=h.exports:m===a&&v||(r[b]=m))}else b&&(r[b]=d)},c=d=o=function(b,c,d,e,f){if("string"==typeof b)return q[b]?q[b](c):j(p(b,l(c)).f);if(!b.splice){if(t=b,t.deps&&o(t.deps,t.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?n(a,b,c,d):setTimeout(function(){n(a,b,c,d)},4),o},o.config=function(a){return o(a)},c._defined=r,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(r,a)||e(s,a)||(s[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../bower_components/almond/almond",function(){}),b("davinci-eight/checks/isDefined",["require","exports"],function(a,b){"use strict";function c(a){return"undefined"!=typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustSatisfy",["require","exports"],function(a,b){"use strict";function c(a,b,c,d){if(!b){var e=c?c():"satisfy some condition",f=d?" in "+d():"";throw new Error(a+" must "+e+f+".")}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/isEQ",["require","exports"],function(a,b){"use strict";function c(a,b){return a===b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustBeEQ",["require","exports","../checks/mustSatisfy","../checks/isEQ"],function(a,b,c,d){"use strict";function e(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be equal to "+e},f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/checks/isNumber",["require","exports"],function(a,b){"use strict";function c(a){return"number"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/isInteger",["require","exports","../checks/isNumber"],function(a,b,c){"use strict";function d(a){return c["default"](a)&&a%1===0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/checks/mustBeInteger",["require","exports","../checks/mustSatisfy","../checks/isInteger"],function(a,b,c,d){"use strict";function e(){return"be an integer"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/checks/isString",["require","exports"],function(a,b){"use strict";function c(a){return"string"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustBeString",["require","exports","../checks/mustSatisfy","../checks/isString"],function(a,b,c,d){"use strict";function e(){return"be a string"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/i18n/readOnly",["require","exports","../checks/mustBeString"],function(a,b,c){"use strict";function d(a){c["default"]("name",a);var b={get message(){return"Property `"+a+"` is readonly."}};return b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/config",["require","exports"],function(a,b){"use strict";var c=function(){function a(){this.GITHUB="https://github.com/geometryzen/davinci-eight",this.LAST_MODIFIED="2016-10-31",this.NAMESPACE="EIGHT",this.VERSION="2.317.0"}return a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.log(a)},a.prototype.info=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.info(a)},a.prototype.warn=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.warn(a)},a.prototype.error=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];console.error(a)},a}(),d=new c;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/core/refChange",["require","exports","../config","../checks/isDefined"],function(a,b,c,d){"use strict";function e(a){return t+": "+a}function f(a){return c["default"].log(e(a))}function g(a){return c["default"].warn(e(a))}function h(a){return c["default"].error(e(a))}function i(){var a=Object.keys(o);a.forEach(function(a){var b=o[a];0===b.refCount&&delete o[a]})}function j(){for(var a=Object.keys(o),b=a.length,c=0,d=0;d<b;d++){var e=a[d],f=o[e];c+=f.refCount}return c}function k(){return q&&g("Nothing to see because skip mode is "+q),i(),j()}function l(a){return"There are "+a+" outstanding reference counts."}function m(){var a=k();return a>0?(c["default"].warn("Memory Leak!"),c["default"].warn(l(a)),c["default"].warn(JSON.stringify(o,null,2))):p&&c["default"].log(l(a)),a}function n(a,b,c){if(void 0===c&&(c=0),0===c||!q){if(r)if(s){if(b===s){var g=o[a];f(g?c+" on "+a+" @ "+b:c+" on "+a+" @ "+b)}}else f(c+" on "+a+" @ "+b);if(1===c){var g=o[a];g?g.name=b:(g={refCount:0,name:b,zombie:!1},o[a]=g),g.refCount+=c}else if(c===-1){var g=o[a];g?(g.refCount+=c,0===g.refCount?g.zombie=!0:g.refCount<0&&h("refCount < 0 for "+b)):h(c+" on "+a+" @ "+b)}else{if(0!==c)throw new Error(e("change must be +1 or -1 for normal recording, or 0 for logging to the console."));var i=d["default"](b)?a+" @ "+b:a;if("stop"===a)return p&&f(i),k();if("dump"===a)return m();if("verbose"===a)p=!0;else if("quiet"===a)p=!1;else if("start"===a)p&&f(i),q=!1,r=!1;else if("reset"===a)p&&f(i),o={},p=!0,q=!0,r=!1,s=void 0;else{if("trace"!==a)throw new Error(e("Unexpected command uuid => "+a+", name => "+b));p&&f(i),q=!1,r=!0,s=b}}}}var o={},p=!0,q=!0,r=!1,s=void 0,t="refChange";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=n}),b("davinci-eight/core/uuid4",["require","exports"],function(a,b){"use strict";function c(){var a=function(a){return Math.pow(2,a)},b=a(6),c=a(8),d=a(12),e=a(16),f=a(32),g=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/ShareableBase",["require","exports","../checks/isDefined","../checks/mustBeEQ","../checks/mustBeInteger","../checks/mustBeString","../i18n/readOnly","./refChange","./uuid4"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(){function a(){this._refCount=1,this._uuid=i["default"]().generate(),this._levelUp=-1,this._type="ShareableBase",this._levelUp+=1,h["default"](this._uuid,this._type,1)}return a.prototype.destructor=function(a,b){void 0===b&&(b=!1),e["default"]("levelUp",a),d["default"](this._type+" constructor-destructor chain mismatch: destructor index "+a,a,this._levelUp),b&&console.warn("`protected destructor(): void` method should be implemented by `"+this._type+"`."),this._levelUp=void 0},Object.defineProperty(a.prototype,"levelUp",{get:function(){return this._levelUp},set:function(a){throw new Error(g["default"]("levelUp").message)},enumerable:!0,configurable:!0}),a.prototype.isZombie=function(){return"undefined"==typeof this._refCount},a.prototype.addRef=function(){return this._refCount++,h["default"](this._uuid,this._type,1),this._refCount},a.prototype.getLoggingName=function(){return this._type},a.prototype.setLoggingName=function(a){this._type=f["default"]("name",a),this._levelUp+=1,h["default"](this._uuid,a,1),h["default"](this._uuid,a,-1)},a.prototype.release=function(){this._refCount--,h["default"](this._uuid,this._type,-1);var a=this._refCount;if(0===a&&(this.destructor(0,!0),this._refCount=void 0,c["default"](this._levelUp)))throw new Error(this._type+".destructor method is not calling all the way up the chain.");return a},Object.defineProperty(a.prototype,"uuid",{get:function(){return this._uuid},enumerable:!0,configurable:!0}),a}();b.ShareableBase=j});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/commands/WebGLBlendFunc",["require","exports","../core/ShareableBase"],function(a,b,c){"use strict";var d=function(a){function b(b,c){a.call(this),this.setLoggingName("WebGLBlendFunc"),this.sfactor=b,this.dfactor=c}return f(b,a),b.prototype.destructor=function(b){this.sfactor=void 0,this.dfactor=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(a){},b.prototype.contextGain=function(a){this.execute(a.gl)},b.prototype.contextLost=function(){},b.prototype.execute=function(a){a.blendFunc(this.sfactor,this.dfactor)},b}(c.ShareableBase);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/checks/mustBeNumber",["require","exports","../checks/mustSatisfy","../checks/isNumber"],function(a,b,c,d){"use strict";function e(){return"be a `number`"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/commands/WebGLClearColor",["require","exports","../checks/mustBeNumber","../core/ShareableBase"],function(a,b,c,d){"use strict";var e=function(a){function b(b,d,e,f){void 0===b&&(b=0),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=1),a.call(this),this.setLoggingName("WebGLClearColor"),this.r=c["default"]("r",b),this.g=c["default"]("g",d),this.b=c["default"]("b",e),this.a=c["default"]("a",f)}return f(b,a),b.prototype.destructor=function(b){this.r=void 0,this.g=void 0,this.b=void 0,this.a=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(a){},b.prototype.contextGain=function(a){c["default"]("r",this.r),c["default"]("g",this.g),c["default"]("b",this.b),c["default"]("a",this.a),a.gl.clearColor(this.r,this.g,this.b,this.a)},b.prototype.contextLost=function(){},b}(d.ShareableBase);b.WebGLClearColor=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/commands/WebGLDisable",["require","exports","../checks/mustBeNumber","../core/ShareableBase"],function(a,b,c,d){"use strict";var e=function(a){function b(b){a.call(this),this.setLoggingName("WebGLDisable"),this._capability=c["default"]("capability",b)}return f(b,a),b.prototype.destructor=function(b){this._capability=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(a){},b.prototype.contextGain=function(a){a.gl.disable(this._capability)},b.prototype.contextLost=function(){},b}(d.ShareableBase);b.WebGLDisable=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/commands/WebGLEnable",["require","exports","../checks/mustBeNumber","../core/ShareableBase"],function(a,b,c,d){"use strict";var e=function(a){function b(b){a.call(this),this.setLoggingName("WebGLEnable"),this._capability=c["default"]("capability",b)}return f(b,a),b.prototype.destructor=function(b){this._capability=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(a){},b.prototype.contextGain=function(a){a.gl.enable(this._capability)},b.prototype.contextLost=function(){},b}(d.ShareableBase);b.WebGLEnable=e}),b("davinci-eight/checks/isUndefined",["require","exports"],function(a,b){"use strict";function c(a){return"undefined"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/VectorN",["require","exports","../checks/isDefined","../checks/isUndefined","../checks/mustSatisfy"],function(a,b,c,d,e){"use strict";function f(a){return"push(value: "+a+"): number"}function g(a){return"pop(): "+a}function h(a){return a+" is not allowed for a fixed size vector"}function i(){return h(f("T"))}function j(){return h(g("T"))}var k=function(){function a(a,b,d){void 0===b&&(b=!1),this.modified=b,c["default"](d)?(this._size=d,this._coords=a,e["default"]("data.length",a.length===d,function(){return""+d})):(this._size=void 0,this._coords=a)}return Object.defineProperty(a.prototype,"coords",{get:function(){return this._coords},set:function(a){this._coords=a,this.modified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this.coords.length},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a(this._coords,this.modified,this._size)},a.prototype.getComponent=function(a){return this.coords[a]},a.prototype.pop=function(){if(d["default"](this._size))return this.coords.pop();throw new Error(j())},a.prototype.push=function(a){if(d["default"](this._size)){var b=this.coords,c=b.push(a);return this.coords=b,c}throw new Error(i())},a.prototype.setComponent=function(a,b){var c=this.coords,d=c[a];b!==d&&(c[a]=b,this.coords=c,this.modified=!0)},a.prototype.toArray=function(a,b){void 0===a&&(a=[]),void 0===b&&(b=0);for(var c=this.coords,d=c.length,e=0;e<d;e++)a[b+e]=c[e];return a},a.prototype.toLocaleString=function(){return this.coords.toLocaleString()},a.prototype.toString=function(){return this.coords.toString()},a}();b.VectorN=k});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Coords",["require","exports","./VectorN"],function(a,b,c){"use strict";var d=function(a){function b(b,c,d){a.call(this,b,c,d)}return f(b,a),b.prototype.approx=function(a){for(var b=0,c=this._coords.length,d=0;d<c;d++)b=Math.max(b,Math.abs(this._coords[d]));for(var e=b*Math.pow(10,-a),d=0;d<c;d++)Math.abs(this._coords[d])<e&&(this._coords[d]=0)},b.prototype.equals=function(a){if(a instanceof b){for(var c=this._coords.length,d=0;d<c;d++)if(this.coords[d]!==a[d])return!1;return!0}return!1},b}(c.VectorN);b.Coords=d}),b("davinci-eight/checks/isNull",["require","exports"],function(a,b){"use strict";function c(a){return null===a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/arraysEQ",["require","exports","../checks/isDefined","../checks/isNull","../checks/isUndefined"],function(a,b,c,d,e){"use strict";function f(a,b){if(c["default"](a)){if(c["default"](b)){if(d["default"](a))return d["default"](b);if(d["default"](b))return!1;var f=a.length,g=b.length;if(f===g){for(var h=0;h<f;h++)if(a[h]!==b[h])return!1;return!0}return!1}return!1}return e["default"](b)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/dotVectorCartesianE3",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f){return a*d+b*e+c*f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/dotVectorE3",["require","exports","../math/dotVectorCartesianE3","../checks/isDefined"],function(a,b,c,d){"use strict";function e(a,b){return d["default"](a)&&d["default"](b)?c["default"](a.x,a.y,a.z,b.x,b.y,b.z):void 0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/utils/EventEmitter",["require","exports"],function(a,b){"use strict";var c=function(){function a(a){this.owner=a}return a.prototype.addEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];return c||(c=this._eventRegistry[a]=[]),c.indexOf(b)===-1&&c.push(b),b},a.prototype.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(c){var d=c.indexOf(b);d!==-1&&c.splice(d,1)}},a.prototype.emit=function(a,b,c){if(this._eventRegistry){var d=this._eventRegistry[a];if(d){var e=d.length;if(e)for(var f=0;f<e;f++)d[f](a,b,c,this.owner)}}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/compG3Get",["require","exports"],function(a,b){"use strict";function c(a,b){switch(b){case d:return a.a;case e:return a.x;case f:return a.y;case g:return a.z;case h:return a.xy;case i:return a.yz;case j:return a.zx;case k:return a.b;default:throw new Error("index => "+b)}}var d=0,e=1,f=2,g=3,h=4,i=5,j=6,k=7;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/extE3",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i);break;case 1:r=+(a*j+b*i);break;case 2:r=+(a*k+c*i);break;case 3:r=+(a*l+d*i);break;case 4:r=+(a*m+b*k-c*j+e*i);break;case 5:r=+(a*n+c*l-d*k+f*i);break;case 6:r=+(a*o-b*l+d*j+g*i);break;case 7:r=+(a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/compG3Set",["require","exports"],function(a,b){"use strict";function c(a,b,c){switch(b){case d:a.a=c;break;case e:a.x=c;break;case f:a.y=c;break;case g:a.z=c;break;case h:a.xy=c;break;case i:a.yz=c;break;case j:a.zx=c;break;case k:a.b=c;break;default:throw new Error("index => "+b)}}var d=0,e=1,f=2,g=3,h=4,i=5,j=6,k=7;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/extG3",["require","exports","../math/compG3Get","../math/extE3","../math/compG3Set"],function(a,b,c,d,e){"use strict";function f(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;w<8;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/gauss",["require","exports"],function(a,b){"use strict";function c(a,b){for(var c=[],d=0;d<a;d++)c.push(b);return c}function d(a,b,c){for(var d=i(a[b][b]),e=b,f=b+1;f<c;f++)i(a[f][b])>d&&(d=i(a[f][b]),e=f);return e}function e(a,b,c,d){for(var e=d+1,f=b;f<e;f++){var g=a[c][f];a[c][f]=a[b][f],a[b][f]=g}}function f(a,b,c){for(var d=b+1;d<c;d++)for(var e=-a[d][b]/a[b][b],f=b;f<c+1;f++)b===f?a[d][f]=0:a[d][f]+=e*a[b][f]}function g(a,b){for(var d=c(b,0),e=b-1;e>-1;e--){d[e]=a[e][b]/a[e][e];for(var f=e-1;f>-1;f--)a[f][b]-=a[f][e]*d[e]}return d}function h(a,b){for(var c=a.length,h=0;h<c;h++){var i=a[h],j=b[h];i.push(j)}for(var k=0;k<c;k++)e(a,k,d(a,k,c),c),f(a,k,c);return g(a,c)}var i=Math.abs;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h}),b("davinci-eight/math/isScalarG3",["require","exports"],function(a,b){"use strict";function c(a){return 0===a.x&&0===a.y&&0===a.z&&0===a.xy&&0===a.yz&&0===a.zx&&0===a.b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/lcoE3",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(a*j-c*m+d*o-f*p);break;case 2:r=+(a*k+b*m-d*n-g*p);break;case 3:r=+(a*l-b*o+c*n-e*p);break;case 4:r=+(a*m+d*p);break;case 5:r=+(a*n+b*p);break;case 6:r=+(a*o+c*p);break;case 7:r=+(a*p);break;default:throw new Error("index must be in the range [0..7]")}return+r}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/lcoG3",["require","exports","../math/compG3Get","../math/lcoE3","../math/compG3Set"],function(a,b,c,d,e){"use strict";function f(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;w<8;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/checks/isObject",["require","exports"],function(a,b){"use strict";function c(a){return"object"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/maskG3",["require","exports","../checks/isNumber","../checks/isObject"],function(a,b,c,d){"use strict";function e(a){if(d["default"](a)&&"maskG3"in a){var b=a,e=a;return 1&b.maskG3?f.a=e.a:f.a=0,2&b.maskG3?(f.x=e.x,f.y=e.y,f.z=e.z):(f.x=0,f.y=0,f.z=0),4&b.maskG3?(f.yz=e.yz,f.zx=e.zx,f.xy=e.xy):(f.yz=0,f.zx=0,f.xy=0),8&b.maskG3?f.b=e.b:f.b=0,f}return c["default"](a)?(f.a=a,f.x=0,f.y=0,f.z=0,f.yz=0,f.zx=0,f.xy=0,f.b=0,f):void 0}var f={a:0,x:0,y:0,z:0,yz:0,zx:0,xy:0,b:0};Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/math/mulE3",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(a*j+b*i-c*m+d*o+e*k-f*p-g*l-h*n);break;case 2:r=+(a*k+b*m+c*i-d*n-e*j+f*l-g*p-h*o);break;case 3:r=+(a*l-b*o+c*n+d*i-e*p-f*k+g*j-h*m);break;case 4:r=+(a*m+b*k-c*j+d*p+e*i-f*o+g*n+h*l);break;case 5:r=+(a*n+b*p+c*l-d*k+e*o+f*i-g*m+h*j);break;case 6:r=+(a*o-b*l+c*p+d*j-e*n+f*m+g*i+h*k);break;case 7:r=+(a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/mulG3",["require","exports","../math/compG3Get","../math/mulE3"],function(a,b,c,d){"use strict";function e(a,b,e){for(var f=a.a,g=a.x,h=a.y,i=a.z,j=a.xy,k=a.yz,l=a.zx,m=a.b,n=c["default"](b,0),o=c["default"](b,1),p=c["default"](b,2),q=c["default"](b,3),r=c["default"](b,4),s=c["default"](b,5),t=c["default"](b,6),u=c["default"](b,7),v=e.length,w=0;w<v;w++)e[w]=d["default"](f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,w)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/math/randomRange",["require","exports"],function(a,b){"use strict";function c(a,b){return(b-a)*Math.random()+a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/rcoE3",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(+b*i+e*k-g*l-h*n);break;case 2:r=+(+c*i-e*j+f*l-h*o);break;case 3:r=+(+d*i-f*k+g*j-h*m);break;case 4:r=+(+e*i+h*l);break;case 5:r=+(+f*i+h*j);break;case 6:r=+(+g*i+h*k);break;case 7:r=+(+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/rcoG3",["require","exports","../math/compG3Get","../math/rcoE3","../math/compG3Set"],function(a,b,c,d,e){"use strict";function f(a,b,f){for(var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7),w=0;w<8;w++)e["default"](f,w,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/quadVectorE3",["require","exports","../math/dotVectorCartesianE3","../checks/isDefined","../checks/isNumber"],function(a,b,c,d,e){"use strict";function f(a){if(d["default"](a)){var b=a.x,f=a.y,g=a.z;return e["default"](b)&&e["default"](f)&&e["default"](g)?c["default"](b,f,g,b,f,g):void 0}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/wedgeXY",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f){return a*e-b*d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/wedgeYZ",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f){return b*f-c*e}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/wedgeZX",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f){return c*d-a*f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/rotorFromDirectionsE3",["require","exports","./dotVectorE3","./quadVectorE3","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,h,j){var k=d["default"](a),l=i(k),m=d["default"](b),n=i(m),o=n*l,p=c["default"](b,a),q=i(2*(m*k+o*p));if(0!==q)j=j.versor(b,a),j=j.addScalar(o),j=j.divByScalar(q);else if(h)j.rotorFromGeneratorAngle(h,Math.PI);else{var r=Math.random(),s=Math.random(),t=Math.random();j.zero(),j.yz=f["default"](r,s,t,a.x,a.y,a.z),j.zx=g["default"](r,s,t,a.x,a.y,a.z),j.xy=e["default"](r,s,t,a.x,a.y,a.z),j.normalize(),j.rotorFromGeneratorAngle(j,Math.PI)}}var i=Math.sqrt;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h}),b("davinci-eight/math/scpG3",["require","exports","../math/compG3Get","../math/mulE3","../math/compG3Set"],function(a,b,c,d,e){"use strict";function f(a,b,f){var g=c["default"](a,0),h=c["default"](a,1),i=c["default"](a,2),j=c["default"](a,3),k=c["default"](a,4),l=c["default"](a,5),m=c["default"](a,6),n=c["default"](a,7),o=c["default"](b,0),p=c["default"](b,1),q=c["default"](b,2),r=c["default"](b,3),s=c["default"](b,4),t=c["default"](b,5),u=c["default"](b,6),v=c["default"](b,7);return e["default"](f,0,d["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,0)),e["default"](f,1,0),e["default"](f,2,0),e["default"](f,3,0),e["default"](f,4,0),e["default"](f,5,0),e["default"](f,6,0),e["default"](f,7,0),f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/squaredNormG3",["require","exports"],function(a,b){"use strict";function c(a){var b=a.a,c=a.x,d=a.y,e=a.z,f=a.yz,g=a.zx,h=a.xy,i=a.b;return b*b+c*c+d*d+e*e+f*f+g*g+h*h+i*i}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/isArray",["require","exports"],function(a,b){"use strict";function c(a){return"[object Array]"===Object.prototype.toString.call(a)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustBeArray",["require","exports","../checks/mustSatisfy","../checks/isArray"],function(a,b,c,d){"use strict";function e(){return"be an array"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/stringFromCoordinates",["require","exports","../checks/isDefined","../checks/mustBeArray"],function(a,b,c,d){"use strict";function e(a){if("string"==typeof a)return"1"===a;var b=d["default"]("label",a);return 2===b.length?e(b[0])&&e(b[1]):1===b.length&&e(b[0])}function f(a,b,c){if("string"==typeof b)c.push(b);else{var e=d["default"]("label",b);if(2===e.length)c.push(a>0?e[1]:e[0]);else if(1===e.length)c.push(e[0]);else if(0!==e.length)throw new Error("Unexpected basis label array length: "+e.length)}}function g(a,b,c,g){if(0!==a){if(a>=0)g.length>0&&g.push("+");else if("string"==typeof c)g.push("-");else{var h=d["default"]("label",c);2===h.length?h[0]!==h[1]?g.length>0&&g.push("+"):g.push("-"):1===h.length?g.push("-"):g.push("-")}var i=Math.abs(a);1===i?f(a,c,g):(g.push(b(i)),e(c)||(g.push("*"),f(a,c,g)))}}function h(a,b,d){for(var e=[],f=0,h=a.length;f<h;f++){var i=a[f];if(!c["default"](i))return;g(i,b,d[f],e)}return e.length>0?e.join(""):"0"}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Geometric3",["require","exports","./Coords","./arraysEQ","./dotVectorE3","../utils/EventEmitter","./extG3","./gauss","../checks/isDefined","./isScalarG3","./lcoG3","./maskG3","./mulE3","./mulG3","./randomRange","../i18n/readOnly","./rcoG3","./rotorFromDirectionsE3","./scpG3","./squaredNormG3","./stringFromCoordinates","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){"use strict";function z(a){return[a.a,a.x,a.y,a.z,a.xy,a.yz,a.zx,a.b]}function A(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function B(a){return Math.sqrt(A(a,a))}function C(a,b){return A(a,b)/(B(a)*B(b))}var D=0,E=1,F=2,G=3,H=4,I=5,J=6,K=7,L=["1","e1","e2","e3","e12","e23","e31","e123"],M="change",N=Math.atan2,O=Math.exp,P=Math.cos,Q=Math.log,R=Math.sin,S=Math.sqrt,T=[],U=function(a){function b(){a.call(this,[0,0,0,0,0,0,0,0],!1,8),this.eventBus=new g["default"](this)}return f(b,a),b.prototype.on=function(a,b){this.eventBus.addEventListener(a,b)},b.prototype.off=function(a,b){this.eventBus.removeEventListener(a,b)},b.prototype.setCoordinate=function(a,b,c){
var d=this.coords,e=d[a];b!==e&&(d[a]=b,this.modified=!0,this.eventBus.emit(M,c,b))},Object.defineProperty(b.prototype,"a",{get:function(){return this.coords[D]},set:function(a){this.setCoordinate(D,a,"a")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[E]},set:function(a){this.setCoordinate(E,a,"x")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[F]},set:function(a){this.setCoordinate(F,a,"y")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this.coords[G]},set:function(a){this.setCoordinate(G,a,"z")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"yz",{get:function(){return this.coords[I]},set:function(a){this.setCoordinate(I,a,"yz")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"zx",{get:function(){return this.coords[J]},set:function(a){this.setCoordinate(J,a,"zx")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"xy",{get:function(){return this.coords[H]},set:function(a){this.setCoordinate(H,a,"xy")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this.coords[K]},set:function(a){this.setCoordinate(K,a,"b")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"maskG3",{get:function(){var a=this._coords,b=a[D],c=a[E],d=a[F],e=a[G],f=a[I],g=a[J],h=a[H],i=a[K],j=0;return 0!==b&&(j+=1),0===c&&0===d&&0===e||(j+=2),0===f&&0===g&&0===h||(j+=4),0!==i&&(j+=8),j},set:function(a){throw new Error(q["default"]("maskG3").message)},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){return void 0===b&&(b=1),this.a+=a.a*b,this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.b+=a.b*b,this},b.prototype.addPseudo=function(a){return this.b+=a,this},b.prototype.addScalar=function(a){return this.a+=a,this},b.prototype.addVector=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},b.prototype.add2=function(a,b){return this.a=a.a+b.a,this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this.b=a.b+b.b,this},b.prototype.adj=function(){return this},b.prototype.angle=function(){return this.log().grade(2)},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.clone=function(){return b.copy(this)},b.prototype.conj=function(){return this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},b.prototype.copyCoordinates=function(a){return this.a=a[D],this.x=a[E],this.y=a[F],this.z=a[G],this.yz=a[I],this.zx=a[J],this.xy=a[H],this.b=a[K],this},b.prototype.distanceTo=function(a){return j["default"](a)?S(this.quadranceTo(a)):void 0},b.prototype.quadranceTo=function(a){if(j["default"](a)){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d}},b.prototype.lco=function(a){return this.lco2(this,a)},b.prototype.lco2=function(a,b){return l["default"](a,b,this)},b.prototype.rco=function(a){return this.rco2(this,a)},b.prototype.rco2=function(a,b){return r["default"](a,b,this)},b.prototype.copy=function(a){return this.a=a.a,this.x=a.x,this.y=a.y,this.z=a.z,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.b=a.b,this},b.prototype.copyScalar=function(a){return this.zero().addScalar(a)},b.prototype.copySpinor=function(a){return this.zero(),this.a=a.a,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this},b.prototype.copyVector=function(a){return this.zero(),this.x=a.x,this.y=a.y,this.z=a.z,this},b.prototype.cross=function(a){return this.ext(a),this.dual(this).neg(),this},b.prototype.div=function(a){if(k["default"](a))return this.divByScalar(a.a);var b=a.a,c=a.x,d=a.y,e=a.z,f=a.xy,g=a.yz,h=a.zx,j=a.b,l=[[b,c,d,e,-f,-g,-h,-j],[c,b,f,-h,-d,-j,e,-g],[d,-f,b,g,c,-e,-j,-h],[e,h,-g,b,-j,d,-c,-f],[f,-d,c,j,b,h,-g,e],[g,j,-e,d,-h,b,f,c],[h,e,j,-c,g,-f,b,d],[j,g,h,f,e,c,d,b]],m=[1,0,0,0,0,0,0,0],o=i["default"](l,m),p=this.a,q=this.x,r=this.y,s=this.z,t=this.xy,u=this.yz,v=this.zx,w=this.b,x=o[0],y=o[1],z=o[2],A=o[3],B=o[4],C=o[5],D=o[6],E=o[7],F=n["default"](p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,0),G=n["default"](p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,1),H=n["default"](p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,2),I=n["default"](p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,3),J=n["default"](p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,4),K=n["default"](p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,5),L=n["default"](p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,6),M=n["default"](p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,7);return this.a=F,this.x=G,this.y=H,this.z=I,this.xy=J,this.yz=K,this.zx=L,this.b=M,this},b.prototype.divByScalar=function(a){return this.a/=a,this.x/=a,this.y/=a,this.z/=a,this.yz/=a,this.zx/=a,this.xy/=a,this.b/=a,this},b.prototype.div2=function(a,b){var c=a.a,d=a.yz,e=a.zx,f=a.xy,g=b.a,h=b.yz,i=b.zx,j=b.xy;return this.a=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},b.prototype.dual=function(a){var b=-a.b,c=-a.yz,d=-a.zx,e=-a.xy,f=a.x,g=a.y,h=a.z,i=a.a;return this.a=b,this.x=c,this.y=d,this.z=e,this.yz=f,this.zx=g,this.xy=h,this.b=i,this},b.prototype.equals=function(a){if(a instanceof b){var c=a;return d["default"](this.coords,c.coords)}return!1},b.prototype.exp=function(){var a=O(this.a),b=this.yz,c=this.zx,d=this.xy,e=S(b*b+c*c+d*d),f=0!==e?R(e)/e:1,g=P(e);return this.a=g,this.yz=b*f,this.zx=c*f,this.xy=d*f,this.scale(a)},b.prototype.inv=function(){var a=this.a,b=this.x,c=this.y,d=this.z,e=this.xy,f=this.yz,g=this.zx,h=this.b,j=[[a,b,c,d,-e,-f,-g,-h],[b,a,e,-g,-c,-h,d,-f],[c,-e,a,f,b,-d,-h,-g],[d,g,-f,a,-h,c,-b,-e],[e,-c,b,h,a,g,-f,d],[f,h,-d,c,-g,a,e,b],[g,d,h,-b,f,-e,a,c],[h,f,g,e,d,b,c,a]],k=[1,0,0,0,0,0,0,0],l=i["default"](j,k);return this.a=l[0],this.x=l[1],this.y=l[2],this.z=l[3],this.xy=l[4],this.yz=l[5],this.zx=l[6],this.b=l[7],this},b.prototype.isOne=function(){return 1===this.a&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.b},b.prototype.isZero=function(){return 0===this.a&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.b},b.prototype.lerp=function(a,b){return this.a+=(a.a-this.a)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.yz+=(a.yz-this.yz)*b,this.zx+=(a.zx-this.zx)*b,this.xy+=(a.xy-this.xy)*b,this.b+=(a.b-this.b)*b,this},b.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},b.prototype.log=function(){var a=this.a,b=this.yz,c=this.zx,d=this.xy,e=b*b+c*c+d*d,f=S(e),g=N(f,a)/f;return this.a=Q(S(a*a+e)),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},b.prototype.magnitude=function(){return S(this.squaredNormSansUnits())},b.prototype.magnitudeSansUnits=function(){return S(this.squaredNormSansUnits())},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){return o["default"](a,b,this._coords),this},b.prototype.neg=function(){return this.a=-this.a,this.x=-this.x,this.y=-this.y,this.z=-this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.b=-this.b,this},b.prototype.norm=function(){return this.a=this.magnitudeSansUnits(),this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this},b.prototype.normalize=function(){var a=this.magnitude();return 0!==a&&(this.a=this.a/a,this.x=this.x/a,this.y=this.y/a,this.z=this.z/a,this.yz=this.yz/a,this.zx=this.zx/a,this.xy=this.xy/a,this.b=this.b/a),this},b.prototype.one=function(){return this.a=1,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this},b.prototype.quad=function(){return this.a=this.squaredNormSansUnits(),this.yz=0,this.zx=0,this.xy=0,this},b.prototype.squaredNorm=function(){return this.squaredNormSansUnits()},b.prototype.squaredNormSansUnits=function(){return u["default"](this)},b.prototype.reflect=function(a){var c=b.fromVector(a),d=c.clone().mul(this).mul(c).scale(-1);return this.copy(d),this},b.prototype.rev=function(){return this.a=+this.a,this.x=+this.x,this.y=+this.y,this.z=+this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.b=-this.b,this},b.prototype.__tilde__=function(){return b.copy(this).rev()},b.prototype.rotate=function(a){var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.a,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},b.prototype.rotorFromDirections=function(a,b){return this.rotorFromVectorToVector(a,b,void 0)},b.prototype.rotorFromTwoVectors=function(a,c,d,e){var f=b.rotorFromDirections(a,c),g=b.fromVector(d).rotate(f),h=b.zero().dual(g),i=b.rotorFromVectorToVector(g,e,h);return this.copy(i).mul(f)},b.prototype.rotorFromFrameToFrame=function(a,b){for(var c,d=-1,e=0;e<3;e++)T[e]=C(a[e],b[e]),T[e]>d&&(c=e,d=T[e]);var f=(c+1)%3;return this.rotorFromTwoVectors(a[c],b[c],a[f],b[f])},b.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=a.yz,e=a.zx,f=a.xy,g=d*d+e*e+f*f,h=Math.sqrt(g),i=R(h*c);return this.a=P(h*c),this.x=0,this.y=0,this.z=0,this.yz=-d*i/h,this.zx=-e*i/h,this.xy=-f*i/h,this.b=0,this},b.prototype.rotorFromVectorToVector=function(a,b,c){return s["default"](a,b,c,this),this},b.prototype.scp=function(a){return this.scp2(this,a)},b.prototype.scp2=function(a,b){return t["default"](a,b,this)},b.prototype.scale=function(a){return this.a*=a,this.x*=a,this.y*=a,this.z*=a,this.yz*=a,this.zx*=a,this.xy*=a,this.b*=a,this},b.prototype.slerp=function(a,b){return this},b.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},b.prototype.versor=function(a,b){var c=a.x,d=a.y,f=a.z,g=b.x,h=b.y,i=b.z;return this.zero(),this.a=e["default"](a,b),this.yz=x["default"](c,d,f,g,h,i),this.zx=y["default"](c,d,f,g,h,i),this.xy=w["default"](c,d,f,g,h,i),this},b.prototype.sub=function(a,b){return void 0===b&&(b=1),this.a-=a.a*b,this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.b-=a.b*b,this},b.prototype.subVector=function(a,b){return void 0===b&&(b=1),this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this},b.prototype.sub2=function(a,b){return this.a=a.a-b.a,this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.b=a.b-b.b,this},b.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return v["default"](z(this),b,L)},b.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return v["default"](z(this),b,L)},b.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return v["default"](z(this),b,L)},b.prototype.toString=function(a){var b=function(b){return b.toString(a)};return v["default"](z(this),b,L)},b.prototype.grade=function(a){switch(a){case 0:this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0;break;case 1:this.a=0,this.yz=0,this.zx=0,this.xy=0,this.b=0;break;case 2:this.a=0,this.x=0,this.y=0,this.z=0,this.b=0;break;case 3:this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0;break;default:this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0}return this},b.prototype.ext=function(a){return this.ext2(this,a)},b.prototype.ext2=function(a,b){return h["default"](a,b,this)},b.prototype.zero=function(){return this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this},b.prototype.__add__=function(a){var b=m["default"](a);return b?this.clone().add(b):void 0},b.prototype.__div__=function(a){var b=m["default"](a);return b?this.clone().div(b):void 0},b.prototype.__rdiv__=function(a){return a instanceof b?b.copy(a).div(this):"number"==typeof a?b.scalar(a).div(this):void 0},b.prototype.__mul__=function(a){var b=m["default"](a);return b?this.clone().mul(b):void 0},b.prototype.__rmul__=function(a){return a instanceof b?b.copy(a).mul(this):"number"==typeof a?b.copy(this).scale(a):void 0},b.prototype.__radd__=function(a){return a instanceof b?b.copy(a).add(this):"number"==typeof a?b.scalar(a).add(this):void 0},b.prototype.__sub__=function(a){var b=m["default"](a);return b?this.clone().sub(b):void 0},b.prototype.__rsub__=function(a){return a instanceof b?b.copy(a).sub(this):"number"==typeof a?b.scalar(a).sub(this):void 0},b.prototype.__wedge__=function(a){return a instanceof b?b.copy(this).ext(a):"number"==typeof a?b.copy(this).scale(a):void 0},b.prototype.__rwedge__=function(a){return a instanceof b?b.copy(a).ext(this):"number"==typeof a?b.copy(this).scale(a):void 0},b.prototype.__lshift__=function(a){return a instanceof b?b.copy(this).lco(a):"number"==typeof a?b.copy(this).lco(b.scalar(a)):void 0},b.prototype.__rlshift__=function(a){return a instanceof b?b.copy(a).lco(this):"number"==typeof a?b.scalar(a).lco(this):void 0},b.prototype.__rshift__=function(a){return a instanceof b?b.copy(this).rco(a):"number"==typeof a?b.copy(this).rco(b.scalar(a)):void 0},b.prototype.__rrshift__=function(a){return a instanceof b?b.copy(a).rco(this):"number"==typeof a?b.scalar(a).rco(this):void 0},b.prototype.__vbar__=function(a){return a instanceof b?b.copy(this).scp(a):"number"==typeof a?b.copy(this).scp(b.scalar(a)):void 0},b.prototype.__rvbar__=function(a){return a instanceof b?b.copy(a).scp(this):"number"==typeof a?b.scalar(a).scp(this):void 0},b.prototype.__bang__=function(){return b.copy(this).inv()},b.prototype.__pos__=function(){return b.copy(this)},b.prototype.__neg__=function(){return b.copy(this).neg()},b.zero=function(){return new b},b.one=function(){return(new b).addScalar(1)},b.e1=function(){return b.vector(1,0,0)},b.e2=function(){return b.vector(0,1,0)},b.e3=function(){return b.vector(0,0,1)},b.I=function(){return(new b).addPseudo(1)},b.copy=function(a){var c=new b;return c.a=a.a,c.x=a.x,c.y=a.y,c.z=a.z,c.yz=a.yz,c.zx=a.zx,c.xy=a.xy,c.b=a.b,c},b.fromBivector=function(a){var c=new b;return c.yz=a.yz,c.zx=a.zx,c.xy=a.xy,c},b.fromScalar=function(a){return(new b).copyScalar(a.a)},b.fromSpinor=function(a){var c=new b;return c.a=a.a,c.yz=a.yz,c.zx=a.zx,c.xy=a.xy,c},b.fromVector=function(a){var c=new b;return c.x=a.x,c.y=a.y,c.z=a.z,c},b.lerp=function(a,c,d){return b.copy(a).lerp(c,d)},b.random=function(){var a=-1,c=1,d=new b;return d.a=p["default"](a,c),d.x=p["default"](a,c),d.y=p["default"](a,c),d.z=p["default"](a,c),d.yz=p["default"](a,c),d.zx=p["default"](a,c),d.xy=p["default"](a,c),d.b=p["default"](a,c),d},b.rotorFromDirections=function(a,c){return(new b).rotorFromDirections(a,c)},b.rotorFromVectorToVector=function(a,c,d){return(new b).rotorFromVectorToVector(a,c,d)},b.scalar=function(a){return(new b).copyScalar(a)},b.spinor=function(a,c,d,e){var f=new b;return f.yz=a,f.zx=c,f.xy=d,f.a=e,f.modified=!1,f},b.vector=function(a,c,d){var e=new b;return e.x=a,e.y=c,e.z=d,e.modified=!1,e},b.wedge=function(a,c){var d=a.x,e=a.y,f=a.z,g=c.x,h=c.y,i=c.z,j=x["default"](d,e,f,g,h,i),k=y["default"](d,e,f,g,h,i),l=w["default"](d,e,f,g,h,i);return b.spinor(j,k,l,0)},b}(c.Coords);b.Geometric3=U}),b("davinci-eight/facets/getViewAttitude",["require","exports","../math/Geometric3"],function(a,b,c){"use strict";function d(a,b,c,d){g.copyVector(a).subVector(b).normalize(),e.copyVector(c).dual(e).rco(g).neg(),f.copy(e).ext(g).dual(f),d.one().add(e.mul(h)).add(f.mul(i)).add(g.mul(j)),d.normalize()}var e=c.Geometric3.zero(),f=c.Geometric3.zero(),g=c.Geometric3.zero(),h=c.Geometric3.vector(1,0,0),i=c.Geometric3.vector(0,1,0),j=c.Geometric3.vector(0,0,1);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/math/mulSpinorE3YZ",["require","exports"],function(a,b){"use strict";function c(a,b){return a.yz*b.a-a.zx*b.xy+a.xy*b.zx+a.a*b.yz}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/mulSpinorE3ZX",["require","exports"],function(a,b){"use strict";function c(a,b){return a.yz*b.xy+a.zx*b.a-a.xy*b.yz+a.a*b.zx}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/mulSpinorE3XY",["require","exports"],function(a,b){"use strict";function c(a,b){return-a.yz*b.zx+a.zx*b.yz+a.xy*b.a+a.a*b.xy}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/mulSpinorE3alpha",["require","exports"],function(a,b){"use strict";function c(a,b){return-a.yz*b.yz-a.zx*b.zx-a.xy*b.xy+a.a*b.a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustBeObject",["require","exports","../checks/mustSatisfy","../checks/isObject"],function(a,b,c,d){"use strict";function e(){return"be an `object`"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/quadSpinorE3",["require","exports","../checks/isDefined","../checks/isNumber"],function(a,b,c,d){"use strict";function e(a){if(c["default"](a)){var b=a.a,e=a.yz,f=a.zx,g=a.xy;return d["default"](b)&&d["default"](e)&&d["default"](f)&&d["default"](g)?b*b+e*e+f*f+g*g:void 0}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/math/toStringCustom",["require","exports","../math/stringFromCoordinates"],function(a,b,c){"use strict";function d(a,b,d){var e=c["default"](a,b,d);return e}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Spinor3",["require","exports","./Coords","./dotVectorCartesianE3","./mulSpinorE3YZ","./mulSpinorE3ZX","./mulSpinorE3XY","./mulSpinorE3alpha","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","./quadSpinorE3","./randomRange","../i18n/readOnly","./rotorFromDirectionsE3","./toStringCustom","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";function u(a){return[a.yz,a.zx,a.xy,a.a]}var v=0,w=1,x=2,y=3,z=["e23","e31","e12","1"],A=Math.exp,B=Math.cos,C=Math.sin,D=Math.sqrt,E=Math.random(),F=function(a){function b(b,c){if(a.call(this,b,!1,4),c!==E)throw new Error("Use the static creation methods instead of the constructor")}return f(b,a),Object.defineProperty(b.prototype,"yz",{get:function(){return this._coords[v]},set:function(a){k["default"]("yz",a),this.modified=this.modified||this.yz!==a,this._coords[v]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"zx",{get:function(){return this._coords[w]},set:function(a){k["default"]("zx",a),this.modified=this.modified||this.zx!==a,this._coords[w]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"xy",{get:function(){return this._coords[x]},set:function(a){k["default"]("xy",a),this.modified=this.modified||this.xy!==a,this._coords[x]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"a",{get:function(){return this._coords[y]},set:function(a){k["default"]("α",a),this.modified=this.modified||this.a!==a,this._coords[y]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"maskG3",{get:function(){var a=this._coords,b=a[y],c=a[v],d=a[w],e=a[x],f=0;return 0!==b&&(f+=1),0===c&&0===d&&0===e||(f+=4),f},set:function(a){throw new Error(o["default"]("maskG3").message)},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){return void 0===b&&(b=1),l["default"]("spinor",a),k["default"]("α",b),this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.a+=a.a*b,this},b.prototype.add2=function(a,b){return this.a=a.a+b.a,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this},b.prototype.addPseudo=function(a){return k["default"]("β",a),this},b.prototype.addScalar=function(a){return k["default"]("α",a),this.a+=a,this},b.prototype.adj=function(){throw new Error("TODO: Spinor3.adj")},b.prototype.angle=function(){return this.log().grade(2)},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.clone=function(){return b.copy(this)},b.prototype.conj=function(){return this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},b.prototype.copy=function(a){if(a)return this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.a=a.a,this;throw new Error("source for copy must be a spinor")},b.prototype.copyCoordinates=function(a){return this.yz=a[v],this.zx=a[w],this.xy=a[x],this.a=a[y],this},b.prototype.copyScalar=function(a){return this.zero().addScalar(a)},b.prototype.copySpinor=function(a){return this.copy(a)},b.prototype.copyVector=function(a){return this.zero()},b.prototype.div=function(a){return this.div2(this,a)},b.prototype.div2=function(a,b){var c=a.a,d=a.yz,e=a.zx,f=a.xy,g=b.a,h=b.yz,i=b.zx,j=b.xy;return this.a=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},b.prototype.divByScalar=function(a){return this.yz/=a,this.zx/=a,this.xy/=a,this.a/=a,this},b.prototype.dual=function(a,b){return this.a=0,this.yz=a.x,this.zx=a.y,this.xy=a.z,b&&this.neg(),this},b.prototype.equals=function(a){if(a instanceof b){var c=a;return this.yz===c.yz&&this.zx===c.zx&&this.xy===c.xy&&this.a===c.a}return!1},b.prototype.exp=function(){var a=this.a,b=this.yz,c=this.zx,d=this.xy,e=A(a),f=D(b*b+c*c+d*d),g=e*(0!==f?C(f)/f:1);return this.a=e*B(f),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},b.prototype.inv=function(){return this.conj(),this.divByScalar(this.squaredNormSansUnits()),this},b.prototype.isOne=function(){return 1===this.a&&0===this.xy&&0===this.yz&&0===this.zx},b.prototype.isZero=function(){return 0===this.a&&0===this.xy&&0===this.yz&&0===this.zx},b.prototype.lco=function(a){return this.lco2(this,a)},b.prototype.lco2=function(a,b){return this},b.prototype.lerp=function(a,c){var d=b.copy(a),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(c),f.exp(),this.copy(f),this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.log=function(){var a=this.a,b=this.yz,c=this.zx,d=this.xy,e=b*b+c*c+d*d,f=D(e),g=Math.abs(a),h=D(a*a+e);this.a=Math.log(h);var i=Math.atan2(f,g)/f;return this.yz=b*i,this.zx=c*i,this.xy=d*i,this},b.prototype.magnitude=function(){return D(this.squaredNormSansUnits())},b.prototype.magnitudeSansUnits=function(){return D(this.squaredNormSansUnits())},b.prototype.mul=function(a){var b=i["default"](this,a),c=e["default"](this,a),d=g["default"](this,a),f=h["default"](this,a);return this.a=b,this.yz=c,this.zx=d,this.xy=f,this},b.prototype.mul2=function(a,b){var c=i["default"](a,b),d=e["default"](a,b),f=g["default"](a,b),j=h["default"](a,b);return this.a=c,this.yz=d,this.zx=f,this.xy=j,this},b.prototype.neg=function(){return this.a=-this.a,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},b.prototype.norm=function(){var a=this.magnitudeSansUnits();return this.zero().addScalar(a)},b.prototype.normalize=function(){var a=this.magnitude();return this.yz=this.yz/a,this.zx=this.zx/a,this.xy=this.xy/a,this.a=this.a/a,this},b.prototype.one=function(){return this.a=1,this.yz=0,this.zx=0,this.xy=0,this},b.prototype.quad=function(){var a=this.squaredNormSansUnits();return this.zero().addScalar(a)},b.prototype.squaredNorm=function(){return m["default"](this)},b.prototype.squaredNormSansUnits=function(){return m["default"](this)},b.prototype.stress=function(a){return this.yz=this.yz*a.y*a.z,this.zx=this.zx*a.z*a.x,this.xy=this.xy*a.x*a.y,this},b.prototype.rco=function(a){return this.rco2(this,a)},b.prototype.rco2=function(a,b){return this},b.prototype.rev=function(){return this.yz*=-1,this.zx*=-1,this.xy*=-1,this},b.prototype.reflect=function(a){var b=this.a,c=this.yz,d=this.zx,e=this.xy,f=a.x,g=a.y,h=a.z,i=f*f+g*g+h*h,j=f*c+g*d+h*e;return this.a=i*b,this.xy=2*h*j-i*e,this.yz=2*f*j-i*c,this.zx=2*g*j-i*d,this},b.prototype.rotate=function(a){return this.rev(),this.mul2(a,this),this.rev(),this.mul2(a,this),this},b.prototype.rotorFromDirections=function(a,b){return this.rotorFromVectorToVector(a,b,void 0)},b.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=C(c);return this.yz=-a.yz*d,this.zx=-a.zx*d,this.xy=-a.xy*d,this.a=B(c),this},b.prototype.rotorFromVectorToVector=function(a,b,c){return p["default"](a,b,c,this),this},b.prototype.scp=function(a){return this.scp2(this,a)},b.prototype.scp2=function(a,b){return this},b.prototype.scale=function(a){return k["default"]("α",a),this.yz*=a,this.zx*=a,this.xy*=a,this.a*=a,this},b.prototype.slerp=function(a,c){var d=b.copy(a),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(c),f.exp(),this.copy(f),this},b.prototype.sub=function(a,b){return void 0===b&&(b=1),l["default"]("s",a),k["default"]("α",b),this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.a-=a.a*b,this},b.prototype.sub2=function(a,b){return this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.a=a.a-b.a,this},b.prototype.versor=function(a,b){var c=a.x,e=a.y,f=a.z,g=b.x,h=b.y,i=b.z;return this.a=d["default"](c,e,f,g,h,i),this.yz=s["default"](c,e,f,g,h,i),this.zx=t["default"](c,e,f,g,h,i),this.xy=r["default"](c,e,f,g,h,i),this},b.prototype.wedge=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.a=0,this.yz=s["default"](c,d,e,f,g,h),this.zx=t["default"](c,d,e,f,g,h),this.xy=r["default"](c,d,e,f,g,h),this},b.prototype.grade=function(a){switch(j["default"]("grade",a),a){case 0:this.yz=0,this.zx=0,this.xy=0;break;case 2:this.a=0;break;default:this.a=0,this.yz=0,this.zx=0,this.xy=0}return this},b.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return q["default"](u(this),b,z)},b.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return q["default"](u(this),b,z)},b.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return q["default"](u(this),b,z)},b.prototype.toString=function(a){var b=function(b){return b.toString(a)};return q["default"](u(this),b,z)},b.prototype.ext=function(a){return this.ext2(this,a)},b.prototype.ext2=function(a,b){return this},b.prototype.zero=function(){return this.a=0,this.yz=0,this.zx=0,this.xy=0,this},b.copy=function(a){var c=b.zero().copy(a);return c.modified=!1,c},b.dual=function(a,c){return b.zero().dual(a,c)},b.fromBivector=function(a){return new b([a.yz,a.zx,a.xy,0],E)},b.isOne=function(a){return 1===a.a&&0===a.yz&&0===a.zx&&0===a.xy},b.lerp=function(a,c,d){return b.copy(a).lerp(c,d)},b.one=function(){return b.spinor(0,0,0,1)},b.random=function(){var a=n["default"](-1,1),c=n["default"](-1,1),d=n["default"](-1,1),e=n["default"](-1,1);return b.spinor(a,c,d,e).normalize()},b.rotorFromDirections=function(a,c){return b.zero().rotorFromDirections(a,c)},b.spinor=function(a,c,d,e){return new b([a,c,d,e],E)},b.wedge=function(a,c){var d=a.x,e=a.y,f=a.z,g=c.x,h=c.y,i=c.z,j=s["default"](d,e,f,g,h,i),k=t["default"](d,e,f,g,h,i),l=r["default"](d,e,f,g,h,i);return b.spinor(j,k,l,0)},b.zero=function(){return b.spinor(0,0,0,0)},b}(c.Coords);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=F}),b("davinci-eight/checks/mustBeDefined",["require","exports","../checks/mustSatisfy","../checks/isDefined"],function(a,b,c,d){"use strict";function e(){return"not be 'undefined'"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/checks/expectArg",["require","exports","../checks/isUndefined","../checks/mustBeNumber"],function(a,b,c,d){"use strict";function e(a,b){return c["default"](b)?a:b()}function f(a,b){var f={toSatisfy:function(a,b){if(c["default"](a))throw new Error("condition must be specified");if(c["default"](b))throw new Error("message must be specified");if(!a)throw new Error(b);return f},toBeBoolean:function(c){var d=typeof b;if("boolean"!==d)throw new Error(e("Expecting argument "+a+": "+d+" to be a boolean.",c));return f},toBeDefined:function(){var c=typeof b;if("undefined"===c){var d="Expecting argument "+a+": "+c+" to be defined.";throw new Error(d)}return f},toBeInClosedInterval:function(c,e){var g=b,h=g;if(d["default"]("x",h),h>=c&&h<=e)return f;var i="Expecting argument "+a+" => "+b+" to be in the range ["+c+", "+e+"].";throw new Error(i)},toBeFunction:function(){var c=typeof b;if("function"!==c){var d="Expecting argument "+a+": "+c+" to be a function.";throw new Error(d)}return f},toBeNumber:function(c){var d=typeof b;if("number"!==d)throw new Error(e("Expecting argument "+a+": "+d+" to be a number.",c));return f},toBeObject:function(c){var d=typeof b;if("object"!==d)throw new Error(e("Expecting argument "+a+": "+d+" to be an object.",c));return f},toBeString:function(){var c=typeof b;if("string"!==c){var d="Expecting argument "+a+": "+c+" to be a string.";throw new Error(d)}return f},toBeUndefined:function(){var c=typeof b;if("undefined"!==c){var d="Expecting argument "+a+": "+c+" to be undefined.";throw new Error(d)}return f},toNotBeNull:function(){if(null===b){var c="Expecting argument "+a+" to not be null.";throw new Error(c)}return f},get value(){return b}};return f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/AbstractMatrix",["require","exports","../checks/mustBeDefined","../checks/mustBeInteger","../checks/expectArg","../i18n/readOnly"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b){this._elements=c["default"]("elements",a),this._dimensions=d["default"]("dimensions",b),this._length=b*b,e["default"]("elements",a).toSatisfy(a.length===this._length,"elements must have length "+this._length),this.modified=!1}return Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._dimensions},set:function(a){throw new Error(f["default"]("dimensions").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elements",{get:function(){return this._elements},set:function(a){e["default"]("elements",a).toSatisfy(a.length===this._length,"elements length must be "+this._length),this._elements=a},enumerable:!0,configurable:!0}),a.prototype.copy=function(a){return this.elements.set(a.elements),this},a.prototype.getElement=function(a,b){return this.elements[a+b*this._dimensions]},a.prototype.isOne=function(){for(var a=0;a<this._dimensions;a++)for(var b=0;b<this._dimensions;b++){var c=this.getElement(a,b);if(a===b){if(1!==c)return!1}else if(0!==c)return!1}return!0},a.prototype.setElement=function(a,b,c){this.elements[a+b*this._dimensions]=c},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/math/add3x3",["require","exports"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d+m,c[3]=e+n,c[6]=f+o,c[1]=g+p,c[4]=h+q,c[7]=i+r,c[2]=j+s,c[5]=k+t,c[8]=l+u,c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/det3x3",["require","exports"],function(a,b){"use strict";function c(a){var b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return b*f*j+c*g*h+d*e*i-b*g*i-c*e*j-d*f*h}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/inv3x3",["require","exports","../math/det3x3"],function(a,b,c){"use strict";function d(a,b){var d=c["default"](a),e=a[0],f=a[3],g=a[6],h=a[1],i=a[4],j=a[7],k=a[2],l=a[5],m=a[8],n=i*m-j*l,o=g*l-f*m,p=f*j-g*i,q=j*k-h*m,r=e*m-g*k,s=g*h-e*j,t=h*l-i*k,u=f*k-e*l,v=e*i-f*h,w=1/d;b[0]=n*w,b[3]=o*w,b[6]=p*w,b[1]=q*w,b[4]=r*w,b[7]=s*w,b[2]=t*w,b[5]=u*w,b[8]=v*w}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/math/mul3x3",["require","exports"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d*m+e*p+f*s,c[3]=d*n+e*q+f*t,c[6]=d*o+e*r+f*u,c[1]=g*m+h*p+i*s,c[4]=g*n+h*q+i*t,c[7]=g*o+h*r+i*u,c[2]=j*m+k*p+l*s,c[5]=j*n+k*q+l*t,c[8]=j*o+k*r+l*u,c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Matrix3",["require","exports","../math/AbstractMatrix","../math/add3x3","../math/det3x3","../math/inv3x3","../math/mul3x3","../checks/mustBeNumber"],function(a,b,c,d,e,g,h,i){
"use strict";var j=function(a){function b(b){a.call(this,b,3)}return f(b,a),b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return d["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){return b.zero().copy(this)},b.prototype.det=function(){return e["default"](this.elements)},b.prototype.invertUpperLeft=function(a,b){void 0===b&&(b=!1);var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4];var e=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===e){var f="Matrix3.invertUpperLeft(): can't invert matrix, determinant is 0";if(b)throw new Error(f);return console.warn(f),this.one(),this}return this.scale(1/e),this},b.prototype.inv=function(){return g["default"](this.elements,this.elements),this},b.prototype.isOne=function(){var a=this.elements,b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return 1===b&&0===c&&0===d&&0===e&&1===f&&0===g&&0===h&&0===i&&1===j},b.prototype.isZero=function(){var a=this.elements,b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return 0===b&&0===c&&0===d&&0===e&&0===f&&0===g&&0===h&&0===i&&0===j},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.rmul=function(a){return h["default"](a.elements,this.elements,this.elements),this},b.prototype.mul2=function(a,b){return h["default"](a.elements,b.elements,this.elements),this},b.prototype.neg=function(){return this.scale(-1)},b.prototype.normalFromMatrix4=function(a){return this.invertUpperLeft(a).transpose()},b.prototype.one=function(){return this.set(1,0,0,0,1,0,0,0,1)},b.prototype.reflection=function(a){var b=i["default"]("n.x",a.x),c=i["default"]("n.y",a.y),d=-2*b*c,e=1-2*b*b,f=1-2*c*c;return this.set(e,d,0,d,f,0,0,0,1),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[3+a],b[6+a]]},b.prototype.rotate=function(a){return this.rmul(b.rotation(a))},b.prototype.rotation=function(a){var b=a.a,c=a.b,d=b*b-c*c,e=2*b*c;return this.set(d,e,0,-e,d,0,0,0,1),this},b.prototype.scale=function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},b.prototype.set=function(a,b,c,d,e,f,g,h,i){var j=this.elements;return j[0]=a,j[3]=b,j[6]=c,j[1]=d,j[4]=e,j[7]=f,j[2]=g,j[5]=h,j[8]=i,this},b.prototype.sub=function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[5],l=a.elements,m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s=l[6],t=l[7],u=l[8],v=c-m,w=d-n,x=e-o,y=f-p,z=g-q,A=h-r,B=i-s,C=j-t,D=k-u;return this.set(v,y,B,w,z,C,x,A,D)},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translation=function(a){var b=a.x,c=a.y;return this.set(1,0,b,0,1,c,0,0,1)},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},b.prototype.zero=function(){return this.set(0,0,0,0,0,0,0,0,0)},b.prototype.__add__=function(a){return a instanceof b?this.clone().add(a):void 0},b.prototype.__radd__=function(a){return a instanceof b?a.clone().add(this):void 0},b.prototype.__mul__=function(a){return a instanceof b?this.clone().mul(a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?a.clone().mul(this):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__pos__=function(){return this.clone()},b.prototype.__neg__=function(){return this.clone().scale(-1)},b.prototype.__sub__=function(a){return a instanceof b?this.clone().sub(a):void 0},b.prototype.__rsub__=function(a){return a instanceof b?a.clone().sub(this):void 0},b.one=function(){return new b(new Float32Array([1,0,0,0,1,0,0,0,1]))},b.reflection=function(a){return b.zero().reflection(a)},b.rotation=function(a){return b.zero().rotation(a)},b.translation=function(a){return b.zero().translation(a)},b.zero=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0]))},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Vector3",["require","exports","./Coords","./dotVectorE3","./Matrix3","../checks/isDefined","../checks/isNumber","./randomRange","../i18n/readOnly","./toStringCustom","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b,c,d,e,g,h,i,j,k,l,m,n){"use strict";function o(a){return[a.x,a.y,a.z]}var p=Math.sqrt,q=0,r=1,s=2,t=["e1","e2","e3"],u=function(a){function b(b,c){void 0===b&&(b=[0,0,0]),void 0===c&&(c=!1),a.call(this,b,c,3)}return f(b,a),b.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z},Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[q]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[q]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[r]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[r]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this.coords[s]},set:function(a){this.modified=this.modified||this.z!==a,this.coords[s]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"maskG3",{get:function(){return this.isZero()?0:2},set:function(a){throw new Error(j["default"]("maskG3").message)},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},b.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[3]*c+e[6]*d,this.y=e[1]*b+e[4]*c+e[7]*d,this.z=e[2]*b+e[5]*c+e[8]*d,this},b.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.reflect=function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=2*(b*e+c*f+d*g);return this.x=b-h*e,this.y=c-h*f,this.z=d-h*g,this},b.prototype.rotate=function(a){var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.a,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},b.prototype.clone=function(){return new b([this.x,this.y,this.z],this.modified)},b.prototype.copy=function(a){if(a)return this.x=a.x,this.y=a.y,this.z=a.z,this;throw new Error("source for copy must be a vector")},b.prototype.copyCoordinates=function(a){return this.x=a[q],this.y=a[r],this.z=a[s],this},b.prototype.cross=function(a){return this.cross2(this,a)},b.prototype.cross2=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=m["default"](c,d,e,f,g,h),this.y=n["default"](c,d,e,f,g,h),this.z=l["default"](c,d,e,f,g,h),this},b.prototype.distanceTo=function(a){return g["default"](a)?p(this.quadranceTo(a)):void 0},b.prototype.quadranceTo=function(a){if(g["default"](a)){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d}},b.prototype.divByScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},b.prototype.dot=function(a){return b.dot(this,a)},b.prototype.dual=function(a,b){return b?(this.x=a.yz,this.y=a.zx,this.z=a.xy):(this.x=-a.yz,this.y=-a.zx,this.z=-a.xy),this},b.prototype.equals=function(a){return a instanceof b&&(this.x===a.x&&this.y===a.y&&this.z===a.z)},b.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},b.prototype.magnitude=function(){return p(this.squaredNorm())},b.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},b.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},b.prototype.normalize=function(){var a=this.magnitude();return 0!==a?this.divByScalar(a):this.zero()},b.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this},b.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},b.prototype.setXYZ=function(a,b,c){return this.x=a,this.y=b,this.z=c,this},b.prototype.slerp=function(a,b){return this},b.prototype.squaredNorm=function(){return d["default"](this,this)},b.prototype.sub=function(a,b){return void 0===b&&(b=1),this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this},b.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return k["default"](o(this),b,t)},b.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return k["default"](o(this),b,t)},b.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return k["default"](o(this),b,t)},b.prototype.toString=function(a){var b=function(b){return b.toString(a)};return k["default"](o(this),b,t)},b.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this},b.prototype.__add__=function(a){return a instanceof b?this.clone().add(a,1):void 0},b.prototype.__sub__=function(a){return a instanceof b?this.clone().sub(a):void 0},b.prototype.__mul__=function(a){return h["default"](a)?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return"number"==typeof a?this.clone().scale(a):a instanceof e["default"]?this.clone().applyMatrix(a):void 0},b.copy=function(a){return new b([a.x,a.y,a.z])},b.dual=function(a,c){return void 0===c&&(c=!1),new b(c?[a.yz,a.zx,a.xy]:[-a.yz,-a.zx,-a.xy])},b.e1=function(){return new b([1,0,0])},b.e2=function(){return new b([0,1,0])},b.e3=function(){return new b([0,0,1])},b.isInstance=function(a){return a instanceof b},b.lerp=function(a,c,d){return b.copy(c).sub(a).scale(d).add(a)},b.random=function(){var a=i["default"](-1,1),c=i["default"](-1,1),d=i["default"](-1,1);return b.vector(a,c,d).normalize()},b.vector=function(a,c,d){return new b([a,c,d])},b.zero=function(){return new b([0,0,0])},b}(c.Coords);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=u}),b("davinci-eight/geometries/b2",["require","exports"],function(a,b){"use strict";function c(a,b){var c=1-a;return c*c*b}function d(a,b){return 2*(1-a)*a*b}function e(a,b){return a*a*b}function f(a,b,f,g){return c(a,b)+d(a,f)+e(a,g)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/geometries/b3",["require","exports"],function(a,b){"use strict";function c(a,b){var c=1-a;return c*c*c*b}function d(a,b){var c=1-a;return 3*c*c*a*b}function e(a,b){var c=1-a;return 3*c*a*a*b}function f(a,b){return a*a*a*b}function g(a,b,g,h,i){return c(a,b)+d(a,g)+e(a,h)+f(a,i)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/i18n/notImplemented",["require","exports","../checks/mustBeString"],function(a,b,c){"use strict";function d(a){c["default"]("name",a);var b={get message(){return"'"+a+"' method is not yet implemented."}};return b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Vector2",["require","exports","../math/Coords","../geometries/b2","../geometries/b3","../i18n/notImplemented","./randomRange","../math/stringFromCoordinates"],function(a,b,c,d,e,g,h,i){"use strict";var j=Math.sqrt,k=0,l=1,m=function(a){function b(b,c){void 0===b&&(b=[0,0]),void 0===c&&(c=!1),a.call(this,b,c,2)}return f(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[k]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[k]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[l]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[l]=a},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},b.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=a.elements;return this.x=d[0]*b+d[2]*c,this.y=d[1]*b+d[3]*c,this},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.clone=function(){return new b([this.x,this.y])},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},b.prototype.cubicBezier=function(a,b,c,d){var f=e["default"](a,this.x,b.x,c.x,d.x),g=e["default"](a,this.y,b.y,c.y,d.y);return this.x=f,this.y=g,this},b.prototype.distanceTo=function(a){return j(this.quadranceTo(a))},b.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},b.prototype.scale=function(a){return this.x*=a,this.y*=a,this},b.prototype.divByScalar=function(a){return this.x/=a,this.y/=a,this},b.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},b.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},b.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},b.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},b.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},b.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},b.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},b.prototype.dot=function(a){return this.x*a.x+this.y*a.y},b.prototype.magnitude=function(){return j(this.squaredNorm())},b.prototype.normalize=function(){return this.divByScalar(this.magnitude())},b.prototype.squaredNorm=function(){return this.x*this.x+this.y*this.y},b.prototype.quadranceTo=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},b.prototype.quadraticBezier=function(a,b,c){var e=d["default"](a,this.x,b.x,c.x),f=d["default"](a,this.y,b.y,c.y);return this.x=e,this.y=f,this},b.prototype.reflect=function(a){throw new Error(g["default"]("reflect").message)},b.prototype.rotate=function(a){var b=this.x,c=this.y,d=a.a,e=a.b,f=d*d-e*e,g=2*d*e;return this.x=f*b+g*c,this.y=f*c-g*b,this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},b.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},b.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},b.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this},b.prototype.slerp=function(a,b){throw new Error(g["default"]("slerp").message)},b.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return i["default"](this.coords,b,["e1","e2"])},b.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return i["default"](this.coords,b,["e1","e2"])},b.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return i["default"](this.coords,b,["e1","e2"])},b.prototype.toString=function(a){var b=function(b){return b.toString(a)};return i["default"](this.coords,b,["e1","e2"])},b.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},b.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},b.prototype.zero=function(){return this.x=0,this.y=0,this},b.copy=function(a){return b.vector(a.x,a.y)},b.lerp=function(a,c,d){return b.copy(c).sub(a).scale(d).add(a)},b.random=function(){var a=h["default"](-1,1),c=h["default"](-1,1);return b.vector(a,c).normalize()},b.vector=function(a,c){return new b([a,c])},b.zero=function(){return b.vector(0,0)},b}(c.Coords);b.Vector2=m});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/controls/MouseControls",["require","exports","../checks/mustBeObject","../core/ShareableBase","../math/Vector2"],function(a,b,c,d,e){"use strict";var g={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},h=[65,83,68],i=function(a){function b(b){var d=this;a.call(this),this.enabled=!0,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.minDistance=0,this.maxDistance=1/0,this.mode=g.NONE,this.prevMode=g.NONE,this.moveCurr=new e.Vector2,this.movePrev=new e.Vector2,this.zoomStart=new e.Vector2,this.zoomEnd=new e.Vector2,this.panStart=new e.Vector2,this.panEnd=new e.Vector2,this.screenLoc=new e.Vector2,this.circleExt=new e.Vector2,this.screenExt=new e.Vector2,this.mouseOnCircle=new e.Vector2,this.mouseOnScreen=new e.Vector2,this.setLoggingName("MouseControls"),this.wnd=c["default"]("wnd",b),this.mousedown=function(a){d.enabled&&(a.preventDefault(),a.stopPropagation(),d.mode===g.NONE&&(d.mode=a.button),d.mode!==g.ROTATE||d.noRotate?d.mode!==g.ZOOM||d.noZoom?d.mode!==g.PAN||d.noPan||(d.updateMouseOnScreen(a),d.panStart.copy(d.mouseOnScreen),d.panEnd.copy(d.mouseOnScreen)):(d.updateMouseOnScreen(a),d.zoomStart.copy(d.mouseOnScreen),d.zoomEnd.copy(d.mouseOnScreen)):(d.updateMouseOnCircle(a),d.moveCurr.copy(d.mouseOnCircle),d.movePrev.copy(d.mouseOnCircle)),d.wnd.document.addEventListener("mousemove",d.mousemove,!1),d.wnd.document.addEventListener("mouseup",d.mouseup,!1))},this.mousemove=function(a){d.enabled&&(a.preventDefault(),a.stopPropagation(),d.mode!==g.ROTATE||d.noRotate?d.mode!==g.ZOOM||d.noZoom?d.mode!==g.PAN||d.noPan||(d.updateMouseOnScreen(a),d.panEnd.copy(d.mouseOnScreen)):(d.updateMouseOnScreen(a),d.zoomEnd.copy(d.mouseOnScreen)):(d.movePrev.copy(d.moveCurr),d.updateMouseOnCircle(a),d.moveCurr.copy(d.mouseOnCircle)))},this.mouseup=function(a){d.enabled&&(a.preventDefault(),a.stopPropagation(),d.mode=g.NONE,d.wnd.document.removeEventListener("mousemove",d.mousemove),d.wnd.document.removeEventListener("mouseup",d.mouseup))},this.mousewheel=function(a){if(d.enabled){a.preventDefault(),a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=a.detail/3),d.zoomStart.y+=.01*b}},this.keydown=function(a){d.enabled&&(d.wnd.removeEventListener("keydown",d.keydown,!1),d.prevMode=d.mode,d.mode===g.NONE&&(a.keyCode!==h[g.ROTATE]||d.noRotate?a.keyCode!==h[g.ZOOM]||d.noRotate?a.keyCode!==h[g.PAN]||d.noRotate||(d.mode=g.PAN):d.mode=g.ZOOM:d.mode=g.ROTATE))},this.keyup=function(a){d.enabled&&(d.mode=d.prevMode,d.wnd.addEventListener("keydown",d.keydown,!1))}}return f(b,a),b.prototype.destructor=function(b){this.domElement&&this.unsubscribe(),a.prototype.destructor.call(this,b+1)},b.prototype.move=function(a,b){this.moveCurr.x=a,this.moveCurr.y=b},b.prototype.subscribe=function(a){this.domElement&&this.unsubscribe(),this.domElement=a,this.domElement.addEventListener("mousedown",this.mousedown,!1),this.domElement.addEventListener("mousewheel",this.mousewheel,!1),this.domElement.addEventListener("DOMMouseScroll",this.mousewheel,!1),this.wnd.addEventListener("keydown",this.keydown,!1),this.wnd.addEventListener("keyup",this.keydown,!1),this.handleResize()},b.prototype.unsubscribe=function(){this.domElement&&(this.domElement.removeEventListener("mousedown",this.mousedown,!1),this.domElement.removeEventListener("mousewheel",this.mousewheel,!1),this.domElement.removeEventListener("DOMMouseScroll",this.mousewheel,!1),this.domElement=void 0,this.wnd.removeEventListener("keydown",this.keydown,!1),this.wnd.removeEventListener("keyup",this.keydown,!1))},b.prototype.reset=function(){this.mode=g.NONE},b.prototype.updateMouseOnCircle=function(a){this.mouseOnCircle.x=a.pageX,this.mouseOnCircle.y=-a.pageY,this.mouseOnCircle.sub(this.screenLoc).scale(2).sub(this.circleExt).divByScalar(this.circleExt.x)},b.prototype.updateMouseOnScreen=function(a){this.mouseOnScreen.x=a.pageX,this.mouseOnScreen.y=-a.pageY,this.mouseOnScreen.sub(this.screenLoc),this.mouseOnScreen.x/=this.circleExt.x,this.mouseOnScreen.y/=this.circleExt.y},b.prototype.handleResize=function(){var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screenLoc.x=a.left+window.pageXOffset-b.clientLeft,this.screenLoc.y=-(a.top+window.pageYOffset-b.clientTop),this.circleExt.x=a.width,this.circleExt.y=-a.height,this.screenExt.x=a.width,this.screenExt.y=a.height},b}(d.ShareableBase);b.MouseControls=i});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/controls/ViewControls",["require","exports","./MouseControls","../math/Vector3"],function(a,b,c,d){"use strict";var e=function(a){function b(b,c){a.call(this,c),this.rotateSpeed=1,this.zoomSpeed=1,this.panSpeed=1,this.eye0=d["default"].vector(0,0,1),this.look0=d["default"].zero(),this.up0=d["default"].vector(0,1,0),this.eyeMinusLook=new d["default"],this.look=new d["default"],this.up=new d["default"],this.setLoggingName("ViewControls"),this.setView(b)}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.hasView=function(){return!!this.view},b.prototype.update=function(){this.view&&(this.eyeMinusLook.copy(this.view.eye).sub(this.view.look),this.look.copy(this.view.look),this.up.copy(this.view.up),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.view.eye.x=this.look.x+this.eyeMinusLook.x,this.view.eye.y=this.look.y+this.eyeMinusLook.y,this.view.eye.z=this.look.z+this.eyeMinusLook.z,this.view.look.x=this.look.x,this.view.look.y=this.look.y,this.view.look.z=this.look.z,this.view.up.x=this.up.x,this.view.up.y=this.up.y,this.view.up.z=this.up.z)},b.prototype.rotateCamera=function(){},b.prototype.zoomCamera=function(){var a=1+(this.zoomEnd.y-this.zoomStart.y)*this.zoomSpeed;1!==a&&a>0&&(this.eyeMinusLook.scale(a),this.zoomStart.copy(this.zoomEnd))},b.prototype.panCamera=function(){},b.prototype.reset=function(){this.view&&(this.view.eye.x=this.eye0.x,this.view.eye.y=this.eye0.y,this.view.eye.z=this.eye0.z,this.view.look.x=this.look0.x,this.view.look.y=this.look0.y,this.view.look.z=this.look0.z,this.view.up.x=this.up0.x,this.view.up.y=this.up0.y,this.view.up.z=this.up0.z),a.prototype.reset.call(this)},b.prototype.setView=function(a){a?this.view=a:this.view=void 0,this.synchronize()},b.prototype.synchronize=function(){var a=this.view;a?(this.eye0.copy(a.eye),this.look0.copy(a.look),this.up0.copy(a.up)):(this.eye0.setXYZ(0,0,1),this.look0.zero(),this.up0.setXYZ(0,1,0))},b}(c.MouseControls);b.ViewControls=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/controls/OrbitControls",["require","exports","../math/Geometric3","../facets/getViewAttitude","../math/Spinor3","../math/Vector3","./ViewControls"],function(a,b,c,d,e,g,h){"use strict";var i=c.Geometric3.zero(),j=c.Geometric3.zero(),k=c.Geometric3.zero(),l=e["default"].one(),m=e["default"].one(),n=g["default"].zero(),o=function(a){function b(b,c){a.call(this,b,c),this.setLoggingName("OrbitControls")}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.rotateCamera=function(){if(this.hasView()){var a=this.moveCurr.distanceTo(this.movePrev);if(a>0){var b=2*a*Math.PI*this.rotateSpeed;n.copy(this.eyeMinusLook).add(this.look),d["default"](n,this.look,this.up,m),i.zero(),i.x=this.movePrev.x,i.y=this.movePrev.y,j.zero(),j.x=this.moveCurr.x,j.y=this.moveCurr.y,k.copy(j).sub(i),k.rotate(m),n.normalize(),l.wedge(n,k).normalize(),m.copy(l).scale(+b/2).exp(),this.eyeMinusLook.rotate(m)}}this.movePrev.copy(this.moveCurr)},b}(h.ViewControls);b.OrbitControls=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/controls/TrackballControls",["require","exports","../math/Spinor3","../math/Vector2","../math/Vector3","./ViewControls"],function(a,b,c,d,e,g){"use strict";var h=function(a){function b(b,f){a.call(this,b,f),this.moveDirection=new e["default"],this.eyeMinusLookDirection=new e["default"],this.objectUpDirection=new e["default"],this.objectSidewaysDirection=new e["default"],this.B=c["default"].zero(),this.rotor=c["default"].one(),this.mouseChange=new d.Vector2,this.pan=new e["default"],this.objectUp=new e["default"],this.setLoggingName("TrackballControls")}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.rotateCamera=function(){if(this.hasView()){this.moveDirection.setXYZ(this.moveCurr.x-this.movePrev.x,this.moveCurr.y-this.movePrev.y,0);var a=this.moveDirection.magnitude();if(a>0){var b=2*a*Math.PI*this.rotateSpeed;this.eyeMinusLookDirection.copy(this.eyeMinusLook).normalize(),this.objectUpDirection.copy(this.up).normalize(),this.objectSidewaysDirection.copy(this.objectUpDirection).cross(this.eyeMinusLookDirection),this.objectUpDirection.scale(this.moveCurr.y-this.movePrev.y),this.objectSidewaysDirection.scale(this.moveCurr.x-this.movePrev.x),this.moveDirection.copy(this.objectUpDirection).add(this.objectSidewaysDirection).normalize(),this.B.wedge(this.moveDirection,this.eyeMinusLookDirection).normalize(),this.rotor.rotorFromGeneratorAngle(this.B,b),this.eyeMinusLook.rotate(this.rotor),this.up.rotate(this.rotor),this.movePrev.copy(this.moveCurr)}}},b.prototype.panCamera=function(){this.hasView()&&(this.mouseChange.copy(this.panEnd).sub(this.panStart),this.mouseChange.squaredNorm()&&(this.mouseChange.scale(this.eyeMinusLook.magnitude()*this.panSpeed),this.pan.copy(this.eyeMinusLook).cross(this.up).normalize().scale(this.mouseChange.x),this.objectUp.copy(this.up).normalize().scale(this.mouseChange.y),this.pan.add(this.objectUp),this.look.add(this.pan),this.panStart.copy(this.panEnd)))},b}(g.ViewControls);b.TrackballControls=h}),b("davinci-eight/core/Attrib",["require","exports","../i18n/readOnly"],function(a,b,c){"use strict";var d=function(){function a(a){this._name=a.name}return Object.defineProperty(a.prototype,"index",{get:function(){return this._index},set:function(a){throw new Error(c["default"]("index").message)},enumerable:!0,configurable:!0}),a.prototype.contextFree=function(){this._index=void 0,this._gl=void 0},a.prototype.contextGain=function(a,b){this._index=a.getAttribLocation(b,this._name),this._gl=a},a.prototype.contextLost=function(){this._index=void 0,this._gl=void 0},a.prototype.config=function(a,b,c,d,e){void 0===c&&(c=!1),void 0===d&&(d=0),void 0===e&&(e=0),this._gl.vertexAttribPointer(this._index,a,b,c,d,e)},a.prototype.enable=function(){this._gl.enableVertexAttribArray(this._index)},a.prototype.disable=function(){this._gl.disableVertexAttribArray(this._index)},a.prototype.toString=function(){return["attribute",this._name].join(" ")},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/core/BeginMode",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/BlendingFactorDest",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/BlendingFactorSrc",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/Capability",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.CULL_FACE=2884]="CULL_FACE",a[a.BLEND=3042]="BLEND",a[a.DITHER=3024]="DITHER",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/ClearBufferMask",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/clamp",["require","exports","../checks/mustBeNumber"],function(a,b,c){"use strict";function d(a,b,d){return c["default"]("x",a),c["default"]("min",b),c["default"]("max",d),a<b?b:a>d?d:a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/checks/isGE",["require","exports"],function(a,b){"use strict";function c(a,b){return a>=b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustBeGE",["require","exports","../checks/mustSatisfy","../checks/isGE"],function(a,b,c,d){"use strict";function e(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be greater than or equal to "+e},f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/checks/isLE",["require","exports"],function(a,b){"use strict";function c(a,b){return a<=b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustBeLE",["require","exports","../checks/mustSatisfy","../checks/isLE"],function(a,b,c,d){"use strict";function e(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be less than or equal to "+e},f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/core/principalAngle",["require","exports"],function(a,b){"use strict";function c(a){return a>2*Math.PI?c(a-2*Math.PI):a<0?c(a+2*Math.PI):a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/Color",["require","exports","../math/clamp","../math/Coords","../checks/isDefined","../checks/mustBeArray","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNumber","./principalAngle"],function(a,b,c,d,e,g,h,i,j,k){"use strict";var l=0,m=1,n=2,o=function(a){function b(b,c,d){a.call(this,[b,c,d],!1,3),
h["default"]("r",b,0),i["default"]("r",b,1),h["default"]("g",c,0),i["default"]("g",c,1),h["default"]("b",d,0),i["default"]("b",d,1)}return f(b,a),Object.defineProperty(b.prototype,"r",{get:function(){return this.coords[l]},set:function(a){this.coords[l]=c["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"g",{get:function(){return this.coords[m]},set:function(a){this.coords[m]=c["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this.coords[n]},set:function(a){this.coords[n]=c["default"](a,0,1)},enumerable:!0,configurable:!0}),b.prototype.add=function(a){return this},b.prototype.add2=function(a,b){return this},b.prototype.applyMatrix=function(a){return this},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.clone=function(){return new b(this.r,this.g,this.b)},b.prototype.copy=function(a){return e["default"](a)?(this.r=a.r,this.g=a.g,this.b=a.b,this):(this.r=Math.random(),this.g=Math.random(),this.b=Math.random(),void 0)},b.prototype.divByScalar=function(a){return this},b.prototype.lerp=function(a,b){return this.r+=(a.r-this.r)*b,this.g+=(a.g-this.g)*b,this.b+=(a.b-this.b)*b,this},Object.defineProperty(b.prototype,"luminance",{get:function(){return b.luminance(this.r,this.g,this.b)},enumerable:!0,configurable:!0}),b.prototype.neg=function(){return this},b.prototype.reflect=function(a){return this},b.prototype.rotate=function(a){return this},b.prototype.scale=function(a){return this.r=this.r*a,this.g=this.g*a,this.b=this.b*a,this},b.prototype.slerp=function(a,b){return this},b.prototype.stress=function(a){return this},b.prototype.sub=function(a){return this},b.prototype.sub2=function(a,b){return this},b.prototype.toExponential=function(a){return this.toString()},b.prototype.toFixed=function(a){return this.toString()},b.prototype.toPrecision=function(a){return this.toString()},b.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+")"},b.prototype.zero=function(){return this},b.copy=function(a){return new b(a.r,a.g,a.b)},b.luminance=function(a,b,c){j["default"]("r",a),j["default"]("g",b),j["default"]("b",c);var d=Math.pow,e=2.2;return.2126*d(a,e)+.7152*d(c,e)+.0722*d(c,e)},b.fromCoords=function(a){g["default"]("coords",a);var c=j["default"]("r",a[l]),d=j["default"]("g",a[m]),e=j["default"]("b",a[n]);return new b(c,d,e)},b.fromHSL=function(a,c,d){function e(a,c,e){var g=d-.5*f;return new b(a+g,c+g,e+g)}j["default"]("H",a),j["default"]("S",c),j["default"]("L",d);var f=(1-Math.abs(2*d-1))*c,g=k["default"](a)/Math.PI*3%6,h=f*(1-Math.abs(g%2-1));return g>=0&&g<1?e(f,h,0):g>=1&&g<2?e(h,f,0):g>=2&&g<3?e(0,f,f*(g-2)):g>=3&&g<4?e(0,f*(4-g),f):g>=4&&g<5?e(h,0,f):g>=5&&g<6?e(f,0,h):e(0,0,0)},b.fromRGB=function(a,d,e){return j["default"]("r",a),j["default"]("g",d),j["default"]("b",e),new b(c["default"](a,0,1),c["default"](d,0,1),c["default"](e,0,1))},b.isInstance=function(a){return a instanceof b},b.lerp=function(a,d,e){return b.copy(a).lerp(d,c["default"](e,0,1))},b.mustBe=function(a,c){if(b.isInstance(c))return c;throw new Error(a+" must be a Color.")},b.random=function(){return b.fromRGB(Math.random(),Math.random(),Math.random())},b.black=new b(0,0,0),b.blue=new b(0,0,1),b.green=new b(0,1,0),b.cyan=new b(0,1,1),b.red=new b(1,0,0),b.magenta=new b(1,0,1),b.yellow=new b(1,1,0),b.white=new b(1,1,1),b.gray=new b(.5,.5,.5),b}(d.Coords);b.Color=o;var p=function(a,b,c){var d=255;return new o(a/d,b/d,c/d)};o.blueviolet=p(138,43,226),o.chartreuse=p(127,255,0),o.cobalt=p(61,89,171),o.hotpink=p(255,105,180),o.lime=p(0,255,0),o.slateblue=p(113,113,198),o.springgreen=p(0,255,127),o.teal=p(56,142,142)}),b("davinci-eight/core/DataType",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/base/exchange",["require","exports"],function(a,b){"use strict";function c(a,b){return a!==b?(b&&b.addRef&&b.addRef(),a&&a.release&&a.release(),b):a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/GraphicsProgramSymbols",["require","exports"],function(a,b){"use strict";var c=function(){function a(){}return a.ATTRIBUTE_COLOR="aColor",a.ATTRIBUTE_GEOMETRY_INDEX="aGeometryIndex",a.ATTRIBUTE_NORMAL="aNormal",a.ATTRIBUTE_OPACITY="aOpacity",a.ATTRIBUTE_POSITION="aPosition",a.ATTRIBUTE_TANGENT="aTangent",a.ATTRIBUTE_COORDS="aCoords",a.UNIFORM_ALPHA="uAlpha",a.UNIFORM_AMBIENT_LIGHT="uAmbientLight",a.UNIFORM_COLOR="uColor",a.UNIFORM_DIRECTIONAL_LIGHT_COLOR="uDirectionalLightColor",a.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION="uDirectionalLightDirection",a.UNIFORM_OPACITY="uOpacity",a.UNIFORM_POINT_LIGHT_COLOR="uPointLightColor",a.UNIFORM_POINT_LIGHT_POSITION="uPointLightPosition",a.UNIFORM_POINT_SIZE="uPointSize",a.UNIFORM_PROJECTION_MATRIX="uProjection",a.UNIFORM_REFLECTION_ONE_MATRIX="uReflectionOne",a.UNIFORM_REFLECTION_TWO_MATRIX="uReflectionTwo",a.UNIFORM_MODEL_MATRIX="uModel",a.UNIFORM_NORMAL_MATRIX="uNormal",a.UNIFORM_VIEW_MATRIX="uView",a.VARYING_COLOR="vColor",a.VARYING_LIGHT="vLight",a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/isBoolean",["require","exports"],function(a,b){"use strict";function c(a){return"boolean"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustBeBoolean",["require","exports","../checks/mustSatisfy","../checks/isBoolean"],function(a,b,c,d){"use strict";function e(){return"be `boolean`"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/facets/OpacityFacet",["require","exports","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNumber","../core/GraphicsProgramSymbols"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a){void 0===a&&(a=1),e["default"]("opacity",a),c["default"]("opacity",a,0),d["default"]("opacity",a,1),this.opacity=a}return a.prototype.setUniforms=function(a){a.uniform1f(f["default"].UNIFORM_OPACITY,this.opacity)},a}();b.OpacityFacet=g}),b("davinci-eight/facets/PointSizeFacet",["require","exports","../checks/mustBeInteger","../core/GraphicsProgramSymbols"],function(a,b,c,d){"use strict";var e=function(){function a(a){void 0===a&&(a=2),this.pointSize=c["default"]("pointSize",a)}return a.prototype.setUniforms=function(a){a.uniform1f(d["default"].UNIFORM_POINT_SIZE,this.pointSize)},a}();b.PointSizeFacet=e}),b("davinci-eight/core/cleanUp",["require","exports"],function(a,b){"use strict";function c(a,b){a&&(a.isContextLost()?b.contextLost():b.contextFree(a))}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/ShareableContextConsumer",["require","exports","./cleanUp","../checks/isUndefined","../checks/isNull","../checks/mustBeObject","../i18n/readOnly","./ShareableBase"],function(a,b,c,d,e,g,h,i){"use strict";var j=function(a){function b(b){a.call(this),this.setLoggingName("ShareableContextConsumer"),e["default"](b)||d["default"](b)||this.subscribe(b,!1)}return f(b,a),b.prototype.destructor=function(b){this.contextProvider&&(this.contextProvider.release(),this.contextProvider=void 0),this.unsubscribe(),a.prototype.destructor.call(this,b+1)},b.prototype.subscribe=function(a,b){a=g["default"]("contextManager",a),this.manager?this.manager!==a&&(this.unsubscribe(),this.subscribe(a,b)):(a.addRef(),this.manager=a,a.addContextListener(this),b&&this.synchUp())},b.prototype.synchUp=function(){var a=this.manager;a&&a.synchronize(this)},b.prototype.cleanUp=function(){c["default"](this.contextProvider,this)},b.prototype.unsubscribe=function(){this.manager&&(this.manager.removeContextListener(this),this.manager.release(),this.manager=void 0)},b.prototype.contextFree=function(a){this.contextProvider&&(this.contextProvider.release(),this.contextProvider=void 0)},b.prototype.contextGain=function(a){this.contextProvider&&(this.contextProvider.release(),this.contextProvider=void 0),a&&a.addRef(),this.contextProvider=a},b.prototype.contextLost=function(){this.contextProvider&&(this.contextProvider.release(),this.contextProvider=void 0)},Object.defineProperty(b.prototype,"gl",{get:function(){return this.contextProvider?this.contextProvider.gl:void 0},set:function(a){throw new Error(h["default"]("gl").message)},enumerable:!0,configurable:!0}),b}(i.ShareableBase);b.ShareableContextConsumer=j});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/Drawable",["require","exports","../base/exchange","./GraphicsProgramSymbols","../checks/isObject","../checks/isNull","../checks/isNumber","../checks/isUndefined","../checks/mustBeBoolean","../facets/OpacityFacet","../facets/PointSizeFacet","../core/ShareableContextConsumer"],function(a,b,c,d,e,g,h,i,j,k,l,m){"use strict";function n(a,b){a&&(a.hasUniform(d["default"].UNIFORM_OPACITY)?h["default"](b.opacity)||(b.opacity=1):b.removeFacet(o),a.hasUniform(d["default"].UNIFORM_POINT_SIZE)?h["default"](b.pointSize)||(b.pointSize=2):b.removeFacet(p))}var o="opacity",p="pointSize",q=function(a){function b(b,c,d,f){void 0===f&&(f=0),a.call(this,d),this._visible=!0,this._transparent=!1,this._facets={},this.setLoggingName("Drawable"),e["default"](b)&&(this.geometry=b),e["default"](c)&&(this.material=c),0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),this._geometry=c["default"](this._geometry,void 0),this._material=c["default"](this._material,void 0),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"fragmentShaderSrc",{get:function(){return this._material?this._material.fragmentShaderSrc:void 0},set:function(a){if(!this._material)throw new Error("Unable to set fragmentShaderSrc because "+this._type+".material is not defined.");this._material.fragmentShaderSrc=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"vertexShaderSrc",{get:function(){return this._material?this._material.vertexShaderSrc:void 0},set:function(a){var b=this._material;if(!b)throw new Error("Unable to set vertexShaderSrc because "+this._type+".material is not defined.");b.vertexShaderSrc=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"opacity",{get:function(){var a=this.getFacet(o);return a?a.opacity:void 0},set:function(a){if(h["default"](a)){var b=this.getFacet(o);b?b.opacity=a:this.setFacet(o,new k.OpacityFacet(a))}else{if(!i["default"](a)&&!g["default"](a))throw new TypeError("opacity must be a number, undefined, or null.");this.removeFacet(o)}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"pointSize",{get:function(){var a=this.getFacet(p);return a?a.pointSize:void 0},set:function(a){if(h["default"](a)){var b=this.getFacet(p);b?b.pointSize=a:this.setFacet(p,new l.PointSizeFacet(a))}else{if(!i["default"](a)&&!g["default"](a))throw new TypeError("pointSize must be a number, undefined, or null.");this.removeFacet(p)}},enumerable:!0,configurable:!0}),b.prototype.bind=function(){return this._geometry.bind(this._material),this},b.prototype.setUniforms=function(){for(var a=this._material,b=this._facets,c=Object.keys(b),d=c.length,e=0;e<d;e++){var f=c[e],g=b[f];g.setUniforms(a)}return this},b.prototype.draw=function(a){return this._visible&&(a?(console.warn("draw(ambients: Facet[]) is deprecated. Please use render(ambients: Facet[]) instead."),this.render(a)):this._geometry&&this._geometry.draw(this._material)),this},b.prototype.contextFree=function(b){this._geometry&&this._geometry.contextFree&&this._geometry.contextFree(b),this._material&&this._material.contextFree&&this._material.contextFree(b),a.prototype.contextFree&&a.prototype.contextFree.call(this,b)},b.prototype.contextGain=function(b){this._geometry&&this._geometry.contextGain&&this._geometry.contextGain(b),this._material&&this._material.contextGain&&this._material.contextGain(b),n(this._material,this),a.prototype.contextGain&&a.prototype.contextGain.call(this,b)},b.prototype.contextLost=function(){this._geometry&&this._geometry.contextLost&&this._geometry.contextLost(),this._material&&this._material.contextLost&&this._material.contextLost(),a.prototype.contextLost&&a.prototype.contextLost.call(this)},b.prototype.getFacet=function(a){return this._facets[a]},b.prototype.render=function(a){return this._visible&&this.use().bind().setAmbients(a).setUniforms().draw().unbind(),this},b.prototype.setAmbients=function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c];d.setUniforms(this._material)}return this},b.prototype.removeFacet=function(a){var b=this._facets[a];return b&&delete this._facets[a],b},b.prototype.setFacet=function(a,b){this._facets[a]=b},b.prototype.unbind=function(){return this._geometry.unbind(this._material),this},b.prototype.use=function(){return this._material.use(),this},Object.defineProperty(b.prototype,"geometry",{get:function(){return this._geometry?(this._geometry.addRef(),this._geometry):void 0},set:function(a){this._geometry=c["default"](this._geometry,a),this._geometry&&this._geometry.contextGain&&this.contextProvider&&this._geometry.contextGain(this.contextProvider)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"material",{get:function(){return this._material?(this._material.addRef(),this._material):void 0},set:function(a){this._material=c["default"](this._material,a),this._material&&this.contextProvider&&this._material.contextGain(this.contextProvider),n(this._material,this)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(a){var b=this;j["default"]("visible",a,function(){return b._type}),this._visible=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"transparent",{get:function(){return this._transparent},set:function(a){var b=this;j["default"]("transparent",a,function(){return b._type}),this._transparent=a},enumerable:!0,configurable:!0}),b}(m.ShareableContextConsumer);b.Drawable=q}),b("davinci-eight/core/DepthFunction",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/computeCount",["require","exports","../checks/mustBeInteger"],function(a,b,c){"use strict";function d(a,b){for(var d=b.length,e=0;e<d;e++){var f=b[e],g=a[f],h=g.values.length,i=c["default"]("size",g.size);return h/i}return 0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/core/computeAttributes",["require","exports","./computeCount"],function(a,b,c){"use strict";function d(a,b){for(var d=b.length,e=[],f=c["default"](a,b),g=0;g<f;g++)for(var h=0;h<d;h++)for(var i=b[h],j=a[i],k=j.size,l=0;l<k;l++)e.push(j.values[g*k+l]);return e}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/core/computePointers",["require","exports"],function(a,b){"use strict";function c(a,b){for(var c=b.length,d=[],e=0,f=0;f<c;f++){var g=b[f],h=a[g];d.push({name:g,size:h.size,type:h.type,normalized:!0,offset:e}),e+=4*h.size}return d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/computeStride",["require","exports"],function(a,b){"use strict";function c(a,b){for(var c=b.length,d=0,e=0;e<c;e++){var f=b[e],g=a[f];d+=4*g.size}return d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/add4x4",["require","exports"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];return c[0]=d+t,c[4]=e+u,c[8]=f+v,c[12]=g+w,c[1]=h+x,c[5]=i+y,c[9]=j+z,c[13]=k+A,c[2]=l+B,c[6]=m+C,c[10]=n+D,c[14]=o+E,c[3]=p+F,c[7]=q+G,c[11]=r+H,c[15]=s+I,c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/det4x4",["require","exports"],function(a,b){"use strict";function c(a){var b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=b*g,s=b*h,t=b*i,u=c*f,v=c*h,w=c*i,x=d*f,y=d*g,z=d*i,A=e*f,B=e*g,C=e*h;return n*((C-z)*k+(w-B)*l+(y-v)*m)+o*((z-C)*j+(A-t)*l+(s-x)*m)+p*((B-w)*j+(t-A)*k+(u-r)*m)+q*((v-y)*j+(x-s)*k+(r-u)*l)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/inv4x4",["require","exports"],function(a,b){"use strict";function c(a,b){var c=a[0],d=a[4],e=a[8],f=a[12],g=a[1],h=a[5],i=a[9],j=a[13],k=a[2],l=a[6],m=a[10],n=a[14],o=a[3],p=a[7],q=a[11],r=a[15],s=i*n*p-j*m*p+j*l*q-h*n*q-i*l*r+h*m*r,t=f*m*p-e*n*p-f*l*q+d*n*q+e*l*r-d*m*r,u=e*j*p-f*i*p+f*h*q-d*j*q-e*h*r+d*i*r,v=f*i*l-e*j*l-f*h*m+d*j*m+e*h*n-d*i*n,w=j*m*o-i*n*o-j*k*q+g*n*q+i*k*r-g*m*r,x=e*n*o-f*m*o+f*k*q-c*n*q-e*k*r+c*m*r,y=f*i*o-e*j*o-f*g*q+c*j*q+e*g*r-c*i*r,z=e*j*k-f*i*k+f*g*m-c*j*m-e*g*n+c*i*n,A=h*n*o-j*l*o+j*k*p-g*n*p-h*k*r+g*l*r,B=f*l*o-d*n*o-f*k*p+c*n*p+d*k*r-c*l*r,C=d*j*o-f*h*o+f*g*p-c*j*p-d*g*r+c*h*r,D=f*h*k-d*j*k-f*g*l+c*j*l+d*g*n-c*h*n,E=i*l*o-h*m*o-i*k*p+g*m*p+h*k*q-g*l*q,F=d*m*o-e*l*o+e*k*p-c*m*p-d*k*q+c*l*q,G=e*h*o-d*i*o-e*g*p+c*i*p+d*g*q-c*h*q,H=d*i*k-e*h*k+e*g*l-c*i*l-d*g*m+c*h*m,I=c*s+g*t+k*u+o*v,J=1/I;b[0]=s*J,b[4]=t*J,b[8]=u*J,b[12]=v*J,b[1]=w*J,b[5]=x*J,b[9]=y*J,b[13]=z*J,b[2]=A*J,b[6]=B*J,b[10]=C*J,b[14]=D*J,b[3]=E*J,b[7]=F*J,b[11]=G*J,b[15]=H*J}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/mul4x4",["require","exports"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];return c[0]=d*t+e*x+f*B+g*F,c[4]=d*u+e*y+f*C+g*G,c[8]=d*v+e*z+f*D+g*H,c[12]=d*w+e*A+f*E+g*I,c[1]=h*t+i*x+j*B+k*F,c[5]=h*u+i*y+j*C+k*G,c[9]=h*v+i*z+j*D+k*H,c[13]=h*w+i*A+j*E+k*I,c[2]=l*t+m*x+n*B+o*F,c[6]=l*u+m*y+n*C+o*G,c[10]=l*v+m*z+n*D+o*H,c[14]=l*w+m*A+n*E+o*I,c[3]=p*t+q*x+r*B+s*F,c[7]=p*u+q*y+r*C+s*G,c[11]=p*v+q*z+r*D+s*H,c[15]=p*w+q*A+r*E+s*I,c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/facets/frustumMatrix",["require","exports","../checks/mustBeNumber","../checks/isDefined"],function(a,b,c,d){"use strict";function e(a,b,e,f,g,h,i){c["default"]("left",a),c["default"]("right",b),c["default"]("bottom",e),c["default"]("top",f),c["default"]("near",g),c["default"]("far",h);var j=d["default"](i)?i:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),k=2*g/(b-a),l=2*g/(f-e),m=(b+a)/(b-a),n=(f+e)/(f-e),o=-(h+g)/(h-g),p=-2*h*g/(h-g);return j[0]=k,j[4]=0,j[8]=m,j[12]=0,j[1]=0,j[5]=l,j[9]=n,j[13]=0,j[2]=0,j[6]=0,j[10]=o,j[14]=p,j[3]=0,j[7]=0,j[11]=-1,j[15]=0,j}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/facets/perspectiveArray",["require","exports","./frustumMatrix","../checks/mustBeNumber"],function(a,b,c,d){"use strict";function e(a,b,e,f,g){d["default"]("fov",a),d["default"]("aspect",b),d["default"]("near",e),d["default"]("far",f);var h=e*Math.tan(.5*a),i=-h,j=i*b,k=h*b;return c["default"](j,k,i,h,e,f,g)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Matrix4",["require","exports","../math/AbstractMatrix","../math/add4x4","./det4x4","../math/inv4x4","../math/mul4x4","../facets/perspectiveArray"],function(a,b,c,d,e,g,h,i){"use strict";var j=function(a){function b(b){a.call(this,b,4)}return f(b,a),b.one=function(){return new b(new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]))},b.zero=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))},b.scaling=function(a){return b.one().scaling(a)},b.translation=function(a){return b.one().translation(a)},b.rotation=function(a){return b.one().rotation(a)},b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return d["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){return b.zero().copy(this)},b.prototype.compose=function(a,b,c){return this.scaling(a),this.rotate(b),this.translate(c),this},b.prototype.copy=function(a){return this.elements.set(a.elements),this},b.prototype.det=function(){return e["default"](this.elements)},b.prototype.inv=function(){return g["default"](this.elements,this.elements),this},b.prototype.one=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},b.prototype.scale=function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},b.prototype.frustum=function(a,b,c,d,e,f){var g=this.elements,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},b.prototype.perspective=function(a,b,c,d){return i["default"](a,b,c,d,this.elements),this},b.prototype.rotationAxis=function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1)},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){return h["default"](a.elements,b.elements,this.elements),this},b.prototype.rmul=function(a){return this.mul2(a,this)},b.prototype.reflection=function(a){var b=a.x,c=a.y,d=a.z,e=-2*b*c,f=-2*c*d,g=-2*d*b,h=1-2*b*b,i=1-2*c*c,j=1-2*d*d;return this.set(h,e,g,0,e,i,f,0,g,f,j,0,0,0,0,1),this},b.prototype.rotate=function(a){return this.rmul(b.rotation(a))},b.prototype.rotation=function(a){var b=-a.yz,c=-a.zx,d=-a.xy,e=a.a,f=b+b,g=c+c,h=d+d,i=b*f,j=b*g,k=b*h,l=c*g,m=c*h,n=d*h,o=e*f,p=e*g,q=e*h;return this.set(1-l-n,j-q,k+p,0,j+q,1-i-n,m-o,0,k-p,m+o,1-i-l,0,0,0,0,1),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[4+a],b[8+a],b[12+a]]},b.prototype.scaleXYZ=function(a){return this.rmul(b.scaling(a))},b.prototype.scaling=function(a){return this.set(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1)},b.prototype.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translate=function(a){return this.rmul(b.translation(a))},b.prototype.translation=function(a){var b=a.x,c=a.y,d=a.z;return this.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1)},b.prototype.zero=function(){return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},b.prototype.__mul__=function(a){return a instanceof b?b.one().mul2(this,a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?b.one().mul2(a,this):"number"==typeof a?this.clone().scale(a):void 0},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j}),b("davinci-eight/i18n/notSupported",["require","exports","../checks/mustBeString"],function(a,b,c){"use strict";function d(a){c["default"]("name",a);var b={get message(){return"Method `"+a+"` is not supported."}};return b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/GeometryBase",["require","exports","../math/Matrix4","../i18n/notImplemented","../i18n/notSupported","./ShareableContextConsumer","../math/Spinor3"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(b,d,e){a.call(this,d),this.scaling=c["default"].one(),this.canonicalScale=c["default"].one(),this.K=c["default"].one(),this.Kinv=c["default"].one(),this.Kidentity=!0,this.setLoggingName("GeometryBase"),b&&!h["default"].isOne(b)&&(this.Kidentity=!1,this.K.rotation(b),this.Kinv.copy(this.K).inv()),0===e&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b.prototype.bind=function(a){throw new Error(e["default"]("bind").message)},b.prototype.unbind=function(a){throw new Error(e["default"]("unbind").message)},b.prototype.draw=function(a){throw new Error(e["default"]("draw").message)},b.prototype.hasPrincipalScale=function(a){throw new Error(d["default"]("hasPrincipalScale("+a+")").message)},b.prototype.getPrincipalScale=function(a){throw new Error(d["default"]("getPrincipalScale").message)},b.prototype.setPrincipalScale=function(a,b){throw new Error(d["default"]("setPrincipalScale").message)},b.prototype.setScale=function(a,b,c){this.Kidentity?(this.scaling.setElement(0,0,a),this.scaling.setElement(1,1,b),this.scaling.setElement(2,2,c)):(this.canonicalScale.copy(this.Kinv).mul(this.scaling).mul(this.K),this.canonicalScale.setElement(0,0,a),this.canonicalScale.setElement(1,1,b),this.canonicalScale.setElement(2,2,c),this.scaling.copy(this.K).mul(this.canonicalScale).mul(this.Kinv))},b}(g.ShareableContextConsumer);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/GeometryLeaf",["require","exports","./GeometryBase","../math/Matrix4","../checks/mustBeNumber","../i18n/notImplemented","../i18n/notSupported"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(b,c,f){a.call(this,b,c,f+1),this.scaling=d["default"].one(),e["default"]("levelUp",f),this.setLoggingName("GeometryLeaf"),0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b.prototype.bind=function(a){throw new Error(h["default"]("bind").message)},b.prototype.unbind=function(a){throw new Error(h["default"]("unbind").message)},b.prototype.draw=function(a){throw new Error(h["default"]("draw").message)},b.prototype.hasPrincipalScale=function(a){throw new Error(g["default"]("hasPrincipalScale("+a+")").message)},b.prototype.getPrincipalScale=function(a){throw new Error(g["default"]("getPrincipalScale").message)},b.prototype.setPrincipalScale=function(a,b){throw new Error(g["default"]("setPrincipalScale").message)},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i}),b("davinci-eight/core/vertexArraysFromPrimitive",["require","exports","./computeAttributes","./computePointers","./computeStride"],function(a,b,c,d,e){"use strict";function f(a,b){if(a){var f=b?b:Object.keys(a.attributes),g={mode:a.mode,indices:a.indices,attributes:c["default"](a.attributes,f),stride:e["default"](a.attributes,f),pointers:d["default"](a.attributes,f)};return g}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/checks/mustBeUndefined",["require","exports","../checks/mustSatisfy","../checks/isUndefined"],function(a,b,c,d){"use strict";function e(){return"be 'undefined'"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/core/Usage",["require","exports"],function(a,b){"use strict";function c(a,b){switch(b){case d.STREAM_DRAW:case d.STATIC_DRAW:case d.DYNAMIC_DRAW:return;default:throw new Error(a+": Usage must be one of the enumerated values.")}}var d;!function(a){a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW"}(d||(d={})),b.checkUsage=c,Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/VertexBuffer",["require","exports","../checks/mustBeObject","../checks/mustBeUndefined","./ShareableContextConsumer","./Usage","./Usage"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(b,c){void 0===c&&(c=0),a.call(this,b),this._usage=h["default"].STATIC_DRAW,this.setLoggingName("VertexBuffer"),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),d["default"](this._type,this.webGLBuffer),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a,this.bufferData(this._data,this._usage)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},set:function(a){g.checkUsage("usage",a),this._usage=a,this.bufferData(this._data,this._usage)},enumerable:!0,configurable:!0}),b.prototype.bufferData=function(a,b){a&&(this._data=a),b&&(this._usage=b);var c=this.gl;c&&this.webGLBuffer&&(c.bindBuffer(c.ARRAY_BUFFER,this.webGLBuffer),this._data&&c.bufferData(c.ARRAY_BUFFER,this._data,this._usage),c.bindBuffer(c.ARRAY_BUFFER,null))},b.prototype.contextFree=function(b){if(c["default"]("contextProvider",b),this.webGLBuffer){var d=this.gl;d?d.deleteBuffer(this.webGLBuffer):console.error(this._type+" must leak WebGLBuffer because WebGLRenderingContext is "+typeof d),this.webGLBuffer=void 0}a.prototype.contextFree.call(this,b)},b.prototype.contextGain=function(b){a.prototype.contextGain.call(this,b);var c=this.gl;this.webGLBuffer||(this.webGLBuffer=c.createBuffer(),this.bufferData(this._data,this._usage))},b.prototype.contextLost=function(){this.webGLBuffer=void 0,a.prototype.contextLost.call(this)},b.prototype.bind=function(){var a=this.gl;a&&a.bindBuffer(a.ARRAY_BUFFER,this.webGLBuffer)},b.prototype.unbind=function(){var a=this.gl;a&&a.bindBuffer(a.ARRAY_BUFFER,null)},b}(e.ShareableContextConsumer);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/GeometryArrays",["require","exports","./computeAttributes","./computeCount","./computePointers","./computeStride","./GeometryLeaf","../checks/isNull","../checks/isObject","../checks/isUndefined","./vertexArraysFromPrimitive","./VertexBuffer"],function(a,b,c,d,e,g,h,i,j,k,l,m){
"use strict";var n=function(a){function b(b,c,d,e){void 0===d&&(d={}),void 0===e&&(e=0),a.call(this,d.tilt,c,e+1),this.first=0,this.setLoggingName("GeometryArrays"),this.attributes={},this.vbo=new m["default"](c);var f=l["default"](b,d.order);if(!i["default"](f)&&!k["default"](f)){if(!j["default"](f))throw new TypeError("data must be an object");this.mode=f.mode,this.vbo.data=new Float32Array(f.attributes),this.count=f.attributes.length/(f.stride/4),this._stride=f.stride,this._pointers=f.pointers}0===e&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),this.vbo.release(),this.vbo=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.bind=function(a){var b=this.contextProvider;if(b){this.vbo.bind();var c=this._pointers;if(c)for(var d=c.length,e=0;e<d;e++){var f=c[e],g=a.getAttrib(f.name);g&&(g.config(f.size,f.type,f.normalized,this._stride,f.offset),g.enable())}}return this},b.prototype.draw=function(a){var b=this.contextProvider;return b&&this.contextProvider.drawArrays(this.mode,this.first,this.count),this},b.prototype.unbind=function(a){var b=this._pointers;if(b)for(var c=b.length,d=0;d<c;d++){var e=b[d],f=a.getAttrib(e.name);f&&f.disable()}return this.vbo.unbind(),this},b.prototype.getAttribute=function(a){return this.attributes[a]},b.prototype.setAttribute=function(a,b){this.attributes[a]=b;var f=Object.keys(this.attributes);this.count=d["default"](this.attributes,f),this._stride=g["default"](this.attributes,f),this._pointers=e["default"](this.attributes,f);var h=c["default"](this.attributes,f);this.vbo.data=new Float32Array(h)},b}(h["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=n});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/IndexBuffer",["require","exports","../checks/mustBeObject","../checks/mustBeUndefined","./ShareableContextConsumer","./Usage","./Usage"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(b,c){void 0===c&&(c=0),a.call(this,b),this._usage=h["default"].STATIC_DRAW,this.setLoggingName("IndexBuffer"),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),d["default"](this._type,this.webGLBuffer),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a,this.bufferData(this._data,this.usage)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},set:function(a){g.checkUsage("usage",a),this._usage=a,this.bufferData(this._data,this._usage)},enumerable:!0,configurable:!0}),b.prototype.bufferData=function(a,b){a&&(this._data=a),b&&(this._usage=b);var c=this.gl;c&&this.webGLBuffer&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.webGLBuffer),this.data&&c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.data,this._usage),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null))},b.prototype.contextFree=function(b){if(c["default"]("contextProvider",b),this.webGLBuffer){var d=this.gl;d?d.deleteBuffer(this.webGLBuffer):console.error(this._type+" must leak WebGLBuffer because WebGLRenderingContext is "+typeof d),this.webGLBuffer=void 0}a.prototype.contextFree.call(this,b)},b.prototype.contextGain=function(b){a.prototype.contextGain.call(this,b);var c=this.gl;this.webGLBuffer||(this.webGLBuffer=c.createBuffer(),this.bufferData(this._data,this._usage))},b.prototype.contextLost=function(){this.webGLBuffer=void 0,a.prototype.contextLost.call(this)},b.prototype.bind=function(){var a=this.gl;a&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.webGLBuffer)},b.prototype.unbind=function(){var a=this.gl;a&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)},b}(e.ShareableContextConsumer);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/GeometryElements",["require","exports","./GeometryLeaf","./IndexBuffer","../checks/isArray","../checks/isNull","../checks/isObject","../checks/isUndefined","../checks/mustBeArray","../checks/mustBeObject","../i18n/readOnly","./vertexArraysFromPrimitive","./VertexBuffer"],function(a,b,c,d,e,g,h,i,j,k,l,m,n){"use strict";var o=function(a){function b(b,c,f,l){void 0===f&&(f={}),void 0===l&&(l=0),a.call(this,f.tilt,c,l+1),this.offset=0,this.setLoggingName("GeometryElements"),this.ibo=new d["default"](c),this.vbo=new n["default"](c);var o=m["default"](b,f.order);g["default"](o)||i["default"](o)?this._pointers=[]:h["default"](o)?(this.mode=o.mode,this.setIndices(o.indices),this._attributes=o.attributes,this._stride=o.stride,g["default"](o.pointers)||i["default"](o.pointers)?this._pointers=[]:e["default"](o.pointers)?this._pointers=o.pointers:j["default"]("data.pointers",o.pointers),this.vbo.data=new Float32Array(o.attributes)):k["default"]("data",o),0===l&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),this.ibo.release(),this.ibo=void 0,this.vbo.release(),this.vbo=void 0,a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"attributes",{get:function(){return this._attributes},set:function(a){e["default"](a)&&(this._attributes=a,this.vbo.data=new Float32Array(a))},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"data",{get:function(){return{mode:this.mode,indices:this._indices,attributes:this._attributes,stride:this._stride,pointers:this._pointers}},set:function(a){throw new Error(l["default"]("data").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"indices",{get:function(){return this._indices},set:function(a){this.setIndices(a)},enumerable:!0,configurable:!0}),b.prototype.setIndices=function(a){g["default"](a)||i["default"](a)||(e["default"](a)?(this._indices=a,this.count=a.length,this.ibo.data=new Uint16Array(a)):j["default"]("indices",a))},Object.defineProperty(b.prototype,"pointers",{get:function(){return this._pointers},set:function(a){this._pointers=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"stride",{get:function(){return this._stride},set:function(a){this._stride=a},enumerable:!0,configurable:!0}),b.prototype.contextFree=function(b){this.ibo.contextFree(b),this.vbo.contextFree(b),a.prototype.contextFree.call(this,b)},b.prototype.contextGain=function(b){this.ibo.contextGain(b),this.vbo.contextGain(b),a.prototype.contextGain.call(this,b)},b.prototype.contextLost=function(){this.ibo.contextLost(),this.vbo.contextLost(),a.prototype.contextLost.call(this)},b.prototype.bind=function(a){var b=this.contextProvider;if(b){this.vbo.bind();var c=this._pointers;if(c)for(var d=c.length,e=0;e<d;e++){var f=c[e],g=a.getAttrib(f.name);g&&(g.config(f.size,f.type,f.normalized,this._stride,f.offset),g.enable())}this.ibo.bind()}return this},b.prototype.unbind=function(a){var b=this.contextProvider;if(b){this.ibo.unbind();var c=this._pointers;if(c)for(var d=c.length,e=0;e<d;e++){var f=c[e],g=a.getAttrib(f.name);g&&g.disable()}this.vbo.unbind()}return this},b.prototype.draw=function(a){var b=this.contextProvider;return b&&this.count&&b.drawElements(this.mode,this.count,this.offset),this},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o}),b("davinci-eight/facets/ColorFacet",["require","exports","../core/Color","../checks/mustBeNumber","../core/GraphicsProgramSymbols"],function(a,b,c,d,e){"use strict";var f=function(){function a(a){void 0===a&&(a=e["default"].UNIFORM_COLOR),this.uColorName=a,this.color=c.Color.fromRGB(1,1,1)}return Object.defineProperty(a.prototype,"r",{get:function(){return this.color.r},set:function(a){d["default"]("r",a),this.color.r=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"g",{get:function(){return this.color.g},set:function(a){d["default"]("g",a),this.color.g=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.color.b},set:function(a){d["default"]("b",a),this.color.b=a},enumerable:!0,configurable:!0}),a.prototype.scaleRGB=function(a){return this.r*=a,this.g*=a,this.b*=a,this},a.prototype.setRGB=function(a,b,c){return this.r=a,this.g=b,this.b=c,this},a.prototype.setUniforms=function(a){var b=this.uColorName;if(b){var c=this.color;a.uniform3f(b,c.r,c.g,c.b)}},a.PROP_RGB="rgb",a.PROP_RED="r",a.PROP_GREEN="g",a.PROP_BLUE="b",a}();b.ColorFacet=f}),b("davinci-eight/facets/ModelE3",["require","exports","../math/Geometric3"],function(a,b,c){"use strict";var d=function(){function a(){this._position=c.Geometric3.zero(),this._attitude=c.Geometric3.one(),this._position.modified=!0,this._attitude.modified=!0}return Object.defineProperty(a.prototype,"R",{get:function(){return this._attitude},set:function(a){this._attitude.copySpinor(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"X",{get:function(){return this._position},set:function(a){this._position.copyVector(a)},enumerable:!0,configurable:!0}),a.PROP_ATTITUDE="R",a.PROP_POSITION="X",a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/facets/ModelFacet",["require","exports","../math/Matrix3","../math/Matrix4","./ModelE3","../checks/mustBeObject","../i18n/readOnly","../core/GraphicsProgramSymbols"],function(a,b,c,d,e,g,h,i){"use strict";var j=function(a){function b(){a.call(this),this.matS=d["default"].one(),this._matM=d["default"].one(),this._matN=c["default"].one(),this.matR=d["default"].one(),this.matT=d["default"].one(),this.X.modified=!0,this.R.modified=!0,this.matS.modified=!0}return f(b,a),Object.defineProperty(b.prototype,"stress",{get:function(){return this.matS},set:function(a){g["default"]("stress",a),this.matS.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"matrix",{get:function(){return this._matM},set:function(a){throw new Error(h["default"]("matrix").message)},enumerable:!0,configurable:!0}),b.prototype.setUniforms=function(a){this.updateMatrices(),a.matrix4fv(i["default"].UNIFORM_MODEL_MATRIX,this._matM.elements,!1),a.matrix3fv(i["default"].UNIFORM_NORMAL_MATRIX,this._matN.elements,!1)},b.prototype.updateMatrices=function(){var a=!1;this.X.modified&&(this.matT.translation(this.X),this.X.modified=!1,a=!0),this.R.modified&&(this.matR.rotation(this.R),this.R.modified=!1,a=!0),this.matS.modified&&(a=!0),a&&(this._matM.copy(this.matT).mul(this.matR).mul(this.matS),0!==this._matM.det()?this._matN.normalFromMatrix4(this._matM):this._matN.one())},b}(e["default"]);b.ModelFacet=j});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/Mesh",["require","exports","../facets/ColorFacet","./Drawable","../facets/ModelFacet","../i18n/notSupported"],function(a,b,c,d,e,g){"use strict";var h="color",i="model",j=function(a){function b(b,d,f,g){void 0===g&&(g=0),a.call(this,b,d,f,g+1),this.setLoggingName("Mesh"),this.setFacet(i,new e.ModelFacet),this.setFacet(h,new c.ColorFacet),0===g&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"R",{get:function(){var a=this.getFacet(i);if(a)return a.R;throw new Error(g["default"]("R").message)},set:function(a){var b=this.getFacet(i);if(!b)throw new Error(g["default"]("R").message);b.R.copySpinor(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"color",{get:function(){var a=this.getFacet(h);if(a)return a.color;throw new Error(g["default"](h).message)},set:function(a){var b=this.getFacet(h);if(!b)throw new Error(g["default"](h).message);b.color.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"X",{get:function(){var a=this.getFacet(i);if(a)return a.X;throw new Error(g["default"]("X").message)},set:function(a){var b=this.getFacet(i);if(!b)throw new Error(g["default"]("X").message);b.X.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"stress",{get:function(){var a=this.getFacet(i);if(a)return a.stress;throw new Error(g["default"]("stress").message)},set:function(a){var b=this.getFacet(i);if(!b)throw new Error(g["default"]("stress").message);b.stress.copy(a)},enumerable:!0,configurable:!0}),b}(d.Drawable);b.Mesh=j}),b("davinci-eight/core/PixelFormat",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/core/PixelType",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5"}(c||(c={})),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/collections/ShareableArray",["require","exports","../i18n/readOnly","../core/ShareableBase"],function(a,b,c,d){"use strict";function e(a){if(a){for(var b=new g(a),c=0,d=a.length;c<d;c++){var e=a[c];e&&e.release&&e.release()}return b}}var g=function(a){function b(b){void 0===b&&(b=[]),a.call(this),this.setLoggingName("ShareableArray"),this._elements=b;for(var c=0,d=this._elements.length;c<d;c++){var e=this._elements[c];e.addRef&&e.addRef()}}return f(b,a),b.prototype.destructor=function(b){for(var c=0,d=this._elements.length;c<d;c++){var e=this._elements[c];e.release&&e.release()}this._elements=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.find=function(a){for(var c=new b([]),d=this._elements,e=d.length,f=0;f<e;f++){var g=d[f];a(g)&&c.push(g)}return c},b.prototype.findOne=function(a){for(var b=this._elements,c=0,d=b.length;c<d;c++){var e=b[c];if(a(e))return e.addRef&&e.addRef(),e}},b.prototype.get=function(a){var b=this.getWeakRef(a);return b&&b.addRef&&b.addRef(),b},b.prototype.getWeakRef=function(a){return this._elements[a]},b.prototype.indexOf=function(a,b){return this._elements.indexOf(a,b)},Object.defineProperty(b.prototype,"length",{get:function(){return this._elements?this._elements.length:void console.warn("ShareableArray is now a zombie, length is undefined")},set:function(a){throw new Error(c["default"]("length").message)},enumerable:!0,configurable:!0}),b.prototype.slice=function(a,c){return new b(this._elements.slice(a,c))},b.prototype.splice=function(a,b){return e(this._elements.splice(a,b))},b.prototype.shift=function(){return this._elements.shift()},b.prototype.forEach=function(a){return this._elements.forEach(a)},b.prototype.push=function(a){return a&&a.addRef&&a.addRef(),this.pushWeakRef(a)},b.prototype.pushWeakRef=function(a){return this._elements.push(a)},b.prototype.pop=function(){return this._elements.pop()},b.prototype.unshift=function(a){return a.addRef&&a.addRef(),this.unshiftWeakRef(a)},b.prototype.unshiftWeakRef=function(a){return this._elements.unshift(a)},b}(d.ShareableBase);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/Scene",["require","exports","../checks/mustBeObject","../collections/ShareableArray","../core/ShareableContextConsumer"],function(a,b,c,d,e){"use strict";var g=function(a){function b(b,e){void 0===e&&(e=0),a.call(this,b),this.setLoggingName("Scene"),c["default"]("contextManager",b),this._drawables=new d["default"]([]),0===e&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),this._drawables.release(),a.prototype.destructor.call(this,b+1)},b.prototype.add=function(a){c["default"]("drawable",a),this._drawables.push(a),this.synchUp()},b.prototype.contains=function(a){return c["default"]("drawable",a),this._drawables.indexOf(a)>=0},b.prototype.draw=function(a){var b=this.gl;if(b){for(var c=this._drawables,d=c.length,e=!1,f=!1,g=0;g<d;g++){var h=c.getWeakRef(g);h.transparent?f=!0:e=!0}if(e||f)if(f){var i=b.getParameter(b.DEPTH_WRITEMASK);if(e){b.depthMask(!0);for(var g=0;g<d;g++){var h=c.getWeakRef(g);h.transparent||h.render(a)}}b.depthMask(!1);for(var g=0;g<d;g++){var h=c.getWeakRef(g);h.transparent&&h.render(a)}b.depthMask(i)}else for(var g=0;g<d;g++){var h=c.getWeakRef(g);h.transparent||h.render(a)}}},b.prototype.find=function(a){return this._drawables.find(a)},b.prototype.findOne=function(a){return this._drawables.findOne(a)},b.prototype.findOneByName=function(a){return this.findOne(function(b){return b.name===a})},b.prototype.findByName=function(a){return this.find(function(b){return b.name===a})},b.prototype.remove=function(a){c["default"]("drawable",a);var b=this._drawables.indexOf(a);b>=0&&this._drawables.splice(b,1).release()},b.prototype.contextFree=function(b){for(var c=0;c<this._drawables.length;c++){var d=this._drawables.getWeakRef(c);d.contextFree&&d.contextFree(b)}a.prototype.contextFree.call(this,b)},b.prototype.contextGain=function(b){for(var c=0;c<this._drawables.length;c++){var d=this._drawables.getWeakRef(c);d.contextGain&&d.contextGain(b)}a.prototype.contextGain.call(this,b)},b.prototype.contextLost=function(){for(var b=0;b<this._drawables.length;b++){var c=this._drawables.getWeakRef(b);c.contextLost&&c.contextLost()}a.prototype.contextLost.call(this)},b}(e.ShareableContextConsumer);b.Scene=g}),b("davinci-eight/core/makeWebGLShader",["require","exports"],function(a,b){"use strict";function c(a,b){return b===a.VERTEX_SHADER?"VERTEX_SHADER":b===a.FRAGMENT_SHADER?"FRAGMENT_SHADER":"type => "+b+" shader"}function d(a,b,d){var e=a.createShader(d);a.shaderSource(e,b),a.compileShader(e);var f=a.getShaderParameter(e,a.COMPILE_STATUS);if(f)return e;if(a.isContextLost())throw new Error("Context lost while compiling "+c(a,d)+".");var g=a.getShaderInfoLog(e);throw a.deleteShader(e),new Error(g)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/Shader",["require","exports","./makeWebGLShader","../checks/mustBeNumber","../checks/mustBeString","../checks/mustBeUndefined","./ShareableContextConsumer"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(b,c,f){a.call(this,f),this.setLoggingName("Shader"),this._source=e["default"]("source",b),this._shaderType=d["default"]("type",c)}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1),g["default"](this._type,this._shader)},b.prototype.contextFree=function(b){this._shader&&(b.gl.deleteShader(this._shader),this._shader=void 0),a.prototype.contextFree.call(this,b)},b.prototype.contextGain=function(b){this._shader=c["default"](b.gl,this._source,this._shaderType),a.prototype.contextGain.call(this,b)},b.prototype.contextLost=function(){this._shader=void 0,a.prototype.contextLost.call(this)},b}(h.ShareableContextConsumer);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i}),b("davinci-eight/core/Uniform",["require","exports","../checks/isNull","../checks/mustBeObject"],function(a,b,c,d){"use strict";var e=function(){function a(a){c["default"](a)||(d["default"]("info",a),this.name=a.name)}return a.prototype.contextFree=function(){this.contextLost()},a.prototype.contextGain=function(a,b){this.contextLost(),this.gl=a,c["default"](this.name)?this.location=null:this.location=a.getUniformLocation(b,this.name)},a.prototype.contextLost=function(){this.gl=void 0,this.location=void 0},a.prototype.uniform1f=function(a){var b=this.gl;b&&b.uniform1f(this.location,a)},a.prototype.uniform2f=function(a,b){var c=this.gl;c&&c.uniform2f(this.location,a,b)},a.prototype.uniform3f=function(a,b,c){var d=this.gl;d&&d.uniform3f(this.location,a,b,c)},a.prototype.uniform4f=function(a,b,c,d){var e=this.gl;e&&e.uniform4f(this.location,a,b,c,d)},a.prototype.matrix2fv=function(a,b){var c=this.gl;c&&c.uniformMatrix2fv(this.location,a,b)},a.prototype.matrix3fv=function(a,b){var c=this.gl;c&&c.uniformMatrix3fv(this.location,a,b)},a.prototype.matrix4fv=function(a,b){var c=this.gl;c&&c.uniformMatrix4fv(this.location,a,b)},a.prototype.uniform1fv=function(a){var b=this.gl;b&&b.uniform1fv(this.location,a)},a.prototype.uniform2fv=function(a){var b=this.gl;b&&b.uniform2fv(this.location,a)},a.prototype.uniform3fv=function(a){var b=this.gl;b&&b.uniform3fv(this.location,a)},a.prototype.uniform4fv=function(a){var b=this.gl;b&&b.uniform4fv(this.location,a)},a.prototype.toString=function(){return["uniform",this.name].join(" ")},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/core/checkEnums",["require","exports","./BeginMode","./BlendingFactorDest","./BlendingFactorSrc","./Capability","./ClearBufferMask","./DepthFunction","./PixelFormat","./PixelType","./Usage","../checks/mustBeEQ"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a){l["default"]("LINE_LOOP",c["default"].LINE_LOOP,a.LINE_LOOP),l["default"]("LINE_STRIP",c["default"].LINE_STRIP,a.LINE_STRIP),l["default"]("LINES",c["default"].LINES,a.LINES),l["default"]("POINTS",c["default"].POINTS,a.POINTS),l["default"]("TRIANGLE_FAN",c["default"].TRIANGLE_FAN,a.TRIANGLE_FAN),l["default"]("TRIANGLE_STRIP",c["default"].TRIANGLE_STRIP,a.TRIANGLE_STRIP),l["default"]("TRIANGLES",c["default"].TRIANGLES,a.TRIANGLES),l["default"]("ZERO",d["default"].ZERO,a.ZERO),l["default"]("ONE",d["default"].ONE,a.ONE),l["default"]("SRC_COLOR",d["default"].SRC_COLOR,a.SRC_COLOR),l["default"]("ONE_MINUS_SRC_COLOR",d["default"].ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_COLOR),l["default"]("SRC_ALPHA",d["default"].SRC_ALPHA,a.SRC_ALPHA),l["default"]("ONE_MINUS_SRC_ALPHA",d["default"].ONE_MINUS_SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),l["default"]("DST_ALPHA",d["default"].DST_ALPHA,a.DST_ALPHA),l["default"]("ONE_MINUS_DST_ALPHA",d["default"].ONE_MINUS_DST_ALPHA,a.ONE_MINUS_DST_ALPHA),l["default"]("ZERO",e["default"].ZERO,a.ZERO),l["default"]("ONE",e["default"].ONE,a.ONE),l["default"]("DST_COLOR",e["default"].DST_COLOR,a.DST_COLOR),l["default"]("ONE_MINUS_DST_COLOR",e["default"].ONE_MINUS_DST_COLOR,a.ONE_MINUS_DST_COLOR),l["default"]("SRC_ALPHA_SATURATE",e["default"].SRC_ALPHA_SATURATE,a.SRC_ALPHA_SATURATE),l["default"]("SRC_ALPHA",e["default"].SRC_ALPHA,a.SRC_ALPHA),l["default"]("ONE_MINUS_SRC_ALPHA",e["default"].ONE_MINUS_SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),l["default"]("DST_ALPHA",e["default"].DST_ALPHA,a.DST_ALPHA),l["default"]("ONE_MINUS_DST_ALPHA",e["default"].ONE_MINUS_DST_ALPHA,a.ONE_MINUS_DST_ALPHA),l["default"]("CULL_FACE",f["default"].CULL_FACE,a.CULL_FACE),l["default"]("BLEND",f["default"].BLEND,a.BLEND),l["default"]("DITHER",f["default"].DITHER,a.DITHER),l["default"]("STENCIL_TEST",f["default"].STENCIL_TEST,a.STENCIL_TEST),l["default"]("DEPTH_TEST",f["default"].DEPTH_TEST,a.DEPTH_TEST),l["default"]("SCISSOR_TEST",f["default"].SCISSOR_TEST,a.SCISSOR_TEST),l["default"]("POLYGON_OFFSET_FILL",f["default"].POLYGON_OFFSET_FILL,a.POLYGON_OFFSET_FILL),l["default"]("SAMPLE_ALPHA_TO_COVERAGE",f["default"].SAMPLE_ALPHA_TO_COVERAGE,a.SAMPLE_ALPHA_TO_COVERAGE),l["default"]("SAMPLE_COVERAGE",f["default"].SAMPLE_COVERAGE,a.SAMPLE_COVERAGE),l["default"]("COLOR_BUFFER_BIT",g["default"].COLOR_BUFFER_BIT,a.COLOR_BUFFER_BIT),l["default"]("DEPTH_BUFFER_BIT",g["default"].DEPTH_BUFFER_BIT,a.DEPTH_BUFFER_BIT),l["default"]("STENCIL_BUFFER_BIT",g["default"].STENCIL_BUFFER_BIT,a.STENCIL_BUFFER_BIT),l["default"]("ALWAYS",h["default"].ALWAYS,a.ALWAYS),l["default"]("EQUAL",h["default"].EQUAL,a.EQUAL),l["default"]("GEQUAL",h["default"].GEQUAL,a.GEQUAL),l["default"]("GREATER",h["default"].GREATER,a.GREATER),l["default"]("LEQUAL",h["default"].LEQUAL,a.LEQUAL),l["default"]("LESS",h["default"].LESS,a.LESS),l["default"]("NEVER",h["default"].NEVER,a.NEVER),l["default"]("NOTEQUAL",h["default"].NOTEQUAL,a.NOTEQUAL),l["default"]("DEPTH_COMPONENT",i["default"].DEPTH_COMPONENT,a.DEPTH_COMPONENT),l["default"]("ALPHA",i["default"].ALPHA,a.ALPHA),l["default"]("RGB",i["default"].RGB,a.RGB),l["default"]("RGBA",i["default"].RGBA,a.RGBA),l["default"]("LUMINANCE",i["default"].LUMINANCE,a.LUMINANCE),l["default"]("LUMINANCE_ALPHA",i["default"].LUMINANCE_ALPHA,a.LUMINANCE_ALPHA),l["default"]("UNSIGNED_BYTE",j["default"].UNSIGNED_BYTE,a.UNSIGNED_BYTE),l["default"]("UNSIGNED_SHORT_4_4_4_4",j["default"].UNSIGNED_SHORT_4_4_4_4,a.UNSIGNED_SHORT_4_4_4_4),l["default"]("UNSIGNED_SHORT_5_5_5_1",j["default"].UNSIGNED_SHORT_5_5_5_1,a.UNSIGNED_SHORT_5_5_5_1),l["default"]("UNSIGNED_SHORT_5_6_5",j["default"].UNSIGNED_SHORT_5_6_5,a.UNSIGNED_SHORT_5_6_5),l["default"]("STREAM_DRAW",k["default"].STREAM_DRAW,a.STREAM_DRAW),l["default"]("STATIC_DRAW",k["default"].STATIC_DRAW,a.STATIC_DRAW),l["default"]("DYNAMIC_DRAW",k["default"].DYNAMIC_DRAW,a.DYNAMIC_DRAW)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=m});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/commands/EIGHTLogger",["require","exports","../config","../core/ShareableBase"],function(a,b,c,d){"use strict";var e=function(a){function b(){a.call(this),this.setLoggingName("EIGHTLogger")}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(a){},b.prototype.contextGain=function(a){console.log(c["default"].NAMESPACE+" "+c["default"].VERSION+" ("+c["default"].GITHUB+") "+c["default"].LAST_MODIFIED)},b.prototype.contextLost=function(){},Object.defineProperty(b.prototype,"name",{get:function(){return this._type},enumerable:!0,configurable:!0}),b}(d.ShareableBase);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/base/DefaultContextProvider",["require","exports","../core/DataType","../i18n/readOnly","../core/ShareableBase"],function(a,b,c,d,e){"use strict";var g=function(a){function b(b){a.call(this),this.setLoggingName("DefaultContextProvider"),this.engine=b}return f(b,a),b.prototype.destructor=function(b){this.engine=void 0,a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"gl",{get:function(){if(this.engine)return this.engine.gl;throw new Error(this._type+".engine is undefined.")},set:function(a){throw new Error(d["default"]("gl").message)},enumerable:!0,configurable:!0}),b.prototype.disableVertexAttribArray=function(a){var b=this.gl;b&&b.disableVertexAttribArray(a)},b.prototype.depthMask=function(a){var b=this.gl;b.depthMask(a)},b.prototype.drawArrays=function(a,b,c){var d=this.gl;d.drawArrays(a,b,c)},b.prototype.drawElements=function(a,b,d){var e=this.gl;e.drawElements(a,b,c["default"].UNSIGNED_SHORT,d)},b.prototype.enableVertexAttribArray=function(a){var b=this.gl;b.enableVertexAttribArray(a)},b.prototype.isContextLost=function(){var a=this.gl;if(a)return a.isContextLost();throw new Error("WebGLRenderingContext is undefined.")},b.prototype.vertexAttribPointer=function(a,b,c,d,e,f){var g=this.gl;g.vertexAttribPointer(a,b,c,d,e,f)},b}(e.ShareableBase);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/core/geometryFromPrimitive",["require","exports","./GeometryArrays","./GeometryElements","../checks/mustBeArray"],function(a,b,c,d,e){"use strict";function f(a,b,f){return void 0===f&&(f={}),f.order&&e["default"]("order",f.order),a.indices?new d["default"](a,b,f,0):new c["default"](a,b,f,0)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/core/initWebGL",["require","exports","../checks/isDefined"],function(a,b,c){"use strict";function d(a,b){if(c["default"](a)){var d;try{d=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)}catch(e){}if(d)return d;throw new Error("Unable to initialize WebGL. Your browser may not support it.")}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/commands/VersionLogger",["require","exports","../core/ShareableBase"],function(a,b,c){"use strict";var d="EIGHT.VersionLogger",e=function(a){function b(){a.call(this),this.setLoggingName(d)}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){},b.prototype.contextGain=function(a){var b=a.gl;console.log(b.getParameter(b.VERSION))},b.prototype.contextLost=function(){},Object.defineProperty(b.prototype,"name",{get:function(){return d},enumerable:!0,configurable:!0}),b}(c.ShareableBase);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/core/makeWebGLProgram",["require","exports","./makeWebGLShader"],function(a,b,c){"use strict";function d(a,b,d,e){var f=c["default"](a,b,a.VERTEX_SHADER),g=c["default"](a,d,a.FRAGMENT_SHADER),h=a.createProgram();a.attachShader(h,f),a.attachShader(h,g);for(var i=0;i<e.length;++i)a.bindAttribLocation(h,i,e[i]);a.linkProgram(h);var j=a.getProgramParameter(h,a.LINK_STATUS);if(j||a.isContextLost())return h;var k=a.getProgramInfoLog(h);throw a.detachShader(h,f),a.deleteShader(f),a.detachShader(h,g),a.deleteShader(g),a.deleteProgram(h),new Error("Error linking program: "+k)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/materials/ShaderMaterial",["require","exports","../core/Attrib","../core/DataType","../checks/isDefined","../checks/isString","../checks/isNull","../core/makeWebGLProgram","../checks/mustBeArray","../checks/mustBeString","../checks/mustBeUndefined","../i18n/readOnly","../core/ShareableContextConsumer","../core/Uniform"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o){"use strict";var p=function(a){function b(b,c,d,f,g){void 0===g&&(g=0),a.call(this,f),this._attributesByName={},this._attributesByIndex=[],this._uniforms={},this.setLoggingName("ShaderMaterial"),e["default"](b)&&!h["default"](b)&&(this._vertexShaderSrc=k["default"]("vertexShaderSrc",b)),e["default"](c)&&!h["default"](c)&&(this._fragmentShaderSrc=k["default"]("fragmentShaderSrc",c)),this._attribs=j["default"]("attribs",d),0===g&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),l["default"](this._type,this._program),a.prototype.destructor.call(this,b+1)},b.prototype.contextGain=function(b){var d=b.gl;if(!this._program&&g["default"](this._vertexShaderSrc)&&g["default"](this._fragmentShaderSrc)){this._program=i["default"](d,this._vertexShaderSrc,this._fragmentShaderSrc,this._attribs),this._attributesByName={},this._attributesByIndex=[],this._uniforms={};for(var e=d.getProgramParameter(this._program,d.ACTIVE_ATTRIBUTES),f=0;f<e;f++){
var h=d.getActiveAttrib(this._program,f),j=new c["default"](h);this._attributesByName[h.name]=j,this._attributesByIndex.push(j)}for(var k=d.getProgramParameter(this._program,d.ACTIVE_UNIFORMS),l=0;l<k;l++){var m=d.getActiveUniform(this._program,l);this._uniforms[m.name]=new o["default"](m)}for(var n in this._attributesByName)this._attributesByName.hasOwnProperty(n)&&this._attributesByName[n].contextGain(d,this._program);for(var p in this._uniforms)this._uniforms.hasOwnProperty(p)&&this._uniforms[p].contextGain(d,this._program)}a.prototype.contextGain.call(this,b)},b.prototype.contextLost=function(){this._program=void 0;for(var b in this._attributesByName)this._attributesByName.hasOwnProperty(b)&&this._attributesByName[b].contextLost();for(var c in this._uniforms)this._uniforms.hasOwnProperty(c)&&this._uniforms[c].contextLost();a.prototype.contextLost.call(this)},b.prototype.contextFree=function(b){if(this._program){var c=b.gl;c?c.isContextLost()||c.deleteProgram(this._program):console.warn("memory leak: WebGLProgram has not been deleted because WebGLRenderingContext is not available anymore."),this._program=void 0}for(var d in this._attributesByName)this._attributesByName.hasOwnProperty(d)&&this._attributesByName[d].contextFree();for(var e in this._uniforms)this._uniforms.hasOwnProperty(e)&&this._uniforms[e].contextFree();a.prototype.contextFree.call(this,b)},Object.defineProperty(b.prototype,"vertexShaderSrc",{get:function(){return this._vertexShaderSrc},set:function(a){if(this._vertexShaderSrc=k["default"]("vertexShaderSrc",a),this.contextProvider){this.contextProvider.addRef();var b=this.contextProvider;try{this.contextFree(b),this.contextGain(b)}finally{b.release()}}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"fragmentShaderSrc",{get:function(){return this._fragmentShaderSrc},set:function(a){if(this._fragmentShaderSrc=k["default"]("fragmentShaderSrc",a),this.contextProvider){this.contextProvider.addRef();var b=this.contextProvider;try{this.contextFree(b),this.contextGain(b)}finally{b.release()}}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"attributeNames",{get:function(){var a=this._attributesByName;return a?Object.keys(a):void 0},set:function(a){throw new Error(m["default"]("attributeNames").message)},enumerable:!0,configurable:!0}),b.prototype.enableAttrib=function(a){if("number"==typeof a)this.gl&&this.gl.enableVertexAttribArray(a);else{if("string"!=typeof a)throw new TypeError("indexOrName must have type number or string.");var b=this._attributesByName[a];b&&b.enable()}},b.prototype.enableAttribs=function(){var a=this._attributesByName;if(a)for(var b=Object.keys(a),c=0,d=b.length;c<d;c++)a[b[c]].enable()},b.prototype.disableAttrib=function(a){if("number"==typeof a)this.gl&&this.gl.disableVertexAttribArray(a);else{if("string"!=typeof a)throw new TypeError("indexOrName must have type number or string.");var b=this._attributesByName[a];b&&b.disable()}},b.prototype.disableAttribs=function(){var a=this._attributesByName;if(a)for(var b=Object.keys(a),c=0,d=b.length;c<d;c++)a[b[c]].disable()},b.prototype.attrib=function(a,b,c,e,f,g){void 0===e&&(e=!1),void 0===f&&(f=0),void 0===g&&(g=0);var h=this.getAttrib(a);return h&&(b.bind(),h.enable(),h.config(c,d["default"].FLOAT,e,f,g)),this},b.prototype.getAttrib=function(a){if("number"==typeof a)return this._attributesByIndex[a];if("string"==typeof a)return this._attributesByName[a];throw new TypeError("indexOrName must be a number or a string")},b.prototype.getAttribLocation=function(a){var b=this._attributesByName[a];return b?b.index:-1},b.prototype.getUniform=function(a){var b=this._uniforms;return b[a]?b[a]:void 0},b.prototype.hasUniform=function(a){return k["default"]("name",a),e["default"](this._uniforms[a])},b.prototype.uniform1f=function(a,b){var c=this.getUniform(a);c&&c.uniform1f(b)},b.prototype.uniform2f=function(a,b,c){var d=this._uniforms[a];d&&d.uniform2f(b,c)},b.prototype.uniform3f=function(a,b,c,d){var e=this._uniforms[a];e&&e.uniform3f(b,c,d)},b.prototype.uniform4f=function(a,b,c,d,e){var f=this._uniforms[a];f&&f.uniform4f(b,c,d,e)},b.prototype.uniform=function(a,b){var c=this._uniforms[a];if(c)if("number"==typeof b)c.uniform1f(b);else if(b)switch(b.length){case 1:c.uniform1f(b[0]);case 2:c.uniform2f(b[0],b[1]);case 3:c.uniform3f(b[0],b[1],b[2]);case 4:c.uniform4f(b[0],b[1],b[2],b[3])}return this},b.prototype.use=function(){var a=this.gl;return a?a.useProgram(this._program):console.warn(this._type+".use() missing WebGL rendering context."),this},b.prototype.matrix2fv=function(a,b,c){void 0===c&&(c=!1);var d=this._uniforms[a];return d&&d.matrix2fv(c,b),this},b.prototype.matrix3fv=function(a,b,c){void 0===c&&(c=!1);var d=this._uniforms[a];return d&&d.matrix3fv(c,b),this},b.prototype.matrix4fv=function(a,b,c){void 0===c&&(c=!1);var d=this._uniforms[a];return d&&d.matrix4fv(c,b),this},b.prototype.vector2fv=function(a,b){var c=this._uniforms[a];c&&c.uniform2fv(b)},b.prototype.vector3fv=function(a,b){var c=this._uniforms[a];c&&c.uniform3fv(b)},b.prototype.vector4fv=function(a,b){var c=this._uniforms[a];c&&c.uniform4fv(b)},b.prototype.drawArrays=function(a,b,c){var d=this.gl;return d&&d.drawArrays(a,b,c),this},b.prototype.drawElements=function(a,b,c,d){var e=this.gl;return e&&e.drawElements(a,b,c,d),this},b}(n.ShareableContextConsumer);b.ShaderMaterial=p});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/materials/HTMLScriptsMaterial",["require","exports","../checks/isString","../checks/mustBeArray","../checks/mustBeObject","../checks/mustBeString","../checks/mustSatisfy","./ShaderMaterial"],function(a,b,c,d,e,g,h,i){"use strict";function j(a,b){var c=b.getElementById(g["default"]("elementId",a));if(c)return c;throw new Error("'"+a+"' is not a valid element identifier.")}function k(a,b){return g["default"]("vsId",a),e["default"]("dom",b),j(a,b).textContent}function l(a,b){return g["default"]("fsId",a),e["default"]("dom",b),j(a,b).textContent}function m(a,b,d){var e=b.getElementById(a);if(e instanceof HTMLScriptElement){var f=e;c["default"](f.type)&&(f.type.indexOf("vertex")>=0?d[0]=a:f.type.indexOf("fragment")>=0&&(d[1]=a)),c["default"](f.textContent)&&(f.textContent.indexOf("gl_Position")>=0?d[0]=a:f.textContent.indexOf("gl_FragColor")>=0&&(d[1]=a))}}function n(a,b){var c=[a[0],a[1]];return m(a[0],b,c),m(a[1],b,c),c}var o=function(a){function b(b,c,e,f,g){void 0===g&&(g=0),a.call(this,void 0,void 0,e,f,g+1),this.loaded=!1,this.setLoggingName("HTMLScriptsMaterial"),d["default"]("scriptIds",b),h["default"]("scriptIds",2===b.length,function(){return"have two script element identifiers."}),this.scriptIds=[b[0],b[1]],this.dom=c,0===g&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b.prototype.contextGain=function(b){if(!this.loaded){var c=n(this.scriptIds,this.dom);this.vertexShaderSrc=k(c[0],this.dom),this.fragmentShaderSrc=l(c[1],this.dom),this.loaded=!0}a.prototype.contextGain.call(this,b)},b}(i.ShaderMaterial);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/core/Engine",["require","exports","./checkEnums","./ClearBufferMask","../commands/EIGHTLogger","../base/DefaultContextProvider","./geometryFromPrimitive","./IndexBuffer","./initWebGL","../checks/isDefined","../checks/mustBeObject","../collections/ShareableArray","./ShareableBase","./Usage","../commands/VersionLogger","./VertexBuffer","../commands/WebGLClearColor","../commands/WebGLEnable","../commands/WebGLDisable","../materials/HTMLScriptsMaterial"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";var v=function(a){function b(b,c,d){var f=this;void 0===d&&(d=window.document),a.call(this),this._users=[],this._commands=new m["default"]([]),this.setLoggingName("Engine"),this._attributes=c,this._commands.pushWeakRef(new e["default"]),this._commands.pushWeakRef(new p["default"]),this._contextProvider=new g["default"](this),this._webGLContextLost=function(a){k["default"](f._gl)&&(a.preventDefault(),f._gl=void 0,f._users.forEach(function(a){a.contextLost()}))},this._webGLContextRestored=function(a){k["default"](f._gl)&&(a.preventDefault(),f._gl=j["default"](f._gl.canvas,c),f._users.forEach(function(a){a.contextGain(f._contextProvider)}))},b&&this.start(b,d)}return f(b,a),b.prototype.destructor=function(b){for(this.stop(),this._contextProvider.release();this._users.length>0;)this._users.pop();this._commands.release(),a.prototype.destructor.call(this,b+1)},b.prototype.addContextListener=function(a){l["default"]("user",a);var b=this._users.indexOf(a);b<0?this._users.push(a):console.warn("user already exists for addContextListener")},b.prototype.array=function(a,b){void 0===b&&(b=o["default"].STATIC_DRAW);var c=new q["default"](this);return a&&c.bufferData(a,b),c},b.prototype.elements=function(a,b){void 0===b&&(b=o["default"].STATIC_DRAW);var c=new i["default"](this);return a&&c.bufferData(a,b),c},Object.defineProperty(b.prototype,"canvas",{get:function(){return this._gl?this._gl.canvas:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"drawingBufferHeight",{get:function(){if(this._gl)return this._gl.drawingBufferHeight},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"drawingBufferWidth",{get:function(){if(this._gl)return this._gl.drawingBufferWidth},enumerable:!0,configurable:!0}),b.prototype.blendFunc=function(a,b){var c=this._gl;return c&&c.blendFunc(a,b),this},b.prototype.clear=function(a){void 0===a&&(a=d["default"].COLOR_BUFFER_BIT|d["default"].DEPTH_BUFFER_BIT);var b=this._gl;return b&&b.clear(a),this},b.prototype.clearColor=function(a,b,c,d){this._commands.pushWeakRef(new r.WebGLClearColor(a,b,c,d));var e=this._gl;return e&&e.clearColor(a,b,c,d),this},b.prototype.clearDepth=function(a){var b=this._gl;return b&&b.clearDepth(a),this},b.prototype.clearStencil=function(a){var b=this._gl;return b&&b.clearStencil(a),this},b.prototype.depthFunc=function(a){var b=this._gl;return b&&b.depthFunc(a),this},b.prototype.depthMask=function(a){var b=this._gl;return b&&b.depthMask(a),this},b.prototype.disable=function(a){return this._commands.pushWeakRef(new t.WebGLDisable(a)),this._gl&&this._gl.disable(a),this},b.prototype.enable=function(a){return this._commands.pushWeakRef(new s.WebGLEnable(a)),this._gl&&this._gl.enable(a),this},Object.defineProperty(b.prototype,"gl",{get:function(){return this._gl?this._gl:void 0},enumerable:!0,configurable:!0}),b.prototype.geometry=function(a){return h["default"](a,this)},b.prototype.material=function(a,b,c){return void 0===c&&(c=window.document),new u["default"]([a,b],c,[],this,0)},b.prototype.readPixels=function(a,b,c,d,e,f,g){this._gl&&this._gl.readPixels(a,b,c,d,e,f,g)},b.prototype.removeContextListener=function(a){l["default"]("user",a);var b=this._users.indexOf(a);b>=0&&this._users.splice(b,1)},b.prototype.size=function(a,b){return this.canvas.width=a,this.canvas.height=b,this.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)},b.prototype.getMaxViewportDims=function(){var a=this._gl;return a?a.getParameter(a.MAX_VIEWPORT_DIMS):void 0},b.prototype.getViewport=function(){var a=this._gl;return a?a.getParameter(a.VIEWPORT):void 0},b.prototype.viewport=function(a,b,c,d){var e=this._gl;return e&&e.viewport(a,b,c,d),this},b.prototype.start=function(a,b){if(void 0===b&&(b=window.document),"string"==typeof a){var d=b.getElementById(a);if(d)return this.start(d,b);throw new Error("canvas argument must be a canvas element id or an HTMLCanvasElement.")}return a instanceof HTMLCanvasElement?k["default"](this._gl)?void console.warn(this._type+" Ignoring start() because already started."):(this._gl=j["default"](a,this._attributes),c["default"](this._gl),this.emitStartEvent(),a.addEventListener("webglcontextlost",this._webGLContextLost,!1),a.addEventListener("webglcontextrestored",this._webGLContextRestored,!1),this):(this._gl=a,this)},b.prototype.stop=function(){return k["default"](this._gl)&&(this._gl.canvas.removeEventListener("webglcontextrestored",this._webGLContextRestored,!1),this._gl.canvas.removeEventListener("webglcontextlost",this._webGLContextLost,!1),this._gl&&(this.emitStopEvent(),this._gl=void 0)),this},b.prototype.emitStartEvent=function(){var a=this;this._users.forEach(function(b){a.emitContextGain(b)}),this._commands.forEach(function(b){a.emitContextGain(b)})},b.prototype.emitContextGain=function(a){this._gl.isContextLost()?a.contextLost():a.contextGain(this._contextProvider)},b.prototype.emitStopEvent=function(){var a=this;this._users.forEach(function(b){a.emitContextFree(b)}),this._commands.forEach(function(b){a.emitContextFree(b)})},b.prototype.emitContextFree=function(a){this._gl.isContextLost()?a.contextLost():a.contextFree(this._contextProvider)},b.prototype.synchronize=function(a){return this._gl&&this.emitContextGain(a),this},b}(n.ShareableBase);b.Engine=v}),b("davinci-eight/facets/AmbientLight",["require","exports","../core/Color","../checks/mustBeNumber","../checks/mustBeObject","../core/GraphicsProgramSymbols"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a){e["default"]("color",a),this.color=c.Color.white.clone(),this.color.r=d["default"]("color.r",a.r),this.color.g=d["default"]("color.g",a.g),this.color.b=d["default"]("color.b",a.b)}return a.prototype.setUniforms=function(a){var b=this.color;a.uniform3f(f["default"].UNIFORM_AMBIENT_LIGHT,b.r,b.g,b.b)},a}();b.AmbientLight=g}),b("davinci-eight/facets/DirectionalLight",["require","exports","../core/Color","../math/Geometric3","../checks/mustBeObject","../core/GraphicsProgramSymbols","../math/Vector3"],function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){void 0===a&&(a=g["default"].vector(0,0,1).neg()),void 0===b&&(b=c.Color.white),e["default"]("direction",a),e["default"]("color",b),this._direction=d.Geometric3.fromVector(a).normalize(),this._color=c.Color.copy(b)}return Object.defineProperty(a.prototype,"color",{get:function(){return this._color},set:function(a){this._color.copy(c.Color.mustBe("color",a))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"direction",{get:function(){return this._direction},set:function(a){e["default"]("direction",a),this._direction.copy(a)},enumerable:!0,configurable:!0}),a.prototype.setColor=function(a){return e["default"]("color",a),this._color.copy(a),this},a.prototype.setDirection=function(a){return e["default"]("direction",a),this._direction.copyVector(a).normalize(),this},a.prototype.setUniforms=function(a){var b=this._direction;a.uniform3f(f["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION,b.x,b.y,b.z);var c=this.color;a.uniform3f(f["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR,c.r,c.g,c.b)},a.PROP_COLOR="color",a.PROP_DIRECTION="direction",a}();b.DirectionalLight=h}),b("davinci-eight/math/add2x2",["require","exports"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[2],f=a[1],g=a[3],h=b[0],i=b[2],j=b[1],k=b[3];return c[0]=d+h,c[2]=e+i,c[1]=f+j,c[3]=g+k,c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/det2x2",["require","exports"],function(a,b){"use strict";function c(a){var b=a[0],c=a[2],d=a[1],e=a[3];return b*e-c*d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Matrix2",["require","exports","../math/AbstractMatrix","../math/add2x2","../math/det2x2","../checks/isDefined","../checks/mustBeInteger","../checks/mustBeNumber"],function(a,b,c,d,e,g,h,i){"use strict";var j=function(a){function b(b){a.call(this,b,2)}return f(b,a),b.prototype.add=function(a){return this.add2(this,a)},b.prototype.add2=function(a,b){return d["default"](a.elements,b.elements,this.elements),this},b.prototype.clone=function(){var a=this.elements,c=a[0],d=a[1],e=a[2],f=a[3];return b.zero().set(c,e,d,f)},b.prototype.det=function(){return e["default"](this.elements)},b.prototype.inv=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=this.det();return this.set(e,-d,-c,b).scale(1/f)},b.prototype.isOne=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3];return 1===b&&0===d&&0===c&&1===e},b.prototype.isZero=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3];return 0===b&&0===d&&0===c&&0===e},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){var c=a.elements,d=c[0],e=c[1],f=c[2],g=c[3],h=b.elements,i=h[0],j=h[1],k=h[2],l=h[3],m=d*i+f*j,n=d*k+f*l,o=e*i+g*j,p=e*k+g*l;return this.set(m,n,o,p)},b.prototype.neg=function(){return this.scale(-1)},b.prototype.one=function(){return this.set(1,0,0,1)},b.prototype.reflection=function(a){var b=i["default"]("n.x",a.x),c=1-2*b*b;return this.set(c,0,0,1)},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[2+a]]},b.prototype.scale=function(a){var b=this.elements,c=b[0]*a,d=b[1]*a,e=b[2]*a,f=b[3]*a;return this.set(c,e,d,f)},b.prototype.set=function(a,b,c,d){var e=this.elements;return e[0]=a,e[2]=b,e[1]=c,e[3]=d,this},b.prototype.sub=function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=a.elements,h=g[0],i=g[1],j=g[2],k=g[3],l=c-h,m=d-i,n=e-j,o=f-k;return this.set(l,n,m,o)},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){g["default"](a)&&h["default"]("fractionDigits",a);for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){g["default"](a)&&h["default"]("precision",a);for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0,d=this.dimensions;c<d;c++)b.push(this.row(c).map(function(b,c){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translation=function(a){var b=a.x;return this.set(1,b,0,1)},b.prototype.zero=function(){return this.set(0,0,0,0)},b.prototype.__add__=function(a){return a instanceof b?this.clone().add(a):void 0},b.prototype.__radd__=function(a){return a instanceof b?a.clone().add(this):void 0},b.prototype.__mul__=function(a){return a instanceof b?this.clone().mul(a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?a.clone().mul(this):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__pos__=function(){return this.clone()},b.prototype.__neg__=function(){return this.clone().scale(-1)},b.prototype.__sub__=function(a){return a instanceof b?this.clone().sub(a):void 0},b.prototype.__rsub__=function(a){return a instanceof b?a.clone().sub(this):void 0},b.one=function(){return new b(new Float32Array([1,0,0,1]))},b.reflection=function(a){return b.zero().reflection(a)},b.zero=function(){return new b(new Float32Array([0,0,0,0]))},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j}),b("davinci-eight/facets/ReflectionFacetE2",["require","exports","../checks/mustBeString","../math/Vector2","../math/Matrix2","../i18n/readOnly"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a){this.matrix=e["default"].one(),this.name=c["default"]("name",a),this._normal=(new d.Vector2).zero(),this._normal.modified=!0}return Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},set:function(a){throw new Error(f["default"]("normal").message)},enumerable:!0,configurable:!0}),a.prototype.setUniforms=function(a){this._normal.modified&&(this.matrix.reflection(this._normal),this._normal.modified=!1),a.matrix2fv(this.name,this.matrix.elements,!1)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/facets/ReflectionFacetE3",["require","exports","../checks/mustBeString","../math/Geometric3","../math/Matrix4","../i18n/readOnly"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a){this.matrix=e["default"].one(),this.name=c["default"]("name",a),this._normal=d.Geometric3.zero(),this._normal.modified=!0}return Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},set:function(a){throw new Error(f["default"]("normal").message)},enumerable:!0,configurable:!0}),a.prototype.setUniforms=function(a){this._normal.modified&&(this.matrix.reflection(this._normal),this._normal.modified=!1),a.matrix4fv(this.name,this.matrix.elements,!1)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/facets/Vector3Facet",["require","exports","../checks/mustBeString","../math/Vector3"],function(a,b,c,d){"use strict";var e=function(){function a(a){this.name=a,this.vector=d["default"].vector(0,0,0),c["default"]("name",a)}return a.prototype.setUniforms=function(a){var b=this.vector;a.uniform3f(this.name,b.x,b.y,b.z)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/facets/viewArrayFromEyeLookUp",["require","exports","../math/Vector3","../checks/mustSatisfy","../checks/isDefined"],function(a,b,c,d,e){"use strict";function f(a,b,f,j){var k=e["default"](j)?j:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);return d["default"]("matrix",16===k.length,function(){return"matrix must have length 16"}),g.copy(a).sub(b),0===g.x&&0===g.y&&0===g.z?g.z=1:g.normalize(),g.approx(12).normalize(),h.copy(f).cross(g).approx(12).normalize(),i.copy(g).cross(h).approx(12).normalize(),k[0]=h.x,k[4]=h.y,k[8]=h.z,k[12]=-c["default"].dot(a,h),k[1]=i.x,k[5]=i.y,k[9]=i.z,k[13]=-c["default"].dot(a,i),k[2]=g.x,k[6]=g.y,k[10]=g.z,k[14]=-c["default"].dot(a,g),k[3]=0,k[7]=0,k[11]=0,k[15]=1,k}var g=new c["default"],h=new c["default"],i=new c["default"];Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/facets/viewMatrixFromEyeLookUp",["require","exports","../checks/isDefined","../math/Matrix4","./viewArrayFromEyeLookUp"],function(a,b,c,d,e){"use strict";function f(a,b,f,g){var h=c["default"](g)?g:d["default"].one();return e["default"](a,b,f,h.elements),h}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/facets/createView",["require","exports","../math/Geometric3","../math/Matrix4","../core/GraphicsProgramSymbols","../checks/isUndefined","./viewMatrixFromEyeLookUp"],function(a,b,c,d,e,f,g){"use strict";function h(a){void 0===a&&(a={});var b=c.Geometric3.vector(0,0,1),h=c.Geometric3.vector(0,0,0),i=c.Geometric3.vector(0,1,0),j=d["default"].one(),k=f["default"](a.viewMatrixName)?e["default"].UNIFORM_VIEW_MATRIX:a.viewMatrixName;b.modified=!0,h.modified=!0,i.modified=!0;var l={get eye(){return b},set eye(a){l.setEye(a)},setEye:function(a){return b.copyVector(a),l},get look(){return h},set look(a){l.setLook(a)},setLook:function(a){return h.copyVector(a),l},get up(){return i},set up(a){l.setUp(a)},setUp:function(a){return i.copyVector(a),i.normalize(),l},setUniforms:function(a){l.updateViewMatrix(),a.matrix4fv(k,j.elements,!1)},updateViewMatrix:function(){(b.modified||h.modified||i.modified)&&(g["default"](b,h,i,j),b.modified=!1,h.modified=!1,i.modified=!1)},get viewMatrix(){return l.updateViewMatrix(),j}};return l}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Vector1",["require","exports","../math/Coords"],function(a,b,c){"use strict";var d=Math.exp,e=Math.log,g=Math.sqrt,h=0,i=function(a){function b(b,c){void 0===b&&(b=[0]),void 0===c&&(c=!1),a.call(this,b,c,1)}return f(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[h]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[h]=a},enumerable:!0,configurable:!0}),b.prototype.set=function(a){return this.x=a,this},b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this},b.prototype.scp=function(a){return this},b.prototype.adj=function(){throw new Error("TODO: Vector1.adj")},b.prototype.applyMatrix=function(a){var b=this.x,c=a.elements;return this.x=c[0]*b,this},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.conj=function(){return this},b.prototype.copy=function(a){return this.x=a.x,this},b.prototype.det=function(){return this.x},b.prototype.dual=function(){return this},b.prototype.exp=function(){return this.x=d(this.x),this},b.prototype.one=function(){return this.x=1,this},b.prototype.inv=function(){return this.x=1/this.x,this},b.prototype.lco=function(a){return this},b.prototype.log=function(){return this.x=e(this.x),this},b.prototype.mul=function(a){return this.x*=a.x,this},b.prototype.norm=function(){return this},b.prototype.div=function(a){return this.x/=a.x,this},b.prototype.divByScalar=function(a){return this.x/=a,this},b.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this},b.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this},b.prototype.floor=function(){return this.x=Math.floor(this.x),this},b.prototype.ceil=function(){return this.x=Math.ceil(this.x),this},b.prototype.rev=function(){return this},b.prototype.rco=function(a){return this},b.prototype.round=function(){return this.x=Math.round(this.x),this},b.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this},b.prototype.scale=function(a){return this.x*=a,this},b.prototype.stress=function(a){return this.x*=a.x,this},b.prototype.sub=function(a){return this.x-=a.x,this},b.prototype.subScalar=function(a){return this.x-=a,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this},b.prototype.neg=function(){return this.x=-this.x,this},b.prototype.distanceTo=function(a){return g(this.quadranceTo(a))},b.prototype.dot=function(a){return this.x*a.x},b.prototype.magnitude=function(){return g(this.squaredNorm())},b.prototype.normalize=function(){return this.divByScalar(this.magnitude())},b.prototype.mul2=function(a,b){return this},b.prototype.quad=function(){var a=this.x;return this.x=a*a,this},b.prototype.squaredNorm=function(){return this.x*this.x},b.prototype.quadranceTo=function(a){var b=this.x-a.x;return b*b},b.prototype.reflect=function(a){return this},b.prototype.reflection=function(a){return this},b.prototype.rotate=function(a){return this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.equals=function(a){return a.x===this.x},b.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this},b.prototype.slerp=function(a,b){return this},b.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a},b.prototype.toExponential=function(a){return"TODO: Vector1.toExponential"},b.prototype.toFixed=function(a){return"TODO: Vector1.toFixed"},b.prototype.toPrecision=function(a){return"TODO: Vector1.toPrecision"},b.prototype.toString=function(a){return"TODO: Vector1.toString"},b.prototype.translation=function(a){return this.one()},b.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this},b.prototype.clone=function(){return new b([this.x])},b.prototype.ext=function(a){return this},b.prototype.zero=function(){return this.x=0,this},b.random=function(){return new b([Math.random()])},b.zero=function(){return new b([0])},b}(c.Coords);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i}),b("davinci-eight/facets/perspectiveMatrix",["require","exports","../checks/isDefined","../math/Matrix4","./perspectiveArray"],function(a,b,c,d,e){"use strict";function f(a,b,f,g,h){var i=c["default"](h)?h:d["default"].one();return e["default"](a,b,f,g,i.elements),i}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/facets/createPerspective",["require","exports","./createView","../math/Matrix4","../core/GraphicsProgramSymbols","../math/Vector1","../checks/isUndefined","../checks/mustBeNumber","./perspectiveMatrix"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){void 0===a&&(a={});var b=new f["default"]([g["default"](a.fov)?75*Math.PI/180:a.fov]),j=new f["default"]([g["default"](a.aspect)?1:a.aspect]),k=new f["default"]([g["default"](a.near)?.1:a.near]),l=new f["default"]([h["default"]("options.far",g["default"](a.far)?2e3:a.far)]),m=g["default"](a.projectionMatrixName)?e["default"].UNIFORM_PROJECTION_MATRIX:a.projectionMatrixName,n=c["default"](a),o=d["default"].one(),p=!0,q={get eye(){return n.eye},set eye(a){n.eye=a},setEye:function(a){return n.setEye(a),q},get look(){return n.look},set look(a){n.look=a},setLook:function(a){return n.setLook(a),q},get up(){return n.up},set up(a){n.up=a},setUp:function(a){return n.setUp(a),q},get fov(){return b.x},set fov(a){q.setFov(a)},setFov:function(a){return h["default"]("fov",a),p=p||b.x!==a,b.x=a,q},get aspect(){return j.x},set aspect(a){q.setAspect(a)},setAspect:function(a){return h["default"]("aspect",a),p=p||j.x!==a,j.x=a,q},get near(){return k.x},set near(a){q.setNear(a)},setNear:function(a){return a!==k.x&&(k.x=a,p=!0),q},get far(){return l.x},set far(a){q.setFar(a)},setFar:function(a){return a!==l.x&&(l.x=a,p=!0),q},setUniforms:function(a){q.updateProjectionMatrix(),a.matrix4fv(m,o.elements,!1),n.setUniforms(a)},get projectionMatrix(){return q.updateProjectionMatrix(),o},updateProjectionMatrix:function(){p&&(i["default"](b.x,j.x,k.x,l.x,o),p=!1)},updateViewMatrix:function(){n.updateViewMatrix()},get viewMatrix(){return n.viewMatrix},set viewMatrix(a){n.viewMatrix=a}};return q}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j}),b("davinci-eight/facets/PerspectiveCamera",["require","exports","./createPerspective","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNumber"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b,g,h){void 0===a&&(a=45*Math.PI/180),void 0===b&&(b=1),void 0===g&&(g=.1),void 0===h&&(h=1e3),f["default"]("fov",a),d["default"]("fov",a,0),e["default"]("fov",a,Math.PI),f["default"]("aspect",b),d["default"]("aspect",b,0),f["default"]("near",g),d["default"]("near",g,0),f["default"]("far",h),d["default"]("far",h,0),this.inner=c["default"]({fov:a,aspect:b,near:g,far:h})}return a.prototype.setUniforms=function(a){this.inner.setNear(this.near),this.inner.setFar(this.far),this.inner.setUniforms(a)},Object.defineProperty(a.prototype,"aspect",{get:function(){return this.inner.aspect},set:function(a){this.inner.aspect=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"eye",{get:function(){return this.inner.eye},set:function(a){this.inner.eye.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fov",{get:function(){return this.inner.fov},set:function(a){this.inner.fov=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"look",{get:function(){return this.inner.look},set:function(a){this.inner.look.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"near",{get:function(){return this.inner.near},set:function(a){this.inner.near=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"far",{get:function(){return this.inner.far},set:function(a){this.inner.far=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"up",{get:function(){return this.inner.up},set:function(a){this.inner.up.copyVector(a)},enumerable:!0,configurable:!0}),a;
}();b.PerspectiveCamera=g}),b("davinci-eight/math/dotVectorE2",["require","exports","../checks/isDefined"],function(a,b,c){"use strict";function d(a,b){return c["default"](a)&&c["default"](b)?a.x*b.x+a.y*b.y:void 0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/math/extE2",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e);break;case 1:j=+(a*f+b*e);break;case 2:j=+(a*g+c*e);break;case 3:j=+(a*h+b*g-c*f+d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/lcoE2",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(a*f-c*h);break;case 2:j=+(a*g+b*h);break;case 3:j=+(a*h);break;default:throw new Error("index must be in the range [0..3]")}return+j}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/mulE2",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(a*f+b*e-c*h+d*g);break;case 2:j=+(a*g+b*h+c*e-d*f);break;case 3:j=+(a*h+b*g-c*f+d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/rcoE2",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(-b*e-d*g);break;case 2:j=+(-c*e+d*f);break;case 3:j=+(d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/dotVectorCartesianE2",["require","exports"],function(a,b){"use strict";function c(a,b,c,d){return a*c+b*d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/math/quadVectorE2",["require","exports","../math/dotVectorCartesianE2","../checks/isDefined","../checks/isNumber"],function(a,b,c,d,e){"use strict";function f(a){if(d["default"](a)){var b=a.x,f=a.y;return e["default"](b)&&e["default"](f)?c["default"](b,f,b,f):void 0}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/math/rotorFromDirectionsE2",["require","exports","./dotVectorE2","./quadVectorE2"],function(a,b,c,d){"use strict";function e(a,b,e){var g=d["default"](a),h=f(g),i=d["default"](b),j=f(i),k=j*h,l=c["default"](b,a),m=f(2*(i*g+k*l));0!==m&&(e=e.versor(b,a),e=e.addScalar(k),e=e.divByScalar(m))}var f=Math.sqrt;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/math/scpE2",["require","exports"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){switch(i){case 0:return a*e+b*f+c*g-d*h;case 1:return 0;case 2:return 0;case 3:return 0;default:throw new Error("index must be in the range [0..3]")}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Geometric2",["require","exports","./arraysEQ","../geometries/b2","../geometries/b3","./Coords","./dotVectorE2","./extE2","./gauss","../checks/isDefined","../checks/isNumber","../checks/isObject","./lcoE2","./mulE2","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../i18n/notImplemented","../i18n/notSupported","./rcoE2","./rotorFromDirectionsE2","./scpE2","./stringFromCoordinates","./wedgeXY"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){"use strict";function z(a){return[a.a,a.x,a.y,a.b]}function A(a){if(m["default"](a)){var b=a;return l["default"](b.x)&&l["default"](b.y)?l["default"](b.a)&&l["default"](b.b)?(console.warn("Copying GeometricE2 to Geometric2"),V.copy(b)):(console.warn("Copying VectorE2 to Geometric2"),V.fromVector(b)):l["default"](b.a)&&l["default"](b.b)?(console.warn("Copying SpinorE2 to Geometric2"),V.fromSpinor(b)):void 0}}var B=0,C=1,D=2,E=3,F=Math.abs,G=Math.atan2,H=Math.exp,I=Math.log,J=Math.cos,K=Math.sin,L=Math.sqrt,M="←",N="→",O="↑",P="↓",Q="↻",R="↺",S=["1",[M,N],[P,O],[Q,R]],T=["1",["W","E"],["S","N"],[Q,R]],U=["1","e1","e2","I"],V=function(a){function b(){a.call(this,[0,0,0,0],!1,4)}return f(b,a),Object.defineProperty(b.prototype,"a",{get:function(){return this.coords[B]},set:function(a){this.modified=this.modified||this.coords[B]!==a,this.coords[B]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[C]},set:function(a){this.modified=this.modified||this.coords[C]!==a,this.coords[C]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[D]},set:function(a){this.modified=this.modified||this.coords[D]!==a,this.coords[D]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this.coords[E]},set:function(a){this.modified=this.modified||this.coords[E]!==a,this.coords[E]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"xy",{get:function(){return this.coords[E]},set:function(a){this.modified=this.modified||this.coords[E]!==a,this.coords[E]=a},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){return void 0===b&&(b=1),r["default"]("M",a),q["default"]("α",b),this.a+=a.a*b,this.x+=a.x*b,this.y+=a.y*b,this.b+=a.b*b,this},b.prototype.add2=function(a,b){return r["default"]("a",a),r["default"]("b",b),this.a=a.a+b.a,this.x=a.x+b.x,this.y=a.y+b.y,this.b=a.b+b.b,this},b.prototype.addPseudo=function(a){return q["default"]("β",a),this.b+=a,this},b.prototype.addScalar=function(a){return q["default"]("α",a),this.a+=a,this},b.prototype.addVector=function(a,b){return void 0===b&&(b=1),r["default"]("v",a),q["default"]("α",b),this.x+=a.x*b,this.y+=a.y*b,this},b.prototype.adj=function(){throw new Error(s["default"]("adj").message)},b.prototype.angle=function(){return this.log().grade(2)},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.clone=function(){var a=new b;return a.copy(this),a},b.prototype.conj=function(){return this.b=-this.b,this},b.prototype.cos=function(){throw new Error(s["default"]("cos").message)},b.prototype.cosh=function(){throw new Error(s["default"]("cosh").message)},b.prototype.distanceTo=function(a){var b=this.a-a.a,c=this.x-a.x,d=this.y-a.y,e=this.b-a.b;return Math.sqrt(w["default"](b,c,d,e,b,c,d,e,0))},b.prototype.copy=function(a){return r["default"]("M",a),this.a=a.a,this.x=a.x,this.y=a.y,this.b=a.b,this},b.prototype.copyScalar=function(a){return this.zero().addScalar(a)},b.prototype.copySpinor=function(a){return r["default"]("spinor",a),this.a=a.a,this.x=0,this.y=0,this.b=a.b,this},b.prototype.copyVector=function(a){return r["default"]("vector",a),this.a=0,this.x=a.x,this.y=a.y,this.b=0,this},b.prototype.cubicBezier=function(a,b,c,d){var f=e["default"](a,this.a,b.a,c.a,d.a),g=e["default"](a,this.x,b.x,c.x,d.x),h=e["default"](a,this.y,b.y,c.y,d.y),i=e["default"](a,this.b,b.b,c.b,d.b);return this.a=f,this.x=g,this.y=h,this.b=i,this},b.prototype.normalize=function(){var a=this.magnitude();return this.a=this.a/a,this.x=this.x/a,this.y=this.y/a,this.b=this.b/a,this},b.prototype.div=function(a){return this.div2(this,a)},b.prototype.div2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b;this.copy(b).inv();var g=this.a,h=this.x,i=this.y,j=this.b;return this.a=o["default"](c,d,e,f,g,h,i,j,0),this.x=o["default"](c,d,e,f,g,h,i,j,1),this.y=o["default"](c,d,e,f,g,h,i,j,2),this.b=o["default"](c,d,e,f,g,h,i,j,3),this},b.prototype.divByScalar=function(a){return q["default"]("α",a),this.a/=a,this.x/=a,this.y/=a,this.b/=a,this},b.prototype.dual=function(a){var b=-a.b,c=+a.y,d=-a.x,e=+a.a;return this.a=b,this.x=c,this.y=d,this.b=e,this},b.prototype.equals=function(a){if(a instanceof b){var d=a;return c["default"](this.coords,d.coords)}return!1},b.prototype.exp=function(){var a=this.a,b=this.b,c=H(a),d=L(b*b),e=c*(0!==d?K(d)/d:1);return this.a=c*J(d),this.b=b*e,this},b.prototype.ext=function(a){return this.ext2(this,a)},b.prototype.ext2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,j=b.y,k=b.b;return this.a=i["default"](c,d,e,f,g,h,j,k,0),this.x=i["default"](c,d,e,f,g,h,j,k,1),this.y=i["default"](c,d,e,f,g,h,j,k,2),this.b=i["default"](c,d,e,f,g,h,j,k,3),this},b.prototype.inv=function(){var a=this.a,b=this.x,c=this.y,d=this.b,e=[[a,b,c,-d],[b,a,d,-c],[c,-d,a,b],[d,-c,b,a]],f=[1,0,0,0],g=j["default"](e,f);return this.a=g[0],this.x=g[1],this.y=g[2],this.b=g[3],this},b.prototype.isOne=function(){return 1===this.a&&0===this.x&&0===this.y&&0===this.b},b.prototype.isZero=function(){return 0===this.a&&0===this.x&&0===this.y&&0===this.b},b.prototype.lco=function(a){return this.lco2(this,a)},b.prototype.lco2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=n["default"](c,d,e,f,g,h,i,j,0),this.x=n["default"](c,d,e,f,g,h,i,j,1),this.y=n["default"](c,d,e,f,g,h,i,j,2),this.b=n["default"](c,d,e,f,g,h,i,j,3),this},b.prototype.lerp=function(a,b){return r["default"]("target",a),q["default"]("α",b),this.a+=(a.a-this.a)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.b+=(a.b-this.b)*b,this},b.prototype.lerp2=function(a,b,c){return r["default"]("a",a),r["default"]("b",b),q["default"]("α",c),this.copy(a).lerp(b,c),this},b.prototype.log=function(){var a=this.a,b=this.b;return this.a=I(L(a*a+b*b)),this.x=0,this.y=0,this.b=G(b,a),this},b.prototype.magnitude=function(){return L(this.squaredNormSansUnits())},b.prototype.magnitudeSansUnits=function(){return L(this.squaredNormSansUnits())},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=o["default"](c,d,e,f,g,h,i,j,0),this.x=o["default"](c,d,e,f,g,h,i,j,1),this.y=o["default"](c,d,e,f,g,h,i,j,2),this.b=o["default"](c,d,e,f,g,h,i,j,3),this},b.prototype.neg=function(){return this.a=-this.a,this.x=-this.x,this.y=-this.y,this.b=-this.b,this},b.prototype.norm=function(){return this.a=this.magnitudeSansUnits(),this.x=0,this.y=0,this.b=0,this},b.prototype.one=function(){return this.a=1,this.x=0,this.y=0,this.b=0,this},b.prototype.pow=function(a){throw new Error(s["default"]("pow").message)},b.prototype.quad=function(){return this.a=this.squaredNormSansUnits(),this.x=0,this.y=0,this.b=0,this},b.prototype.quadraticBezier=function(a,b,c){var e=d["default"](a,this.a,b.a,c.a),f=d["default"](a,this.x,b.x,c.x),g=d["default"](a,this.y,b.y,c.y),h=d["default"](a,this.b,b.b,c.b);return this.a=e,this.x=f,this.y=g,this.b=h,this},b.prototype.rco=function(a){return this.rco2(this,a)},b.prototype.rco2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=u["default"](c,d,e,f,g,h,i,j,0),this.x=u["default"](c,d,e,f,g,h,i,j,1),this.y=u["default"](c,d,e,f,g,h,i,j,2),this.b=u["default"](c,d,e,f,g,h,i,j,3),this},b.prototype.reflect=function(a){r["default"]("n",a);var b=a.x,c=a.y;q["default"]("n.x",b),q["default"]("n.y",c);var d=this.x,e=this.y,f=b*b-c*c,g=-2*b*c;return this.a=-this.a,this.x=g*e-f*d,this.y=g*d+f*e,this.b=+this.b,this},b.prototype.rev=function(){return this.a=this.a,this.x=this.x,this.y=this.y,this.b=-this.b,this},b.prototype.sin=function(){throw new Error(s["default"]("sin").message)},b.prototype.sinh=function(){throw new Error(s["default"]("sinh").message)},b.prototype.rotate=function(a){r["default"]("R",a);var b=this.x,c=this.y,d=a.b,e=a.a,f=e*b+d*c,g=e*c-d*b;return this.x=f*e+g*d,this.y=g*e-f*d,this},b.prototype.rotorFromDirections=function(a,b){return v["default"](a,b,this),this},b.prototype.rotorFromVectorToVector=function(a,b){return v["default"](a,b,this),this},b.prototype.rotorFromGeneratorAngle=function(a,b){r["default"]("B",a),q["default"]("θ",b);var c=a.b,d=b/2;return this.a=J(F(c)*d),this.x=0,this.y=0,this.b=-K(c*d),this},b.prototype.scp=function(a){return this.scp2(this,a)},b.prototype.scp2=function(a,b){return this.a=w["default"](a.a,a.x,a.y,a.b,b.a,b.x,b.y,b.b,0),this.x=0,this.y=0,this.b=0,this},b.prototype.scale=function(a){return q["default"]("α",a),this.a*=a,this.x*=a,this.y*=a,this.b*=a,this},b.prototype.slerp=function(a,b){throw new Error(s["default"]("slerp").message)},b.prototype.stress=function(a){throw new Error(t["default"]("stress").message)},b.prototype.versor=function(a,b){var c=a.x,d=a.y,e=b.x,f=b.y;return this.a=h["default"](a,b),this.x=0,this.y=0,this.b=y["default"](c,d,0,e,f,0),this},b.prototype.squaredNorm=function(){return this.squaredNormSansUnits()},b.prototype.squaredNormSansUnits=function(){var a=this.a,b=this.x,c=this.y,d=this.b;return a*a+b*b+c*c+d*d},b.prototype.sub=function(a,b){return void 0===b&&(b=1),r["default"]("M",a),q["default"]("α",b),this.a-=a.a*b,this.x-=a.x*b,this.y-=a.y*b,this.b-=a.b*b,this},b.prototype.sub2=function(a,b){return r["default"]("a",a),r["default"]("b",b),this.a=a.a-b.a,this.x=a.x-b.x,this.y=a.y-b.y,this.b=a.b-b.b,this},b.prototype.toExponential=function(a){var c=function(b){return b.toExponential(a)};return x["default"](z(this),c,b.BASIS_LABELS)},b.prototype.toFixed=function(a){var c=function(b){return b.toFixed(a)};return x["default"](z(this),c,b.BASIS_LABELS)},b.prototype.toPrecision=function(a){var c=function(b){return b.toPrecision(a)};return x["default"](z(this),c,b.BASIS_LABELS)},b.prototype.toString=function(a){var c=function(b){return b.toString(a)};return x["default"](z(this),c,b.BASIS_LABELS)},b.prototype.grade=function(a){switch(p["default"]("grade",a),a){case 0:this.x=0,this.y=0,this.b=0;break;case 1:this.a=0,this.b=0;break;case 2:this.a=0,this.x=0,this.y=0;break;default:this.a=0,this.x=0,this.y=0,this.b=0}return this},b.prototype.zero=function(){return this.a=0,this.x=0,this.y=0,this.b=0,this},b.prototype.__add__=function(a){if(a instanceof b)return b.copy(this).add(a);if("number"==typeof a)return b.scalar(a).add(this);var c=A(a);return c?c.add(this):void 0},b.prototype.__div__=function(a){return a instanceof b?b.copy(this).div(a):"number"==typeof a?b.copy(this).divByScalar(a):void 0},b.prototype.__rdiv__=function(a){return a instanceof b?b.copy(a).div(this):"number"==typeof a?b.scalar(a).div(this):void 0},b.prototype.__mul__=function(a){if(a instanceof b)return b.copy(this).mul(a);if("number"==typeof a)return b.copy(this).scale(a);var c=A(a);return c?this.__mul__(c):void 0},b.prototype.__rmul__=function(a){if(a instanceof b)return b.copy(a).mul(this);if("number"==typeof a)return b.copy(this).scale(a);var c=A(a);return c?c.mul(this):void 0},b.prototype.__radd__=function(a){if(a instanceof b)return b.copy(a).add(this);if("number"==typeof a)return b.scalar(a).add(this);var c=A(a);return c?c.add(this):void 0},b.prototype.__sub__=function(a){return a instanceof b?b.copy(this).sub(a):"number"==typeof a?b.scalar(-a).add(this):void 0},b.prototype.__rsub__=function(a){return a instanceof b?b.copy(a).sub(this):"number"==typeof a?b.scalar(a).sub(this):void 0},b.prototype.__wedge__=function(a){return a instanceof b?b.copy(this).ext(a):"number"==typeof a?b.copy(this).scale(a):void 0},b.prototype.__rwedge__=function(a){return a instanceof b?b.copy(a).ext(this):"number"==typeof a?b.copy(this).scale(a):void 0},b.prototype.__lshift__=function(a){return a instanceof b?b.copy(this).lco(a):"number"==typeof a?b.copy(this).lco(b.scalar(a)):void 0},b.prototype.__rlshift__=function(a){return a instanceof b?b.copy(a).lco(this):"number"==typeof a?b.scalar(a).lco(this):void 0},b.prototype.__rshift__=function(a){return a instanceof b?b.copy(this).rco(a):"number"==typeof a?b.copy(this).rco(b.scalar(a)):void 0},b.prototype.__rrshift__=function(a){return a instanceof b?b.copy(a).rco(this):"number"==typeof a?b.scalar(a).rco(this):void 0},b.prototype.__vbar__=function(a){return a instanceof b?b.copy(this).scp(a):"number"==typeof a?b.copy(this).scp(b.scalar(a)):void 0},b.prototype.__rvbar__=function(a){return a instanceof b?b.copy(a).scp(this):"number"==typeof a?b.scalar(a).scp(this):void 0},b.prototype.__bang__=function(){return b.copy(this).inv()},b.prototype.__tilde__=function(){return b.copy(this).rev()},b.prototype.__pos__=function(){return b.copy(this)},b.prototype.__neg__=function(){return b.copy(this).neg()},b.copy=function(a){var c=new b;return c.a=a.a,c.x=a.x,c.y=a.y,c.b=a.b,c},b.e1=function(){return b.vector(1,0)},b.e2=function(){return b.vector(0,1)},b.fromCartesian=function(a,c,d,e){var f=new b;return f.a=a,f.x=c,f.y=d,f.b=e,f},b.fromBivector=function(a){return b.fromCartesian(0,0,0,a.b)},b.fromSpinor=function(a){return(new b).copySpinor(a)},b.fromVector=function(a){return k["default"](a)?(new b).copyVector(a):void 0},b.I=function(){return b.pseudo(1)},b.lerp=function(a,c,d){return b.copy(a).lerp(c,d)},b.one=function(){return b.scalar(1)},b.rotorFromDirections=function(a,c){return(new b).rotorFromDirections(a,c)},b.pseudo=function(a){return b.fromCartesian(0,0,0,a)},b.scalar=function(a){return b.fromCartesian(a,0,0,0)},b.vector=function(a,c){return b.fromCartesian(0,a,c,0)},b.zero=function(){return b.scalar(0)},b.BASIS_LABELS=U,b.BASIS_LABELS_COMPASS=T,b.BASIS_LABELS_GEOMETRIC=S,b.BASIS_LABELS_STANDARD=U,b}(g.Coords);b.Geometric2=V}),b("davinci-eight/facets/ModelE2",["require","exports","../math/Geometric2"],function(a,b,c){"use strict";var d=function(){function a(){this._position=(new c.Geometric2).zero(),this._attitude=(new c.Geometric2).zero().addScalar(1),this._position.modified=!0,this._attitude.modified=!0}return Object.defineProperty(a.prototype,"R",{get:function(){return this._attitude},set:function(a){this._attitude.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"X",{get:function(){return this._position},set:function(a){this._position.copy(a)},enumerable:!0,configurable:!0}),a.PROP_ATTITUDE="R",a.PROP_POSITION="X",a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/atoms/DrawAttribute",["require","exports"],function(a,b){"use strict";function c(a){return!0}function d(a){if(!c(a))throw new Error("values must be a number[]");return a}function e(a,b){return a%b===0}function f(a,b){if("number"!=typeof a)throw new Error("size must be a number");if(!e(b.length,a))throw new Error("values.length must be an exact multiple of size");return a}var g=function(){function a(a,b,c){this.values=d(a),this.size=f(b,a),this.type=c}return a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/atoms/DrawPrimitive",["require","exports","../checks/mustBeArray","../checks/mustBeInteger","../checks/mustBeObject"],function(a,b,c,d,e){"use strict";var f=function(){return"DrawPrimitive constructor"},g=function(){function a(a,b,g){this.attributes={},this.mode=d["default"]("mode",a,f),this.indices=c["default"]("indices",b,f),this.attributes=e["default"]("attributes",g,f)}return a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/atoms/reduce",["require","exports","../core/BeginMode"],function(a,b,c){"use strict";function d(a,b,c){if(a.indices)for(var d=a.indices.length,e=0;e<d;e++)b.push(a.indices[e]+c)}function e(a){return a.reduce(function(a,b){return a>b?a:b})}function f(a,b,c){if(a.indices){var d=a.indices[a.indices.length-1];if(b.indices){var f=b.indices[0]+e(a.indices)+1;c.push(d),c.push(f)}}}function g(a,b,c,d){return a[b]||(a[b]={values:[],size:c,type:d}),a[b]}function h(a,b){for(var c=Object.keys(a.attributes),d=c.length,e=0;e<d;e++)for(var f=c[e],h=a.attributes[f],i=g(b,f,h.size,h.type),j=h.values,k=j.length,l=0;l<k;l++)i.values.push(j[l])}function i(a){return a.reduce(function(a,b){var g=[];d(a,g,0),f(a,b,g),d(b,g,e(a.indices)+1);var i={};return h(a,i),h(b,i),{mode:c["default"].TRIANGLE_STRIP,indices:g,attributes:i}})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i}),b("davinci-eight/atoms/Vertex",["require","exports","../math/Coords","../checks/mustBeGE","../checks/mustBeInteger"],function(a,b,c,d,e){"use strict";function f(a,b){return b?a+b.toString():a}function g(a){var b=a.attributes,c=Object.keys(b).map(function(a){var c=b[a];return f(a,c)}).join(" ");return c}var h=function(){function a(a){this.attributes={},e["default"]("numCoordinates",a),d["default"]("numCoordinates",a,0);for(var b=[],f=0;f<a;f++)b.push(0);this.coords=new c.Coords(b,(!1),a)}return a.prototype.toString=function(){return g(this)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h}),b("davinci-eight/shapes/ShapeBuilder",["require","exports","../math/Geometric3","../math/Vector3"],function(a,b,c,d){"use strict";var e=function(){function a(){this.stress=d["default"].vector(1,1,1),this.tilt=c.Geometric3.one(),this.offset=d["default"].zero(),this.transforms=[],this.useNormal=!0,this.usePosition=!0,this.useTextureCoord=!1}return a.prototype.applyTransforms=function(a,b,c,d,e){for(var f=this.transforms.length,g=0;g<f;g++)this.transforms[g].exec(a,b,c,d,e)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/shapes/AxialShapeBuilder",["require","exports","./ShapeBuilder"],function(a,b,c){"use strict";var d=function(a){function b(){a.call(this),this.sliceAngle=2*Math.PI}return f(b,a),b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/math/quadSpinorE2",["require","exports","../checks/isDefined","../checks/isNumber"],function(a,b,c,d){"use strict";function e(a){if(c["default"](a)){var b=a.a,e=a.b;return d["default"](b)&&d["default"](e)?b*b+e*e:void 0}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Spinor2",["require","exports","../math/Coords","../math/dotVectorCartesianE2","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../i18n/notSupported","../math/quadSpinorE2","../math/rotorFromDirectionsE2","../math/wedgeXY"],function(a,b,c,d,e,g,h,i,j,k,l){"use strict";function m(){var a=[0,0];return a[n]=1,a[o]=0,a}var n=1,o=0,p=Math.abs,q=Math.atan2,r=Math.log,s=Math.cos,t=Math.sin,u=Math.sqrt,v=function(a){function b(b,c){void 0===b&&(b=m()),void 0===c&&(c=!1),a.call(this,b,c,2)}return f(b,a),Object.defineProperty(b.prototype,"xy",{get:function(){return this.coords[o]},set:function(a){g["default"]("xy",a),this.modified=this.modified||this.xy!==a,this.coords[o]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"a",{get:function(){return this.coords[n]},set:function(a){g["default"]("α",a),this.modified=this.modified||this.a!==a,this.coords[n]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this.coords[o]},set:function(a){g["default"]("b",a),this.modified=this.modified||this.b!==a,this.coords[o]=a},enumerable:!0,configurable:!0}),b.prototype.add=function(a,b){return void 0===b&&(b=1),h["default"]("spinor",a),g["default"]("α",b),this.xy+=a.b*b,this.a+=a.a*b,this},b.prototype.add2=function(a,b){return this.a=a.a+b.a,this.xy=a.b+b.b,this},b.prototype.addPseudo=function(a){return g["default"]("β",a),this},b.prototype.addScalar=function(a){return g["default"]("α",a),this.a+=a,this},b.prototype.adj=function(){throw new Error("TODO: Spinor2.adj")},b.prototype.angle=function(){return this.log().grade(2)},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.clone=function(){var a=b.copy(this);return a.modified=this.modified,a},b.prototype.conj=function(){return this.xy=-this.xy,this},b.prototype.copy=function(a){return h["default"]("spinor",a),this.xy=g["default"]("spinor.b",a.b),this.a=g["default"]("spinor.a",a.a),this},b.prototype.copyScalar=function(a){return this.zero().addScalar(a)},b.prototype.copySpinor=function(a){return this.copy(a)},b.prototype.copyVector=function(a){return this.zero()},b.prototype.cos=function(){throw new Error("Spinor2.cos")},b.prototype.cosh=function(){throw new Error("Spinor2.cosh")},b.prototype.div=function(a){return this.div2(this,a)},b.prototype.div2=function(a,b){var c=a.a,d=a.b,e=b.a,f=b.b,g=j["default"](b);return this.a=(c*e+d*f)/g,this.xy=(d*e-c*f)/g,this},b.prototype.divByScalar=function(a){return this.xy/=a,this.a/=a,this},b.prototype.exp=function(){var a=this.a,b=this.b,c=Math.exp(a),d=u(b*b),e=c*(0!==d?t(d)/d:1);return this.a=c*s(d),this.b=b*e,this},b.prototype.inv=function(){return this.conj(),this.divByScalar(this.squaredNormSansUnits()),this},b.prototype.isOne=function(){return 1===this.a&&0===this.b},b.prototype.isZero=function(){return 0===this.a&&0===this.b},b.prototype.lco=function(a){return this.lco2(this,a)},b.prototype.lco2=function(a,b){return this},b.prototype.lerp=function(a,c){var d=b.copy(a),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(c),f.exp(),this.copy(f),this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.log=function(){var a=this.a,b=this.xy,c=b*b,d=u(c),e=p(a),f=u(a*a+c);this.a=r(f);var g=q(d,e)/d;return this.xy=b*g,this},b.prototype.magnitude=function(){return u(this.squaredNormSansUnits())},b.prototype.magnitudeSansUnits=function(){return u(this.squaredNormSansUnits())},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){var c=a.a,d=a.b,e=b.a,f=b.b;return this.a=c*e-d*f,this.xy=c*f+d*e,this},b.prototype.neg=function(){return this.a=-this.a,this.xy=-this.xy,this},b.prototype.norm=function(){var a=this.magnitudeSansUnits();return this.zero().addScalar(a)},b.prototype.normalize=function(){var a=this.magnitudeSansUnits();return this.xy=this.xy/a,this.a=this.a/a,this},b.prototype.one=function(){return this.a=1,this.xy=0,this},b.prototype.pow=function(){throw new Error("Spinor2.pow")},b.prototype.quad=function(){var a=this.squaredNormSansUnits();return this.zero().addScalar(a)},b.prototype.sin=function(){throw new Error("Spinor2.sin")},b.prototype.sinh=function(){throw new Error("Spinor2.sinh")},b.prototype.squaredNorm=function(){return this.squaredNormSansUnits()},b.prototype.squaredNormSansUnits=function(){return j["default"](this)},b.prototype.rco=function(a){return this.rco2(this,a)},b.prototype.rco2=function(a,b){return this},b.prototype.rev=function(){return this.xy*=-1,this},b.prototype.reflect=function(a){var b=this.a,c=this.xy,d=a.x,e=a.y,f=d*d+e*e;return this.a=f*b,this.xy=-f*c,this},b.prototype.rotate=function(a){return console.warn("Spinor2.rotate is not implemented"),this},b.prototype.rotorFromDirections=function(a,b){return k["default"](a,b,this),this},b.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=t(c);return this.xy=-a.b*d,this.a=s(c),this},b.prototype.rotorFromVectorToVector=function(a,b){return k["default"](a,b,this),this},b.prototype.scp=function(a){return this.scp2(this,a)},b.prototype.scp2=function(a,b){return this},b.prototype.scale=function(a){return g["default"]("α",a),this.xy*=a,this.a*=a,this},b.prototype.slerp=function(a,c){var d=b.copy(a),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(c),f.exp(),this.copy(f),this},b.prototype.stress=function(a){throw new Error(i["default"]("stress").message)},b.prototype.sub=function(a,b){return void 0===b&&(b=1),h["default"]("s",a),g["default"]("α",b),this.xy-=a.b*b,this.a-=a.a*b,this},b.prototype.sub2=function(a,b){return this.xy=a.b-b.b,this.a=a.a-b.a,this},b.prototype.versor=function(a,b){var c=a.x,e=a.y,f=b.x,g=b.y;return this.a=d["default"](c,e,f,g),this.xy=l["default"](c,e,0,f,g,0),this},b.prototype.grade=function(a){switch(e["default"]("grade",a),a){case 0:this.xy=0;break;case 2:this.a=0;break;default:this.a=0,this.xy=0}return this},b.prototype.toExponential=function(a){return this.toString()},b.prototype.toFixed=function(a){return this.toString()},b.prototype.toPrecision=function(a){return this.toString()},b.prototype.toString=function(a){return"Spinor2({β: "+this.xy+", w: "+this.a+"})"},b.prototype.ext=function(a){return this.ext2(this,a)},b.prototype.ext2=function(a,b){return this},b.prototype.zero=function(){return this.a=0,this.xy=0,this},b.copy=function(a){return(new b).copy(a)},b.fromBivector=function(a){return(new b).zero().addPseudo(a.b)},b.lerp=function(a,c,d){return b.copy(a).lerp(c,d)},b.one=function(){return b.zero().addScalar(1)},b.rotorFromDirections=function(a,c){return(new b).rotorFromDirections(a,c)},b.zero=function(){return new b([0,0],(!1))},b}(c.Coords);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=v}),b("davinci-eight/transforms/Approximation",["require","exports","../checks/mustBeNumber","../math/Coords","../math/Geometric2","../math/Geometric3","../math/Spinor2","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=function(){function a(a,b){this.n=c["default"]("n",a),this.names=b}return a.prototype.exec=function(a,b,c,k,l){for(var m=this.names.length,n=0;n<m;n++){var o=this.names[n],p=a.attributes[o];if(p instanceof d.Coords)p.approx(this.n);else if(p instanceof j["default"])p.approx(this.n);else if(p instanceof h["default"])p.approx(this.n);else if(p instanceof i.Vector2)p.approx(this.n);else if(p instanceof g["default"])p.approx(this.n);else if(p instanceof e.Geometric2)p.approx(this.n);else{if(!(p instanceof f.Geometric3))throw new Error("Expecting "+o+" to be a VectorN");p.approx(this.n)}}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=k}),b("davinci-eight/transforms/Direction",["require","exports","../checks/mustBeString","../math/Geometric2","../math/Geometric3","../math/Spinor2","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(){function a(a){this.sourceName=c["default"]("sourceName",a)}return a.prototype.exec=function(a,b,c,j,k){var l=a.attributes[this.sourceName];if(!l)throw new Error("Vertex attribute "+this.sourceName+" was not found");if(l instanceof i["default"])a.attributes[this.sourceName]=l.normalize();else if(l instanceof g["default"])a.attributes[this.sourceName]=l.normalize();else if(l instanceof h.Vector2)a.attributes[this.sourceName]=l.normalize();else if(l instanceof f["default"])a.attributes[this.sourceName]=l.normalize();else if(l instanceof e.Geometric3)a.attributes[this.sourceName]=l.normalize();else{if(!(l instanceof d.Geometric2))throw new Error("Expecting "+this.sourceName+" to be a Vector, Spinor, or Geometric");a.attributes[this.sourceName]=l.normalize()}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j}),b("davinci-eight/transforms/Duality",["require","exports","../checks/mustBeBoolean","../checks/mustBeString","../i18n/notImplemented","../math/Spinor2","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(){function a(a,b,e,f){this.sourceName=d["default"]("sourceName",a),this.outputName=d["default"]("outputName",b),this.changeSign=c["default"]("changeSign",e),this.removeSource=c["default"]("removeSource",f)}return a.prototype.exec=function(a,b,c,d,j){var k=a.attributes[this.sourceName];if(!k)throw new Error("Vertex attribute "+this.sourceName+" was not found");if(k instanceof i["default"]){var l=g["default"].dual(k,this.changeSign);a.attributes[this.outputName]=l}else{if(!(k instanceof g["default"]))throw k instanceof h.Vector2?new Error(e["default"]("dual(vector: Vector2)").message):k instanceof f["default"]?new Error(e["default"]("dual(spinor: Spinor2)").message):new Error("Expecting "+this.sourceName+" to be a Vector3 or Spinor");var m=i["default"].dual(k,this.changeSign);
a.attributes[this.outputName]=m}this.removeSource&&delete a.attributes[this.sourceName]},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j}),b("davinci-eight/geometries/dataFromVectorN",["require","exports","../math/Geometric2","../math/Geometric3","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,f){"use strict";function g(a){if(a instanceof d.Geometric3){var b=a;return[b.x,b.y,b.z]}if(a instanceof c.Geometric2){var g=a;return[g.x,g.y]}if(a instanceof f["default"]){var h=a;return[h.x,h.y,h.z]}if(a instanceof e.Vector2){var i=a;return[i.x,i.y]}return a.coords}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/atoms/GeometryPrimitive",["require","exports","../core/DataType","./DrawAttribute","./DrawPrimitive","../checks/mustBeArray","../checks/mustBeGE","../checks/mustBeInteger","../i18n/notSupported","../core/vertexArraysFromPrimitive","./Vertex","../geometries/dataFromVectorN"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b){for(var e={},f=b.length,g=0;g<f;g++)for(var h=b[g],i=Object.keys(h.attributes),j=i.length,k=0;k<j;k++){var m=i[k],n=l["default"](h.attributes[m]),o=n.length,p=e[m];p||(p=e[m]=new d["default"]([],o,c["default"].FLOAT));for(var q=0;q<o;q++)p.values.push(n[q])}return e}var n=function(){function a(a,b,c){this.mode=h["default"]("mode",a),h["default"]("numVertices",b),g["default"]("numVertices",b,0),h["default"]("numCoordinates",c),g["default"]("numCoordinates",c,0),this.vertices=[];for(var d=0;d<b;d++)this.vertices.push(new k["default"](c))}return a.prototype.vertexTransform=function(a){throw new Error(i["default"]("vertexTransform").message)},a.prototype.toPrimitive=function(){var a=function(){return"toPrimitive"};return f["default"]("elements",this.elements,a),new e["default"](this.mode,this.elements,m(this.elements,this.vertices))},a.prototype.toVertexArrays=function(a){return j["default"](this.toPrimitive(),a)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=n}),b("davinci-eight/atoms/numPostsForFence",["require","exports","../checks/mustBeBoolean","../checks/mustBeGE","../checks/mustBeInteger"],function(a,b,c,d,e){"use strict";function f(a,b){return e["default"]("segmentCount",a),d["default"]("segmentCount",a,0),c["default"]("closed",b),b?a:a+1}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/atoms/numVerticesForGrid",["require","exports","../checks/mustBeInteger"],function(a,b,c){"use strict";function d(a,b){return c["default"]("uSegments",a),c["default"]("vSegments",b),(a+1)*(b+1)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/atoms/GridPrimitive",["require","exports","./GeometryPrimitive","./numPostsForFence","./numVerticesForGrid","../i18n/notSupported","../i18n/readOnly"],function(a,b,c,d,e,g,h){"use strict";var i=function(a){function b(b,c,d){a.call(this,b,e["default"](c,d),2),this._uClosed=!1,this._vClosed=!1,this._uSegments=c,this._vSegments=d}return f(b,a),Object.defineProperty(b.prototype,"uSegments",{get:function(){return this._uSegments},set:function(a){throw new Error(h["default"]("uSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"uLength",{get:function(){return d["default"](this._uSegments,this._uClosed)},set:function(a){throw new Error(h["default"]("uLength").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"vSegments",{get:function(){return this._vSegments},set:function(a){throw new Error(h["default"]("vSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"vLength",{get:function(){return d["default"](this._vSegments,this._vClosed)},set:function(a){throw new Error(h["default"]("vLength").message)},enumerable:!0,configurable:!0}),b.prototype.vertexTransform=function(a){for(var b=this.vertices.length,c=0;c<b;c++){var d=this.vertices[c],e=d.coords.getComponent(0),f=d.coords.getComponent(1);a.exec(d,e,f,this.uLength,this.vLength)}},b.prototype.vertex=function(a,b){throw new Error(g["default"]("vertex").message)},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/atoms/GridTriangleStrip",["require","exports","../core/BeginMode","../checks/isDefined","./GridPrimitive","../checks/mustBeArray","../checks/mustBeInteger","./numPostsForFence"],function(a,b,c,d,e,g,h,i){"use strict";function j(a,b,c){c=d["default"](c)?g["default"]("elements",c):[];for(var e=i["default"](a,!1),f=a+e*b,h=2*e*b,j=0,k=1;k<=h;k+=2)c[j]=(k-1)/2,c[j+1]=c[j]+e,c[j+1]%e===a&&c[j+1]!==a&&c[j+1]!==f&&(c[j+2]=c[j+1],c[j+3]=(1+k)/2,j+=2),j+=2;return c}var k=function(a){function b(b,d){a.call(this,c["default"].TRIANGLE_STRIP,b,d),this.elements=j(b,d)}return f(b,a),b.prototype.vertex=function(a,b){return h["default"]("uIndex",a),h["default"]("vIndex",b),this.vertices[(this.vSegments-b)*this.uLength+a]},b}(e["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=k}),b("davinci-eight/transforms/ConeTransform",["require","exports","../checks/mustBeBoolean","../checks/mustBeNumber","../checks/mustBeString","../math/Spinor3","../math/Vector3"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){c.copy(a);var d=c.squaredNorm();c.add(b,d).divByScalar(Math.sqrt(d)*Math.sqrt(1+d))}var i=function(){function a(a,b,f,h){this.h=g["default"].vector(0,1,0),this.a=g["default"].vector(0,0,1),this.b=g["default"].vector(1,0,0),this.clockwise=c["default"]("clockwise",a),this.sliceAngle=d["default"]("sliceAngle",b),this.aPosition=e["default"]("aPosition",f),this.aTangent=e["default"]("aTangent",h)}return a.prototype.exec=function(a,b,c,d,e){var i=d-1,j=b/i,k=e-1,l=c/k,m=this.clockwise?-1:1,n=m*this.sliceAngle*j,o=Math.cos(n),p=Math.sin(n),q=(new g["default"]).add(this.a,o).add(this.b,p),r=g["default"].lerp(q,this.h,l);a.attributes[this.aPosition]=r;var s=g["default"].zero();h(q,this.h,s),a.attributes[this.aTangent]=f["default"].dual(s,!1)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i}),b("davinci-eight/transforms/Rotation",["require","exports","../checks/mustBeObject","../math/Spinor3","../math/Vector3"],function(a,b,c,d,e){"use strict";var f=function(){function a(a,b){this.R=d["default"].copy(c["default"]("R",a)),this.names=b}return a.prototype.exec=function(a,b,c,f,g){for(var h=this.names.length,i=0;i<h;i++){var j=this.names[i],k=a.attributes[j];if(3===k.length){var l=e["default"].vector(k.getComponent(0),k.getComponent(1),k.getComponent(2));l.rotate(this.R),a.attributes[j]=l}else{if(4!==k.length)throw new Error("Expecting "+j+" to be a vector with 3 coordinates");var m=d["default"].spinor(k.getComponent(0),k.getComponent(1),k.getComponent(2),k.getComponent(3));m.rotate(this.R),a.attributes[j]=m}}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/transforms/Scaling",["require","exports","../checks/mustBeArray","../checks/mustBeObject","../math/Spinor3","../math/Vector3"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b){this.stress=f["default"].copy(d["default"]("stress",a)),this.names=c["default"]("names",b)}return a.prototype.exec=function(a,b,c,d,g){for(var h=this.names.length,i=0;i<h;i++){var j=this.names[i],k=a.attributes[j];if(k)if(3===k.length){var l=f["default"].vector(k.getComponent(0),k.getComponent(1),k.getComponent(2));l.stress(this.stress),a.attributes[j]=l}else{if(4!==k.length)throw new Error("Expecting "+j+" to be a vector with 3 coordinates or a spinor with 4 coordinates.");var m=e["default"].spinor(k.getComponent(0),k.getComponent(1),k.getComponent(2),k.getComponent(3));m.stress(this.stress),a.attributes[j]=m}else console.warn("Expecting "+j+" to be a VectorN.")}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/transforms/Translation",["require","exports","../checks/mustBeObject","../math/Vector3"],function(a,b,c,d){"use strict";var e=function(){function a(a,b){this.s=d["default"].copy(c["default"]("s",a)),this.names=b}return a.prototype.exec=function(a,b,c,e,f){for(var g=this.names.length,h=0;h<g;h++){var i=this.names[h],j=a.attributes[i];if(3!==j.length)throw new Error("Expecting "+i+" to be a vector with 3 coordinates");var k=d["default"].vector(j.getComponent(0),j.getComponent(1),j.getComponent(2));k.add(this.s),a.attributes[i]=k}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/transforms/CoordsTransform2D",["require","exports","../core/GraphicsProgramSymbols","../checks/mustBeBoolean","../math/Vector2"],function(a,b,c,d,e){"use strict";var f=function(){function a(a,b,c){this.flipU=d["default"]("flipU",a),this.flipV=d["default"]("flipV",b),this.exchageUV=d["default"]("exchangeUV",c)}return a.prototype.exec=function(a,b,d,f,g){var h=b/(f-1),i=d/(g-1);a.attributes[c["default"].ATTRIBUTE_COORDS]=new e.Vector2([h,i])},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/shapes/ConicalShellBuilder",["require","exports","../transforms/Approximation","../transforms/Direction","../transforms/Duality","../core/GraphicsProgramSymbols","../atoms/GridTriangleStrip","./AxialShapeBuilder","../transforms/ConeTransform","../transforms/Rotation","../transforms/Scaling","../transforms/Translation","../transforms/CoordsTransform2D","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o){"use strict";var p=g["default"].ATTRIBUTE_POSITION,q=g["default"].ATTRIBUTE_TANGENT,r=g["default"].ATTRIBUTE_NORMAL,s=function(a){function b(){a.call(this),this.radialSegments=1,this.thetaSegments=32,this.height=o["default"].vector(0,1,0),this.cutLine=o["default"].vector(0,0,1),this.clockwise=!0}return f(b,a),b.prototype.toPrimitive=function(){var a=new j["default"](this.clockwise,this.sliceAngle,p,q);a.h.copy(this.height),a.a.copy(this.cutLine),a.b.copy(this.height).normalize().cross(this.cutLine),this.transforms.push(a),this.transforms.push(new l["default"](this.stress,[p,q])),this.transforms.push(new k["default"](this.tilt,[p,q])),this.transforms.push(new m["default"](this.offset,[p])),this.transforms.push(new e["default"](q,r,(!0),(!0))),this.transforms.push(new d["default"](r)),this.transforms.push(new c["default"](9,[p,r])),this.useTextureCoord&&this.transforms.push(new n["default"]((!1),(!1),(!1)));for(var b=new h["default"](this.thetaSegments,this.radialSegments),f=b.uLength,g=0;g<f;g++)for(var i=b.vLength,o=0;o<i;o++)this.applyTransforms(b.vertex(g,o),g,o,f,i);return b.toPrimitive()},b}(i["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=s}),b("davinci-eight/transforms/CylinderTransform",["require","exports","../checks/mustBeNumber","../checks/mustBeString","../math/Spinor3","../math/Vector3"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b,g,h,i,j,k){this.height=f["default"].copy(a),this.cutLine=f["default"].copy(b),this.generator=e["default"].dual(this.height.clone().normalize(),g),this.sliceAngle=c["default"]("sliceAngle",h),this.orientation=c["default"]("orientation",i),this.aPosition=d["default"]("aPosition",j),this.aTangent=d["default"]("aTangent",k)}return a.prototype.exec=function(a,b,c,d,g){var h=d-1,i=b/h,j=g-1,k=c/j,l=this.generator.clone().scale(-this.sliceAngle*i/2).exp(),m=f["default"].copy(this.cutLine).rotate(l);a.attributes[this.aPosition]=m.clone().add(this.height,k),a.attributes[this.aTangent]=e["default"].dual(m,!1).scale(this.orientation)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/shapes/CylindricalShellBuilder",["require","exports","../transforms/Approximation","../transforms/Direction","../transforms/Duality","../core/GraphicsProgramSymbols","../atoms/GridTriangleStrip","./AxialShapeBuilder","../transforms/CylinderTransform","../transforms/Rotation","../transforms/Scaling","../transforms/Translation","../transforms/CoordsTransform2D","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o){"use strict";var p=g["default"].ATTRIBUTE_POSITION,q=g["default"].ATTRIBUTE_TANGENT,r=g["default"].ATTRIBUTE_NORMAL,s=function(a){function b(){a.apply(this,arguments),this.radialSegments=1,this.thetaSegments=32,this.height=o["default"].vector(0,1,0),this.cutLine=o["default"].vector(0,0,1),this.clockwise=!0,this.convex=!0}return f(b,a),b.prototype.toPrimitive=function(){var a=this.convex?1:-1;this.transforms.push(new j["default"](this.height,this.cutLine,this.clockwise,this.sliceAngle,a,p,q)),this.transforms.push(new l["default"](this.stress,[p,q])),this.transforms.push(new k["default"](this.tilt,[p,q])),this.transforms.push(new m["default"](this.offset,[p])),this.transforms.push(new e["default"](q,r,(!0),(!0))),this.transforms.push(new d["default"](r)),this.transforms.push(new c["default"](9,[p,r])),this.useTextureCoord&&this.transforms.push(new n["default"]((!1),(!1),(!1)));for(var b=new h["default"](this.thetaSegments,this.radialSegments),f=b.uLength,g=0;g<f;g++)for(var i=b.vLength,o=0;o<i;o++)this.applyTransforms(b.vertex(g,o),g,o,f,i);return b.toPrimitive()},b}(i["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=s}),b("davinci-eight/transforms/RingTransform",["require","exports","../checks/mustBeNumber","../checks/mustBeString","../math/Spinor3","../math/Vector3"],function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b,g,h,i,j,k,l){this.e=f["default"].copy(a),this.innerRadius=c["default"]("a",h),this.outerRadius=c["default"]("b",i),this.sliceAngle=c["default"]("sliceAngle",j),this.generator=e["default"].dual(a,g),this.cutLine=f["default"].copy(b).normalize(),this.aPosition=d["default"]("aPosition",k),this.aTangent=d["default"]("aTangent",l)}return a.prototype.exec=function(a,b,c,d,g){var h=d-1,i=b/h,j=g-1,k=c/j,l=this.innerRadius,m=this.outerRadius,n=this.generator.clone().scale(-this.sliceAngle*i/2).exp(),o=f["default"].copy(this.cutLine).rotate(n).scale(l+(m-l)*k),p=e["default"].dual(this.e,!1);a.attributes[this.aPosition]=o,a.attributes[this.aTangent]=p},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/shapes/RingBuilder",["require","exports","../transforms/Approximation","../transforms/Direction","../transforms/Duality","../core/GraphicsProgramSymbols","../atoms/GridTriangleStrip","./AxialShapeBuilder","../transforms/RingTransform","../transforms/Rotation","../transforms/Scaling","../transforms/Translation","../transforms/CoordsTransform2D","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o){"use strict";var p=g["default"].ATTRIBUTE_POSITION,q=g["default"].ATTRIBUTE_TANGENT,r=g["default"].ATTRIBUTE_NORMAL,s=function(a){function b(){a.apply(this,arguments),this.innerRadius=0,this.outerRadius=1,this.radialSegments=1,this.thetaSegments=32,this.e=o["default"].vector(0,1,0),this.cutLine=o["default"].vector(0,0,1),this.clockwise=!0}return f(b,a),b.prototype.toPrimitive=function(){this.transforms.push(new j["default"](this.e,this.cutLine,this.clockwise,this.outerRadius,this.innerRadius,this.sliceAngle,p,q)),this.transforms.push(new l["default"](this.stress,[p,q])),this.transforms.push(new k["default"](this.tilt,[p,q])),this.transforms.push(new m["default"](this.offset,[p])),this.transforms.push(new e["default"](q,r,(!0),(!0))),this.transforms.push(new d["default"](r)),this.transforms.push(new c["default"](9,[p,r])),this.useTextureCoord&&this.transforms.push(new n["default"]((!1),(!1),(!1)));for(var a=new h["default"](this.thetaSegments,this.radialSegments),b=a.uLength,f=0;f<b;f++)for(var g=a.vLength,i=0;i<g;i++)this.applyTransforms(a.vertex(f,i),f,i,b,g);return a.toPrimitive()},b}(i["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=s});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/shapes/ArrowBuilder",["require","exports","./AxialShapeBuilder","../shapes/ConicalShellBuilder","../shapes/CylindricalShellBuilder","../checks/mustBeDefined","../atoms/reduce","../shapes/RingBuilder","../math/Vector3"],function(a,b,c,d,e,g,h,i,j){"use strict";var k=function(a){function b(b,c,d){a.call(this),this.heightCone=.2,this.radiusCone=.08,this.radiusShaft=.01,this.thetaSegments=16,g["default"]("axis",b),g["default"]("cutLine",c),this.e=j["default"].copy(b).normalize(),this.cutLine=j["default"].copy(c).normalize(),this.clockwise=d}return f(b,a),b.prototype.toPrimitive=function(){var a=1-this.heightCone,b=j["default"].copy(this.e).neg(),c=j["default"].copy(this.e).scale(a).add(this.offset);c.rotate(this.tilt);var f=j["default"].copy(this.offset);f.rotate(this.tilt);var g=new d["default"];g.height.copy(this.e).scale(this.heightCone),g.cutLine.copy(this.cutLine).scale(this.radiusCone),g.clockwise=this.clockwise,g.tilt.mul(this.tilt),g.offset.copy(c),g.sliceAngle=this.sliceAngle,g.thetaSegments=this.thetaSegments,g.useNormal=this.useNormal,g.usePosition=this.usePosition,g.useTextureCoord=this.useTextureCoord;var k=new i["default"];k.e.copy(b),k.cutLine.copy(this.cutLine),k.clockwise=!this.clockwise,k.innerRadius=this.radiusShaft,k.outerRadius=this.radiusCone,k.tilt.mul(this.tilt),k.offset.copy(c),k.sliceAngle=this.sliceAngle,k.thetaSegments=this.thetaSegments,k.useNormal=this.useNormal,k.usePosition=this.usePosition,k.useTextureCoord=this.useTextureCoord;var l=new e["default"];l.height.copy(this.e).normalize().scale(a),l.cutLine.copy(this.cutLine).normalize().scale(this.radiusShaft),l.clockwise=this.clockwise,l.tilt.mul(this.tilt),l.offset.copy(f),l.sliceAngle=this.sliceAngle,l.thetaSegments=this.thetaSegments,l.useNormal=this.useNormal,l.usePosition=this.usePosition,l.useTextureCoord=this.useTextureCoord;var m=new i["default"];return m.e.copy(b),m.cutLine.copy(this.cutLine),m.clockwise=!this.clockwise,m.innerRadius=0,m.outerRadius=this.radiusShaft,m.tilt.mul(this.tilt),m.offset.copy(f),m.sliceAngle=this.sliceAngle,m.thetaSegments=this.thetaSegments,m.useNormal=this.useNormal,m.usePosition=this.usePosition,m.useTextureCoord=this.useTextureCoord,h["default"]([g.toPrimitive(),k.toPrimitive(),l.toPrimitive(),m.toPrimitive()])},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=k}),b("davinci-eight/geometries/Simplex",["require","exports","../checks/mustBeEQ","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeInteger","../atoms/Vertex","../math/VectorN"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,c,g){return f["default"](a,b),d["default"](a,b,c),e["default"](a,b,g),b}function j(a){return i("count",a,0,7)}function k(a,b){return a.concat(b)}function l(a,b,d,e){void 0===e&&(e=[]),c["default"]("a.length",a.length,b.length);var f,g=a.length,h=1-d;for(f=0;f<g;f++)e.push(h*a[f]+d*b[f]);return e}function m(a,b,c){for(var d={},e=Object.keys(a),f=e.length,g=0;g<f;g++){var h=e[g];d[h]=n(a[h],b[h],c)}return d}function n(a,b,c){return new h.VectorN(l(a.coords,b.coords,c))}var o=function(){function a(a){this.vertices=[],f["default"]("k",a);for(var b=a+1,c=0,d=0;d<b;d++)this.vertices.push(new g["default"](c))}return Object.defineProperty(a.prototype,"k",{get:function(){return this.vertices.length-1},enumerable:!0,configurable:!0}),a.indices=function(a){return a.vertices.map(function(a){return a.index})},a.boundaryMap=function(b){var c=b.vertices,d=b.k;if(d===a.TRIANGLE){var e=new a(d-1);e.vertices[0].attributes=c[0].attributes,e.vertices[1].attributes=c[1].attributes;var f=new a(d-1);f.vertices[0].attributes=c[1].attributes,f.vertices[1].attributes=c[2].attributes;var g=new a(d-1);return g.vertices[0].attributes=c[2].attributes,g.vertices[1].attributes=c[0].attributes,[e,f,g]}if(d===a.LINE){var h=new a(d-1);h.vertices[0].attributes=b.vertices[0].attributes;var i=new a(d-1);return i.vertices[0].attributes=b.vertices[1].attributes,[h,i]}if(d===a.POINT)return[new a(d-1)];if(d===a.EMPTY)return[];throw new Error("Unexpected k-simplex, k = "+b.k+" @ Simplex.boundaryMap()")},a.subdivideMap=function(b){var c=[],d=b.vertices,e=b.k;if(e===a.TRIANGLE){var f=d[0].attributes,g=d[1].attributes,h=d[2].attributes,i=m(f,g,.5),j=m(g,h,.5),k=m(h,f,.5),l=new a(e);l.vertices[0].attributes=h,l.vertices[1].attributes=k,l.vertices[2].attributes=j;var n=new a(e);n.vertices[0].attributes=f,n.vertices[1].attributes=i,n.vertices[2].attributes=k;var o=new a(e);o.vertices[0].attributes=g,o.vertices[1].attributes=j,o.vertices[2].attributes=i;var p=new a(e);p.vertices[0].attributes=i,p.vertices[1].attributes=j,p.vertices[2].attributes=k,c.push(l),c.push(n),c.push(o),c.push(p)}else if(e===a.LINE){var f=d[0].attributes,g=d[1].attributes,q=m(f,g,.5),r=new a(e);r.vertices[0].attributes=f,r.vertices[1].attributes=q;var s=new a(e);s.vertices[0].attributes=q,s.vertices[1].attributes=g,c.push(r),c.push(s)}else if(e===a.POINT)c.push(b);else if(e!==a.EMPTY)throw new Error(e+"-simplex is not supported");return c},a.boundary=function(b,c){void 0===c&&(c=1),j(c);for(var d=0;d<c;d++)b=b.map(a.boundaryMap).reduce(k,[]);return b},a.subdivide=function(b,c){void 0===c&&(c=1),j(c);for(var d=0;d<c;d++)b=b.map(a.subdivideMap).reduce(k,[]);return b},a.setAttributeValues=function(a,b){for(var c=Object.keys(a),d=c.length,e=0;e<d;e++)for(var f=c[e],g=a[f],h=g.length,i=0;i<h;i++)b.vertices[i].attributes[f]=g[i]},a.EMPTY=-1,a.POINT=0,a.LINE=1,a.TRIANGLE=2,a.TETRAHEDRON=3,a.FIVE_CELL=4,a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o}),b("davinci-eight/geometries/arrowPrimitive",["require","exports","../shapes/ArrowBuilder","../checks/isDefined","../checks/mustBeObject","../checks/mustBeNumber","../math/Vector3","../math/Spinor3"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){void 0===a&&(a={}),e["default"]("options",a);var b=new c["default"](g["default"].vector(0,1,0),g["default"].vector(0,0,1),(!1));return d["default"](a.radiusCone)?b.radiusCone=f["default"]("options.radiusCone",a.radiusCone):a.radiusCone=b.radiusCone,b.stress.copy(d["default"](a.stress)?a.stress:g["default"].vector(1,1,1)),b.tilt.copySpinor(d["default"](a.tilt)?a.tilt:h["default"].one()),b.offset.copy(d["default"](a.offset)?a.offset:g["default"].zero()),b.toPrimitive()}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=i});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/ArrowGeometry",["require","exports","./arrowPrimitive","../core/GeometryElements","../checks/mustBeNumber","../i18n/notSupported"],function(a,b,c,d,e,g){"use strict";var h=function(a){function b(b,d){void 0===b&&(b={}),void 0===d&&(d=0),a.call(this,c["default"](b),b.contextManager,b,d+1),this._length=1,this._radiusCone=e["default"]("options.radiusCone",b.radiusCone),this._radius=this._radiusCone,this.setLoggingName("ArrowGeometry"),0===d&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"radius",{get:function(){return this._radius},set:function(a){this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"length",{get:function(){return this._length},set:function(a){this._length=a,this.setPrincipalScale("length",a)},enumerable:!0,configurable:!0}),b.prototype.getPrincipalScale=function(a){switch(a){case"length":return this._length;case"radius":return this._radius;default:throw new Error(g["default"]("getPrincipalScale('"+a+"')").message)}},b.prototype.setPrincipalScale=function(a,b){switch(a){case"length":this._length=b;break;case"radius":this._radius=b;break;default:throw new Error(g["default"]("getPrincipalScale('"+a+"')").message)}this.scaling.setElement(0,0,this._length),this.scaling.setElement(1,1,this._length),this.scaling.setElement(2,2,this._length)},b}(d["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h}),b("davinci-eight/geometries/PrimitivesBuilder",["require","exports","../math/Vector3","../core/vertexArraysFromPrimitive"],function(a,b,c,d){"use strict";var e=function(){function a(){this.stress=c["default"].vector(1,1,1),this.offset=c["default"].zero(),this.transforms=[],this.useNormal=!0,this.usePosition=!0,this.useTextureCoord=!1}return a.prototype.applyTransforms=function(a,b,c,d,e){for(var f=this.transforms.length,g=0;g<f;g++)this.transforms[g].exec(a,b,c,d,e)},a.prototype.toVertexArrays=function(){for(var a=[],b=this.toPrimitives(),c=b.length,e=0;e<c;e++)a.push(d["default"](b[e]));return a},a.prototype.toPrimitives=function(){return console.warn("toPrimitives() must be implemented by derived classes."),[]},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/geometries/computeFaceNormals",["require","exports","../core/GraphicsProgramSymbols","../math/Vector3","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,h){void 0===b&&(b=c["default"].ATTRIBUTE_POSITION),void 0===h&&(h=c["default"].ATTRIBUTE_NORMAL);var i=a.vertices[0].attributes,j=a.vertices[1].attributes,k=a.vertices[2].attributes,l=i[b],m=j[b],n=k[b],o=l.getComponent(0),p=l.getComponent(1),q=l.getComponent(2),r=m.getComponent(0),s=m.getComponent(1),t=m.getComponent(2),u=n.getComponent(0),v=n.getComponent(1),w=n.getComponent(2),x=u-r,y=v-s,z=w-t,A=o-r,B=p-s,C=q-t,D=f["default"](x,y,z,A,B,C),E=g["default"](x,y,z,A,B,C),F=e["default"](x,y,z,A,B,C),G=new d["default"]([D,E,F]).normalize();i[h]=G,j[h]=G,k[h]=G}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h}),b("davinci-eight/math/R3",["require","exports","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b,c,d,e){"use strict";function f(a,b,g){var h=function(c){return f(c*a,c*b,c*g)},i={get x(){return a},get y(){return b},get z(){return g},cross:function(a){var b=d["default"](i.x,i.y,i.z,a.x,a.y,a.z),g=e["default"](i.x,i.y,i.z,a.x,a.y,a.z),h=c["default"](i.x,i.y,i.z,a.x,a.y,a.z);return f(b,g,h)},direction:function(){var a=i.x,b=i.y,c=i.z,d=Math.sqrt(a*a+b*b+c*c);return f(a/d,b/d,c/d)},scale:h,sub:function(a){return f(i.x-a.x,i.y-a.y,i.z-a.z)}};return i}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/collections/copyToArray",["require","exports"],function(a,b){"use strict";function c(a,b,c){void 0===b&&(b=[]),void 0===c&&(c=0);for(var d=a.length,e=0;e<d;e++)b[c+e]=a[e];return b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/geometries/dataLength",["require","exports","../math/Geometric2","../math/Geometric3","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,f){"use strict";function g(a){if(a instanceof d.Geometric3){if(8!==a.length)throw new Error("source.length is expected to be 8");return 3}if(a instanceof c.Geometric2){if(4!==a.length)throw new Error("source.length is expected to be 4");return 2}if(a instanceof f["default"]){if(3!==a.length)throw new Error("source.length is expected to be 3");return 3}if(a instanceof e.Vector2){if(2!==a.length)throw new Error("source.length is expected to be 2");return 2}return a.length}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/geometries/simplicesToGeometryMeta",["require","exports","./dataLength","../checks/expectArg","../checks/isDefined","./Simplex"],function(a,b,c,d,e,f){"use strict";function g(a,b){var c=[];return JSON.stringify(a,function(a,b){if("object"==typeof b&&null!==b){if(c.indexOf(b)!==-1)return;c.push(b)}return b},b)}function h(a){for(var b=void 0,h={},i=a.length,j=0;j<i;j++){var k=a[j];k instanceof f["default"]||d["default"]("simplex",k).toSatisfy(!1,"Every element must be a Simplex @ simplicesToGeometryMeta(). Found "+g(k,2));var l=k.vertices;b=k.k;for(var m=0,n=l.length;m<n;m++)for(var o=l[m],p=o.attributes,q=Object.keys(p),r=q.length,s=0;s<r;s++){var t=q[s],u=p[t],v=c["default"](u),w=h[t];if(w){if(w.size!==v)throw new Error("Something is rotten in Denmark!")}else h[t]={size:v}}}if(e["default"](b)){var x={get attributes(){return h},get k(){return b}};return x}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h}),b("davinci-eight/geometries/computeUniqueVertices",["require","exports"],function(a,b){"use strict";function c(a){function b(a){var b=a.toString();if(c[b]){var e=c[b];a.index=e.index}else a.index=d.length,d.push(a),c[b]=a}var c={},d=[];return a.forEach(function(a){a.vertices.forEach(function(a){b(a)})}),d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/geometries/simplicesToPrimitive",["require","exports","../collections/copyToArray","./dataFromVectorN","../core/DataType","../atoms/DrawAttribute","../core/BeginMode","../atoms/DrawPrimitive","./simplicesToGeometryMeta","./computeUniqueVertices","../checks/expectArg","./Simplex","../math/VectorN"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function n(a,b){for(var c=[],d=0;d<a;d++)c.push(b);return c}function o(a,b){k["default"]("name",a).toBeString(),k["default"]("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.name;return d?d:a}throw new Error("Unable to compute name; missing attribute specification for "+a)}function p(a,b){k["default"]("key",a).toBeString(),k["default"]("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.size;return k["default"]("size",d).toBeNumber(),c.size}throw new Error("Unable to compute size; missing attribute specification for "+a)}function q(a,b){return a.concat(b)}function r(a,b){k["default"]("simplices",a).toBeObject();var r=i["default"](a);b?k["default"]("geometryMeta",b).toBeObject():b=r;var s,t,u=b.attributes,v=Object.keys(u),w=v.length,x=j["default"](a),y=x.length,z=a.map(l["default"].indices).reduce(q,[]),A=[];for(s=0;s<w;s++){var B=v[s],C=p(B,u),D=n(y*C,void 0);A.push({data:D,dimensions:C,name:o(B,u)})}for(t=0;t<y;t++){var E=x[t],F=E.attributes;for(E.index!==t&&k["default"]("vertex.index",t).toSatisfy(!1,"vertex.index must equal loop index, i"),s=0;s<w;s++){var G=A[s],H=G.dimensions,I=F[v[s]];I||(I=new m.VectorN(n(H,0),(!1),H));var D=d["default"](I);c["default"](D,G.data,t*G.dimensions)}}var J={};for(s=0;s<w;s++){var G=A[s],D=G.data;J[G.name]=new f["default"](D,G.dimensions,e["default"].FLOAT)}switch(b.k){case l["default"].TRIANGLE:return new h["default"](g["default"].TRIANGLES,z,J);case l["default"].LINE:return new h["default"](g["default"].LINES,z,J);case l["default"].POINT:return new h["default"](g["default"].POINTS,z,J);case l["default"].EMPTY:return new h["default"](g["default"].POINTS,z,J);default:throw new Error("k => "+b.k)}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=r});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/SimplexPrimitivesBuilder",["require","exports","../checks/mustBeBoolean","../checks/mustBeInteger","../geometries/PrimitivesBuilder","../geometries/Simplex","../core/GraphicsProgramSymbols","../geometries/simplicesToPrimitive","../geometries/simplicesToGeometryMeta","../math/Vector1","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l){
"use strict";var m=function(a){function b(){a.call(this),this.data=[],this._k=new k["default"]([g["default"].TRIANGLE]),this.curvedSegments=16,this.flatSegments=1,this.orientationColors=!1,this._k.modified=!0}return f(b,a),Object.defineProperty(b.prototype,"k",{get:function(){return this._k.x},set:function(a){this._k.x=d["default"]("k",a)},enumerable:!0,configurable:!0}),b.prototype.regenerate=function(){throw new Error("`protected regenerate(): void` method should be implemented in derived class.")},b.prototype.isModified=function(){return this._k.modified},b.prototype.setModified=function(a){return c["default"]("modified",a),this._k.modified=a,this},b.prototype.boundary=function(a){return this.regenerate(),this.data=g["default"].boundary(this.data,a),this.check()},b.prototype.check=function(){return this.meta=j["default"](this.data),this},b.prototype.subdivide=function(a){return this.regenerate(),this.data=g["default"].subdivide(this.data,a),this.check(),this},b.prototype.toPrimitives=function(){return this.regenerate(),this.check(),[i["default"](this.data,this.meta)]},b.prototype.mergeVertices=function(a){void 0===a&&(a=4)},b.prototype.triangle=function(a,b,c){var d=new g["default"](g["default"].TRIANGLE);return d.vertices[0].attributes[h["default"].ATTRIBUTE_POSITION]=a[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_POSITION]=a[1],d.vertices[2].attributes[h["default"].ATTRIBUTE_POSITION]=a[2],d.vertices[0].attributes[h["default"].ATTRIBUTE_NORMAL]=b[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_NORMAL]=b[1],d.vertices[2].attributes[h["default"].ATTRIBUTE_NORMAL]=b[2],d.vertices[0].attributes[h["default"].ATTRIBUTE_COORDS]=c[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_COORDS]=c[1],d.vertices[2].attributes[h["default"].ATTRIBUTE_COORDS]=c[2],this.orientationColors&&(d.vertices[0].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(1,0,0),d.vertices[1].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(0,1,0),d.vertices[2].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(0,0,1)),this.data.push(d)},b.prototype.lineSegment=function(a,b,c){var d=new g["default"](g["default"].LINE);return d.vertices[0].attributes[h["default"].ATTRIBUTE_POSITION]=a[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_POSITION]=a[1],d.vertices[0].attributes[h["default"].ATTRIBUTE_NORMAL]=b[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_NORMAL]=b[1],d.vertices[0].attributes[h["default"].ATTRIBUTE_COORDS]=c[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_COORDS]=c[1],this.orientationColors&&(d.vertices[0].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(1,0,0),d.vertices[1].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(0,1,0)),this.data.push(d)},b.prototype.point=function(a,b,c){var d=new g["default"](g["default"].POINT);return d.vertices[0].attributes[h["default"].ATTRIBUTE_POSITION]=a[0],d.vertices[0].attributes[h["default"].ATTRIBUTE_NORMAL]=b[0],d.vertices[0].attributes[h["default"].ATTRIBUTE_COORDS]=c[0],this.orientationColors&&(d.vertices[0].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(1,0,0)),this.data.push(d)},b.prototype.empty=function(a,b,c){var d=new g["default"](g["default"].EMPTY);return this.data.push(d)},b}(e["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=m}),b("davinci-eight/geometries/triangle",["require","exports","../geometries/computeFaceNormals","../checks/expectArg","../geometries/Simplex","../core/GraphicsProgramSymbols","../math/VectorN"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,h,i,j){void 0===i&&(i={}),void 0===j&&(j=[]),d["default"]("a",a).toSatisfy(a instanceof g.VectorN,"a must be a VectorN"),d["default"]("b",b).toSatisfy(a instanceof g.VectorN,"a must be a VectorN"),d["default"]("b",h).toSatisfy(a instanceof g.VectorN,"a must be a VectorN");var k=new e["default"](e["default"].TRIANGLE);return k.vertices[0].attributes[f["default"].ATTRIBUTE_POSITION]=a,k.vertices[1].attributes[f["default"].ATTRIBUTE_POSITION]=b,k.vertices[2].attributes[f["default"].ATTRIBUTE_POSITION]=h,c["default"](k,f["default"].ATTRIBUTE_POSITION,f["default"].ATTRIBUTE_NORMAL),e["default"].setAttributeValues(i,k),j.push(k),j}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h}),b("davinci-eight/geometries/quadrilateral",["require","exports","../checks/expectArg","../geometries/triangle","../math/VectorN"],function(a,b,c,d,e){"use strict";function f(a,b,c){var d,e,f,g=Object.keys(b),h=g.length;for(d=0;d<h;d++)e=g[d],f=b[e],c[e]=a.map(function(a){return f[a]})}function g(a,b,g,h,i,j){void 0===i&&(i={}),void 0===j&&(j=[]),c["default"]("a",a).toSatisfy(a instanceof e.VectorN,"a must be a VectorN"),c["default"]("b",b).toSatisfy(b instanceof e.VectorN,"b must be a VectorN"),c["default"]("c",g).toSatisfy(g instanceof e.VectorN,"c must be a VectorN"),c["default"]("d",h).toSatisfy(h instanceof e.VectorN,"d must be a VectorN");var k={};return f([1,2,0],i,k),d["default"](b,g,a,k,j),f([3,0,2],i,k),d["default"](h,a,g,k,j),j}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/BoxGeometry",["require","exports","../core/GeometryElements","../i18n/notSupported","../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeNumber","../atoms/reduce","../atoms/GridTriangleStrip","./PrimitivesBuilder","../core/GraphicsProgramSymbols","../math/Spinor3","../math/Vector2","../geometries/computeFaceNormals","../math/R3","../geometries/SimplexPrimitivesBuilder","../geometries/quadrilateral","../geometries/Simplex","../math/Vector1","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";function v(a,b,c,d,e){for(var f=m["default"].wedge(c[0],c[1]).rotate(a),g=u["default"].dual(f,!0).normalize(),h=u["default"].copy(c[0]).scale(-.5),i=u["default"].copy(c[0]).scale(.5),k=u["default"].copy(c[1]).scale(-.5),o=u["default"].copy(c[1]).scale(.5),p=u["default"].copy(c[2]).scale(.5),q=new j["default"](d,e),r=0;r<q.uLength;r++)for(var s=0;s<q.vLength;s++){var t=r/d,v=s/e,w=u["default"].copy(h).lerp(i,t),x=u["default"].copy(k).lerp(o,v),y=q.vertex(r,s),z=u["default"].copy(w).add(x).add(p);z.rotate(a),z.add(b),y.attributes[l["default"].ATTRIBUTE_POSITION]=z,y.attributes[l["default"].ATTRIBUTE_NORMAL]=g,y.attributes[l["default"].ATTRIBUTE_COORDS]=new n.Vector2([t,v])}return q}function w(a){void 0===a&&(a={});var b=e["default"](a.k)?a.k:2;switch(b){case 0:case 1:var c=x,d=y,f=z,j=new A(c,d,f,b);return i["default"](j.toPrimitives());default:var j=new B;return j.width=e["default"](a.width)?h["default"]("width",a.width):1,j.height=e["default"](a.height)?h["default"]("height",a.height):1,j.depth=e["default"](a.depth)?h["default"]("depth",a.depth):1,e["default"](a.openBack)&&(j.openBack=g["default"]("openBack",a.openBack)),e["default"](a.openBase)&&(j.openBase=g["default"]("openBase",a.openBase)),e["default"](a.openFront)&&(j.openFront=g["default"]("openFront",a.openFront)),e["default"](a.openLeft)&&(j.openLeft=g["default"]("openLeft",a.openLeft)),e["default"](a.openRight)&&(j.openRight=g["default"]("openRight",a.openRight)),e["default"](a.openCap)&&(j.openCap=g["default"]("openCap",a.openCap)),a.offset&&j.offset.copy(a.offset),i["default"](j.toPrimitives())}}var x=p["default"](1,0,0),y=p["default"](0,1,0),z=p["default"](0,0,1),A=function(a){function b(b,c,d,e,f,g){void 0===e&&(e=s["default"].TRIANGLE),void 0===f&&(f=0),void 0===g&&(g=0),a.call(this),this._isModified=!0,this._a=u["default"].copy(b),this._b=u["default"].copy(c),this._c=u["default"].copy(d),this.k=e,this.subdivide(f),this.boundary(g),this.regenerate()}return f(b,a),Object.defineProperty(b.prototype,"a",{get:function(){return this._a},set:function(a){this._a=a,this._isModified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this._b},set:function(a){this._b=a,this._isModified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"c",{get:function(){return this._c},set:function(a){this._c=a,this._isModified=!0},enumerable:!0,configurable:!0}),b.prototype.isModified=function(){return this._isModified||a.prototype.isModified.call(this)},b.prototype.setModified=function(b){return this._isModified=b,a.prototype.setModified.call(this,b),this},b.prototype.regenerate=function(){function a(a){for(var b=new s["default"](a.length-1),d=0;d<a.length;d++)b.vertices[d].attributes[l["default"].ATTRIBUTE_POSITION]=c[a[d]],b.vertices[d].attributes[l["default"].ATTRIBUTE_GEOMETRY_INDEX]=new t["default"]([d]);return b}var b=this;this.setModified(!1);var c=[0,1,2,3,4,5,6,7].map(function(a){});switch(c[0]=(new u["default"]).sub(this._a).sub(this._b).add(this._c).divByScalar(2),c[1]=(new u["default"]).add(this._a).sub(this._b).add(this._c).divByScalar(2),c[2]=(new u["default"]).add(this._a).add(this._b).add(this._c).divByScalar(2),c[3]=(new u["default"]).sub(this._a).add(this._b).add(this._c).divByScalar(2),c[4]=(new u["default"]).copy(c[3]).sub(this._c),c[5]=(new u["default"]).copy(c[2]).sub(this._c),c[6]=(new u["default"]).copy(c[1]).sub(this._c),c[7]=(new u["default"]).copy(c[0]).sub(this._c),c.forEach(function(a){a.add(b.offset)}),this.k){case 0:var d=[[0],[1],[2],[3],[4],[5],[6],[7]];this.data=d.map(function(b){return a(b)});break;case 1:var e=[[0,1],[1,2],[2,3],[3,0],[0,7],[1,6],[2,5],[3,4],[4,5],[5,6],[6,7],[7,4]];this.data=e.map(function(b){return a(b)});break;case 2:var f=[0,1,2,3,4,5].map(function(a){});f[0]=r["default"](c[0],c[1],c[2],c[3]),f[1]=r["default"](c[1],c[6],c[5],c[2]),f[2]=r["default"](c[7],c[0],c[3],c[4]),f[3]=r["default"](c[6],c[7],c[4],c[5]),f[4]=r["default"](c[3],c[2],c[5],c[4]),f[5]=r["default"](c[7],c[6],c[1],c[0]),this.data=f.reduce(function(a,b){return a.concat(b)},[]),this.data.forEach(function(a){o["default"](a)})}this.check()},b}(q["default"]),B=function(a){function b(){a.call(this),this.iSegments=1,this.jSegments=1,this.kSegments=1,this.openBack=!1,this.openBase=!1,this.openFront=!1,this.openLeft=!1,this.openRight=!1,this.openCap=!1,this._a=u["default"].vector(1,0,0),this._b=u["default"].vector(0,1,0),this._c=u["default"].vector(0,0,1),this.sides=[]}return f(b,a),Object.defineProperty(b.prototype,"width",{get:function(){return this._a.magnitude()},set:function(a){h["default"]("width",a),this._a.normalize().scale(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this._b.magnitude()},set:function(a){h["default"]("height",a),this._b.normalize().scale(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"depth",{get:function(){return this._c.magnitude()},set:function(a){h["default"]("depth",a),this._c.normalize().scale(a)},enumerable:!0,configurable:!0}),b.prototype.regenerate=function(){this.sides=[];var a=m["default"].one(),b=this.offset;this.openFront||this.sides.push(v(a,b,[this._a,this._b,this._c],this.iSegments,this.jSegments)),this.openRight||this.sides.push(v(a,b,[u["default"].copy(this._c).scale(-1),this._b,this._a],this.kSegments,this.jSegments)),this.openLeft||this.sides.push(v(a,b,[this._c,this._b,u["default"].copy(this._a).scale(-1)],this.kSegments,this.jSegments)),this.openBack||this.sides.push(v(a,b,[u["default"].copy(this._a).scale(-1),this._b,u["default"].copy(this._c).scale(-1)],this.iSegments,this.jSegments)),this.openCap||this.sides.push(v(a,b,[this._a,u["default"].copy(this._c).scale(-1),this._b],this.iSegments,this.kSegments)),this.openBase||this.sides.push(v(a,b,[this._a,this._c,u["default"].copy(this._b).scale(-1)],this.iSegments,this.kSegments))},b.prototype.toPrimitives=function(){return this.regenerate(),this.sides.map(function(a){return a.toPrimitive()})},b}(k["default"]),C=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,w(b),b.contextManager,b,c+1),this.w=1,this.h=1,this.d=1,this.setLoggingName("BoxGeometry")}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.getPrincipalScale=function(a){switch(a){case"width":return this.w;case"height":return this.h;case"depth":return this.d;default:throw new Error(d["default"]("getPrincipalScale('"+a+"')").message)}},b.prototype.setPrincipalScale=function(a,b){switch(a){case"width":this.w=b;break;case"height":this.h=b;break;case"depth":this.d=b;break;default:throw new Error(d["default"]("setPrincipalScale('"+a+"')").message)}this.setScale(this.w,this.h,this.d)},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=C}),b("davinci-eight/geometries/arc3",["require","exports","../checks/mustBeDefined","../checks/mustBeInteger","../checks/mustBeNumber","../math/Spinor3","../math/Vector3"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,h,i){c["default"]("begin",a),e["default"]("angle",b),c["default"]("generator",h),d["default"]("segments",i);var j=[],k=g["default"].copy(a),l=f["default"].copy(h).scale(-b/2/i).exp();j.push(k.clone());for(var m=0;m<i;m++)k.rotate(l),j.push(k.clone());return j}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=h});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/CylinderGeometry",["require","exports","../i18n/notSupported","../core/GeometryElements","../checks/isDefined","../checks/mustBeBoolean","../atoms/reduce","../geometries/arc3","../geometries/SimplexPrimitivesBuilder","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m){"use strict";function n(a,b,c,d,e,f,g,h,j,n,o,p,q,r){for(var s=m["default"].copy(a).scale(.5),t=m["default"].copy(a).scale(1/j),u=j+1,v=0;v<u;v++){for(var w=m["default"].copy(t).scale(v).sub(s),x=[],y=[],z=(j-v)/j,A=i["default"](b,g,h,n),B=A.length,C=0;C<B;C++){var D=A[C],E=k["default"].dual(D,!1);D.add(w),D.stress(d),D.rotate(e),D.add(f),E.stress(d),E.rotate(e);var F=C/n;o.push(D),p.push(E),x.push(o.length-1),y.push(new l.Vector2([F,z]))}q.push(x),r.push(y)}}function o(a,b){void 0===b&&(b={});var c=m["default"].copy(a);return b.tilt&&c.rotate(b.tilt),c}function p(a){void 0===a&&(a={});var b=o(m["default"].vector(0,1,0),a),c=o(m["default"].vector(0,0,1),a),d=new q(b,c,(!1));return e["default"](a.openBase)&&(d.openBase=g["default"]("openBase",a.openBase)),e["default"](a.openCap)&&(d.openCap=g["default"]("openCap",a.openCap)),e["default"](a.openWall)&&(d.openWall=g["default"]("openWall",a.openWall)),a.offset&&d.offset.copy(a.offset),h["default"](d.toPrimitives())}var q=function(a){function b(b,c,d){a.call(this),this.sliceAngle=2*Math.PI,this.tilt=k["default"].one(),this.openBase=!1,this.openCap=!1,this.openWall=!1,this.e=m["default"].copy(b).normalize(),this.cutLine=m["default"].copy(c).normalize(),this.clockwise=d,this.setModified(!0)}return f(b,a),b.prototype.regenerate=function(){this.data=[];var a=this.flatSegments,b=this.curvedSegments,c=k["default"].dual(this.e,!1),d=.5,e=[],f=[],g=[],h=[];if(n(this.e,this.cutLine,this.clockwise,this.stress,this.tilt,this.offset,this.sliceAngle,c,a,b,e,f,g,h),!this.openWall)for(var i=0;i<b;i++)for(var j=0;j<a;j++){var o=g[j][i],p=g[j+1][i],q=g[j+1][i+1],r=g[j][i+1],s=m["default"].dual(f[o],!0).normalize(),t=m["default"].dual(f[p],!0).normalize(),u=m["default"].dual(f[q],!0).normalize(),v=m["default"].dual(f[r],!0).normalize(),w=h[j][i].clone(),x=h[j+1][i].clone(),y=h[j+1][i+1].clone(),z=h[j][i+1].clone();this.triangle([e[p],e[o],e[q]],[t,s,u],[x,w,y]),this.triangle([e[r],e[q],e[o]],[v,u.clone(),s.clone()],[z,y.clone(),w.clone()])}if(!this.openCap){var A=m["default"].copy(this.e).scale(d).add(this.offset),B=k["default"].dual(this.e,!1).stress(this.stress).rotate(this.tilt),C=m["default"].dual(B,!0);e.push(A);for(var i=0;i<b;i++){var o=g[a][i+1],p=e.length-1,q=g[a][i],w=h[a][i+1].clone(),x=new l.Vector2([w.x,1]),y=h[a][i].clone();this.triangle([e[o],e[p],e[q]],[C,C,C],[w,x,y])}}if(!this.openBase){var D=m["default"].copy(this.e).scale(-d).add(this.offset),B=k["default"].dual(this.e,!1).neg().stress(this.stress).rotate(this.tilt),C=m["default"].dual(B,!0);e.push(D);for(var i=0;i<b;i++){var o=g[0][i],p=e.length-1,q=g[0][i+1],w=h[0][i].clone(),x=new l.Vector2([w.x,1]),y=h[0][i+1].clone();this.triangle([e[o],e[p],e[q]],[C,C,C],[w,x,y])}}this.setModified(!1)},b}(j["default"]),r=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,p(b),b.contextManager,b,c+1),this._length=1,this._radius=1,this.setLoggingName("CylinderGeometry"),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"radius",{get:function(){return this._radius},set:function(a){this._radius=a,this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"length",{get:function(){return this._length},set:function(a){this._length=a,this.setPrincipalScale("length",a)},enumerable:!0,configurable:!0}),b.prototype.getPrincipalScale=function(a){switch(a){case"length":return this._length;case"radius":return this._radius;default:throw new Error(c["default"]("getPrincipalScale('"+a+"')").message)}},b.prototype.setPrincipalScale=function(a,b){switch(a){case"length":this._length=b;break;case"radius":this._radius=b;break;default:throw new Error(c["default"]("getPrincipalScale('"+a+"')").message)}this.setScale(this._radius,this._length,this._radius)},b}(d["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=r});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/atoms/GridLines",["require","exports","../core/BeginMode","./GridPrimitive","../checks/mustBeInteger","./numPostsForFence"],function(a,b,c,d,e,g){"use strict";function h(a,b,c,d){return b*c+a}function i(a,b,c,d){for(var e=g["default"](a,b),f=g["default"](c,d),i=[],j=0;j<e;j++)for(var k=0;k<f;k++)j<a&&(i.push(h(j,k,e,f)),i.push(h(j+1,k,e,f))),k<c&&(i.push(h(j,k,e,f)),i.push(h(j,k+1,e,f)));return i}var j=function(a){function b(b,d,e,f){a.call(this,c["default"].LINES,b,e),this.elements=i(b,d,e,f);for(var h=g["default"](b,d),j=g["default"](e,f),k=0;k<h;k++)for(var l=0;l<j;l++){var m=this.vertex(k,l).coords;m.setComponent(0,k),m.setComponent(1,l)}}return f(b,a),b.prototype.vertex=function(a,b){return e["default"]("i",a),e["default"]("j",b),this.vertices[h(a,b,this.uLength,this.vLength)]},b}(d["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/atoms/GridPoints",["require","exports","../core/BeginMode","./GridPrimitive","../checks/mustBeInteger","./numPostsForFence"],function(a,b,c,d,e,g){"use strict";function h(a,b,c,d){return b*c+a}function i(a,b,c,d){for(var e=g["default"](a,b),f=g["default"](c,d),i=[],j=0;j<e;j++)for(var k=0;k<f;k++)i.push(h(j,k,e,f));return i}var j=function(a){function b(b,d,e,f){a.call(this,c["default"].POINTS,b,e),this.elements=i(b,d,e,f);for(var h=g["default"](b,d),j=g["default"](e,f),k=0;k<h;k++)for(var l=0;l<j;l++){var m=this.vertex(k,l).coords;m.setComponent(0,k),m.setComponent(1,l)}}return f(b,a),b.prototype.vertex=function(a,b){return e["default"]("i",a),e["default"]("j",b),this.vertices[h(a,b,this.uLength,this.vLength)]},b}(d["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j}),b("davinci-eight/checks/isFunction",["require","exports"],function(a,b){"use strict";function c(a){return"function"==typeof a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/geometries/gridPrimitive",["require","exports","../core/BeginMode","../core/Color","../core/GraphicsProgramSymbols","../atoms/GridLines","../atoms/GridPoints","../atoms/GridTriangleStrip","../checks/isDefined","../checks/isFunction","../checks/mustBeNumber","../math/Vector3"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b){return l["default"].vector(a,b,0)}function n(a,b){return l["default"].vector(0,0,1)}function o(a,b,d,e,i){switch(a){case c["default"].POINTS:return new g["default"](b,d,e,i);case c["default"].LINES:return new f["default"](b,d,e,i);case c["default"].TRIANGLE_STRIP:return new h["default"](b,e);default:throw new Error("mode must be POINTS, LINES or TRIANGLE_STRIP")}}function p(a,b,c,f){var g=i["default"](f.aPosition)?f.aPosition:m,h=i["default"](f.aNormal)?f.aNormal:n,k=i["default"](f.aColor)?f.aColor:void 0;j["default"](g)&&(a.attributes[e["default"].ATTRIBUTE_POSITION]=l["default"].copy(g(b,c))),j["default"](h)&&(a.attributes[e["default"].ATTRIBUTE_NORMAL]=l["default"].copy(h(b,c))),j["default"](k)&&(a.attributes[e["default"].ATTRIBUTE_COLOR]=d.Color.copy(k(b,c)))}function q(a){var b=i["default"](a.uMin)?k["default"]("uMin",a.uMin):0,d=i["default"](a.uMax)?k["default"]("uMax",a.uMax):1,e=i["default"](a.uSegments)?a.uSegments:1,f=i["default"](a.vMin)?k["default"]("vMin",a.vMin):0,g=i["default"](a.vMax)?k["default"]("vMax",a.vMax):1,h=i["default"](a.vSegments)?a.vSegments:1,j=i["default"](a.mode)?a.mode:c["default"].LINES,l=o(j,e,!1,h,!1),m=l.uLength,n=l.vLength;if(e>0)if(h>0)for(var q=0;q<m;q++)for(var r=0;r<n;r++){var s=l.vertex(q,r),t=b+(d-b)*q/e,u=f+(g-f)*r/h;p(s,t,u,a)}else for(var q=0;q<m;q++){var s=l.vertex(q,0),t=b+(d-b)*q/e,u=(f+g)/2;p(s,t,u,a)}else if(h>0)for(var r=0;r<n;r++){var s=l.vertex(0,r),t=(b+d)/2,u=f+(g-f)*r/h;p(s,t,u,a)}else{var s=l.vertex(0,0),t=(b+d)/2,u=(f+g)/2;p(s,t,u,a)}return l.toPrimitive()}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=q});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/GridGeometry",["require","exports","../core/GeometryElements","./gridPrimitive"],function(a,b,c,d){"use strict";var e=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,d["default"](b),b.contextManager,b,c+1),this.setLoggingName("GridGeometry"),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/SphereGeometry",["require","exports","../geometries/arc3","../math/Geometric3","../core/GeometryElements","../checks/isInteger","../checks/isNumber","../checks/isUndefined","../checks/mustBeGE","../checks/mustBeInteger","../checks/mustBeNumber","../i18n/notSupported","../atoms/reduce","../math/R3","../geometries/SimplexPrimitivesBuilder","../geometries/Simplex","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";function u(a,b,e,f,g,h,i,j,k,l,m){for(var n=r["default"].dual(C,!1),o=k+1,p=h+1,q=0;q<o;q++)for(var t=q/k,u=i+t*j,v=Math.sin(u),w=d.Geometric3.fromSpinor(n).scale(-f/2).exp(),x=d.Geometric3.fromVector(B).rotate(w).scale(v),y=c["default"](x,g,n,h),z=Math.cos(u),A=z,D=0;D<p;D++){var E=y[D].add(C,A).stress(a).rotate(b).add(e);l.push(E);var F=D/h;m.push(new s.Vector2([F,1-t]))}}function v(a,b,c){return a*(c+1)+b}function w(a,b,c){switch(b){case 0:return a+1;case 1:return a;case 2:return a+c+1;case 3:return a+c+2}}function x(a,b,c,d,e,f){for(var g=0;g<d;g++)for(var h=0;h<e;h++){var i=v(g,h,e),j=w(i,0,e),k=w(i,1,e),l=w(i,2,e),m=w(i,3,e),n=t["default"].copy(a[j]).normalize(),o=t["default"].copy(a[k]).normalize(),p=t["default"].copy(a[l]).normalize(),q=t["default"].copy(a[m]).normalize(),r=b[j].clone(),s=b[k].clone(),u=b[l].clone(),x=b[m].clone();f.triangle([a[j],a[k],a[m]],[n,o,q],[r,s,x]),f.triangle([a[l],a[m],a[k]],[p,q,o],[u,x,s])}}function y(a,b,c,d,e,f){for(var g=0;g<d;g++)for(var h=0;h<e;h++){var i=v(g,h,e),j=w(i,0,e),k=w(i,1,e),l=w(i,2,e),m=w(i,3,e),n=t["default"].copy(a[j]).normalize(),o=t["default"].copy(a[k]).normalize(),p=t["default"].copy(a[l]).normalize(),q=t["default"].copy(a[m]).normalize(),r=b[j].clone(),s=b[k].clone(),u=b[l].clone(),x=b[m].clone();f.lineSegment([a[j],a[k]],[n,o],[r,s]),f.lineSegment([a[k],a[l]],[o,p],[s,u]),f.lineSegment([a[l],a[m]],[p,q],[u,x]),f.lineSegment([a[m],a[j]],[q,n],[x,r])}}function z(a,b,c,d,e,f){for(var g=0;g<d;g++)for(var h=0;h<e;h++){var i=v(g,h,e),j=w(i,0,e),k=w(i,1,e),l=w(i,2,e),m=w(i,3,e),n=t["default"].copy(a[j]).normalize(),o=t["default"].copy(a[k]).normalize(),p=t["default"].copy(a[l]).normalize(),q=t["default"].copy(a[m]).normalize(),r=b[j].clone(),s=b[k].clone(),u=b[l].clone(),x=b[m].clone();f.point([a[j]],[n],[r]),f.point([a[k]],[o],[s]),f.point([a[l]],[p],[u]),f.point([a[m]],[q],[x])}}function A(a){void 0===a&&(a={});var b=new J;return g["default"](a.k)?b.k=a.k:i["default"](a.k)?b.k=2:k["default"]("k",a.k),h["default"](a.azimuthStart)?b.azimuthStart=a.azimuthStart:i["default"](a.azimuthStart)?b.azimuthStart=D:l["default"]("azimuthStart",a.azimuthStart),h["default"](a.azimuthLength)?b.azimuthLength=a.azimuthLength:i["default"](a.azimuthLength)?b.azimuthLength=E:l["default"]("azimuthLength",a.azimuthLength),g["default"](a.azimuthSegments)?b.azimuthSegments=j["default"]("azimuthSegements",a.azimuthSegments,3):i["default"](a.azimuthSegments)?b.azimuthSegments=F:k["default"]("azimuthSegments",a.azimuthSegments),h["default"](a.elevationStart)?b.elevationStart=a.elevationStart:i["default"](a.elevationStart)?b.elevationStart=G:l["default"]("elevationStart",a.elevationStart),h["default"](a.elevationLength)?b.elevationLength=a.elevationLength:i["default"](a.elevationLength)?b.elevationLength=H:l["default"]("elevationLength",a.elevationLength),g["default"](a.elevationSegments)?b.elevationSegments=j["default"]("elevationSegments",a.elevationSegments,2):i["default"](a.elevationSegments)?b.elevationSegments=I:k["default"]("elevationSegments",a.elevationSegments),a.offset&&b.offset.copy(a.offset),a.stress&&b.stress.copy(a.stress),a.tilt&&b.tilt.copy(a.tilt),n["default"](b.toPrimitives())}var B=o["default"](0,0,1),C=o["default"](0,1,0),D=0,E=2*Math.PI,F=20,G=0,H=Math.PI,I=10,J=function(a){function b(){a.call(this),this.tilt=r["default"].one(),this.azimuthStart=D,this.azimuthLength=E,this.azimuthSegments=F,this.elevationStart=G,this.elevationLength=H,this.elevationSegments=I,this.setModified(!0),this.regenerate()}return f(b,a),Object.defineProperty(b.prototype,"radius",{get:function(){return this.stress.x},set:function(a){l["default"]("radius",a),this.stress.x=a,this.stress.y=a,this.stress.z=a},enumerable:!0,configurable:!0}),b.prototype.isModified=function(){return a.prototype.isModified.call(this)},b.prototype.setModified=function(b){return a.prototype.setModified.call(this,b),this},b.prototype.regenerate=function(){this.data=[];var a=[],b=[];switch(u(this.stress,this.tilt,this.offset,this.azimuthStart,this.azimuthLength,this.azimuthSegments,this.elevationStart,this.elevationLength,this.elevationSegments,a,b),this.k){case q["default"].EMPTY:x(a,b,this.radius,this.elevationSegments,this.azimuthSegments,this);break;case q["default"].POINT:z(a,b,this.radius,this.elevationSegments,this.azimuthSegments,this);break;case q["default"].LINE:y(a,b,this.radius,this.elevationSegments,this.azimuthSegments,this);break;case q["default"].TRIANGLE:x(a,b,this.radius,this.elevationSegments,this.azimuthSegments,this);break;default:console.warn(this.k+"-simplex is not supported for geometry generation.")}this.setModified(!1)},b}(p["default"]),K=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,A(b),b.contextManager,b,c+1),this._radius=1,this.setLoggingName("SphereGeometry"),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"radius",{get:function(){return this._radius},set:function(a){this._radius=a,this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),b.prototype.getPrincipalScale=function(a){switch(a){case"radius":return this._radius;default:throw new Error(m["default"]("getPrincipalScale('"+a+"')").message)}},b.prototype.setPrincipalScale=function(a,b){switch(a){case"radius":this._radius=b;break;default:throw new Error(m["default"]("setPrincipalScale('"+a+"')").message)}this.setScale(this._radius,this._radius,this._radius)},b}(e["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=K});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/PolyhedronBuilder",["require","exports","../geometries/SimplexPrimitivesBuilder","../geometries/Simplex","../core/GraphicsProgramSymbols","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h){"use strict";function i(a){return Math.atan2(a.z,-a.x)}function j(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}function k(a,b){var c=h["default"].copy(a).normalize();b.push(c);var d=i(a)/2/Math.PI+.5,e=j(a)/Math.PI+.5,f=c;return f.uv=new g.Vector2([d,1-e]),c}function l(a,b,c){return c<0&&1===a.x&&(a=new g.Vector2([a.x-1,a.y])),0===b.x&&0===b.z&&(a=new g.Vector2([c/2/Math.PI+.5,a.y])),a.clone()}function m(a,b,c){return n.copy(b).sub(a),o.copy(c).sub(b),h["default"].copy(n).cross(o).normalize()}var n=h["default"].zero(),o=h["default"].zero(),p=function(a){function b(b,c,f,g){function j(a,b,c){var d=(a.x+b.x+c.x)/3,e=(a.y+b.y+c.y)/3,f=(a.z+b.z+c.z)/3;return{x:d,y:e,z:f}}function n(a,b,c,f){var g=i(j(a,b,c)),k=a,n=b,o=c,p=l(k.uv,a,g),q=l(n.uv,b,g),r=l(o.uv,c,g),s=m(a,b,c),t=new d["default"](d["default"].TRIANGLE);t.vertices[0].attributes[e["default"].ATTRIBUTE_POSITION]=h["default"].copy(a),t.vertices[0].attributes[e["default"].ATTRIBUTE_NORMAL]=h["default"].copy(s),t.vertices[0].attributes[e["default"].ATTRIBUTE_COORDS]=p,t.vertices[1].attributes[e["default"].ATTRIBUTE_POSITION]=h["default"].copy(b),t.vertices[1].attributes[e["default"].ATTRIBUTE_NORMAL]=h["default"].copy(s),t.vertices[1].attributes[e["default"].ATTRIBUTE_COORDS]=q,t.vertices[2].attributes[e["default"].ATTRIBUTE_POSITION]=h["default"].copy(c),t.vertices[2].attributes[e["default"].ATTRIBUTE_NORMAL]=h["default"].copy(s),t.vertices[2].attributes[e["default"].ATTRIBUTE_COORDS]=r,f.data.push(t)}function o(a,b,c,d){for(var f=Math.pow(2,b),g=k(a.vertices[0].attributes[e["default"].ATTRIBUTE_POSITION],c),i=k(a.vertices[1].attributes[e["default"].ATTRIBUTE_POSITION],c),j=k(a.vertices[2].attributes[e["default"].ATTRIBUTE_POSITION],c),l=[],m=0;m<=f;m++){l[m]=[];for(var o=k(h["default"].copy(g).lerp(j,m/f),c),p=k(h["default"].copy(i).lerp(j,m/f),c),q=f-m,r=0;r<=q;r++)0===r&&m===f?l[m][r]=o:l[m][r]=k(h["default"].copy(o).lerp(p,r/q),c)}for(var m=0;m<f;m++)for(var r=0;r<2*(f-m)-1;r++){var s=Math.floor(r/2);r%2===0?n(l[m][s+1],l[m+1][s],l[m][s],d):n(l[m][s+1],l[m+1][s+1],l[m+1][s],d)}}void 0===f&&(f=1),void 0===g&&(g=0),a.call(this);for(var p=[],q=0,r=b.length;q<r;q+=3)k(new h["default"]([b[q],b[q+1],b[q+2]]),p);for(var s=[],q=0,t=0,r=c.length;q<r;q+=3,t++){var u=p[c[q]],v=p[c[q+1]],w=p[c[q+2]],x=m(u,v,w),y=new d["default"](d["default"].TRIANGLE);y.vertices[0].attributes[e["default"].ATTRIBUTE_POSITION]=u,y.vertices[0].attributes[e["default"].ATTRIBUTE_NORMAL]=h["default"].copy(x),y.vertices[1].attributes[e["default"].ATTRIBUTE_POSITION]=v,y.vertices[1].attributes[e["default"].ATTRIBUTE_NORMAL]=h["default"].copy(x),y.vertices[2].attributes[e["default"].ATTRIBUTE_POSITION]=w,
y.vertices[2].attributes[e["default"].ATTRIBUTE_NORMAL]=h["default"].copy(x),s[t]=y}for(var q=0,z=s.length;q<z;q++)o(s[q],g,p,this);for(var q=0,A=p.length;q<A;q++)p[q].scale(f);this.mergeVertices()}return f(b,a),b.prototype.regenerate=function(){},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=p}),b("davinci-eight/geometries/tetrahedronPrimitive",["require","exports","../checks/isDefined","../checks/mustBeNumber","../geometries/PolyhedronBuilder","../atoms/reduce"],function(a,b,c,d,e,f){"use strict";function g(a){void 0===a&&(a={});var b=c["default"](a.radius)?d["default"]("radius",a.radius):1,g=new e["default"](h,i,b);return f["default"](g.toPrimitives())}var h=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/TetrahedronGeometry",["require","exports","../core/GeometryElements","./tetrahedronPrimitive"],function(a,b,c,d){"use strict";var e=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,d["default"](b),b.contextManager,b,c+1),this.setLoggingName("TetrahedronGeometry"),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/core/getAttribVarName",["require","exports","../checks/isDefined","../checks/mustBeObject","../checks/mustBeString"],function(a,b,c,d,e){"use strict";function f(a,b){return d["default"]("attribute",a),e["default"]("varName",b),c["default"](a.name)?e["default"]("attribute.name",a.name):b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/materials/glslAttribType",["require","exports","../core/GraphicsProgramSymbols","../checks/mustBeInteger","../checks/mustBeString"],function(a,b,c,d,e){"use strict";function f(a){switch(d["default"]("size",a),a){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Can't compute the GLSL attribute type from size "+a)}}function g(a,b){switch(e["default"]("key",a),d["default"]("size",b),a){case c["default"].ATTRIBUTE_COLOR:return"vec3";default:return f(b)}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/materials/fragmentShaderSrc",["require","exports","../config","../checks/mustBeBoolean","../checks/mustBeDefined"],function(a,b,c,d,e){"use strict";function f(a,b,f,h){e["default"]("attributes",a),e["default"]("uniforms",b),d["default"]("vColor",f),d["default"]("vLight",h);var i=[];i.push("// fragment shader generated by "+c["default"].NAMESPACE+" "+c["default"].VERSION),g&&(i.push("#ifdef GL_ES"),i.push("#  ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("#  else"),i.push("precision mediump float;"),i.push("#  endif"),i.push("#endif")),f&&i.push("varying highp vec4 vColor;"),h&&i.push("varying highp vec3 vLight;"),i.push("void main(void) {"),h?f?i.push("  gl_FragColor = vec4(vColor.xyz * vLight, vColor.a);"):i.push("  gl_FragColor = vec4(vLight, 1.0);"):f?i.push("  gl_FragColor = vColor;"):i.push("  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);"),i.push("}"),i.push("");var j=i.join("\n");return j}var g=!1;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/core/getUniformVarName",["require","exports","../checks/isDefined","../checks/expectArg"],function(a,b,c,d){"use strict";function e(a,b){return d["default"]("uniform",a).toBeObject(),d["default"]("varName",b).toBeString(),c["default"](a.name)?d["default"]("uniform.name",a.name).toBeString().value:b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/materials/vertexShaderSrc",["require","exports","../config","../core/getAttribVarName","../core/getUniformVarName","../checks/mustBeBoolean","../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){return e["default"](a[b],b)}function j(a,b,e,j){g["default"]("attributes",a),g["default"]("uniforms",b),f["default"]("vColor",e),f["default"]("vLight",j);var u=[];u.push("// vertex shader generated by "+c["default"].NAMESPACE+" "+c["default"].VERSION);for(var v in a)a.hasOwnProperty(v)&&u.push(l+a[v].glslType+k+d["default"](a[v],v)+o);for(var w in b)b.hasOwnProperty(w)&&u.push(m+b[w].glslType+k+i(b,w)+o);e&&u.push("varying highp vec4 vColor;"),j&&u.push("varying highp vec3 vLight;"),u.push("void main(void) {");var x=[];if(x.unshift(o),a[h["default"].ATTRIBUTE_POSITION])switch(a[h["default"].ATTRIBUTE_POSITION].glslType){case"float":x.unshift(q),x.unshift("1.0"),x.unshift(n),x.unshift("0.0"),x.unshift(n),x.unshift("0.0"),x.unshift(n),x.unshift(d["default"](a[h["default"].ATTRIBUTE_POSITION],h["default"].ATTRIBUTE_POSITION)),x.unshift(p),x.unshift("vec4");break;case"vec2":x.unshift(q),x.unshift("1.0"),x.unshift(n),x.unshift("0.0"),x.unshift(n),x.unshift(d["default"](a[h["default"].ATTRIBUTE_POSITION],h["default"].ATTRIBUTE_POSITION)),x.unshift(p),x.unshift("vec4");break;case"vec3":x.unshift(q),x.unshift("1.0"),x.unshift(n),x.unshift(d["default"](a[h["default"].ATTRIBUTE_POSITION],h["default"].ATTRIBUTE_POSITION)),x.unshift(p),x.unshift("vec4");break;case"vec4":x.unshift(d["default"](a[h["default"].ATTRIBUTE_POSITION],h["default"].ATTRIBUTE_POSITION))}else x.unshift("vec4(0.0, 0.0, 0.0, 1.0)");if(b[h["default"].UNIFORM_REFLECTION_ONE_MATRIX]&&(x.unshift(r),x.unshift(i(b,h["default"].UNIFORM_REFLECTION_ONE_MATRIX))),b[h["default"].UNIFORM_REFLECTION_TWO_MATRIX]&&(x.unshift(r),x.unshift(i(b,h["default"].UNIFORM_REFLECTION_TWO_MATRIX))),b[h["default"].UNIFORM_MODEL_MATRIX]&&(x.unshift(r),x.unshift(i(b,h["default"].UNIFORM_MODEL_MATRIX))),b[h["default"].UNIFORM_VIEW_MATRIX]&&(x.unshift(r),x.unshift(i(b,h["default"].UNIFORM_VIEW_MATRIX))),b[h["default"].UNIFORM_PROJECTION_MATRIX]&&(x.unshift(r),x.unshift(i(b,h["default"].UNIFORM_PROJECTION_MATRIX))),x.unshift(s),x.unshift("gl_Position"),x.unshift("  "),u.push(x.join("")),b[h["default"].UNIFORM_POINT_SIZE]&&u.push("  gl_PointSize = "+i(b,h["default"].UNIFORM_POINT_SIZE)+";"),e)if(a[h["default"].ATTRIBUTE_COLOR]){var y=d["default"](a[h["default"].ATTRIBUTE_COLOR],h["default"].ATTRIBUTE_COLOR);switch(a[h["default"].ATTRIBUTE_COLOR].glslType){case"vec4":u.push("  vColor = "+y+o);break;case"vec3":b[h["default"].UNIFORM_OPACITY]?u.push("  vColor = vec4("+y+", "+i(b,h["default"].UNIFORM_OPACITY)+");"):u.push("  vColor = vec4("+y+", 1.0);");break;default:throw new Error("Unexpected type for color attribute: "+a[h["default"].ATTRIBUTE_COLOR].glslType)}}else if(b[h["default"].UNIFORM_COLOR]){var z=i(b,h["default"].UNIFORM_COLOR);switch(b[h["default"].UNIFORM_COLOR].glslType){case"vec4":u.push("  vColor = "+z+o);break;case"vec3":b[h["default"].UNIFORM_OPACITY]?u.push("  vColor = vec4("+z+", "+i(b,h["default"].UNIFORM_OPACITY)+");"):u.push("  vColor = vec4("+z+", 1.0);");break;default:throw new Error("Unexpected type for color uniform: "+b[h["default"].UNIFORM_COLOR].glslType)}}else u.push("  vColor = vec4(1.0, 1.0, 1.0, 1.0);");j&&(b[h["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&b[h["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]&&b[h["default"].UNIFORM_NORMAL_MATRIX]&&a[h["default"].ATTRIBUTE_NORMAL]?(u.push("  vec3 L = normalize("+i(b,h["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION)+");"),u.push("  vec3 N = normalize("+i(b,h["default"].UNIFORM_NORMAL_MATRIX)+" * "+d["default"](a[h["default"].ATTRIBUTE_NORMAL],h["default"].ATTRIBUTE_NORMAL)+");"),u.push("  // The minus sign arises because L is the light direction, so we need dot(N, -L) = -dot(N, L)"),u.push("  float "+t+" = max(-dot(N, L), 0.0);"),b[h["default"].UNIFORM_AMBIENT_LIGHT]?u.push("  vLight = "+i(b,h["default"].UNIFORM_AMBIENT_LIGHT)+" + "+t+" * "+i(b,h["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";"):u.push("  vLight = "+t+" * "+i(b,h["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";")):b[h["default"].UNIFORM_AMBIENT_LIGHT]?u.push("  vLight = "+i(b,h["default"].UNIFORM_AMBIENT_LIGHT)+";"):u.push("  vLight = vec3(1.0, 1.0, 1.0);")),u.push("}"),u.push("");var A=u.join("\n");return A}var k=" ",l="attribute"+k,m="uniform"+k,n=","+k,o=";",p="(",q=")",r=k+"*"+k,s=k+"="+k,t="directionalLightCosineFactor";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/materials/SmartGraphicsProgram",["require","exports","./fragmentShaderSrc","./ShaderMaterial","./vertexShaderSrc"],function(a,b,c,d,e){"use strict";var g=function(a){function b(b,d,f,g,h,i){void 0===i&&(i=0),a.call(this,e["default"](b,d,f,g),c["default"](b,d,f,g),[],h,i+1),this.setLoggingName("SmartGraphicsProgram"),0===i&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(d.ShaderMaterial);b.SmartGraphicsProgram=g}),b("davinci-eight/materials/vColorRequired",["require","exports","../core/GraphicsProgramSymbols"],function(a,b,c){"use strict";function d(a,b){return!!a[c["default"].ATTRIBUTE_COLOR]||!!b[c["default"].UNIFORM_COLOR]}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/materials/vLightRequired",["require","exports","../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a,b,c,d){"use strict";function e(a,b){return c["default"]("attributes",a),c["default"]("uniforms",b),!!b[d["default"].UNIFORM_AMBIENT_LIGHT]||!!b[d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&!!b[d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/materials/GraphicsProgramBuilder",["require","exports","../core/getAttribVarName","./glslAttribType","../checks/mustBeInteger","../checks/mustBeString","../materials/SmartGraphicsProgram","./vColorRequired","./vLightRequired","./fragmentShaderSrc","./vertexShaderSrc"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){for(var b={},f=Object.keys(a),g=f.length,h=0;h<g;h++){var i=f[h],j=a[i],k=e["default"]("size",j.size),l=c["default"](j,i);b[l]={glslType:d["default"](i,k)}}return b}var m=function(){function a(a){if(this.aMeta={},this.uParams={},a)for(var b=a.attributes,c=Object.keys(b),d=0,e=c.length;d<e;d++){var f=c[d],g=b[f];this.attribute(f,g.size)}}return a.prototype.attribute=function(a,b){return f["default"]("name",a),e["default"]("size",b),this.aMeta[a]={size:b},this},a.prototype.uniform=function(a,b){return f["default"]("name",a),f["default"]("type",b),this.uParams[a]={glslType:b},this},a.prototype.build=function(a){var b=l(this.aMeta),c=h["default"](b,this.uParams),d=i["default"](b,this.uParams);return new g.SmartGraphicsProgram(b,this.uParams,c,d,a)},a.prototype.vertexShaderSrc=function(){var a=l(this.aMeta),b=h["default"](a,this.uParams),c=i["default"](a,this.uParams);return k["default"](a,this.uParams,b,c)},a.prototype.fragmentShaderSrc=function(){var a=l(this.aMeta),b=h["default"](a,this.uParams),c=i["default"](a,this.uParams);return j["default"](a,this.uParams,b,c)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=m});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/materials/LineMaterial",["require","exports","../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../checks/isDefined","../checks/isNull","../checks/isUndefined","./ShaderMaterial","../checks/mustBeObject"],function(a,b,c,d,e,g,h,i,j){"use strict";function k(a){g["default"](a)||h["default"](a)?(a={attributes:{},uniforms:{}},a.attributes[d["default"].ATTRIBUTE_POSITION]=3,a.uniforms[d["default"].UNIFORM_COLOR]="vec3",a.uniforms[d["default"].UNIFORM_OPACITY]="float",a.uniforms[d["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[d["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[d["default"].UNIFORM_VIEW_MATRIX]="mat4"):j["default"]("options",a);for(var b=e["default"](a.attributes)?a.attributes:{},f=e["default"](a.uniforms)?a.uniforms:{},i=new c["default"],k=Object.keys(b),l=0;l<k.length;l++){var m=k[l],n=b[m];i.attribute(m,n)}for(var o=Object.keys(f),p=0;p<o.length;p++){var q=o[p],r=f[q];i.uniform(q,r)}return i}function l(a){return k(a).vertexShaderSrc()}function m(a){return k(a).fragmentShaderSrc()}var n=function(a){function b(b,c,d){void 0===d&&(d=0),a.call(this,l(b),m(b),[],c,d+1),this.setLoggingName("LineMaterial"),0===d&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(i.ShaderMaterial);b.LineMaterial=n});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/materials/MeshMaterial",["require","exports","../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../checks/isDefined","../checks/isNull","../checks/isUndefined","./ShaderMaterial","../checks/mustBeObject"],function(a,b,c,d,e,g,h,i,j){"use strict";function k(a){h["default"](a)||g["default"](a)?(a={attributes:{},uniforms:{}},a.attributes[d["default"].ATTRIBUTE_POSITION]=3,a.attributes[d["default"].ATTRIBUTE_NORMAL]=3,a.uniforms[d["default"].UNIFORM_COLOR]="vec3",a.uniforms[d["default"].UNIFORM_OPACITY]="float",a.uniforms[d["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[d["default"].UNIFORM_NORMAL_MATRIX]="mat3",a.uniforms[d["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[d["default"].UNIFORM_VIEW_MATRIX]="mat4",a.uniforms[d["default"].UNIFORM_AMBIENT_LIGHT]="vec3",a.uniforms[d["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]="vec3",a.uniforms[d["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]="vec3"):j["default"]("options",a);for(var b=e["default"](a.attributes)?a.attributes:{},f=e["default"](a.uniforms)?a.uniforms:{},i=new c["default"],k=Object.keys(b),l=0;l<k.length;l++){var m=k[l],n=b[m];i.attribute(m,n)}for(var o=Object.keys(f),p=0;p<o.length;p++){var q=o[p],r=f[q];i.uniform(q,r)}return i}function l(a){return k(a).vertexShaderSrc()}function m(a){return k(a).fragmentShaderSrc()}var n=function(a){function b(b,c,d){void 0===d&&(d=0),a.call(this,l(b),m(b),[],c,d+1),this.setLoggingName("MeshMaterial"),0===d&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(i.ShaderMaterial);b.MeshMaterial=n});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/materials/PointMaterial",["require","exports","../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../checks/isDefined","../checks/isNull","../checks/isUndefined","./ShaderMaterial","../checks/mustBeObject"],function(a,b,c,d,e,g,h,i,j){"use strict";function k(a){g["default"](a)||h["default"](a)?(a={attributes:{},uniforms:{}},a.attributes[d["default"].ATTRIBUTE_POSITION]=3,a.uniforms[d["default"].UNIFORM_COLOR]="vec3",a.uniforms[d["default"].UNIFORM_OPACITY]="float",a.uniforms[d["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[d["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[d["default"].UNIFORM_VIEW_MATRIX]="mat4",a.uniforms[d["default"].UNIFORM_POINT_SIZE]="float"):j["default"]("options",a);for(var b=e["default"](a.attributes)?a.attributes:{},f=e["default"](a.uniforms)?a.uniforms:{},i=new c["default"],k=Object.keys(b),l=0;l<k.length;l++){var m=k[l],n=b[m];i.attribute(m,n)}for(var o=Object.keys(f),p=0;p<o.length;p++){var q=o[p],r=f[q];i.uniform(q,r)}return i}function l(a){return k(a).vertexShaderSrc()}function m(a){return k(a).fragmentShaderSrc()}var n=function(a){function b(b,c,d){void 0===d&&(d=0),a.call(this,l(b),m(b),[],c,d+1),this.setLoggingName("PointMaterial"),0===d&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(i.ShaderMaterial);b.PointMaterial=n}),b("davinci-eight/math/mathcore",["require","exports"],function(a,b){"use strict";function c(a,b){return null!==a&&"object"==typeof a&&"function"==typeof a[b]}function d(a,b){return function(d){var e=d;if(c(d,a))return e[a]();if("number"==typeof d){var f=e,g=b(f);return g}throw new TypeError("x must support "+a+"(x)")}}function e(a){return(n(a)+n(-a))/2}function f(a){return(n(a)-n(-a))/2}function g(a){return f(a)/e(a)}function h(a){return a*a}var i=Math.abs,j=Math.acos,k=Math.asin,l=Math.atan,m=Math.cos,n=Math.exp,o=Math.log,p=Math.sin,q=Math.sqrt,r=Math.tan,s={acos:d("acos",j),asin:d("asin",k),atan:d("atan",l),cos:d("cos",m),cosh:d("cosh",e),exp:d("exp",n),log:d("log",o),norm:d("norm",i),quad:d("quad",h),sin:d("sin",p),sinh:d("sinh",f),sqrt:d("sqrt",q),tan:d("tan",r),tanh:d("tanh",g),Math:{cosh:e,sinh:f}};Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=s});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/math/Vector4",["require","exports","../math/Coords"],function(a,b,c){"use strict";var d=function(a){function b(b,c){void 0===b&&(b=[0,0,0,0]),void 0===c&&(c=!1),a.call(this,b,c,4)}return f(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[0]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[1]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this.coords[2]},set:function(a){this.modified=this.modified||this.z!==a,this.coords[2]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"w",{get:function(){return this.coords[3]},set:function(a){this.modified=this.modified||this.w!==a,this.coords[3]=a},enumerable:!0,configurable:!0}),b.prototype.setW=function(a){return this.w=a,this},b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.w+=a.w*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},b.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=this.z,e=this.w,f=a.elements;return this.x=f[0]*b+f[4]*c+f[8]*d+f[12]*e,this.y=f[1]*b+f[5]*c+f[9]*d+f[13]*e,this.z=f[2]*b+f[6]*c+f[10]*d+f[14]*e,this.w=f[3]*b+f[7]*c+f[11]*d+f[15]*e,this},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.clone=function(){return new b([this.x,this.y,this.z,this.w],this.modified)},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w,this},b.prototype.divByScalar=function(a){return this.x/=a,this.y/=a,this.z/=a,this.w/=a,this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},b.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},b.prototype.reflect=function(a){return this},b.prototype.rotate=function(a){return this},b.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this},b.prototype.slerp=function(a,b){return this},b.prototype.sub=function(a,b){return this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.w-=a.w*b,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},b.prototype.magnitude=function(){throw new Error("TODO: Vector4.magnitude()")},b.prototype.squaredNorm=function(){throw new Error("TODO: Vector4.squaredNorm()")},b.prototype.toExponential=function(a){return"TODO Vector4.toExponential"},b.prototype.toFixed=function(a){return"TODO Vector4.toFixed"},b.prototype.toPrecision=function(a){return"TODO Vector4.toFixed"},b.prototype.toString=function(a){return"TODO Vector4.toString"},b.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this.w=0,this},b}(c.Coords);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/utils/getCanvasElementById",["require","exports","../checks/mustBeString","../checks/mustBeObject"],function(a,b,c,d){"use strict";function e(a,b){void 0===b&&(b=window.document),c["default"]("elementId",a),d["default"]("document",b);var e=b.getElementById(a);if(e instanceof HTMLCanvasElement)return e;throw new Error(a+" is not an HTMLCanvasElement.")}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/collections/NumberShareableMap",["require","exports","../core/ShareableBase"],function(a,b,c){"use strict";var d=function(a){function b(){a.call(this),this._elements={},this.setLoggingName("NumberShareableMap")}return f(b,a),b.prototype.destructor=function(b){this.forEach(function(a,b){b&&b.release()}),this._elements=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.exists=function(a){var b=this._elements[a];return!!b},b.prototype.get=function(a){var b=this.getWeakRef(a);return b&&b.addRef(),b},b.prototype.getWeakRef=function(a){return this._elements[a]},b.prototype.put=function(a,b){b&&b.addRef(),this.putWeakRef(a,b)},b.prototype.putWeakRef=function(a,b){var c=this._elements,d=c[a];d&&d.release(),c[a]=b},b.prototype.forEach=function(a){for(var b=this.keys,c=0,d=b.length;c<d;c++){var e=b[c],f=this._elements[e];a(e,f)}},Object.defineProperty(b.prototype,"keys",{get:function(){return Object.keys(this._elements).map(function(a){return parseFloat(a)})},enumerable:!0,configurable:!0}),b.prototype.remove=function(a){this.put(a,void 0),delete this._elements[a]},b}(c.ShareableBase);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/collections/StringShareableMap",["require","exports","../core/ShareableBase"],function(a,b,c){"use strict";var d=function(a){function b(){a.call(this),this.elements={},this.setLoggingName("StringShareableMap")}return f(b,a),b.prototype.destructor=function(b){var c=this;this.forEach(function(a){c.putWeakRef(a,void 0)}),a.prototype.destructor.call(this,b+1)},b.prototype.exists=function(a){var b=this.elements[a];return!!b},b.prototype.get=function(a){var b=this.elements[a];return b?(b.addRef&&b.addRef(),b):void 0},b.prototype.getWeakRef=function(a){return this.elements[a]},b.prototype.put=function(a,b){b&&b.addRef&&b.addRef(),this.putWeakRef(a,b)},b.prototype.putWeakRef=function(a,b){var c=this.elements,d=c[a];d&&d.release&&d.release(),c[a]=b},b.prototype.forEach=function(a){for(var b=this.keys,c=0,d=b.length;c<d;c++){var e=b[c];a(e,this.elements[e])}},Object.defineProperty(b.prototype,"keys",{get:function(){return Object.keys(this.elements)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"values",{get:function(){for(var a=[],b=this.keys,c=0,d=b.length;c<d;c++){var e=b[c];a.push(this.elements[e])}return a},enumerable:!0,configurable:!0}),b.prototype.remove=function(a){var b=this.elements[a];return delete this.elements[a],b},b}(c.ShareableBase);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/utils/animation",["require","exports","../checks/expectArg"],function(a,b,c){"use strict";function d(){}function e(a){if(a){var b="Exception raised during animate function: "+a;console.warn(b)}}function f(a){return!1}function g(a,b){void 0===b&&(b={});var g,h,i,j=1,k=2,l=3,m=c["default"]("options.window",b.window||window).toNotBeNull().value,n=c["default"]("options.setUp",b.setUp||d).value,o=c["default"]("options.tearDown",b.tearDown||e).value,p=c["default"]("options.terminate",b.terminate||f).toNotBeNull().value,q=!1,r=0,s=1e3,t=null,u=j,v=function(a){27===a.keyCode&&(q=!0,a.preventDefault())},w={start:function(){w.isRunning||(n(),m.document.addEventListener("keydown",v,!1),u=k,t=m.requestAnimationFrame(i))},stop:function(){w.isRunning&&(q=!0)},reset:function(){w.isPaused&&(g=void 0,r=0,u=j)},get time(){return r/s},lap:function(){w.isRunning},get isRunning(){return u===k},get isPaused(){return u===l}};return i=function(b){if(g&&(r=r+b-g),g=b,q||p(r/s)){q=!1,m.cancelAnimationFrame(t),w.isRunning?(u=l,g=void 0):console.error("stopSignal received while not running."),m.document.removeEventListener("keydown",v,!1);try{o(h)}catch(c){console.warn("Exception raised during tearDown function: "+c)}}else{t=m.requestAnimationFrame(i);try{a(r/s)}catch(c){h=c,q=!0}}},w}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight/visual/contextManagerFromOptions",["require","exports","../checks/isDefined"],function(a,b,c){"use strict";function d(a){return c["default"](a.engine)?a.engine:c["default"](a.contextManager)?a.contextManager:void 0}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/PrincipalScaleMesh",["require","exports","../core/Mesh"],function(a,b,c){"use strict";var d=function(a){function b(b,c,d,e){void 0===e&&(e=0),a.call(this,b,c,d,e+1),this.setLoggingName("PrincipalScaleMesh"),0===e&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b.prototype.getPrincipalScale=function(a){var b=this.geometry;if(b){var c=b.getPrincipalScale(a);return b.release(),c}throw new Error("getPrincipalScale('"+a+"') is not available because geometry is not defined.")},b.prototype.setPrincipalScale=function(a,b){var c=this.geometry;c.setPrincipalScale(a,b);var d=c.scaling;this.stress.copy(d),c.release()},b}(c.Mesh);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/visual/setColorOption",["require","exports","../checks/isDefined"],function(a,b,c){"use strict";function d(a,b,d){c["default"](b.color)?a.color.copy(b.color):c["default"](d)&&a.color.copy(d)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/visual/setDeprecatedOptions",["require","exports","../checks/isDefined"],function(a,b,c){"use strict";function d(a,b){c["default"](b[f])&&(console.warn("options."+f+" is deprecated. Please use the X (position vector) property instead."),a.X.copyVector(b[f])),c["default"](b[e])&&(console.warn("options."+e+" is deprecated. Please use the R (attitude rotor) property instead."),a.R.copySpinor(b[e]))}var e="attitude",f="position";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Arrow",["require","exports","../geometries/ArrowGeometry","../core/Color","./contextManagerFromOptions","../math/Geometric3","../materials/MeshMaterial","./PrincipalScaleMesh","../checks/isDefined","../checks/isGE","../checks/mustBeDefined","../math/quadVectorE3","./setColorOption","./setDeprecatedOptions","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p){"use strict";function q(a,b){return j["default"](a.vector)?p["default"].copy(a.vector).normalize():b}var r=function(a){function b(b,f){var i=this;void 0===b&&(b={}),void 0===f&&(f=0),a.call(this,void 0,void 0,e["default"](b),f+1),this.setLoggingName("Arrow"),this.direction0=q(b,p["default"].vector(0,1,0)),this._vector=g.Geometric3.fromVector(this.direction0);var j={};j.contextManager=e["default"](b),j.offset=b.offset,j.tilt=b.tilt;var k=new c["default"](j),l=void 0,r=new h.MeshMaterial(l,e["default"](b));this.geometry=k,this.material=r,k.release(),r.release(),b.color&&this.color.copy(b.color),n["default"](this,b,d.Color.gray),o["default"](this,b);var s=!0;this.vectorChangeHandler=function(a,b,c,d){s&&(s=!1,i.R.rotorFromDirections(i.direction0,d),i.setPrincipalScale("length",Math.sqrt(m["default"](d))),s=!0)},this.attitudeChangeHandler=function(a,b,c,d){s&&(s=!1,i._vector.copyVector(i.direction0).rotate(i.R).scale(i.length),s=!0)},this._vector.on("change",this.vectorChangeHandler),this.R.on("change",this.attitudeChangeHandler),0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),this._vector.off("change",this.vectorChangeHandler),this.R.off("change",this.attitudeChangeHandler),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"length",{get:function(){return this.getPrincipalScale("length")},set:function(a){if(k["default"](a,0)){this.setPrincipalScale("length",a);var b=Math.sqrt(m["default"](this._vector));this._vector.scale(a/b)}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"h",{get:function(){return this._vector},set:function(a){l["default"]("h",a),this._vector.copyVector(a)},enumerable:!0,configurable:!0}),b}(i["default"]);b.Arrow=r}),b("davinci-eight/visual/direction",["require","exports","../math/Vector3"],function(a,b,c){"use strict";function d(a){return a.axis?c["default"].copy(a.axis).normalize():c["default"].vector(0,1,0)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/RigidBody",["require","exports","../math/Geometric3","./PrincipalScaleMesh","../checks/mustBeObject","../math/Vector3"],function(a,b,c,d,e,g){"use strict";var h=function(a){function b(b,d,e,f,h){void 0===h&&(h=0),a.call(this,b,d,e,h+1),this.L=c.Geometric3.zero(),this.m=1,this.P=c.Geometric3.zero(),this.Q=c.Geometric3.zero(),this.setLoggingName("RigidBody"),this.initialAxis=g["default"].copy(f),0===h&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"axis",{get:function(){return c.Geometric3.fromVector(this.initialAxis).rotate(this.R)},set:function(a){e["default"]("axis",a),this.R.rotorFromDirections(this.initialAxis,a)},enumerable:!0,configurable:!0}),b}(d["default"]);b.RigidBody=h});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Basis",["require","exports","../core/BeginMode","../core/Color","../facets/ColorFacet","./contextManagerFromOptions","../core/DataType","./direction","../core/GeometryArrays","./RigidBody","./setColorOption","./setDeprecatedOptions","../materials/ShaderMaterial","../math/Vector3","../facets/Vector3Facet"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p){"use strict";function q(a,b){return a?a.addContextListener?(b&&console.warn("Basis(contextManager: ContextManager) is deprecated. Please use Basis(options: {...}) instead."),a):g["default"](a):void 0}var r="uPointA",s="uPointB",t="uPointC",u="uColorA",v="uColorB",w="uColorC",x=["attribute float aPointIndex;","attribute float aColorIndex;","uniform vec3 "+r+";","uniform vec3 "+s+";","uniform vec3 "+t+";","uniform vec3 "+u+";","uniform vec3 "+v+";","uniform vec3 "+w+";","uniform mat4 uModel;","uniform mat4 uProjection;","uniform mat4 uView;","varying highp vec4 vColor;","","void main(void) {","  vec3 aPosition;","  vec3 aColor;","  if (aPointIndex == 0.0) {","    aPosition = vec3(0.0, 0.0, 0.0);","  }","  if (aPointIndex == 1.0) {","    aPosition = "+r+";","  }","  if (aPointIndex == 2.0) {","    aPosition = "+s+";","  }","  if (aPointIndex == 3.0) {","    aPosition = "+t+";","  }","  if (aColorIndex == 1.0) {","    aColor = "+u+";","  }","  if (aColorIndex == 2.0) {","    aColor = "+v+";","  }","  if (aColorIndex == 3.0) {","    aColor = "+w+";","  }","  gl_Position = uProjection * uView * uModel * vec4(aPosition, 1.0);","  vColor = vec4(aColor, 1.0);","}"].join("\n"),y=["precision mediump float;","varying highp vec4 vColor;","","void main(void) {","  gl_FragColor = vColor;","}"].join("\n"),z=function(a){
function b(b,f){void 0===b&&(b={}),void 0===f&&(f=0),a.call(this,void 0,void 0,q(b,!0),i["default"](b),f+1),this.uPointA=new p["default"](r),this.uPointB=new p["default"](s),this.uPointC=new p["default"](t),this.uColorA=new e.ColorFacet(u),this.uColorB=new e.ColorFacet(v),this.uColorC=new e.ColorFacet(w),this.setLoggingName("Basis"),this.uPointA.vector.copy(o["default"].vector(1,0,0)),this.colorA.copy(d.Color.red),this.uPointB.vector.copy(o["default"].vector(0,1,0)),this.colorB.copy(d.Color.green),this.uPointC.vector.copy(o["default"].vector(0,0,1)),this.colorC.copy(d.Color.blue);var g=new j["default"]((void 0),q(b,!1));g.mode=c["default"].LINES,g.setAttribute("aPointIndex",{values:[0,1,0,2,0,3],size:1,type:h["default"].FLOAT}),g.setAttribute("aColorIndex",{values:[1,1,2,2,3,3],size:1,type:h["default"].FLOAT}),this.geometry=g,g.release();var k=new n.ShaderMaterial(x,y,[],q(b,!1));this.material=k,k.release(),this.setFacet("Basis-"+r,this.uPointA),this.setFacet("Basis-"+s,this.uPointB),this.setFacet("Basis-"+t,this.uPointC),this.setFacet("Basis-"+u,this.uColorA),this.setFacet("Basis-"+v,this.uColorB),this.setFacet("Basis-"+w,this.uColorC),l["default"](this,b,void 0),m["default"](this,b),0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"a",{get:function(){return this.uPointA.vector},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this.uPointB.vector},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"c",{get:function(){return this.uPointC.vector},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"colorA",{get:function(){return this.uColorA.color},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"colorB",{get:function(){return this.uColorB.color},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"colorC",{get:function(){return this.uColorC.color},enumerable:!0,configurable:!0}),b}(k.RigidBody);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=z}),b("davinci-eight/visual/kFromOptions",["require","exports","../checks/isDefined","../checks/mustBeInteger"],function(a,b,c,d){"use strict";function e(a){return c["default"](a)&&c["default"](a.k)?d["default"]("k",a.k):f}var f=2;Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/visual/materialFromOptions",["require","exports","./contextManagerFromOptions","../materials/LineMaterial","../materials/MeshMaterial","../materials/PointMaterial"],function(a,b,c,d,e,f){"use strict";function g(a,b){switch(a){case 0:var g=void 0;return new f.PointMaterial(g,c["default"](b));case 1:var g=void 0;return new d.LineMaterial(g,c["default"](b));default:var g=void 0;return new e.MeshMaterial(g,c["default"](b))}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Sphere",["require","exports","../core/Color","./contextManagerFromOptions","./direction","../checks/isDefined","./kFromOptions","./materialFromOptions","../checks/mustBeNumber","./RigidBody","./setColorOption","./setDeprecatedOptions","../geometries/SphereGeometry"],function(a,b,c,d,e,g,h,i,j,k,l,m,n){"use strict";var o="radius",p=1,q=function(a){function b(b,f){void 0===b&&(b={}),void 0===f&&(f=0),a.call(this,void 0,void 0,d["default"](b),e["default"](b),f+1),this.setLoggingName("Sphere");var k=h["default"](b),q={};q.contextManager=d["default"](b),q.k=k,q.azimuthSegments=b.azimuthSegments,q.azimuthStart=b.azimuthStart,q.azimuthLength=b.azimuthLength,q.elevationLength=b.elevationLength,q.elevationSegments=b.elevationSegments,q.elevationStart=b.elevationStart,q.offset=b.offset,q.stress=void 0,q.tilt=b.tilt;var r=new n["default"](q);this.geometry=r,r.release();var s=i["default"](k,b);this.material=s,s.release(),l["default"](this,b,2===k?c.Color.cobalt:c.Color.gray),m["default"](this,b),g["default"](b.radius)&&(this.radius=g["default"](b.radius)?j["default"](o,b.radius):p),0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"radius",{get:function(){return this.getPrincipalScale(o)},set:function(a){this.setPrincipalScale(o,j["default"](o,a))},enumerable:!0,configurable:!0}),b}(k.RigidBody);b.Sphere=q});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Box",["require","exports","../geometries/BoxGeometry","../core/Color","./contextManagerFromOptions","./direction","../checks/isDefined","./kFromOptions","./materialFromOptions","../checks/mustBeNumber","./RigidBody","./setColorOption","./setDeprecatedOptions"],function(a,b,c,d,e,g,h,i,j,k,l,m,n){"use strict";var o=function(a){function b(b,f){void 0===b&&(b={}),void 0===f&&(f=0),a.call(this,void 0,void 0,e["default"](b),g["default"](b),f+1),this.setLoggingName("Box");var l=i["default"](b),o={};o.contextManager=e["default"](b),o.k=l,o.tilt=b.tilt,o.offset=b.offset,o.openBack=b.openBack,o.openBase=b.openBase,o.openFront=b.openFront,o.openLeft=b.openLeft,o.openRight=b.openRight,o.openCap=b.openCap;var p=new c["default"](o);this.geometry=p,p.release();var q=j["default"](l,b);this.material=q,q.release(),b.color&&this.color.copy(b.color),m["default"](this,b,2===l?d.Color.red:d.Color.gray),n["default"](this,b),this.width=h["default"](b.width)?k["default"]("width",b.width):1,this.height=h["default"](b.height)?k["default"]("height",b.height):1,this.depth=h["default"](b.depth)?k["default"]("depth",b.depth):1,0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"width",{get:function(){return this.getPrincipalScale("width")},set:function(a){this.setPrincipalScale("width",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.getPrincipalScale("height")},set:function(a){this.setPrincipalScale("height",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"depth",{get:function(){return this.getPrincipalScale("depth")},set:function(a){this.setPrincipalScale("depth",a)},enumerable:!0,configurable:!0}),b}(l.RigidBody);b.Box=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Cylinder",["require","exports","./direction","../core/Color","./contextManagerFromOptions","../geometries/CylinderGeometry","../math/Geometric3","../checks/isDefined","./kFromOptions","../materials/MeshMaterial","../checks/mustBeNumber","./RigidBody","./setColorOption","./setDeprecatedOptions"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o){"use strict";var p=function(a){function b(b,f){void 0===b&&(b={}),void 0===f&&(f=0),a.call(this,void 0,void 0,e["default"](b),c["default"](b),f+1),this.setLoggingName("Cylinder");var m=j["default"](b),p={};p.contextManager=e["default"](b),p.k=m,p.tilt=b.tilt,p.offset=b.offset,p.openCap=b.openCap,p.openBase=b.openBase,p.openWall=b.openWall;var q=new g["default"](p);this.geometry=q,q.release();var r=null,s=new k.MeshMaterial(r,e["default"](b));this.material=s,s.release(),n["default"](this,b,d.Color.blueviolet),o["default"](this,b),this.radius=i["default"](b.radius)?h.Geometric3.scalar(l["default"]("radius",b.radius)):h.Geometric3.scalar(.5),this.length=i["default"](b.length)?h.Geometric3.scalar(l["default"]("length",b.length)):h.Geometric3.scalar(1),0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"length",{get:function(){var a=this.getPrincipalScale("length");return h.Geometric3.scalar(a)},set:function(a){if(a instanceof h.Geometric3)this.setPrincipalScale("length",a.a);else{if("number"!=typeof a)throw new Error("length must be a Geometric3 (scalar)");this.setPrincipalScale("length",a),console.warn("length: number is deprecated. length is a Geometric3.")}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"radius",{get:function(){var a=this.getPrincipalScale("radius");return h.Geometric3.scalar(a)},set:function(a){if(a instanceof h.Geometric3)this.setPrincipalScale("radius",a.a);else{if("number"!=typeof a)throw new Error("radius must be a Geometric3 (scalar)");this.setPrincipalScale("radius",a),console.warn("radius: number is deprecated. radius is a Geometric3.")}},enumerable:!0,configurable:!0}),b}(m.RigidBody);b.Cylinder=p}),b("davinci-eight/checks/isLT",["require","exports"],function(a,b){"use strict";function c(a,b){return a<b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c}),b("davinci-eight/checks/mustBeLT",["require","exports","../checks/mustSatisfy","../checks/isLT"],function(a,b,c,d){"use strict";function e(a,b,e,f){return c["default"](a,d["default"](b,e),function(){return"be less than "+e},f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/atoms/numVerticesForCurve",["require","exports","../checks/mustBeInteger"],function(a,b,c){"use strict";function d(a){return c["default"]("uSegments",a),a+1}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/atoms/CurvePrimitive",["require","exports","./GeometryPrimitive","../checks/mustBeGE","../checks/mustBeLT","../checks/mustBeBoolean","../checks/mustBeInteger","./numPostsForFence","./numVerticesForCurve","../i18n/readOnly"],function(a,b,c,d,e,g,h,i,j,k){"use strict";var l=function(a){function b(b,c,e){a.call(this,b,j["default"](c),1),h["default"]("uSegments",c),d["default"]("uSegments",c,0),g["default"]("uClosed",e),this._uSegments=c,this._uClosed=e;for(var f=this.uLength,i=0;i<f;i++){var k=this.vertex(i).coords;k.setComponent(0,i)}}return f(b,a),Object.defineProperty(b.prototype,"uSegments",{get:function(){return this._uSegments},set:function(a){throw new Error(k["default"]("uSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"uLength",{get:function(){return i["default"](this._uSegments,this._uClosed)},set:function(a){throw new Error(k["default"]("uLength").message)},enumerable:!0,configurable:!0}),b.prototype.vertexTransform=function(a){for(var b=this.vertices.length,c=0;c<b;c++){var d=this.vertices[c],e=d.coords.getComponent(0);a.exec(d,e,0,this.uLength,0)}},b.prototype.vertex=function(a){return h["default"]("uIndex",a),d["default"]("uIndex",a,0),e["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=l}),b("davinci-eight/atoms/elementsForCurve",["require","exports","../checks/isDefined","../checks/mustBeArray","./numPostsForFence"],function(a,b,c,d,e){"use strict";function f(a,b,f){f=c["default"](f)?d["default"]("elements",f):[];for(var g=e["default"](a,b),h=0;h<g;h++)f.push(h);return f}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/atoms/LineStrip",["require","exports","./CurvePrimitive","../core/BeginMode","./elementsForCurve","../checks/mustBeGE","../checks/mustBeInteger","../checks/mustBeLT"],function(a,b,c,d,e,g,h,i){"use strict";var j=function(a){function b(b){a.call(this,d["default"].LINE_STRIP,b,!1),this.elements=e["default"](b,!1)}return f(b,a),b.prototype.vertex=function(a){return h["default"]("uIndex",a),g["default"]("uIndex",a,0),i["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/atoms/LinePoints",["require","exports","./CurvePrimitive","../core/BeginMode","./elementsForCurve","../checks/mustBeGE","../checks/mustBeInteger","../checks/mustBeLT"],function(a,b,c,d,e,g,h,i){"use strict";var j=function(a){function b(b){a.call(this,d["default"].POINTS,b,!1),this.elements=e["default"](b,!1)}return f(b,a),b.prototype.vertex=function(a){return h["default"]("uIndex",a),g["default"]("uIndex",a,0),i["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=j}),b("davinci-eight/geometries/curvePrimitive",["require","exports","../core/Color","../core/BeginMode","../core/GraphicsProgramSymbols","../atoms/LineStrip","../atoms/LinePoints","../checks/isDefined","../checks/isFunction","../checks/mustBeNumber","../math/Vector3"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){return k["default"].vector(a,0,0)}function m(a,b,c){switch(a){case d["default"].POINTS:return new g["default"](b);case d["default"].LINES:return new f["default"](b);default:throw new Error("mode must be POINTS, LINES")}}function n(a,b,d){var f=h["default"](d.aPosition)?d.aPosition:l,g=h["default"](d.aColor)?d.aColor:void 0;i["default"](f)&&(a.attributes[e["default"].ATTRIBUTE_POSITION]=k["default"].copy(f(b))),i["default"](g)&&(a.attributes[e["default"].ATTRIBUTE_COLOR]=c.Color.copy(g(b)))}function o(a){var b=h["default"](a.uMin)?j["default"]("uMin",a.uMin):0,c=h["default"](a.uMax)?j["default"]("uMax",a.uMax):1,e=h["default"](a.uSegments)?a.uSegments:1,f=h["default"](a.mode)?a.mode:d["default"].LINES,g=m(f,e,!1),i=g.uLength;if(e>0)for(var k=0;k<i;k++){var l=g.vertex(k),o=b+(c-b)*k/e;n(l,o,a)}else{var l=g.vertex(0),o=(b+c)/2;n(l,o,a)}return g.toPrimitive()}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/CurveGeometry",["require","exports","../core/GeometryElements","./curvePrimitive"],function(a,b,c,d){"use strict";var e=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,d["default"](b),b.contextManager,b,c+1),this.setLoggingName("CurveGeometry"),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(c["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Curve",["require","exports","../core/BeginMode","../core/GraphicsProgramSymbols","../core/Color","./contextManagerFromOptions","../geometries/CurveGeometry","../checks/isDefined","../checks/isFunction","../checks/isNull","../checks/isUndefined","../materials/LineMaterial","../core/Mesh","../checks/mustBeGE","../checks/mustBeNumber","../materials/PointMaterial","./setColorOption","./setDeprecatedOptions","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";function u(a){return t["default"].vector(a,0,0)}function v(a){return j["default"](a)||k["default"](a)}function w(a){return j["default"](a)||l["default"](a)}function x(a,b){if(b.contextManager=g["default"](a),v(a.aPosition))b.aPosition=a.aPosition;else{if(!l["default"](a.aPosition))throw new Error("aPosition must be one of function, null, or undefined.");b.aPosition=u}if(v(a.aColor))b.aColor=a.aColor;else if(!l["default"](a.aColor))throw new Error("aColor must be one of function, null, or undefined.");i["default"](a.uMax)?b.uMax=p["default"]("uMax",a.uMax):b.uMax=.5,i["default"](a.uMin)?b.uMin=p["default"]("uMin",a.uMin):b.uMin=-.5,i["default"](a.uSegments)?b.uSegments=o["default"]("uSegments",a.uSegments,0):b.uSegments=1}function y(a,b){var e={};x(a,e),e.mode=c["default"].POINTS;var f=new h["default"](e);b.geometry=f,f.release();var i={attributes:{},uniforms:{}};if(w(a.aPosition))i.attributes[d["default"].ATTRIBUTE_POSITION]=3;else if(!k["default"](a.aPosition))throw new Error;j["default"](a.aColor)?i.attributes[d["default"].ATTRIBUTE_COLOR]=3:i.uniforms[d["default"].UNIFORM_COLOR]="vec3",j["default"](a.aOpacity)?i.attributes[d["default"].ATTRIBUTE_OPACITY]=1:i.uniforms[d["default"].UNIFORM_OPACITY]="float",i.uniforms[d["default"].UNIFORM_MODEL_MATRIX]="mat4",i.uniforms[d["default"].UNIFORM_PROJECTION_MATRIX]="mat4",i.uniforms[d["default"].UNIFORM_VIEW_MATRIX]="mat4",i.uniforms[d["default"].UNIFORM_POINT_SIZE]="float";var l=new q.PointMaterial(i,g["default"](a));b.material=l,l.release()}function z(a,b){var e={};x(a,e),e.mode=c["default"].LINES;var f=new h["default"](e);b.geometry=f,f.release();var i={attributes:{},uniforms:{}};if(w(a.aPosition))i.attributes[d["default"].ATTRIBUTE_POSITION]=3;else if(!k["default"](a.aPosition))throw new Error;j["default"](a.aColor)?i.attributes[d["default"].ATTRIBUTE_COLOR]=3:i.uniforms[d["default"].UNIFORM_COLOR]="vec3",i.uniforms[d["default"].UNIFORM_MODEL_MATRIX]="mat4",i.uniforms[d["default"].UNIFORM_PROJECTION_MATRIX]="mat4",i.uniforms[d["default"].UNIFORM_VIEW_MATRIX]="mat4";var l=new m.LineMaterial(i,g["default"](a));b.material=l,l.release()}var A=function(a){function b(b,d){void 0===b&&(b={}),void 0===d&&(d=0),a.call(this,void 0,void 0,g["default"](b),d+1),this.setLoggingName("Curve");var f=i["default"](b.mode)?b.mode:c["default"].LINES;switch(f){case c["default"].POINTS:y(b,this);break;case c["default"].LINES:case c["default"].LINE_STRIP:z(b,this);break;default:throw new Error("'"+f+"' is not a valid option for mode.")}r["default"](this,b,e.Color.white),s["default"](this,b),0===d&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(n.Mesh);b.Curve=A}),b("davinci-eight/checks/expectOptions",["require","exports","./mustBeArray"],function(a,b,c){"use strict";function d(a,b){c["default"]("expects",a),c["default"]("actuals",b);for(var d=b.length,e=0;e<d;e++){var f=b[e];if(a.indexOf(f)<0)throw new Error(f+" is not one of the expected options: "+JSON.stringify(a,null,2)+".")}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}),b("davinci-eight/checks/mustBeFunction",["require","exports","../checks/mustSatisfy","../checks/isFunction"],function(a,b,c,d){"use strict";function e(){return"be a function"}function f(a,b,f){return c["default"](a,d["default"](b),e,f),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f}),b("davinci-eight/checks/validate",["require","exports","./isDefined"],function(a,b,c){"use strict";function d(a,b,d,e){return c["default"](b)?e(a,b):d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Grid",["require","exports","../core/BeginMode","../core/Color","./contextManagerFromOptions","../checks/expectOptions","../core/GraphicsProgramSymbols","../geometries/GridGeometry","../checks/isDefined","../checks/isFunction","../checks/isNull","../checks/isUndefined","../materials/LineMaterial","../core/Mesh","../materials/MeshMaterial","../checks/mustBeGE","../checks/mustBeFunction","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../materials/PointMaterial","../math/R3","./setColorOption","./setDeprecatedOptions","../checks/validate"],function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){"use strict";function A(a,b){return w["default"](a,b,0)}function B(a,b){return w["default"](0,0,1)}function C(a){return k["default"](a)||l["default"](a)}function D(a){return k["default"](a)||m["default"](a)}function E(a,b){if(b.contextManager=e["default"](a),C(a.aPosition))b.aPosition=a.aPosition;else{if(!m["default"](a.aPosition))throw new Error("aPosition must be one of function, null, or undefined.");b.aPosition=A}if(C(a.aNormal))b.aNormal=a.aNormal;else{if(!m["default"](a.aNormal))throw new Error("aNormal must be one of function, null, or undefined.");b.aNormal=B}if(C(a.aColor))b.aColor=a.aColor;else if(!m["default"](a.aColor))throw new Error("aColor must be one of function, null, or undefined.");b.uMin=z["default"]("uMin",a.uMin,I,t["default"]),b.uMax=z["default"]("uMax",a.uMax,J,t["default"]),b.uSegments=z["default"]("uSegments",a.uSegments,K,s["default"]),q["default"]("uSegments",b.uSegments,0),b.vMin=z["default"]("vMin",a.vMin,I,t["default"]),b.vMax=z["default"]("vMax",a.vMax,J,t["default"]),b.vSegments=z["default"]("vSegments",a.vSegments,K,s["default"]),q["default"]("vSegments",b.vSegments,0)}function F(a,b){var d={};E(a,d),d.mode=c["default"].POINTS;var f=new i["default"](d);b.geometry=f,f.release();var g={attributes:{},uniforms:{}};if(D(a.aPosition))g.attributes[h["default"].ATTRIBUTE_POSITION]=3;else if(!l["default"](a.aPosition))throw new Error;k["default"](a.aColor)?g.attributes[h["default"].ATTRIBUTE_COLOR]=3:g.uniforms[h["default"].UNIFORM_COLOR]="vec3",g.uniforms[h["default"].UNIFORM_MODEL_MATRIX]="mat4",g.uniforms[h["default"].UNIFORM_PROJECTION_MATRIX]="mat4",g.uniforms[h["default"].UNIFORM_VIEW_MATRIX]="mat4",g.uniforms[h["default"].UNIFORM_POINT_SIZE]="float";var j=new v.PointMaterial(g,e["default"](a));b.material=j,j.release()}function G(a,b){var d={};E(a,d),d.mode=c["default"].LINES;var f=new i["default"](d);b.geometry=f,f.release();var g={attributes:{},uniforms:{}};if(D(a.aPosition))g.attributes[h["default"].ATTRIBUTE_POSITION]=3;else if(!l["default"](a.aPosition))throw new Error;k["default"](a.aNormal)&&(g.attributes[h["default"].ATTRIBUTE_NORMAL]=3),k["default"](a.aColor)?g.attributes[h["default"].ATTRIBUTE_COLOR]=3:g.uniforms[h["default"].UNIFORM_COLOR]="vec3",g.uniforms[h["default"].UNIFORM_MODEL_MATRIX]="mat4",g.uniforms[h["default"].UNIFORM_PROJECTION_MATRIX]="mat4",g.uniforms[h["default"].UNIFORM_VIEW_MATRIX]="mat4";var j=new n.LineMaterial(g,e["default"](a));b.material=j,j.release()}function H(a,b){var d={};E(a,d),d.mode=c["default"].TRIANGLE_STRIP;var f=new i["default"](d);b.geometry=f,f.release();var g={attributes:{},uniforms:{}};if(D(a.aPosition))g.attributes[h["default"].ATTRIBUTE_POSITION]=3;else if(!l["default"](a.aPosition))throw new Error;if(D(a.aNormal))g.attributes[h["default"].ATTRIBUTE_NORMAL]=3,g.uniforms[h["default"].UNIFORM_NORMAL_MATRIX]="mat3",g.uniforms[h["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]="vec3",g.uniforms[h["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]="vec3";else if(!l["default"](a.aNormal))throw new Error;if(k["default"](a.aColor))g.attributes[h["default"].ATTRIBUTE_COLOR]=3;else if(l["default"](a.aColor))g.uniforms[h["default"].UNIFORM_COLOR]="vec3";else{if(!m["default"](a.aColor))throw new Error;g.uniforms[h["default"].UNIFORM_COLOR]="vec3"}g.uniforms[h["default"].UNIFORM_MODEL_MATRIX]="mat4",g.uniforms[h["default"].UNIFORM_PROJECTION_MATRIX]="mat4",g.uniforms[h["default"].UNIFORM_VIEW_MATRIX]="mat4",g.uniforms[h["default"].UNIFORM_AMBIENT_LIGHT]="vec3";var j=new p.MeshMaterial(g,e["default"](a));b.material=j,j.release()}var I=-1,J=1,K=10,L=1,M={name:"contextManager"},N={name:"engine"},O={name:"offset"},P={name:"tilt"},Q={name:"stress"},R={name:"color",assertFn:u["default"]},S={name:"aPosition",assertFn:r["default"]},T={name:"aNormal",assertFn:r["default"]},U={name:"aColor",assertFn:r["default"]},V={name:"uMin",defaultValue:I,assertFn:t["default"]},W={name:"uMax",defaultValue:J,assertFn:t["default"]},X={name:"uSegments",defaultValue:K,assertFn:s["default"]},Y={name:"vMin",defaultValue:I,assertFn:t["default"]},Z={name:"vMax",defaultValue:J,assertFn:t["default"]},$={name:"vSegments",defaultValue:K,assertFn:s["default"]},_={name:"k",defaultValue:1,assertFn:s["default"]},aa=[M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_],ba=aa.map(function(a){return a.name}),ca=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,void 0,void 0,e["default"](b),c+1),this.setLoggingName("Grid"),g["default"](ba,Object.keys(b));var f=j["default"](b.k)?b.k:L;switch(f){case 0:F(b,this);break;case 1:G(b,this);break;case 2:H(b,this);break;default:throw new Error("'"+f+"' is not a valid option for k.")}x["default"](this,b,d.Color.gray),y["default"](this,b),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(o.Mesh);b.Grid=ca});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/GridXY",["require","exports","./contextManagerFromOptions","../checks/expectOptions","./Grid","../checks/isDefined","../checks/mustBeFunction","../checks/mustBeInteger","../checks/mustBeNumber","../checks/validate","../math/R3"],function(a,b,c,d,e,g,h,i,j,k,l){"use strict";function m(a){d["default"](n,Object.keys(a));var b;g["default"](a.z)?(h["default"]("z",a.z),b=function(b,c){return l["default"](b,c,a.z(b,c))}):b=function(a,b){return l["default"](a,b,0)};var e=k["default"]("xMin",a.xMin,void 0,j["default"]),f=k["default"]("xMax",a.xMax,void 0,j["default"]),m=k["default"]("xSegments",a.xSegments,void 0,i["default"]),o=k["default"]("yMin",a.yMin,void 0,j["default"]),p=k["default"]("yMax",a.yMax,void 0,j["default"]),q=k["default"]("ySegments",a.ySegments,void 0,i["default"]);return{engine:c["default"](a),offset:a.offset,tilt:a.tilt,stress:a.stress,uMin:e,uMax:f,uSegments:m,vMin:o,vMax:p,vSegments:q,aPosition:b,k:a.k}}var n=["xMin","xMax","xSegments","yMin","yMax","ySegments","z","contextManager","engine","tilt","offset","k"],o=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,m(b),c+1),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(e.Grid);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/GridYZ",["require","exports","./contextManagerFromOptions","../checks/expectOptions","./Grid","../checks/isDefined","../checks/mustBeFunction","../checks/mustBeInteger","../checks/mustBeNumber","../math/R3","../checks/validate"],function(a,b,c,d,e,g,h,i,j,k,l){"use strict";function m(a){d["default"](n,Object.keys(a));var b;g["default"](a.x)?(h["default"]("x",a.x),b=function(b,c){return k["default"](a.x(b,c),b,c)}):b=function(a,b){return k["default"](0,a,b)};var e=l["default"]("yMin",a.yMin,-1,j["default"]),f=l["default"]("yMax",a.yMax,1,j["default"]),m=l["default"]("ySegments",a.ySegments,10,i["default"]),o=l["default"]("zMin",a.zMin,-1,j["default"]),p=l["default"]("zMax",a.zMax,1,j["default"]),q=l["default"]("zSegments",a.zSegments,10,i["default"]);return{engine:c["default"](a),offset:a.offset,tilt:a.tilt,stress:a.stress,uMin:e,uMax:f,uSegments:m,vMin:o,vMax:p,vSegments:q,aPosition:b,k:a.k}}var n=["yMin","yMax","ySegments","zMin","zMax","zSegments","x","contextManager","engine","tilt","offset","k"],o=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,m(b),c+1),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(e.Grid);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/GridZX",["require","exports","./contextManagerFromOptions","../checks/expectOptions","./Grid","../checks/isDefined","../checks/mustBeFunction","../checks/mustBeInteger","../checks/mustBeNumber","../math/R3","../checks/validate"],function(a,b,c,d,e,g,h,i,j,k,l){"use strict";function m(a){d["default"](n,Object.keys(a));var b;g["default"](a.y)?(h["default"]("y",a.y),b=function(b,c){return k["default"](c,a.y(b,c),b)}):b=function(a,b){return k["default"](b,0,a)};var e=l["default"]("zMin",a.zMin,-1,j["default"]),f=l["default"]("zMax",a.zMax,1,j["default"]),m=l["default"]("zSegments",a.zSegments,10,i["default"]),o=l["default"]("xMin",a.xMin,-1,j["default"]),p=l["default"]("xMax",a.xMax,1,j["default"]),q=l["default"]("xSegments",a.xSegments,10,i["default"]);return{engine:c["default"](a),offset:a.offset,tilt:a.tilt,stress:a.stress,uMin:e,uMax:f,uSegments:m,vMin:o,vMax:p,vSegments:q,aPosition:b,k:a.k}}var n=["zMin","zMax","zSegments","xMin","xMax","xSegments","y","contextManager","engine","tilt","offset","k"],o=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,m(b),c+1),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(e.Grid);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=o});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/geometries/HollowCylinderGeometry",["require","exports","../shapes/CylindricalShellBuilder","../core/GeometryElements","../shapes/RingBuilder","../atoms/reduce","../math/Vector3"],function(a,b,c,d,e,g,h){"use strict";function i(a){void 0===a&&(a={});var b="object"==typeof a.height?h["default"].copy(a.height):j,d="object"==typeof a.cutLine?h["default"].copy(a.cutLine).normalize():k,f="number"==typeof a.outerRadius?a.outerRadius:1,i="number"==typeof a.innerRadius?a.innerRadius:.5,l="number"==typeof a.sliceAngle?a.sliceAngle:2*Math.PI,m=new c["default"];m.height.copy(b),m.cutLine.copy(d).normalize().scale(f),m.clockwise=!0,m.sliceAngle=l,m.offset.copy(b).scale(-.5);var n=m.toPrimitive();m.cutLine.normalize().scale(i),m.convex=!1;var o=m.toPrimitive(),p=new e["default"];p.e.copy(b).normalize(),p.cutLine.copy(d),p.clockwise=!0,p.innerRadius=i,p.outerRadius=f,p.sliceAngle=l,p.offset.copy(b).scale(.5);var q=p.toPrimitive();p.e.scale(-1),p.clockwise=!1,p.offset.copy(b).scale(-.5);var r=p.toPrimitive();return g["default"]([n,o,q,r])}var j=h["default"].vector(0,1,0),k=h["default"].vector(0,0,1),l=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,i(b),void 0,b.engine,c+1),0===c&&this.synchUp()}return f(b,a),b}(d["default"]);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=l});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/HollowCylinder",["require","exports","../core/Color","../geometries/HollowCylinderGeometry","../materials/MeshMaterial","./RigidBody","./setColorOption","./setDeprecatedOptions","../math/Vector3"],function(a,b,c,d,e,g,h,i,j){"use strict";var k=j["default"].vector(0,1,0),l=function(a){function b(b,f){void 0===b&&(b={}),void 0===f&&(f=0),a.call(this,void 0,void 0,b.engine,k,f+1);var g=new d["default"](b);this.geometry=g,g.release();var j={attributes:{},uniforms:{}};j.attributes.aPosition=3,j.attributes.aNormal=3,j.uniforms.uColor="vec3",j.uniforms.uOpacity="float",
j.uniforms.uModel="mat4",j.uniforms.uNormal="mat3",j.uniforms.uProjection="mat4",j.uniforms.uView="mat4",j.uniforms.uAmbientLight="vec3",j.uniforms.uDirectionalLightColor="vec3",j.uniforms.uDirectionalLightDirection="vec3";var l=new e.MeshMaterial(j,b.engine);this.material=l,l.release(),h["default"](this,b,c.Color.hotpink),i["default"](this,b),0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(a){0===a&&this.cleanUp(),this.destructor(a+1)},b}(g.RigidBody);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=l}),b("davinci-eight/visual/Parallelepiped",["require","exports","../core/BeginMode","../core/cleanUp","../core/Color","../core/DataType","../base/exchange","../math/Geometric3","../core/GeometryArrays","../core/Mesh","../core/refChange","../materials/ShaderMaterial"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b,c,d){for(var e=[a,b,c,a,c,d],f=0;f<e.length;f++){for(var g=p[e[f]],h=g.length,i=0;i<h;i++)q.push(g[i]);r.push(a-1)}}var n=["attribute vec3 aCoords;","attribute float aFace;","uniform vec3 a;","uniform vec3 b;","uniform vec3 c;","uniform vec3 color0;","uniform vec3 color1;","uniform vec3 color2;","uniform vec3 color3;","uniform vec3 color4;","uniform vec3 color5;","uniform float uOpacity;","uniform vec3 uPosition;","uniform mat4 uModel;","uniform mat4 uProjection;","uniform mat4 uView;","varying highp vec4 vColor;","","void main(void) {","  vec3 X = aCoords.x * a + aCoords.y * b + aCoords.z * c;","  gl_Position = uProjection * uView * uModel * vec4(X + uPosition, 1.0);","  if (aFace == 0.0) {","    vColor = vec4(color0, uOpacity);","  }","  if (aFace == 1.0) {","    vColor = vec4(color1, uOpacity);","  }","  if (aFace == 2.0) {","    vColor = vec4(color2, uOpacity);","  }","  if (aFace == 3.0) {","    vColor = vec4(color3, uOpacity);","  }","  if (aFace == 4.0) {","    vColor = vec4(color4, uOpacity);","  }","  if (aFace == 5.0) {","    vColor = vec4(color5, uOpacity);","  }","}"].join("\n"),o=["precision mediump float;","varying highp vec4 vColor;","","void main(void) {","  gl_FragColor = vColor;","}"].join("\n"),p=[[-.5,-.5,.5],[-.5,.5,.5],[.5,.5,.5],[.5,-.5,.5],[-.5,-.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[.5,-.5,-.5]],q=[],r=[],s="parallelepiped",t="Parallelepiped";m(1,0,3,2),m(2,3,7,6),m(3,0,4,7),m(6,5,1,2),m(4,5,6,7),m(5,4,0,1);var u=function(){function a(a,b){void 0===b&&(b=0),this.levelUp=b,this.opacity=1,this.transparent=!1,this.X=h.Geometric3.zero().clone(),this.a=h.Geometric3.e1().clone(),this.b=h.Geometric3.e2().clone(),this.c=h.Geometric3.e3().clone(),this.colors=[],this.refCount=0,this.contextManager=g["default"](this.contextManager,a),this.addRef(),this.colors[0]=e.Color.gray.clone(),this.colors[1]=e.Color.gray.clone(),this.colors[2]=e.Color.gray.clone(),this.colors[3]=e.Color.gray.clone(),this.colors[4]=e.Color.gray.clone(),this.colors[5]=e.Color.gray.clone(),0===b&&a.synchronize(this)}return a.prototype.destructor=function(a){0===a&&d["default"](this.contextProvider,this),this.mesh=g["default"](this.mesh,void 0),this.contextManager=g["default"](this.contextManager,void 0)},a.prototype.render=function(a){if(this.mesh){var b=this.mesh.material;b.use(),b.getUniform("uOpacity").uniform1f(this.opacity),b.getUniform("uPosition").uniform3f(this.X.x,this.X.y,this.X.z),b.getUniform("a").uniform3f(this.a.x,this.a.y,this.a.z),b.getUniform("b").uniform3f(this.b.x,this.b.y,this.b.z),b.getUniform("c").uniform3f(this.c.x,this.c.y,this.c.z);for(var c=0;c<this.colors.length;c++)b.getUniform("color"+c).uniform3f(this.colors[c].r,this.colors[c].g,this.colors[c].b);b.release(),this.mesh.render(a)}},a.prototype.addRef=function(){return k["default"](s,t,1),this.refCount++,this.refCount},a.prototype.release=function(){return k["default"](s,t,-1),this.refCount--,0===this.refCount&&this.destructor(this.levelUp),this.refCount},a.prototype.contextFree=function(a){this.mesh=g["default"](this.mesh,void 0),this.contextProvider=g["default"](this.contextProvider,void 0)},a.prototype.contextGain=function(a){if(!this.mesh){var b=new i["default"]((void 0),this.contextManager);b.mode=c["default"].TRIANGLES,b.setAttribute("aCoords",{values:q,size:3,type:f["default"].FLOAT}),b.setAttribute("aFace",{values:r,size:1,type:f["default"].FLOAT});var d=new l.ShaderMaterial(n,o,[],this.contextManager);this.mesh=new j.Mesh(b,d,this.contextManager),b.release(),d.release(),this.contextProvider=g["default"](this.contextProvider,a)}},a.prototype.contextLost=function(){this.mesh=g["default"](this.mesh,void 0),this.contextProvider=g["default"](this.contextProvider,void 0)},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=u});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Tetrahedron",["require","exports","../core/Color","./contextManagerFromOptions","./direction","../materials/MeshMaterial","./RigidBody","./setColorOption","./setDeprecatedOptions","../geometries/TetrahedronGeometry"],function(a,b,c,d,e,g,h,i,j,k){"use strict";var l=function(a){function b(b,f){void 0===b&&(b={}),void 0===f&&(f=0),a.call(this,void 0,void 0,d["default"](b),e["default"](b),f+1),this.setLoggingName("Tetrahedron");var h={};h.contextManager=d["default"](b);var l=new k["default"](h),m=null,n=new g.MeshMaterial(m,d["default"](b));this.geometry=l,this.material=n,l.release(),n.release(),b.color&&this.color.copy(b.color),i["default"](this,b,c.Color.springgreen),j["default"](this,b),0===f&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"radius",{get:function(){return this.getPrincipalScale("radius")},set:function(a){this.setPrincipalScale("radius",a)},enumerable:!0,configurable:!0}),b}(h.RigidBody);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=l});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Track",["require","exports","../core/BeginMode","../core/Color","./contextManagerFromOptions","../core/DataType","../materials/LineMaterial","../math/Matrix4","../core/Mesh","./setColorOption","../core/Usage","../core/VertexBuffer"],function(a,b,c,d,e,g,h,i,j,k,l,m){"use strict";var n=3,o=4,p=o*n,q=function(){function a(a){this.contextManager=a,this.scaling=i["default"].one(),this.count=0,this.N=2,this.dirty=!0,this.refCount=1,this.data=new Float32Array(this.N*n),this.vbo=new m["default"](a)}return a.prototype.bind=function(a){this.dirty&&(this.vbo.bufferData(this.data,l["default"].DYNAMIC_DRAW),this.dirty=!1),this.vbo.bind();var b=a.getAttrib("aPosition");return b.config(n,g["default"].FLOAT,!0,p,0),b.enable(),this},a.prototype.unbind=function(a){var b=a.getAttrib("aPosition");return b.disable(),this.vbo.unbind(),this},a.prototype.draw=function(a){return this.contextProvider.drawArrays(c["default"].LINE_STRIP,0,this.count),this},a.prototype.getPrincipalScale=function(a){throw new Error("LineGeometry.getPrincipalScale")},a.prototype.hasPrincipalScale=function(a){throw new Error("LineGeometry.hasPrincipalScale")},a.prototype.setPrincipalScale=function(a,b){throw new Error("LineGeometry.setPrincipalScale")},a.prototype.contextFree=function(a){this.vbo.contextFree(a)},a.prototype.contextGain=function(a){this.contextProvider=a,this.vbo.contextGain(a)},a.prototype.contextLost=function(){this.vbo.contextLost()},a.prototype.addRef=function(){return this.refCount++,this.refCount},a.prototype.release=function(){return this.refCount--,0===this.refCount,this.refCount},a.prototype.addPoint=function(a,b,c){if(this.count===this.N){this.N=2*this.N;var d=new Float32Array(this.N*n);d.set(this.data),this.data=d}var e=this.count*n;this.data[e+0]=a,this.data[e+1]=b,this.data[e+2]=c,this.count++,this.dirty=!0},a.prototype.erase=function(){this.count=0},a}(),r=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=0),a.call(this,new q(e["default"](b)),new h.LineMaterial((void 0),e["default"](b)),e["default"](b),c+1),this.setLoggingName("Track"),k["default"](this,b,d.Color.white),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b.prototype.addPoint=function(a){if(a){var b=this.geometry;b.addPoint(a.x,a.y,a.z),b.release()}},b.prototype.clear=function(){var a=this.geometry;a.erase(),a.release()},b}(j.Mesh);b.Track=r}),b("davinci-eight/math/Modulo",["require","exports","../checks/mustBeGE","../checks/mustBeInteger"],function(a,b,c,d){"use strict";var e=function(){function a(){this._value=0,this._size=0}return Object.defineProperty(a.prototype,"size",{get:function(){return this._size},set:function(a){d["default"]("size",a),c["default"]("size",a,0),this._size=a,this.value=this._value},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(a){this._value=a%this._size},enumerable:!0,configurable:!0}),a.prototype.inc=function(){return this._value++,this._value===this._size&&(this._value=0),this._value},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e}),b("davinci-eight/visual/TrailConfig",["require","exports"],function(a,b){"use strict";var c=function(){function a(){this.enabled=!0,this.interval=10,this.retain=10}return a}();b.TrailConfig=c});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Trail",["require","exports","../math/Modulo","../math/Spinor3","../math/Vector3","../checks/mustBeObject","../core/ShareableBase","./TrailConfig"],function(a,b,c,d,e,g,h,i){"use strict";var j=e["default"].zero(),k=d["default"].zero(),l=function(a){function b(b){a.call(this),this.Xs=[],this.Rs=[],this.config=new i.TrailConfig,this.counter=0,this.modulo=new c["default"],this.setLoggingName("Trail"),g["default"]("mesh",b),b.addRef(),this.mesh=b}return f(b,a),b.prototype.destructor=function(b){this.mesh.release(),this.mesh=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.erase=function(){this.Xs=[],this.Rs=[]},b.prototype.snapshot=function(){if(this.config.enabled){if(this.modulo.size!==this.config.retain&&(this.modulo.size=this.config.retain,this.modulo.value=0),this.counter%this.config.interval===0){var a=this.modulo.value;this.Xs[a]?(this.Xs[a].copy(this.mesh.X),this.Rs[a].copy(this.mesh.R)):(this.Xs[a]=e["default"].copy(this.mesh.X),this.Rs[a]=d["default"].copy(this.mesh.R)),this.modulo.inc()}this.counter++}},b.prototype.draw=function(a){if(this.config.enabled){var b=this.mesh,c=b.X,d=b.R;j.copy(c),k.copy(d);var e=b.geometry,f=b.material;f.use();for(var g=a.length,h=0;h<g;h++){var i=a[h];i.setUniforms(f)}e.bind(f);for(var l=this.Xs,m=this.Rs,n=this.modulo.size,h=0;h<n;h++)l[h]&&c.copyVector(l[h]),m[h]&&d.copySpinor(m[h]),b.setUniforms(),e.draw(f);e.unbind(f),e.release(),f.release(),c.copyVector(j),d.copySpinor(k)}},b}(h.ShareableBase);b.Trail=l});var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};b("davinci-eight/visual/Turtle",["require","exports","../core/BeginMode","../core/Color","./contextManagerFromOptions","../core/DataType","../core/GeometryArrays","../materials/LineMaterial","./RigidBody","./setColorOption"],function(a,b,c,d,e,g,h,i,j,k){"use strict";function l(a,b){return a.concat(b)}function m(){var a={values:[[r,s,r,q].reduce(l),[n,o].reduce(l),[n,p].reduce(l),[o,p].reduce(l)].reduce(l),size:r.length,type:g["default"].FLOAT},b={mode:c["default"].LINES,attributes:{}};return b.attributes.aPosition=a,b}var n=[0,1,0],o=[-1,-1,0],p=[1,-1,0],q=[0,-1,0],r=[0,0,0],s=[-.5,0,0],t=function(a){function b(b){a.call(this,m(),b),this.contextManager=b,this.w=1,this.h=1,this.d=1}return f(b,a),b.prototype.getPrincipalScale=function(a){switch(a){case"width":return this.w;case"height":return this.h;case"depth":return this.d;default:throw new Error("getPrincipalScale("+a+"): name is not a principal scale property.")}},b.prototype.setPrincipalScale=function(a,b){switch(a){case"width":this.w=b;break;case"height":this.h=b;break;case"depth":this.d=b;break;default:throw new Error("setPrinciplaScale("+a+"): name is not a principal scale property.")}this.setScale(this.w,this.h,this.d)},b}(h["default"]),u=function(a){function b(b,c){void 0===c&&(c=0),a.call(this,new t(e["default"](b)),new i.LineMaterial((void 0),e["default"](b)),e["default"](b),{x:0,y:0,z:1},c+1),this.setLoggingName("Turtle"),this.height=.1,this.width=.0618,k["default"](this,b,d.Color.green),0===c&&this.synchUp()}return f(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"width",{get:function(){return this.getPrincipalScale("width")},set:function(a){this.setPrincipalScale("width",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.getPrincipalScale("height")},set:function(a){this.setPrincipalScale("height",a)},enumerable:!0,configurable:!0}),b}(j.RigidBody);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=u}),b("davinci-eight/diagram/Diagram3D",["require","exports","../math/dotVectorE3","../math/R3"],function(a,b,c,d){"use strict";function e(a,b,e,f){var g=d["default"](b.x,b.y,b.z),h=d["default"](e.x,e.y,e.z),i=g.sub(h).direction(),j=d["default"](f.x,f.y,f.z).cross(i).direction(),k=i.cross(j),l=-c["default"](b,j),m=-c["default"](b,k),n=-c["default"](b,i),o=c["default"](a,j)+l,p=c["default"](a,k)+m,q=c["default"](a,i)+n;return{x:o,y:p,z:q}}function f(a,b,c,d,e){var f=b*Math.tan(d/2),g=-f,h=e*f,i=-h,j=b*a.x/(a.z*i),k=(2*b*a.y+(f+g)*a.z)/(-a.z*(f-g)),l=(-(c+b)*a.z-2*c*b)/(-a.z*(c-b));return{x:j,y:k,z:l}}var g=function(){function a(a,b){this.camera=b;var c=document.getElementById("canvas2D");this.ctx=c.getContext("2d"),this.ctx.strokeStyle="#FFFFFF",this.ctx.fillStyle="#ffffff",this.ctx.font="24px Helvetica"}return Object.defineProperty(a.prototype,"canvas",{get:function(){return this.ctx.canvas},enumerable:!0,configurable:!0}),a.prototype.beginPath=function(){this.ctx.beginPath()},a.prototype.clear=function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},a.prototype.closePath=function(){this.ctx.closePath()},a.prototype.fill=function(a){this.ctx.fill(a)},a.prototype.fillText=function(a,b,c){var d=this.canvasCoords(b);this.ctx.fillText(a,d.x,d.y,c)},a.prototype.moveTo=function(a){var b=this.canvasCoords(a);this.ctx.moveTo(b.x,b.y)},a.prototype.lineTo=function(a){var b=this.canvasCoords(a);this.ctx.lineTo(b.x,b.y)},a.prototype.stroke=function(){this.ctx.stroke()},a.prototype.canvasCoords=function(a){var b=this.camera,c=e(a,b.eye,b.look,b.up),d=b.near,g=b.far,h=b.fov,i=b.aspect,j=f(c,d,g,h,i),k=(j.x+1)*this.ctx.canvas.width/2,l=(j.y-1)*-this.ctx.canvas.height/2;return{x:k,y:l}},a}();Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g}),b("davinci-eight",["require","exports","./davinci-eight/commands/WebGLBlendFunc","./davinci-eight/commands/WebGLClearColor","./davinci-eight/commands/WebGLDisable","./davinci-eight/commands/WebGLEnable","./davinci-eight/controls/OrbitControls","./davinci-eight/controls/TrackballControls","./davinci-eight/core/Attrib","./davinci-eight/core/BeginMode","./davinci-eight/core/BlendingFactorDest","./davinci-eight/core/BlendingFactorSrc","./davinci-eight/core/Capability","./davinci-eight/core/ClearBufferMask","./davinci-eight/core/Color","./davinci-eight/config","./davinci-eight/core/DataType","./davinci-eight/core/Drawable","./davinci-eight/core/DepthFunction","./davinci-eight/core/GeometryArrays","./davinci-eight/core/GeometryElements","./davinci-eight/core/GraphicsProgramSymbols","./davinci-eight/core/Mesh","./davinci-eight/core/PixelFormat","./davinci-eight/core/PixelType","./davinci-eight/core/Scene","./davinci-eight/core/Shader","./davinci-eight/core/Uniform","./davinci-eight/core/Usage","./davinci-eight/core/Engine","./davinci-eight/core/VertexBuffer","./davinci-eight/core/IndexBuffer","./davinci-eight/core/vertexArraysFromPrimitive","./davinci-eight/core/geometryFromPrimitive","./davinci-eight/facets/AmbientLight","./davinci-eight/facets/ColorFacet","./davinci-eight/facets/DirectionalLight","./davinci-eight/facets/ModelFacet","./davinci-eight/facets/PointSizeFacet","./davinci-eight/facets/ReflectionFacetE2","./davinci-eight/facets/ReflectionFacetE3","./davinci-eight/facets/Vector3Facet","./davinci-eight/facets/frustumMatrix","./davinci-eight/facets/PerspectiveCamera","./davinci-eight/facets/perspectiveMatrix","./davinci-eight/facets/viewMatrixFromEyeLookUp","./davinci-eight/facets/ModelE2","./davinci-eight/facets/ModelE3","./davinci-eight/atoms/DrawAttribute","./davinci-eight/atoms/DrawPrimitive","./davinci-eight/atoms/reduce","./davinci-eight/atoms/Vertex","./davinci-eight/shapes/ArrowBuilder","./davinci-eight/shapes/ConicalShellBuilder","./davinci-eight/shapes/CylindricalShellBuilder","./davinci-eight/shapes/RingBuilder","./davinci-eight/geometries/Simplex","./davinci-eight/geometries/ArrowGeometry","./davinci-eight/geometries/BoxGeometry","./davinci-eight/geometries/CylinderGeometry","./davinci-eight/geometries/GridGeometry","./davinci-eight/geometries/SphereGeometry","./davinci-eight/geometries/TetrahedronGeometry","./davinci-eight/materials/HTMLScriptsMaterial","./davinci-eight/materials/LineMaterial","./davinci-eight/materials/ShaderMaterial","./davinci-eight/materials/MeshMaterial","./davinci-eight/materials/PointMaterial","./davinci-eight/materials/GraphicsProgramBuilder","./davinci-eight/math/mathcore","./davinci-eight/math/Vector1","./davinci-eight/math/Matrix2","./davinci-eight/math/Matrix3","./davinci-eight/math/Matrix4","./davinci-eight/math/Geometric2","./davinci-eight/math/Geometric3","./davinci-eight/math/Spinor2","./davinci-eight/math/Spinor3","./davinci-eight/math/Vector2","./davinci-eight/math/Vector3","./davinci-eight/math/Vector4","./davinci-eight/math/VectorN","./davinci-eight/utils/getCanvasElementById","./davinci-eight/collections/ShareableArray","./davinci-eight/collections/NumberShareableMap","./davinci-eight/core/refChange","./davinci-eight/core/ShareableBase","./davinci-eight/collections/StringShareableMap","./davinci-eight/utils/animation","./davinci-eight/visual/Arrow","./davinci-eight/visual/Basis","./davinci-eight/visual/Sphere","./davinci-eight/visual/Box","./davinci-eight/visual/Cylinder","./davinci-eight/visual/Curve","./davinci-eight/visual/Grid","./davinci-eight/visual/GridXY","./davinci-eight/visual/GridYZ","./davinci-eight/visual/GridZX","./davinci-eight/visual/HollowCylinder","./davinci-eight/visual/Parallelepiped","./davinci-eight/visual/RigidBody","./davinci-eight/visual/Tetrahedron","./davinci-eight/visual/Track","./davinci-eight/visual/Trail","./davinci-eight/visual/Turtle","./davinci-eight/diagram/Diagram3D"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a){"use strict";var _a={get LAST_MODIFIED(){return p["default"].LAST_MODIFIED},get VERSION(){return p["default"].VERSION},get ShaderMaterial(){return la.ShaderMaterial},get HTMLScriptsMaterial(){return ja["default"]},get LineMaterial(){return ka.LineMaterial},get MeshMaterial(){return ma.MeshMaterial},get PointMaterial(){return na.PointMaterial},get GraphicsProgramBuilder(){return oa["default"]},get BlendingFactorDest(){return k["default"]},get BlendingFactorSrc(){return l["default"]},get Capability(){return m["default"]},get DepthFunction(){return s["default"]},get WebGLBlendFunc(){return c["default"]},get WebGLClearColor(){return d.WebGLClearColor},get WebGLDisable(){return e.WebGLDisable},get WebGLEnable(){return f.WebGLEnable},get ModelE2(){return U["default"]},get ModelE3(){return V["default"]},get ModelFacet(){return L.ModelFacet},get Simplex(){return ca["default"]},get reduce(){return Y["default"]},get Vertex(){return Z["default"]},get frustumMatrix(){return Q["default"]},get perspectiveMatrix(){return S["default"]},get viewMatrix(){return T["default"]},get Scene(){return z.Scene},get Shader(){return A["default"]},get Drawable(){return r.Drawable},get PerspectiveCamera(){return R.PerspectiveCamera},get getCanvasElementById(){return Ca["default"]},get Engine(){return D.Engine},get animation(){return Ia["default"]},get BeginMode(){return j["default"]},get ClearBufferMask(){return n["default"]},get DataType(){return q["default"]},get DrawMode(){return j["default"]},get PixelFormat(){return x["default"]},get PixelType(){return y["default"]},get Usage(){return C["default"]},get Attrib(){return i["default"]},get Uniform(){return B["default"]},get VertexBuffer(){return E["default"]},get IndexBuffer(){return F["default"]},get Color(){return o.Color},get vertexArraysFromPrimitive(){return G["default"]},get geometryFromPrimitive(){return H["default"]},get OrbitControls(){return g.OrbitControls},get TrackballControls(){return h.TrackballControls},get AmbientLight(){return I.AmbientLight},get ColorFacet(){return J.ColorFacet},get DirectionalLight(){return K.DirectionalLight},get PointSizeFacet(){return M.PointSizeFacet},get ReflectionFacetE2(){return N["default"]},get ReflectionFacetE3(){return O["default"]},get Vector3Facet(){return P["default"]},get ArrowBuilder(){return $["default"]},get ArrowGeometry(){return da["default"]},get BoxGeometry(){return ea["default"]},get ConicalShellBuilder(){return _["default"]},get CylinderGeometry(){return fa["default"]},get CylindricalShellBuilder(){return aa["default"]},get GridGeometry(){return ga["default"]},get RingBuilder(){return ba["default"]},get SphereGeometry(){return ha["default"]},get TetrahedronGeometry(){return ia["default"]},get Matrix2(){return ra["default"]},get Matrix3(){return sa["default"]},get Matrix4(){return ta["default"]},get Geometric2(){return ua.Geometric2},get Geometric3(){return va.Geometric3},get Vector1(){return qa["default"]},get Spinor2(){return wa["default"]},get Spinor3(){return xa["default"]},get Vector2(){return ya.Vector2},get Vector3(){return za["default"]},get Vector4(){return Aa["default"]},get VectorN(){return Ba.VectorN},get GraphicsProgramSymbols(){return v["default"]},get GeometryArrays(){return t["default"]},get GeometryElements(){return u["default"]},get DrawAttribute(){return W["default"]},get DrawPrimitive(){return X["default"]},get ShareableArray(){return Da["default"]},get NumberShareableMap(){return Ea["default"]},get refChange(){return Fa["default"]},get ShareableBase(){return Ga.ShareableBase},get StringShareableMap(){return Ha["default"]},get cos(){return pa["default"].cos},get cosh(){return pa["default"].cosh},get exp(){return pa["default"].exp},get log(){return pa["default"].log},get norm(){return pa["default"].norm},get quad(){return pa["default"].quad},get sin(){return pa["default"].sin},get sinh(){return pa["default"].sinh},get sqrt(){return pa["default"].sqrt},get Diagram3D(){return $a["default"]},get Arrow(){return Ja.Arrow},get Basis(){return Ka["default"]},get Sphere(){return La.Sphere},get Box(){return Ma.Box},get Mesh(){return w.Mesh},get Cylinder(){return Na.Cylinder},get Curve(){return Oa.Curve},get Grid(){return Pa.Grid},get GridXY(){return Qa["default"]},get GridYZ(){return Ra["default"]},get GridZX(){return Sa["default"]},get HollowCylinder(){return Ta["default"]},get Parallelepiped(){return Ua["default"]},get RigidBody(){return Va.RigidBody},get Tetrahedron(){return Wa["default"]},get Track(){return Xa.Track},get Trail(){return Ya.Trail},get Turtle(){return Za["default"]}};Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=_a});var g=d("davinci-eight")["default"];"undefined"!=typeof module&&module.exports?module.exports=g:e?!function(a){a(function(){return g})}(e):a.EIGHT=g}(this);